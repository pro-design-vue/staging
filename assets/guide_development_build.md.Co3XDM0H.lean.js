import{_ as l,R as a,Q as h,S as i,G as s,b4 as t}from"./chunks/framework.BBTDMeVS.js";const c=JSON.parse('{"title":"构建与部署","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"guide/development/build.md","filePath":"guide/development/build.md","lastUpdated":1761296049000}'),k={name:"guide/development/build.md"};function e(n,r,p,d,g,F){return h(),a("div",null,[i("h1",{id:"构建与部署",tabindex:"-1"},[s("构建与部署 "),i("a",{class:"header-anchor",href:"#构建与部署","aria-label":"Permalink to “构建与部署”"},"​")]),i("div",{class:"tip custom-block"},[i("p",{class:"custom-block-title"},"前言"),i("p",null,"由于是展示项目，所以打包后相对较大，如果项目中没有用到的插件，可以删除对应的文件或者路由，不引用即可，没有引用就不会打包。")]),i("h2",{id:"构建",tabindex:"-1"},[s("构建 "),i("a",{class:"header-anchor",href:"#构建","aria-label":"Permalink to “构建”"},"​")]),i("p",null,"项目开发完成之后，执行以下命令进行构建："),i("p",null,[i("strong",null,"注意："),s(" 请在项目根目录下执行以下命令")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pnpm"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," build")])])])]),i("p",null,[s("构建打包成功之后，会在根目录生成 "),i("code",null,"dist"),s(" 文件夹，里面就是构建打包好的文件")]),i("h2",{id:"预览",tabindex:"-1"},[s("预览 "),i("a",{class:"header-anchor",href:"#预览","aria-label":"Permalink to “预览”"},"​")]),i("p",null,"发布之前可以在本地进行预览，有多种方式，这里介绍两种："),i("ul",null,[i("li",null,"使用项目自定的命令进行预览(推荐)")]),i("p",null,[i("strong",null,"注意："),s(" 请在项目根目录下执行以下命令")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pnpm"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," preview")])])])]),i("p",null,[s("等待构建成功后，访问 "),i("code",null,"http://localhost:4173"),s(" 即可查看效果。")]),i("ul",null,[i("li",null,"本地服务器预览")]),i("p",null,[s("可以在电脑全局安装 "),i("code",null,"serve"),s(" 服务，如 "),i("code",null,"live-server"),s(",")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"npm"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," i"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -g"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," live-server")])])])]),i("p",null,[s("然后在 "),i("code",null,"dist"),s(" 目录下执行 "),i("code",null,"live-server"),s(" 命令，即可在本地查看效果。")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," dist")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 本地预览，默认端口8080")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"live-server")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 指定端口")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"live-server"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --port=9000")])])])]),i("h2",{id:"压缩",tabindex:"-1"},[s("压缩 "),i("a",{class:"header-anchor",href:"#压缩","aria-label":"Permalink to “压缩”"},"​")]),i("h3",{id:"开启-gzip-压缩",tabindex:"-1"},[s("开启 "),i("code",null,"gzip"),s(" 压缩 "),i("a",{class:"header-anchor",href:"#开启-gzip-压缩","aria-label":"Permalink to “开启 gzip 压缩”"},"​")]),i("p",null,[s("需要在打包的时候更改"),i("code",null,".env.production"),s("配置:")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VITE_BUILD_COMPRESS"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"gzip")])])])]),i("h3",{id:"开启-brotli-压缩",tabindex:"-1"},[s("开启 "),i("code",null,"brotli"),s(" 压缩 "),i("a",{class:"header-anchor",href:"#开启-brotli-压缩","aria-label":"Permalink to “开启 brotli 压缩”"},"​")]),i("p",null,[s("需要在打包的时候更改"),i("code",null,".env.production"),s("配置:")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VITE_BUILD_COMPRESS"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"brotli")])])])]),i("h3",{id:"同时开启-gzip-和-brotli-压缩",tabindex:"-1"},[s("同时开启 "),i("code",null,"gzip"),s(" 和 "),i("code",null,"brotli"),s(" 压缩 "),i("a",{class:"header-anchor",href:"#同时开启-gzip-和-brotli-压缩","aria-label":"Permalink to “同时开启 gzip 和 brotli 压缩”"},"​")]),i("p",null,[s("需要在打包的时候更改"),i("code",null,".env.production"),s("配置:")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VITE_BUILD_COMPRESS"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"gzip,brotli")])])])]),i("div",{class:"tip custom-block"},[i("p",{class:"custom-block-title"},"提示"),i("p",null,[i("code",null,"gzip"),s(" 和 "),i("code",null,"brotli"),s(" 都需要安装特定模块才能使用。")])]),i("details",{class:"details custom-block"},[i("summary",null,"gzip 与 brotli 在 nginx 内的配置"),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"http"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # 开启gzip")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  gzip"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," on"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # 开启gzip_static")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # gzip_static 开启后可能会报错，需要安装相应的模块, 具体安装方式可以自行查询")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # 只有这个开启，vue文件打包的.gz文件才会有效果，否则不需要开启gzip进行打包")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  gzip_static"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," on"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  gzip_proxied"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," any"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  gzip_min_length"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 1k"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  gzip_buffers"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 4"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 16k"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  #如果nginx中使用了多层代理 必须设置这个才可以开启gzip。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  gzip_http_version"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  gzip_comp_level"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  gzip_types"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," text/plain"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," application/javascript"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," application/x-javascript"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," text/css"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," application/xml"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," text/javascript"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," application/x-httpd-php"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," image/jpeg"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," image/gif"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," image/png"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  gzip_vary"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," off"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  gzip_disable"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "MSIE [1-6]\\."'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # 开启 brotli压缩")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # 需要安装对应的nginx模块,具体安装方式可以自行查询")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # 可以与gzip共存不会冲突")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  brotli"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," on"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  brotli_comp_level"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  brotli_buffers"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 16"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 8k"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  brotli_min_length"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  brotli_types"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," text/plain"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," text/css"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," application/json"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," application/x-javascript"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," text/xml"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," application/xml"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," application/xml+rss"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," text/javascript"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," application/javascript"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," image/svg+xml"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])])])]),i("h2",{id:"构建分析",tabindex:"-1"},[s("构建分析 "),i("a",{class:"header-anchor",href:"#构建分析","aria-label":"Permalink to “构建分析”"},"​")]),i("p",null,[s("如果你的构建文件很大，可以通过项目内置 "),i("a",{href:"https://github.com/doesdev/rollup-plugin-analyzer",target:"_blank",rel:"noreferrer"},"rollup-plugin-analyzer"),s(" 插件进行代码体积分析，从而优化你的代码。只需要在"),i("code",null,"根目录"),s("下执行以下命令：")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pnpm"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," build:analyze")])])])]),i("p",null,"运行之后，在自动打开的页面可以看到具体的体积分布，以分析哪些依赖有问题。"),i("p",null,[i("img",{src:t,alt:"Build analysis report"})]),i("h2",{id:"部署",tabindex:"-1"},[s("部署 "),i("a",{class:"header-anchor",href:"#部署","aria-label":"Permalink to “部署”"},"​")]),i("p",null,"简单的部署只需要将最终生成的静态文件，dist 文件夹的静态文件发布到你的 cdn 或者静态服务器即可，需要注意的是其中的 index.html 通常会是你后台服务的入口页面，在确定了 js 和 css 的静态之后可能需要改变页面的引入路径。"),i("p",null,[s("例如上传到 nginx 服务器，可以将 dist 文件夹下的文件上传到服务器的 "),i("code",null,"/srv/www/project/index.html"),s(" 目录下，然后访问配置好的域名即可。")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# nginx配置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"location"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # 不缓存html，防止程序更新后缓存继续生效")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ($request_filename "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ."),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"\\."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"?"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":htm"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"html"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"$"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    add_header"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Cache-Control"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "private, no-store, no-cache, must-revalidate, proxy-revalidate"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    access_log"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," on"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # 这里是vue打包文件dist内的文件的存放路径")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  root"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"   /srv/www/project/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  index"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  index.html"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," index.htm"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])])]),i("p",null,[s("部署时可能会发现资源路径不对，只需要修改"),i("code",null,".env.production"),s("文件即可。")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 根据自己路径来配置更改")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 注意需要以 / 开头和结尾")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VITE_PUBLIC_PATH"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"/")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VITE_PUBLIC_PATH"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"/xxx/")])])])]),i("h3",{id:"前端路由与服务端的结合",tabindex:"-1"},[s("前端路由与服务端的结合 "),i("a",{class:"header-anchor",href:"#前端路由与服务端的结合","aria-label":"Permalink to “前端路由与服务端的结合”"},"​")]),i("p",null,"项目前端路由使用的是 vue-router，所以你可以选择两种方式：history 和 hash。"),i("ul",null,[i("li",null,[i("code",null,"hash"),s(" 默认会在 url 后面拼接"),i("code",null,"#")]),i("li",null,[i("code",null,"history"),s(" 则不会，不过 "),i("code",null,"history"),s(" 需要服务器配合")])]),i("p",null,[s("可在 "),i("code",null,".env.production"),s(" 内进行 mode 修改")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VITE_ROUTER_HISTORY"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"hash")])])])]),i("h3",{id:"history-路由模式下服务端配置",tabindex:"-1"},[s("history 路由模式下服务端配置 "),i("a",{class:"header-anchor",href:"#history-路由模式下服务端配置","aria-label":"Permalink to “history 路由模式下服务端配置”"},"​")]),i("p",null,[s("开启 "),i("code",null,"history"),s(" 模式需要服务器配置，更多的服务器配置详情可以看 "),i("a",{href:"https://router.vuejs.org/guide/essentials/history-mode.html#html5-mode",target:"_blank",rel:"noreferrer"},"history-mode")]),i("p",null,[s("这里以 "),i("code",null,"nginx"),s(" 配置为例：")]),i("h4",{id:"部署到根目录",tabindex:"-1"},[s("部署到根目录 "),i("a",{class:"header-anchor",href:"#部署到根目录","aria-label":"Permalink to “部署到根目录”"},"​")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"server"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  listen"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 80"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  location"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    # 用于配合 History 使用")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    try_files"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $uri $uri"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"/"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /index.html"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])])]),i("h4",{id:"部署到非根目录",tabindex:"-1"},[s("部署到非根目录 "),i("a",{class:"header-anchor",href:"#部署到非根目录","aria-label":"Permalink to “部署到非根目录”"},"​")]),i("ul",null,[i("li",null,[s("首先需要在打包的时候更改"),i("code",null,".env.production"),s("配置:")])]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"VITE_PUBLIC_PATH"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /sub/")])])])]),i("ul",null,[i("li",null,"然后在 nginx 配置文件中配置")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"server"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    listen"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"       80"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    server_name"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  localhost"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    location"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /sub/"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"      # 这里是vue打包文件dist内的文件的存放路径")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"      alias"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"   /srv/www/project/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"      index"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," index.html"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," index.htm"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"      try_files"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $uri $uri"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"/"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /sub/index.html"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])])]),i("h2",{id:"跨域处理",tabindex:"-1"},[s("跨域处理 "),i("a",{class:"header-anchor",href:"#跨域处理","aria-label":"Permalink to “跨域处理”"},"​")]),i("p",null,"使用 nginx 处理项目部署后的跨域问题"),i("ol",null,[i("li",null,"配置前端项目接口地址，在项目目录下的``.env.production`文件中配置：")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VITE_API_URL_PREFIX"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"/api")])])])]),i("ol",{start:"2"},[i("li",null,"在 nginx 配置请求转发到后台")]),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"server"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  listen"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"       8080"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  server_name"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  localhost"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # 接口代理，用于解决跨域问题")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  location"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /api"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    proxy_set_header"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Host"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $host;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    proxy_set_header"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," X-Real-IP"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $remote_addr;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    proxy_set_header"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," X-Forwarded-For"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $proxy_add_x_forwarded_for;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    # 后台接口地址")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    proxy_pass"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," http://110.110.1.1:8080/api"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    rewrite"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "^/api/(.*)$"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"$1"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," break"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    proxy_redirect"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    add_header"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Access-Control-Allow-Origin"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," *"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    add_header"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Access-Control-Allow-Headers"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," X-Requested-With"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    add_header"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Access-Control-Allow-Methods"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," GET,POST,OPTIONS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])])])])}const y=l(k,[["render",e]]);export{c as __pageData,y as default};
