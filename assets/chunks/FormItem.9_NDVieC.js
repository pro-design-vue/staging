import{b as ae,k as te,u as oe,r as s,w as le,o as P,p as V,x as ne,c as f,d as h,y as N,l as E,f as re,z as ie,h as O,j as de}from"./theme.DGPT_YxF.js";import{u as se}from"./useFieldValue.gwtT_WaV.js";import{F as ue,a as K}from"./FormTitle.C-1swcNV.js";import{d as ce,c as r,f as me,k as i,F as pe,w as C,$ as fe}from"./framework.DwPADZI9.js";const L={text:["type","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],digit:["disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],digitRange:["separatorWidth","separator","disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],select:["id","pagination","placeholder","disabled","allowClear","autoClearSearchValue","autofocus","bordered","clearIcon","defaultActiveFirstOption","defaultOpen","popupClassName","dropdownMatchSelectWidth","dropdownMenuStyle","dropdownRender","dropdownStyle","fieldNames","filterOption","filterSort","firstActiveValue","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","maxTagTextLength","menuItemSelectedIcon","mode","notFoundContent","open","option","optionFilterProp","optionLabelProp","options","placement","removeIcon","searchValue","showArrow","showSearch","size","status","suffixIcon","tagRender","tokenSeparators","virtual","onBlur","onFocus","onDeselect","onDropdownVisibleChange","onInputKeyDown","onMouseenter","onMouseleave","onPopupScroll","onSearch","onSelect"],textarea:["id","disabled","allowClear","autoSize","defaultValue","showCount","maxlength","placeholder","onPressEnter","onFocus","onBlur","onInput","onClear"],password:["id","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","visibilityToggle","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],treeSelect:["id","multiple","options","showCheckedStrategy","searchPlaceholder","replaceFields","loadData","filterTreeNode","placeholder","disabled","allowClear","popupClassName","defaultValue","dropdownMatchSelectWidth","dropdownStyle","fieldNames","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","notFoundContent","placement","searchValue","showSearch","size","status","suffixIcon","tagRender","title","treeCheckable","treeCheckStrictly","treeData","treeDataSimpleMode","treeDefaultExpandAll","treeDefaultExpandedKeys","treeExpandedKeys","treeIcon","treeLine","treeLoadedKeys","treeNodeFilterProp","treeNodeLabelProp","onDropdownVisibleChange","onSearch","onSelect","onTreeExpand","onUpdate:treeExpandedKeys","onUpdate:searchValue"],checkbox:["id","autofocus","disabled","indeterminate"],checkboxGroup:["id","disabled","name","options"],radioGroup:["id","class","disabled","name","options","optionType","buttonStyle","radioLabel"],cascader:["id","disabled","name","options","placeholder","allowClear","autofocus","bordered","clearIcon","changeOnSelect","defaultValue","displayRender","popupClassName","dropdownStyle","expandTrigger","fieldNames","getPopupContainer","loadData","maxTagCount","maxTagPlaceholder","multiple","notFoundContent","open","placement","showCheckedStrategy","removeIcon","searchValue","showSearch","status","suffixIcon","tagRender","onDropdownVisibleChange","onSearch"],switch:["id","checkedChildren","size","checkedValue","disabled","loading","unCheckedChildren","unCheckedValue","onClick"],slider:["id","disabled","dots","included","mark","marks","max","min","range","reverse","step","vertical","tipFormatter","tooltipPlacement","tooltipOpen","getTooltipPopupContainer","onAfterChange"],rate:["id","allowClear","allowHalf","character","count","disabled","tooltips","onBlur","onFocus","onHoverChange","onKeydown"],date:["id","allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","defaultPickerValue","disabledTime","renderExtraFooter","showNow","showTime","showToday","monthCellRender","onOpenChange","onPanelChange","onOk"],dateRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","showTime","ranges","renderExtraFooter","separator","onOpenChange","onPanelChange","onCalendarChange","onOk"],time:["id","allowClear","bordered","clearIcon","clearText","disabled","disabledTime","format","getPopupContainer","hideDisabledOptions","hourStep","inputReadOnly","minuteStep","open","placeholder","placement","popupClassName","popupStyle","renderExtraFooter","secondStep","showNow","status","suffixIcon","use12Hours","valueFormat","onOpenChange"],timeRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","ranges","renderExtraFooter","separator","order","onOpenChange","onPanelChange","onCalendarChange","onOk"],uploadButton:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","max","buttonProps"],uploadDragger:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","description","max","buttonProps"],uploadPicture:["disabled","id","customRequest","accept","action","beforeUpload","name","headers","isCropper","cropperModalTitle","cropperModalWidth","cropperWidth","cropperHeight","cropperProps","width","height","title","data","showTitle","allowClear"],uploadPictureList:["disabled","id","data","headers","customRequest","accept","action","multiple","maxCount","beforeUpload","name","previewFile","allowClear","width","height","crossOrigin"],editor:["autofocus","indentWithTab","tabSize","theme","autoDestroy","phrases","root","extensions","selection","height","disabled","placeholder","onFocus","onBlur","onReady","onUpdate"]},A={xs:104,s:216,sm:216,m:328,md:328,l:440,lg:440,xl:552},he=["autoLink","colon","hasFeedback","labelAlign","labelCol","htmlFor","required","validateFirst","validateStatus","validateTrigger","wrapperCol","rules","style","class"],ve=["switch","radioButton","radio","rate"],ge=["extra","help"],xe=ce({name:"FormItem",inheritAttrs:!1,props:{item:{type:Object,default:()=>({})}},setup(e){const{grid:B,action:c,formKey:S,prefixCls:w,formData:o,readonly:M,readonlyProps:U,disabledKeys:$,hiddenKeys:W,allDisabledKeys:z,updateHiddenKeys:H,updateDisabledKeys:_}=ae(),{isList:b,listKey:F,listName:y,rowData:k}=te(),m=oe(),{fieldValue:x,onValueChange:j}=se({namePath:r(()=>e.item.name),initialValue:e.item.initialValue,convertValue:e.item.convertValue,transform:e.item.transform}),I=me(),v=r(()=>e.item.fieldType??"text"),u=r(()=>s(e.item.readonly??M?.value,o.value,k?.value)),q=r(()=>le({},U?.value,e.item.readonlyProps)),G=r(()=>$.value.map(a=>a.split(":")[1])),Y=r(()=>W.value.map(a=>a.split(":")[1])),R=r(()=>e.item.ignoreWidth??ve.includes(v.value)),p=r(()=>s(e.item.formItemProps,o.value)??{}),D=r(()=>P({...V(p.value,he),name:u.value?void 0:e.item.name,htmlFor:u.value?void 0:p.value?.htmlFor??`form-${S.value??""}-${e.item.key}`,rules:u.value?void 0:s(e.item.rules??p.value.rules,o.value,c)})),J=a=>{const{clear:t}=e.item.linkage??{};if(t){const n=s(t,a,o.value)??[];n.length>0&&n.forEach(d=>{const l=b?[...y?.value??[],...E(d)].filter(ee=>ee!==void 0).flat(1):E(d);typeof re(o.value,l)<"u"&&ie(o.value,l,void 0)})}},T=r(()=>{const a=s(e.item.fieldProps??{},o.value),t={...a,id:a?.id??`form-${S.value??""}-${e.item.key}`,disabled:s(e.item.disabled??a?.disabled,o.value,k?.value)??z.value.includes(e.item.key)?!0:void 0,placeholder:e.item.placeholder??a?.placeholder,options:e.item.options??a?.options??a?.treeData,allowClear:e.item.allowClear??a?.allowClear??!1};return P({valueEnum:e.item.valueEnum,dependencies:e.item.dependencies,readonly:u.value,readonlyProps:q.value,request:e.item.request,params:e.item.params,onChange:(n,...d)=>{J(n),j(n),e.item.onChange?.(n,...d,c)},...L[v.value]?V(t,L[v.value]):t})}),Q=r(()=>{const t={...s(e.item.fieldProps??{},o.value)?.style};return e.item.width&&!A[e.item.width]?t.width=ne(e.item.width)?e.item.width+"px":e.item.width:B?.value&&(t.maxWidth="100%",t.width="100%"),R.value&&Reflect.deleteProperty(t,"width"),P(t)}),X=r(()=>{const a=e.item.width&&A[e.item.width],t={[`${w}-field`]:!!a,[`${w}-field-${e.item.width}`]:a&&!R.value};return e.item.className&&(t[e.item.className]=!0),t}),Z=r(()=>{const a={};if(ge.forEach(t=>{const n=f(p.value[t],m);n&&(a[t]=()=>i(h,{vnode:n,props:{formData:o.value}},null))}),e.item.title){const t=f(e.item.extra?.label,m);a.label=()=>i(pe,null,[i("div",{class:`${w}-item-title`,style:p.value.titleStyles},[i(ue,{title:e.item.title,tooltip:e.item.tooltip},null)]),i(h,{vnode:t,props:{formData:o.value}},null)])}return a});return C(x,a=>{const{linkage:t}=e.item;if(t){const{hidden:n,disabled:d}=t;if(n){const l=s(n,a,o.value)??[];O(l,Y.value)||H(e.item.key,b?l.map(g=>`${F}_${g}`):l)}if(d){const l=s(d,a,o.value)??[];O(l,G.value)||_(e.item.key,b?l.map(g=>`${F}_${g}`):l)}}},{immediate:!0}),C(I,()=>{e.item.onInit?.(I.value)}),C(u,()=>{u.value&&c.clearValidate(e.item.name)}),C(()=>D.value?.rules,()=>{c.clearValidate(e.item.name)}),()=>{const a=f(e.item.render,m);if(a)return i(K,{colProps:e.item.colProps},{default:()=>[i(h,{vnode:a,props:{formData:o.value}},null)]});const t=f(e.item.renderFormItem,m),n=f(e.item.extra?.item,m),d=N[v.value]??N.text;let l=i(d,fe({ref:I,value:x.value},T.value,{style:Q.value,class:X.value}),null);return t&&(l=i(h,{vnode:t,props:{value:x.value,onChange:T.value.onChange,defaultDom:l,formData:o.value,action:c,listName:y?.value,name:e.item.name}},null)),n&&(l=i("div",{style:"display: flex; flex-direction: row; justify-content: flex-start; align-items: center;"},[l,i(h,{vnode:n,props:{formData:o.value,listName:y?.value,name:e.item.name}},null)])),i(K,{colProps:e.item.colProps},{default:()=>[i(de.Item,D.value,{default:()=>[l],...Z.value})]})}}});export{xe as default};
