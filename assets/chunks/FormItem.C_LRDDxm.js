import{B as ce,W as me,A as pe,G as p,a4 as ve,O as V,Q as z,a5 as he,J as b,L as w,V as H,a6 as j,F as fe,X as q,U as ge,a7 as Ce}from"./theme.D6ywtaCo.js";import{u as be}from"./useFieldValue.BJrlqVXn.js";import{F as we,a as ye}from"./FormTitle.D8YKM8G1.js";import{d as xe,e as d,f as Ie,k as s,F as Pe,w as S,a0 as Se}from"./framework.bPIybcxE.js";const G={text:["type","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],digit:["disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],digitRange:["separatorWidth","separator","disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],select:["id","pagination","placeholder","disabled","allowClear","autoClearSearchValue","autofocus","bordered","clearIcon","defaultActiveFirstOption","defaultOpen","popupClassName","dropdownMatchSelectWidth","dropdownMenuStyle","dropdownRender","dropdownStyle","fieldNames","filterOption","filterSort","firstActiveValue","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","maxTagTextLength","menuItemSelectedIcon","mode","notFoundContent","open","option","optionFilterProp","optionLabelProp","options","placement","removeIcon","searchValue","showArrow","showSearch","size","status","suffixIcon","tagRender","tokenSeparators","virtual","onBlur","onFocus","onDeselect","onDropdownVisibleChange","onInputKeyDown","onMouseenter","onMouseleave","onPopupScroll","onSearch","onSelect"],textarea:["id","disabled","allowClear","autoSize","defaultValue","showCount","maxlength","placeholder","onPressEnter","onFocus","onBlur","onInput","onClear"],password:["id","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","visibilityToggle","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],treeSelect:["id","multiple","options","showCheckedStrategy","searchPlaceholder","replaceFields","loadData","filterTreeNode","placeholder","disabled","allowClear","popupClassName","defaultValue","dropdownMatchSelectWidth","dropdownStyle","fieldNames","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","notFoundContent","placement","searchValue","showSearch","size","status","suffixIcon","tagRender","title","treeCheckable","treeCheckStrictly","treeData","treeDataSimpleMode","treeDefaultExpandAll","treeDefaultExpandedKeys","treeExpandedKeys","treeIcon","treeLine","treeLoadedKeys","treeNodeFilterProp","treeNodeLabelProp","onDropdownVisibleChange","onSearch","onSelect","onTreeExpand","onUpdate:treeExpandedKeys","onUpdate:searchValue"],checkbox:["id","autofocus","disabled","indeterminate"],checkboxGroup:["id","disabled","name","options"],radioGroup:["id","class","disabled","name","options","optionType","buttonStyle","radioLabel"],cascader:["id","disabled","name","options","placeholder","allowClear","autofocus","bordered","clearIcon","changeOnSelect","defaultValue","displayRender","popupClassName","dropdownStyle","expandTrigger","fieldNames","getPopupContainer","loadData","maxTagCount","maxTagPlaceholder","multiple","notFoundContent","open","placement","showCheckedStrategy","removeIcon","searchValue","showSearch","status","suffixIcon","tagRender","onDropdownVisibleChange","onSearch"],switch:["id","checkedChildren","size","checkedValue","disabled","loading","unCheckedChildren","unCheckedValue","onClick"],slider:["id","disabled","dots","included","mark","marks","max","min","range","reverse","step","vertical","tipFormatter","tooltipPlacement","tooltipOpen","getTooltipPopupContainer","onAfterChange"],rate:["id","allowClear","allowHalf","character","count","disabled","tooltips","onBlur","onFocus","onHoverChange","onKeydown"],date:["id","allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","defaultPickerValue","disabledTime","renderExtraFooter","showNow","showTime","showToday","monthCellRender","onOpenChange","onPanelChange","onOk"],dateRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","showTime","ranges","renderExtraFooter","separator","onOpenChange","onPanelChange","onCalendarChange","onOk"],time:["id","allowClear","bordered","clearIcon","clearText","disabled","disabledTime","format","getPopupContainer","hideDisabledOptions","hourStep","inputReadOnly","minuteStep","open","placeholder","placement","popupClassName","popupStyle","renderExtraFooter","secondStep","showNow","status","suffixIcon","use12Hours","valueFormat","onOpenChange"],timeRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","ranges","renderExtraFooter","separator","order","onOpenChange","onPanelChange","onCalendarChange","onOk"],uploadButton:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","max","buttonProps"],uploadDragger:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","description","max","buttonProps"],uploadPicture:["disabled","id","customRequest","accept","action","beforeUpload","name","headers","isCropper","cropperModalTitle","cropperModalWidth","cropperWidth","cropperHeight","cropperProps","width","height","title","data","showTitle","allowClear"],uploadPictureList:["disabled","id","data","headers","customRequest","accept","action","multiple","maxCount","beforeUpload","name","previewFile","allowClear","width","height","crossOrigin"],editor:["autofocus","indentWithTab","tabSize","theme","autoDestroy","phrases","root","extensions","selection","height","disabled","placeholder","onFocus","onBlur","onReady","onUpdate"]},Y={xs:104,s:216,sm:216,m:328,md:328,l:440,lg:440,xl:552},Fe=["autoLink","colon","hasFeedback","labelAlign","labelCol","htmlFor","required","validateFirst","validateStatus","validateTrigger","wrapperCol","rules","style","class"],_e=["switch","radioButton","radio","rate"],ke=["extra","help"];var Ne=xe({name:"FormItem",inheritAttrs:!1,props:{item:{type:Object,default:()=>({})},grid:{type:Boolean,default:void 0}},setup(e){const{grid:N,action:f,formKey:E,prefixCls:y,formData:n,readonly:O,readonlyProps:K,disabledKeys:J,hiddenKeys:Q,allDisabledKeys:X,onPressEnter:Z,updateHiddenKeys:ee,updateDisabledKeys:ae}=ce(),{isList:F,listKey:L,listName:v,rowData:x}=me(),g=pe(),{fieldValue:_,onValueChange:le}=be({namePath:d(()=>e.item.name),initialValue:e.item.initialValue,convertValue:e.item.convertValue,transform:e.item.transform}),k=Ie(),R=d(()=>{var a;return(a=e.grid)!=null?a:N?.value}),I=d(()=>{var a;return(a=e.item.fieldType)!=null?a:"text"}),h=d(()=>{var a;return p((a=e.item.readonly)!=null?a:O?.value,n.value,x?.value)}),te=d(()=>ve({},K?.value,e.item.readonlyProps)),oe=d(()=>J.value.map(a=>a.split(":")[1])),ne=d(()=>Q.value.map(a=>a.split(":")[1])),A=d(()=>{var a;return(a=e.item.ignoreWidth)!=null?a:_e.includes(I.value)}),C=d(()=>{var a;return(a=p(e.item.formItemProps,n.value))!=null?a:{}}),B=d(()=>{var a,l,t,o;return V({...z(C.value,Fe),name:h.value?void 0:e.item.name,htmlFor:h.value?void 0:(t=(a=C.value)==null?void 0:a.htmlFor)!=null?t:`form-${(l=E.value)!=null?l:""}-${e.item.key}`,rules:h.value?void 0:p((o=e.item.rules)!=null?o:C.value.rules,n.value,f)})}),re=a=>{var l,t;const{clear:o}=(l=e.item.linkage)!=null?l:{};if(o){const m=(t=p(o,a,n.value))!=null?t:[];m.length>0&&m.forEach(i=>{var r;const c=F?[...(r=v?.value)!=null?r:[],...q(i)].filter(P=>P!==void 0).flat(1):q(i);typeof ge(n.value,c)<"u"&&Ce(n.value,c,void 0)})}},M=d(()=>{var a,l,t,o,m,i,r,c,D,P;const u=p((a=e.item.fieldProps)!=null?a:{},n.value),U={...u,id:(t=u?.id)!=null?t:`form-${(l=E.value)!=null?l:""}-${e.item.key}`,disabled:((m=p((o=e.item.disabled)!=null?o:u?.disabled,n.value,x?.value))!=null?m:X.value.includes(e.item.key))?!0:void 0,placeholder:(i=e.item.placeholder)!=null?i:u?.placeholder,options:(c=(r=e.item.options)!=null?r:u?.options)!=null?c:u?.treeData,allowClear:(P=(D=e.item.allowClear)!=null?D:u?.allowClear)!=null?P:!0};return V({valueEnum:e.item.valueEnum,dependencies:e.item.dependencies,readonly:h.value,readonlyProps:te.value,request:e.item.request,params:e.item.params,onChange:(T,...ue)=>{var W,$;re(T),le(T),($=(W=e.item).onChange)==null||$.call(W,T,...ue,f)},...G[I.value]?z(U,G[I.value]):U})}),ie=d(()=>{var a;const l=p((a=e.item.fieldProps)!=null?a:{},n.value),t={...l?.style};return e.item.width&&!Y[e.item.width]?t.width=he(e.item.width)?e.item.width+"px":e.item.width:R?.value&&(t.maxWidth="100%",t.width="100%"),A.value&&Reflect.deleteProperty(t,"width"),V(t)}),de=d(()=>{const a=e.item.width&&Y[e.item.width],l={[`${y}-field`]:!!a,[`${y}-field-${e.item.width}`]:a&&!A.value};return e.item.className&&(l[e.item.className]=!0),l}),se=d(()=>{var a;const l={};if(ke.forEach(t=>{const o=b(C.value[t],g);o&&(l[t]=()=>s(w,{vnode:o,props:{formData:n.value}},null))}),e.item.title){const t=b((a=e.item.extra)==null?void 0:a.label,g);l.label=()=>s(Pe,null,[s("div",{class:`${y}-item-title`,style:C.value.titleStyles},[s(we,{title:e.item.title,tooltip:e.item.tooltip},null)]),s("div",{class:`${y}-item-title-extra`},[s(w,{vnode:t,props:{formData:n.value}},null)])])}return l});return S(_,a=>{var l,t;const{linkage:o}=e.item;if(o){const{hidden:m,disabled:i}=o;if(m){const r=(l=p(m,a,n.value))!=null?l:[];H(r,ne.value)||ee(e.item.key,F?r.map(c=>`${L}_${c}`):r)}if(i){const r=(t=p(i,a,n.value))!=null?t:[];H(r,oe.value)||ae(e.item.key,F?r.map(c=>`${L}_${c}`):r)}}},{immediate:!0}),S(k,()=>{var a,l;(l=(a=e.item).onInit)==null||l.call(a,k.value)}),S(h,()=>{h.value&&f.clearValidate(e.item.name)}),S(()=>{var a;return(a=B.value)==null?void 0:a.rules},()=>{f.clearValidate(e.item.name)}),()=>{var a,l;const t=b(e.item.renderFormItem,g),o=b((a=e.item.extra)==null?void 0:a.item,g),m=(l=j[I.value])!=null?l:j.text;let i=s(m,Se({ref:k,value:_.value},M.value,{style:ie.value,class:de.value,onPressEnter:Z}),null);t&&(i=s(w,{vnode:t,props:{value:_.value,onChange:M.value.onChange,defaultDom:i,formData:n.value,action:f,listName:v?.value,name:e.item.name}},null)),o&&(i=s("div",{style:"display: flex; flex-direction: row; justify-content: flex-start; align-items: center;"},[i,s("div",{style:"margin-inline-start: 5px; flex-shrink: 0;"},[s(w,{vnode:o,props:{formData:n.value,listName:v?.value,name:e.item.name}},null)])]));const r=s(fe.Item,B.value,{default:()=>[i],...se.value}),c=b(e.item.render,g);return s(ye,{colProps:e.item.colProps,grid:R.value},{default:()=>[c?s(w,{vnode:c,props:{formData:n.value,defaultDom:r}},null):r]})}}});export{Ne as default};
