import{A as le,_ as ne,z as re,B as s,a6 as ie,U as P,V,a7 as de,H as h,K as v,a8 as E,F as se,$ as O,W as ue,Y as ce,X as K}from"./theme.Ci-98z5_.js";import{u as me}from"./useFieldValue.BZjpoOQF.js";import{F as pe,a as fe}from"./FormTitle.Cgg2NJ4v.js";import{d as he,c as n,f as ve,k as r,F as ge,w,a0 as Ce}from"./framework.B0enweWD.js";const L={text:["type","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],digit:["disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],digitRange:["separatorWidth","separator","disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],select:["id","pagination","placeholder","disabled","allowClear","autoClearSearchValue","autofocus","bordered","clearIcon","defaultActiveFirstOption","defaultOpen","popupClassName","dropdownMatchSelectWidth","dropdownMenuStyle","dropdownRender","dropdownStyle","fieldNames","filterOption","filterSort","firstActiveValue","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","maxTagTextLength","menuItemSelectedIcon","mode","notFoundContent","open","option","optionFilterProp","optionLabelProp","options","placement","removeIcon","searchValue","showArrow","showSearch","size","status","suffixIcon","tagRender","tokenSeparators","virtual","onBlur","onFocus","onDeselect","onDropdownVisibleChange","onInputKeyDown","onMouseenter","onMouseleave","onPopupScroll","onSearch","onSelect"],textarea:["id","disabled","allowClear","autoSize","defaultValue","showCount","maxlength","placeholder","onPressEnter","onFocus","onBlur","onInput","onClear"],password:["id","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","visibilityToggle","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],treeSelect:["id","multiple","options","showCheckedStrategy","searchPlaceholder","replaceFields","loadData","filterTreeNode","placeholder","disabled","allowClear","popupClassName","defaultValue","dropdownMatchSelectWidth","dropdownStyle","fieldNames","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","notFoundContent","placement","searchValue","showSearch","size","status","suffixIcon","tagRender","title","treeCheckable","treeCheckStrictly","treeData","treeDataSimpleMode","treeDefaultExpandAll","treeDefaultExpandedKeys","treeExpandedKeys","treeIcon","treeLine","treeLoadedKeys","treeNodeFilterProp","treeNodeLabelProp","onDropdownVisibleChange","onSearch","onSelect","onTreeExpand","onUpdate:treeExpandedKeys","onUpdate:searchValue"],checkbox:["id","autofocus","disabled","indeterminate"],checkboxGroup:["id","disabled","name","options","fieldNames"],radioGroup:["id","class","disabled","name","options","fieldNames","optionType","buttonStyle","radioLabel"],cascader:["id","disabled","name","options","placeholder","allowClear","autofocus","bordered","clearIcon","changeOnSelect","defaultValue","displayRender","popupClassName","dropdownStyle","expandTrigger","fieldNames","getPopupContainer","loadData","maxTagCount","maxTagPlaceholder","multiple","notFoundContent","open","placement","showCheckedStrategy","removeIcon","searchValue","showSearch","status","suffixIcon","tagRender","onDropdownVisibleChange","onSearch"],switch:["id","checkedChildren","size","checkedValue","disabled","loading","unCheckedChildren","unCheckedValue","onClick"],slider:["id","disabled","dots","included","mark","marks","max","min","range","reverse","step","vertical","tipFormatter","tooltipPlacement","tooltipOpen","getTooltipPopupContainer","onAfterChange"],rate:["id","allowClear","allowHalf","character","count","disabled","tooltips","onBlur","onFocus","onHoverChange","onKeydown"],date:["id","allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","defaultPickerValue","disabledTime","renderExtraFooter","showNow","showTime","showToday","monthCellRender","onOpenChange","onPanelChange","onOk"],dateRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","showTime","ranges","renderExtraFooter","separator","onOpenChange","onPanelChange","onCalendarChange","onOk"],time:["id","allowClear","bordered","clearIcon","clearText","disabled","disabledTime","format","getPopupContainer","hideDisabledOptions","hourStep","inputReadOnly","minuteStep","open","placeholder","placement","popupClassName","popupStyle","renderExtraFooter","secondStep","showNow","status","suffixIcon","use12Hours","valueFormat","onOpenChange"],timeRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","ranges","renderExtraFooter","separator","order","onOpenChange","onPanelChange","onCalendarChange","onOk"],uploadButton:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","listIgnore","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","description","max","buttonProps"],uploadDragger:["disabled","id","accept","action","listIgnore","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","description","max","buttonProps"],uploadPicture:["disabled","id","customRequest","accept","action","beforeUpload","listIgnore","name","headers","isCropper","cropperModalTitle","cropperModalWidth","cropperWidth","cropperHeight","cropperProps","width","height","title","data","showTitle","allowClear"],uploadPictureList:["disabled","id","data","headers","customRequest","accept","action","multiple","maxCount","beforeUpload","listIgnore","name","previewFile","allowClear","width","height","crossOrigin"],editor:["autofocus","indentWithTab","tabSize","theme","autoDestroy","phrases","root","extensions","selection","height","disabled","placeholder","onFocus","onBlur","onReady","onUpdate"]},A={xs:104,s:216,sm:216,m:328,md:328,l:440,lg:440,xl:552},we=["autoLink","colon","hasFeedback","labelAlign","labelCol","htmlFor","required","validateFirst","validateStatus","validateTrigger","wrapperCol","rules","style","class"],be=["switch","radioButton","radio","rate"],ye=["extra","help"],Fe=he({name:"FormItem",inheritAttrs:!1,props:{item:{type:Object,default:()=>({})},grid:{type:Boolean,default:void 0}},setup(e){const{grid:B,action:p,formKey:S,prefixCls:g,formData:o,readonly:M,readonlyProps:U,disabledKeys:$,hiddenKeys:W,allDisabledKeys:z,labelCol:H,wrapperCol:_,onPressEnter:q,updateHiddenKeys:j,updateDisabledKeys:G}=le(),{isList:b,listKey:F,listName:y,rowData:k}=ne(),f=re(),{fieldValue:x,onValueChange:Y}=me({namePath:n(()=>e.item.name),initialValue:e.item.initialValue,convertValue:e.item.convertValue,transform:e.item.transform}),I=ve(),R=n(()=>e.grid??B?.value),C=n(()=>e.item.fieldType??"text"),u=n(()=>s(e.item.readonly??M?.value,o.value,k?.value)),X=n(()=>ie({},U?.value,e.item.readonlyProps)),J=n(()=>$.value.map(a=>a.split(":")[1])),Q=n(()=>W.value.map(a=>a.split(":")[1])),D=n(()=>e.item.ignoreWidth??be.includes(C.value)),c=n(()=>s(e.item.formItemProps,o.value)??{}),N=n(()=>P({...V(c.value,we),labelCol:c.value?.labelCol??H?.value,wrapperCol:c.value?.wrapperCol??_?.value,name:u.value?void 0:e.item.name,htmlFor:u.value?void 0:c.value?.htmlFor??`form-${S.value??""}-${e.item.key}`,rules:u.value?void 0:s(e.item.rules??c.value.rules,o.value,p)})),Z=a=>{const{clear:t}=e.item.linkage??{};if(t){const l=s(t,a,o.value)??[];l.length>0&&l.forEach(i=>{const d=b?[...y?.value??[],...O(i)].filter(oe=>oe!==void 0).flat(1):O(i);typeof ue(o.value,d)<"u"&&ce(o.value,d,void 0)})}},T=n(()=>{const a=s(e.item.fieldProps??{},o.value),t={...a,id:a?.id??`form-${S.value??""}-${e.item.key}`,disabled:s(e.item.disabled??a?.disabled,o.value,k?.value)??z.value.includes(e.item.key)?!0:void 0,placeholder:e.item.placeholder??a?.placeholder,options:e.item.options??a?.options??a?.treeData,allowClear:e.item.allowClear??a?.allowClear??!0};return P({valueEnum:e.item.valueEnum,dependencies:e.item.dependencies,readonly:u.value,readonlyProps:X.value,request:e.item.request,params:e.item.params,onChange:(l,...i)=>{Z(l),Y(l),e.item.onChange?.(l,...i,p)},...L[C.value]?V(t,L[C.value]):t})}),ee=n(()=>{const t={...s(e.item.fieldProps??{},o.value)?.style};return e.item.width&&!A[e.item.width]?t.width=de(e.item.width)?e.item.width+"px":e.item.width:R?.value&&(t.maxWidth="100%",t.width="100%"),D.value&&Reflect.deleteProperty(t,"width"),P(t)}),ae=n(()=>{const a=e.item.width&&A[e.item.width],t={[`${g}-field`]:!!a,[`${g}-field-${e.item.width}`]:a&&!D.value};return e.item.className&&(t[e.item.className]=!0),t}),te=n(()=>{const a={};if(ye.forEach(t=>{const l=h(c.value[t],f);l&&(a[t]=()=>r(v,{vnode:l,props:{formData:o.value}},null))}),e.item.title){const t=h(e.item.extra?.label,f);a.label=()=>r(ge,null,[r("div",{class:`${g}-item-title`,style:c.value.titleStyles},[r(pe,{title:e.item.title,tooltip:e.item.tooltip,readonly:u.value},null)]),r("div",{class:`${g}-item-title-extra`},[r(v,{vnode:t,props:{formData:o.value}},null)])])}return a});return w(x,a=>{const{linkage:t}=e.item;if(t){const{hidden:l,disabled:i}=t;if(l){const d=s(l,a,o.value)??[];K(d,Q.value)||j(e.item.key,b?d.map(m=>`${F}_${m}`):d)}if(i){const d=s(i,a,o.value)??[];K(d,J.value)||G(e.item.key,b?d.map(m=>`${F}_${m}`):d)}}},{immediate:!0}),w(I,()=>{e.item.onInit?.(I.value)}),w(u,()=>{u.value&&p.clearValidate(e.item.name)}),w(()=>N.value?.rules,()=>{p.clearValidate(e.item.name)}),()=>{const a=h(e.item.renderFormItem,f),t=h(e.item.extra?.item,f),l=E[C.value]??E.text;let i=r(l,Ce({ref:I,value:x.value},T.value,{style:ee.value,class:ae.value,onPressEnter:q}),null);a&&(i=r(v,{vnode:a,props:{value:x.value,onChange:T.value.onChange,defaultDom:i,formData:o.value,action:p,listName:y?.value,name:e.item.name}},null)),t&&(i=r("div",{style:"display: flex; flex-direction: row; justify-content: flex-start; align-items: center;"},[i,r("div",{style:"margin-inline-start: 5px; flex-shrink: 0;"},[r(v,{vnode:t,props:{formData:o.value,listName:y?.value,name:e.item.name}},null)])]));const d=r(se.Item,N.value,{default:()=>[i],...te.value}),m=h(e.item.render,f);return r(fe,{colProps:e.item.colProps,grid:R.value},{default:()=>[m?r(v,{vnode:m,props:{formData:o.value,defaultDom:d}},null):d]})}}});export{Fe as default};
