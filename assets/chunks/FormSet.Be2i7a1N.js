import{q as F,r as d,w as P,x as V,v as g,F as h}from"./index.EOftqUGX.js";import{u as A}from"./useFieldValue.BUpaJpJH.js";import{a as b,F as I}from"./FormTitle.Mumb7i2y.js";import{g as O,H as S,F as w}from"./theme.D3HEgLCD.js";import{d as j,e as l,k as n,w as L}from"./framework.DJTVsyCh.js";const T=["formList","formSet","group","divider"],_=["autoLink","colon","hasFeedback","labelAlign","labelCol","required","validateFirst","validateStatus","validateTrigger","wrapperCol","required"],D=j({name:"FormSet",inheritAttrs:!1,props:{name:{type:[String,Array],default:void 0},initialValue:{type:Object,default:void 0},title:{type:[String,Object,Function],default:void 0},tooltip:{type:String,default:void 0},colProps:{type:Object,default:void 0},rowProps:{type:Object,default:void 0},spaceProps:{type:Object,default:()=>({})},formItemProps:{type:[Object,Function],default:void 0},convertValue:{type:Function,default:void 0},transform:{type:Function,default:void 0},items:{type:[Array,Function],default:void 0}},setup(e){const{formatItems:f,formData:i}=F(),{fieldValue:m,onValueChange:c}=A({namePath:l(()=>e.name),initialValue:e.initialValue,convertValue:e.convertValue,transform:e.transform}),p=l(()=>d(e.formItemProps,i.value)??{}),v=l(()=>P({...V(p.value,_)})),r=l(()=>{let t=d(e.items??[],i.value)??[];return Array.isArray(e.initialValue)&&e.initialValue.length&&(t=t.filter(a=>!T.includes(a.fieldType??"")).map((a,s)=>(typeof a.initialValue>"u"&&(a.initialValue=e.initialValue[s]),a))),f?.(t)??[]}),u=l(()=>r.value.map(t=>t.name)),o=l(()=>{const t=[];return Array.isArray(u.value)&&u.value.length&&u.value.forEach((a,s)=>{t[s]=O(i.value,a)}),t}),y=l(()=>{const t={};return e.title&&(t.label=()=>n(b,{title:e.title,tooltip:e.tooltip},null)),t});return L(o,()=>{S(o.value,m.value)||c(o.value)}),()=>!e.name?.length||!r.value.length?null:n(I,{colProps:e.colProps},{default:()=>[n(w.Item,v.value,{default:()=>[n(g,{rowProps:e.rowProps},{default:()=>[n(h,{list:r.value,type:"space",spaceProps:{size:[8,0],...e.spaceProps??{}}},null)]})],...y.value})]})}});export{D as default};
