import{i as pe,m as L,h as W,j as R,R as N,r as K,f as xa,n as wa,p as Dt,l as It}from"./index.6rbfiktR.js";import{u as Ca}from"./useFieldValue.Ck-NizkP.js";import{u as Gt}from"./FormListContext.C1lAsfCm.js";import{P as Sa}from"./index.vaAO-90u.js";import{ab as Kt,a9 as Ea,e as Da,ac as vt,ad as Je,U as mt,S as Ia,ae as Ta,N as et,p as Qt,s as tt,v as Pa,af as Ma,ag as _a,H as Fa,ah as gt,ai as Oa,aj as Ra,ak as Na,al as Aa,am as ka,an as Ba,ao as le,ap as La,aq as Va,ar as $a,as as Ya,at as Ua,au as Wa,B as za,av as ke,aw as Ha,ax as ja,u as Xa,aa as Zt,a0 as qa,ay as Ga,az as Ka,i as at,Y as Qa}from"./theme.BNFhy3IT.js";import{d as A,f as Z,o as Jt,R as Za,Q as Ja,S as Pe,a1 as Ue,u as Me,k as g,e as p,i as ea,a0 as I,w as ve,F as ta}from"./framework.nwrEuAw0.js";import{u as H}from"./useIntl.BQUNaJ4W.js";import{o as aa,a as Ke}from"./index.CpdZv596.js";import{a as je,e as ei,h as Ne,i as ti}from"./validate.CC0GjpC9.js";import{P as ai}from"./index.BRhd8fO0.js";import{u as ii}from"./index.D5lW5ejP.js";import{w as ni}from"./install.BalIz2Dd.js";import{F as ri,a as Tt}from"./FormTitle.Wq8CccLJ.js";import"./index.DmBX5dnQ.js";import"./index.CHg6CLv2.js";/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function Pt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function ia(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Pt(Object(i),!0).forEach(function(a){ui(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Pt(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function li(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function na(e){var t=li(e,"string");return typeof t=="symbol"?t:t+""}function it(e){"@babel/helpers - typeof";return it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(e)}function oi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,na(a.key),a)}}function si(e,t,i){return t&&Mt(e.prototype,t),i&&Mt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function ui(e,t,i){return t=na(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ra(e){return di(e)||ci(e)||hi(e)||fi()}function di(e){if(Array.isArray(e))return nt(e)}function ci(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hi(e,t){if(e){if(typeof e=="string")return nt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nt(e,t)}}function nt(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function fi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Xe=typeof window<"u"&&typeof window.document<"u",de=Xe?window:{},pt=Xe&&de.document.documentElement?"ontouchstart"in de.document.documentElement:!1,yt=Xe?"PointerEvent"in de:!1,k="cropper",bt="all",la="crop",oa="move",sa="zoom",ye="e",be="w",Ce="s",fe="n",_e="ne",Fe="nw",Oe="se",Re="sw",rt="".concat(k,"-crop"),_t="".concat(k,"-disabled"),Q="".concat(k,"-hidden"),Ft="".concat(k,"-hide"),vi="".concat(k,"-invisible"),He="".concat(k,"-modal"),lt="".concat(k,"-move"),Be="".concat(k,"Action"),We="".concat(k,"Preview"),xt="crop",ua="move",da="none",ot="crop",st="cropend",ut="cropmove",dt="cropstart",Ot="dblclick",mi=pt?"touchstart":"mousedown",gi=pt?"touchmove":"mousemove",pi=pt?"touchend touchcancel":"mouseup",Rt=yt?"pointerdown":mi,Nt=yt?"pointermove":gi,At=yt?"pointerup pointercancel":pi,kt="ready",Bt="resize",Lt="wheel",ct="zoom",Vt="image/jpeg",yi=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,bi=/^data:/,xi=/^data:image\/jpeg;base64,/,wi=/^img|canvas$/i,ca=200,ha=100,$t={viewMode:0,dragMode:xt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:ca,minContainerHeight:ha,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Ci='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Si=Number.isNaN||de.isNaN;function M(e){return typeof e=="number"&&!Si(e)}var Yt=function(t){return t>0&&t<1/0};function Qe(e){return typeof e>"u"}function xe(e){return it(e)==="object"&&e!==null}var Ei=Object.prototype.hasOwnProperty;function Se(e){if(!xe(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&Ei.call(i,"isPrototypeOf")}catch{return!1}}function G(e){return typeof e=="function"}var Di=Array.prototype.slice;function fa(e){return Array.from?Array.from(e):Di.call(e)}function Y(e,t){return e&&G(t)&&(Array.isArray(e)||M(e.length)?fa(e).forEach(function(i,a){t.call(e,i,a,e)}):xe(e)&&Object.keys(e).forEach(function(i){t.call(e,e[i],i,e)})),e}var B=Object.assign||function(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return xe(t)&&a.length>0&&a.forEach(function(n){xe(n)&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t},Ii=/\.\d*(?:0|9){12}\d*$/;function De(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Ii.test(e)?Math.round(e*t)/t:e}var Ti=/^width|height|left|top|marginLeft|marginTop$/;function me(e,t){var i=e.style;Y(t,function(a,l){Ti.test(l)&&M(a)&&(a="".concat(a,"px")),i[l]=a})}function Pi(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function U(e,t){if(t){if(M(e.length)){Y(e,function(a){U(a,t)});return}if(e.classList){e.classList.add(t);return}var i=e.className.trim();i?i.indexOf(t)<0&&(e.className="".concat(i," ").concat(t)):e.className=t}}function se(e,t){if(t){if(M(e.length)){Y(e,function(i){se(i,t)});return}if(e.classList){e.classList.remove(t);return}e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,""))}}function Ee(e,t,i){if(t){if(M(e.length)){Y(e,function(a){Ee(a,t,i)});return}i?U(e,t):se(e,t)}}var Mi=/([a-z\d])([A-Z])/g;function wt(e){return e.replace(Mi,"$1-$2").toLowerCase()}function ht(e,t){return xe(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(wt(t)))}function Le(e,t,i){xe(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-".concat(wt(t)),i)}function _i(e,t){if(xe(e[t]))try{delete e[t]}catch{e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch{e.dataset[t]=void 0}else e.removeAttribute("data-".concat(wt(t)))}var va=/\s\s*/,ma=(function(){var e=!1;if(Xe){var t=!1,i=function(){},a=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(n){t=n}});de.addEventListener("test",i,a),de.removeEventListener("test",i,a)}return e})();function re(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=i;t.trim().split(va).forEach(function(n){if(!ma){var r=e.listeners;r&&r[n]&&r[n][i]&&(l=r[n][i],delete r[n][i],Object.keys(r[n]).length===0&&delete r[n],Object.keys(r).length===0&&delete e.listeners)}e.removeEventListener(n,l,a)})}function ie(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=i;t.trim().split(va).forEach(function(n){if(a.once&&!ma){var r=e.listeners,o=r===void 0?{}:r;l=function(){delete o[n][i],e.removeEventListener(n,l,a);for(var c=arguments.length,u=new Array(c),s=0;s<c;s++)u[s]=arguments[s];i.apply(e,u)},o[n]||(o[n]={}),o[n][i]&&e.removeEventListener(n,o[n][i],a),o[n][i]=l,e.listeners=o}e.addEventListener(n,l,a)})}function Ie(e,t,i){var a;return G(Event)&&G(CustomEvent)?a=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent"),a.initCustomEvent(t,!0,!0,i)),e.dispatchEvent(a)}function ga(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ze=de.location,Fi=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Ut(e){var t=e.match(Fi);return t!==null&&(t[1]!==Ze.protocol||t[2]!==Ze.hostname||t[3]!==Ze.port)}function Wt(e){var t="timestamp=".concat(new Date().getTime());return e+(e.indexOf("?")===-1?"?":"&")+t}function Ae(e){var t=e.rotate,i=e.scaleX,a=e.scaleY,l=e.translateX,n=e.translateY,r=[];M(l)&&l!==0&&r.push("translateX(".concat(l,"px)")),M(n)&&n!==0&&r.push("translateY(".concat(n,"px)")),M(t)&&t!==0&&r.push("rotate(".concat(t,"deg)")),M(i)&&i!==1&&r.push("scaleX(".concat(i,")")),M(a)&&a!==1&&r.push("scaleY(".concat(a,")"));var o=r.length?r.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function Oi(e){var t=ia({},e),i=0;return Y(e,function(a,l){delete t[l],Y(t,function(n){var r=Math.abs(a.startX-n.startX),o=Math.abs(a.startY-n.startY),h=Math.abs(a.endX-n.endX),c=Math.abs(a.endY-n.endY),u=Math.sqrt(r*r+o*o),s=Math.sqrt(h*h+c*c),d=(s-u)/u;Math.abs(d)>Math.abs(i)&&(i=d)})}),i}function ze(e,t){var i=e.pageX,a=e.pageY,l={endX:i,endY:a};return t?l:ia({startX:i,startY:a},l)}function Ri(e){var t=0,i=0,a=0;return Y(e,function(l){var n=l.startX,r=l.startY;t+=n,i+=r,a+=1}),t/=a,i/=a,{pageX:t,pageY:i}}function ge(e){var t=e.aspectRatio,i=e.height,a=e.width,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",n=Yt(a),r=Yt(i);if(n&&r){var o=i*t;l==="contain"&&o>a||l==="cover"&&o<a?i=a/t:a=i*t}else n?i=a/t:r&&(a=i*t);return{width:a,height:i}}function Ni(e){var t=e.width,i=e.height,a=e.degree;if(a=Math.abs(a)%180,a===90)return{width:i,height:t};var l=a%90*Math.PI/180,n=Math.sin(l),r=Math.cos(l),o=t*r+i*n,h=t*n+i*r;return a>90?{width:h,height:o}:{width:o,height:h}}function Ai(e,t,i,a){var l=t.aspectRatio,n=t.naturalWidth,r=t.naturalHeight,o=t.rotate,h=o===void 0?0:o,c=t.scaleX,u=c===void 0?1:c,s=t.scaleY,d=s===void 0?1:s,v=i.aspectRatio,m=i.naturalWidth,y=i.naturalHeight,w=a.fillColor,D=w===void 0?"transparent":w,_=a.imageSmoothingEnabled,C=_===void 0?!0:_,S=a.imageSmoothingQuality,b=S===void 0?"low":S,f=a.maxWidth,x=f===void 0?1/0:f,P=a.maxHeight,T=P===void 0?1/0:P,X=a.minWidth,oe=X===void 0?0:X,J=a.minHeight,ne=J===void 0?0:J,te=document.createElement("canvas"),z=te.getContext("2d"),ce=ge({aspectRatio:v,width:x,height:T}),we=ge({aspectRatio:v,width:oe,height:ne},"cover"),Te=Math.min(ce.width,Math.max(we.width,m)),E=Math.min(ce.height,Math.max(we.height,y)),F=ge({aspectRatio:l,width:x,height:T}),O=ge({aspectRatio:l,width:oe,height:ne},"cover"),$=Math.min(F.width,Math.max(O.width,n)),q=Math.min(F.height,Math.max(O.height,r)),ae=[-$/2,-q/2,$,q];return te.width=De(Te),te.height=De(E),z.fillStyle=D,z.fillRect(0,0,Te,E),z.save(),z.translate(Te/2,E/2),z.rotate(h*Math.PI/180),z.scale(u,d),z.imageSmoothingEnabled=C,z.imageSmoothingQuality=b,z.drawImage.apply(z,[e].concat(ra(ae.map(function(V){return Math.floor(De(V))})))),z.restore(),te}var pa=String.fromCharCode;function ki(e,t,i){var a="";i+=t;for(var l=t;l<i;l+=1)a+=pa(e.getUint8(l));return a}var Bi=/^data:.*,/;function Li(e){var t=e.replace(Bi,""),i=atob(t),a=new ArrayBuffer(i.length),l=new Uint8Array(a);return Y(l,function(n,r){l[r]=i.charCodeAt(r)}),a}function Vi(e,t){for(var i=[],a=8192,l=new Uint8Array(e);l.length>0;)i.push(pa.apply(null,fa(l.subarray(0,a)))),l=l.subarray(a);return"data:".concat(t,";base64,").concat(btoa(i.join("")))}function $i(e){var t=new DataView(e),i;try{var a,l,n;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var r=t.byteLength,o=2;o+1<r;){if(t.getUint8(o)===255&&t.getUint8(o+1)===225){l=o;break}o+=1}if(l){var h=l+4,c=l+10;if(ki(t,h,4)==="Exif"){var u=t.getUint16(c);if(a=u===18761,(a||u===19789)&&t.getUint16(c+2,a)===42){var s=t.getUint32(c+4,a);s>=8&&(n=c+s)}}}if(n){var d=t.getUint16(n,a),v,m;for(m=0;m<d;m+=1)if(v=n+m*12+2,t.getUint16(v,a)===274){v+=8,i=t.getUint16(v,a),t.setUint16(v,1,a);break}}}catch{i=1}return i}function Yi(e){var t=0,i=1,a=1;switch(e){case 2:i=-1;break;case 3:t=-180;break;case 4:a=-1;break;case 5:t=90,a=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:i,scaleY:a}}var Ui={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,a=this.container,l=this.cropper,n=Number(i.minContainerWidth),r=Number(i.minContainerHeight);U(l,Q),se(t,Q);var o={width:Math.max(a.offsetWidth,n>=0?n:ca),height:Math.max(a.offsetHeight,r>=0?r:ha)};this.containerData=o,me(l,{width:o.width,height:o.height}),U(t,Q),se(l,Q)},initCanvas:function(){var t=this.containerData,i=this.imageData,a=this.options.viewMode,l=Math.abs(i.rotate)%180===90,n=l?i.naturalHeight:i.naturalWidth,r=l?i.naturalWidth:i.naturalHeight,o=n/r,h=t.width,c=t.height;t.height*o>t.width?a===3?h=t.height*o:c=t.width/o:a===3?c=t.width/o:h=t.height*o;var u={aspectRatio:o,naturalWidth:n,naturalHeight:r,width:h,height:c};this.canvasData=u,this.limited=a===1||a===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(t.width-u.width)/2,u.top=(t.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=B({},u)},limitCanvas:function(t,i){var a=this.options,l=this.containerData,n=this.canvasData,r=this.cropBoxData,o=a.viewMode,h=n.aspectRatio,c=this.cropped&&r;if(t){var u=Number(a.minCanvasWidth)||0,s=Number(a.minCanvasHeight)||0;o>1?(u=Math.max(u,l.width),s=Math.max(s,l.height),o===3&&(s*h>u?u=s*h:s=u/h)):o>0&&(u?u=Math.max(u,c?r.width:0):s?s=Math.max(s,c?r.height:0):c&&(u=r.width,s=r.height,s*h>u?u=s*h:s=u/h));var d=ge({aspectRatio:h,width:u,height:s});u=d.width,s=d.height,n.minWidth=u,n.minHeight=s,n.maxWidth=1/0,n.maxHeight=1/0}if(i)if(o>(c?0:1)){var v=l.width-n.width,m=l.height-n.height;n.minLeft=Math.min(0,v),n.minTop=Math.min(0,m),n.maxLeft=Math.max(0,v),n.maxTop=Math.max(0,m),c&&this.limited&&(n.minLeft=Math.min(r.left,r.left+(r.width-n.width)),n.minTop=Math.min(r.top,r.top+(r.height-n.height)),n.maxLeft=r.left,n.maxTop=r.top,o===2&&(n.width>=l.width&&(n.minLeft=Math.min(0,v),n.maxLeft=Math.max(0,v)),n.height>=l.height&&(n.minTop=Math.min(0,m),n.maxTop=Math.max(0,m))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=l.width,n.maxTop=l.height},renderCanvas:function(t,i){var a=this.canvasData,l=this.imageData;if(i){var n=Ni({width:l.naturalWidth*Math.abs(l.scaleX||1),height:l.naturalHeight*Math.abs(l.scaleY||1),degree:l.rotate||0}),r=n.width,o=n.height,h=a.width*(r/a.naturalWidth),c=a.height*(o/a.naturalHeight);a.left-=(h-a.width)/2,a.top-=(c-a.height)/2,a.width=h,a.height=c,a.aspectRatio=r/o,a.naturalWidth=r,a.naturalHeight=o,this.limitCanvas(!0,!1)}(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCanvas(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,me(this.canvas,B({width:a.width,height:a.height},Ae({translateX:a.left,translateY:a.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,a=this.imageData,l=a.naturalWidth*(i.width/i.naturalWidth),n=a.naturalHeight*(i.height/i.naturalHeight);B(a,{width:l,height:n,left:(i.width-l)/2,top:(i.height-n)/2}),me(this.image,B({width:a.width,height:a.height},Ae(B({translateX:a.left,translateY:a.top},a)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,a=t.aspectRatio||t.initialAspectRatio,l=Number(t.autoCropArea)||.8,n={width:i.width,height:i.height};a&&(i.height*a>i.width?n.height=n.width/a:n.width=n.height*a),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*l),n.height=Math.max(n.minHeight,n.height*l),n.left=i.left+(i.width-n.width)/2,n.top=i.top+(i.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=B({},n)},limitCropBox:function(t,i){var a=this.options,l=this.containerData,n=this.canvasData,r=this.cropBoxData,o=this.limited,h=a.aspectRatio;if(t){var c=Number(a.minCropBoxWidth)||0,u=Number(a.minCropBoxHeight)||0,s=o?Math.min(l.width,n.width,n.width+n.left,l.width-n.left):l.width,d=o?Math.min(l.height,n.height,n.height+n.top,l.height-n.top):l.height;c=Math.min(c,l.width),u=Math.min(u,l.height),h&&(c&&u?u*h>c?u=c/h:c=u*h:c?u=c/h:u&&(c=u*h),d*h>s?d=s/h:s=d*h),r.minWidth=Math.min(c,s),r.minHeight=Math.min(u,d),r.maxWidth=s,r.maxHeight=d}i&&(o?(r.minLeft=Math.max(0,n.left),r.minTop=Math.max(0,n.top),r.maxLeft=Math.min(l.width,n.left+n.width)-r.width,r.maxTop=Math.min(l.height,n.top+n.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=l.width-r.width,r.maxTop=l.height-r.height))},renderCropBox:function(){var t=this.options,i=this.containerData,a=this.cropBoxData;(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCropBox(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,t.movable&&t.cropBoxMovable&&Le(this.face,Be,a.width>=i.width&&a.height>=i.height?oa:bt),me(this.cropBox,B({width:a.width,height:a.height},Ae({translateX:a.left,translateY:a.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ie(this.element,ot,this.getData())}},Wi={initPreview:function(){var t=this.element,i=this.crossOrigin,a=this.options.preview,l=i?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",r=document.createElement("img");if(i&&(r.crossOrigin=i),r.src=l,r.alt=n,this.viewBox.appendChild(r),this.viewBoxImage=r,!!a){var o=a;typeof a=="string"?o=t.ownerDocument.querySelectorAll(a):a.querySelector&&(o=[a]),this.previews=o,Y(o,function(h){var c=document.createElement("img");Le(h,We,{width:h.offsetWidth,height:h.offsetHeight,html:h.innerHTML}),i&&(c.crossOrigin=i),c.src=l,c.alt=n,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',h.innerHTML="",h.appendChild(c)})}},resetPreview:function(){Y(this.previews,function(t){var i=ht(t,We);me(t,{width:i.width,height:i.height}),t.innerHTML=i.html,_i(t,We)})},preview:function(){var t=this.imageData,i=this.canvasData,a=this.cropBoxData,l=a.width,n=a.height,r=t.width,o=t.height,h=a.left-i.left-t.left,c=a.top-i.top-t.top;!this.cropped||this.disabled||(me(this.viewBoxImage,B({width:r,height:o},Ae(B({translateX:-h,translateY:-c},t)))),Y(this.previews,function(u){var s=ht(u,We),d=s.width,v=s.height,m=d,y=v,w=1;l&&(w=d/l,y=n*w),n&&y>v&&(w=v/n,m=l*w,y=v),me(u,{width:m,height:y}),me(u.getElementsByTagName("img")[0],B({width:r*w,height:o*w},Ae(B({translateX:-h*w,translateY:-c*w},t))))}))}},zi={bind:function(){var t=this.element,i=this.options,a=this.cropper;G(i.cropstart)&&ie(t,dt,i.cropstart),G(i.cropmove)&&ie(t,ut,i.cropmove),G(i.cropend)&&ie(t,st,i.cropend),G(i.crop)&&ie(t,ot,i.crop),G(i.zoom)&&ie(t,ct,i.zoom),ie(a,Rt,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&ie(a,Lt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&ie(a,Ot,this.onDblclick=this.dblclick.bind(this)),ie(t.ownerDocument,Nt,this.onCropMove=this.cropMove.bind(this)),ie(t.ownerDocument,At,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&ie(window,Bt,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,i=this.options,a=this.cropper;G(i.cropstart)&&re(t,dt,i.cropstart),G(i.cropmove)&&re(t,ut,i.cropmove),G(i.cropend)&&re(t,st,i.cropend),G(i.crop)&&re(t,ot,i.crop),G(i.zoom)&&re(t,ct,i.zoom),re(a,Rt,this.onCropStart),i.zoomable&&i.zoomOnWheel&&re(a,Lt,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&re(a,Ot,this.onDblclick),re(t.ownerDocument,Nt,this.onCropMove),re(t.ownerDocument,At,this.onCropEnd),i.responsive&&re(window,Bt,this.onResize)}},Hi={resize:function(){if(!this.disabled){var t=this.options,i=this.container,a=this.containerData,l=i.offsetWidth/a.width,n=i.offsetHeight/a.height,r=Math.abs(l-1)>Math.abs(n-1)?l:n;if(r!==1){var o,h;t.restore&&(o=this.getCanvasData(),h=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(Y(o,function(c,u){o[u]=c*r})),this.setCropBoxData(Y(h,function(c,u){h[u]=c*r})))}}},dblclick:function(){this.disabled||this.options.dragMode===da||this.setDragMode(Pi(this.dragBox,rt)?ua:xt)},wheel:function(t){var i=this,a=Number(this.options.wheelZoomRatio)||.1,l=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?l=t.deltaY>0?1:-1:t.wheelDelta?l=-t.wheelDelta/120:t.detail&&(l=t.detail>0?1:-1),this.zoom(-l*a,t)))},cropStart:function(t){var i=t.buttons,a=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(M(i)&&i!==1||M(a)&&a!==0||t.ctrlKey))){var l=this.options,n=this.pointers,r;t.changedTouches?Y(t.changedTouches,function(o){n[o.identifier]=ze(o)}):n[t.pointerId||0]=ze(t),Object.keys(n).length>1&&l.zoomable&&l.zoomOnTouch?r=sa:r=ht(t.target,Be),yi.test(r)&&Ie(this.element,dt,{originalEvent:t,action:r})!==!1&&(t.preventDefault(),this.action=r,this.cropping=!1,r===la&&(this.cropping=!0,U(this.dragBox,He)))}},cropMove:function(t){var i=this.action;if(!(this.disabled||!i)){var a=this.pointers;t.preventDefault(),Ie(this.element,ut,{originalEvent:t,action:i})!==!1&&(t.changedTouches?Y(t.changedTouches,function(l){B(a[l.identifier]||{},ze(l,!0))}):B(a[t.pointerId||0]||{},ze(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var i=this.action,a=this.pointers;t.changedTouches?Y(t.changedTouches,function(l){delete a[l.identifier]}):delete a[t.pointerId||0],i&&(t.preventDefault(),Object.keys(a).length||(this.action=""),this.cropping&&(this.cropping=!1,Ee(this.dragBox,He,this.cropped&&this.options.modal)),Ie(this.element,st,{originalEvent:t,action:i}))}}},ji={change:function(t){var i=this.options,a=this.canvasData,l=this.containerData,n=this.cropBoxData,r=this.pointers,o=this.action,h=i.aspectRatio,c=n.left,u=n.top,s=n.width,d=n.height,v=c+s,m=u+d,y=0,w=0,D=l.width,_=l.height,C=!0,S;!h&&t.shiftKey&&(h=s&&d?s/d:1),this.limited&&(y=n.minLeft,w=n.minTop,D=y+Math.min(l.width,a.width,a.left+a.width),_=w+Math.min(l.height,a.height,a.top+a.height));var b=r[Object.keys(r)[0]],f={x:b.endX-b.startX,y:b.endY-b.startY},x=function(T){switch(T){case ye:v+f.x>D&&(f.x=D-v);break;case be:c+f.x<y&&(f.x=y-c);break;case fe:u+f.y<w&&(f.y=w-u);break;case Ce:m+f.y>_&&(f.y=_-m);break}};switch(o){case bt:c+=f.x,u+=f.y;break;case ye:if(f.x>=0&&(v>=D||h&&(u<=w||m>=_))){C=!1;break}x(ye),s+=f.x,s<0&&(o=be,s=-s,c-=s),h&&(d=s/h,u+=(n.height-d)/2);break;case fe:if(f.y<=0&&(u<=w||h&&(c<=y||v>=D))){C=!1;break}x(fe),d-=f.y,u+=f.y,d<0&&(o=Ce,d=-d,u-=d),h&&(s=d*h,c+=(n.width-s)/2);break;case be:if(f.x<=0&&(c<=y||h&&(u<=w||m>=_))){C=!1;break}x(be),s-=f.x,c+=f.x,s<0&&(o=ye,s=-s,c-=s),h&&(d=s/h,u+=(n.height-d)/2);break;case Ce:if(f.y>=0&&(m>=_||h&&(c<=y||v>=D))){C=!1;break}x(Ce),d+=f.y,d<0&&(o=fe,d=-d,u-=d),h&&(s=d*h,c+=(n.width-s)/2);break;case _e:if(h){if(f.y<=0&&(u<=w||v>=D)){C=!1;break}x(fe),d-=f.y,u+=f.y,s=d*h}else x(fe),x(ye),f.x>=0?v<D?s+=f.x:f.y<=0&&u<=w&&(C=!1):s+=f.x,f.y<=0?u>w&&(d-=f.y,u+=f.y):(d-=f.y,u+=f.y);s<0&&d<0?(o=Re,d=-d,s=-s,u-=d,c-=s):s<0?(o=Fe,s=-s,c-=s):d<0&&(o=Oe,d=-d,u-=d);break;case Fe:if(h){if(f.y<=0&&(u<=w||c<=y)){C=!1;break}x(fe),d-=f.y,u+=f.y,s=d*h,c+=n.width-s}else x(fe),x(be),f.x<=0?c>y?(s-=f.x,c+=f.x):f.y<=0&&u<=w&&(C=!1):(s-=f.x,c+=f.x),f.y<=0?u>w&&(d-=f.y,u+=f.y):(d-=f.y,u+=f.y);s<0&&d<0?(o=Oe,d=-d,s=-s,u-=d,c-=s):s<0?(o=_e,s=-s,c-=s):d<0&&(o=Re,d=-d,u-=d);break;case Re:if(h){if(f.x<=0&&(c<=y||m>=_)){C=!1;break}x(be),s-=f.x,c+=f.x,d=s/h}else x(Ce),x(be),f.x<=0?c>y?(s-=f.x,c+=f.x):f.y>=0&&m>=_&&(C=!1):(s-=f.x,c+=f.x),f.y>=0?m<_&&(d+=f.y):d+=f.y;s<0&&d<0?(o=_e,d=-d,s=-s,u-=d,c-=s):s<0?(o=Oe,s=-s,c-=s):d<0&&(o=Fe,d=-d,u-=d);break;case Oe:if(h){if(f.x>=0&&(v>=D||m>=_)){C=!1;break}x(ye),s+=f.x,d=s/h}else x(Ce),x(ye),f.x>=0?v<D?s+=f.x:f.y>=0&&m>=_&&(C=!1):s+=f.x,f.y>=0?m<_&&(d+=f.y):d+=f.y;s<0&&d<0?(o=Fe,d=-d,s=-s,u-=d,c-=s):s<0?(o=Re,s=-s,c-=s):d<0&&(o=_e,d=-d,u-=d);break;case oa:this.move(f.x,f.y),C=!1;break;case sa:this.zoom(Oi(r),t),C=!1;break;case la:if(!f.x||!f.y){C=!1;break}S=ga(this.cropper),c=b.startX-S.left,u=b.startY-S.top,s=n.minWidth,d=n.minHeight,f.x>0?o=f.y>0?Oe:_e:f.x<0&&(c-=s,o=f.y>0?Re:Fe),f.y<0&&(u-=d),this.cropped||(se(this.cropBox,Q),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}C&&(n.width=s,n.height=d,n.left=c,n.top=u,this.action=o,this.renderCropBox()),Y(r,function(P){P.startX=P.endX,P.startY=P.endY})}},Xi={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&U(this.dragBox,He),se(this.cropBox,Q),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=B({},this.initialImageData),this.canvasData=B({},this.initialCanvasData),this.cropBoxData=B({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(B(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),se(this.dragBox,He),U(this.cropBox,Q)),this},replace:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),i?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,Y(this.previews,function(a){a.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,se(this.cropper,_t)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,U(this.cropper,_t)),this},destroy:function(){var t=this.element;return t[k]?(t[k]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,a=this.canvasData,l=a.left,n=a.top;return this.moveTo(Qe(t)?t:l+Number(t),Qe(i)?i:n+Number(i))},moveTo:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,a=this.canvasData,l=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(M(t)&&(a.left=t,l=!0),M(i)&&(a.top=i,l=!0),l&&this.renderCanvas(!0)),this},zoom:function(t,i){var a=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(a.width*t/a.naturalWidth,null,i)},zoomTo:function(t,i,a){var l=this.options,n=this.canvasData,r=n.width,o=n.height,h=n.naturalWidth,c=n.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&l.zoomable){var u=h*t,s=c*t;if(Ie(this.element,ct,{ratio:t,oldRatio:r/h,originalEvent:a})===!1)return this;if(a){var d=this.pointers,v=ga(this.cropper),m=d&&Object.keys(d).length?Ri(d):{pageX:a.pageX,pageY:a.pageY};n.left-=(u-r)*((m.pageX-v.left-n.left)/r),n.top-=(s-o)*((m.pageY-v.top-n.top)/o)}else Se(i)&&M(i.x)&&M(i.y)?(n.left-=(u-r)*((i.x-n.left)/r),n.top-=(s-o)*((i.y-n.top)/o)):(n.left-=(u-r)/2,n.top-=(s-o)/2);n.width=u,n.height=s,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),M(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,M(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(M(i)?i:1,t)},scale:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,a=this.imageData,l=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(M(t)&&(a.scaleX=t,l=!0),M(i)&&(a.scaleY=i,l=!0),l&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.options,a=this.imageData,l=this.canvasData,n=this.cropBoxData,r;if(this.ready&&this.cropped){r={x:n.left-l.left,y:n.top-l.top,width:n.width,height:n.height};var o=a.width/a.naturalWidth;if(Y(r,function(u,s){r[s]=u/o}),t){var h=Math.round(r.y+r.height),c=Math.round(r.x+r.width);r.x=Math.round(r.x),r.y=Math.round(r.y),r.width=c-r.x,r.height=h-r.y}}else r={x:0,y:0,width:0,height:0};return i.rotatable&&(r.rotate=a.rotate||0),i.scalable&&(r.scaleX=a.scaleX||1,r.scaleY=a.scaleY||1),r},setData:function(t){var i=this.options,a=this.imageData,l=this.canvasData,n={};if(this.ready&&!this.disabled&&Se(t)){var r=!1;i.rotatable&&M(t.rotate)&&t.rotate!==a.rotate&&(a.rotate=t.rotate,r=!0),i.scalable&&(M(t.scaleX)&&t.scaleX!==a.scaleX&&(a.scaleX=t.scaleX,r=!0),M(t.scaleY)&&t.scaleY!==a.scaleY&&(a.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var o=a.width/a.naturalWidth;M(t.x)&&(n.left=t.x*o+l.left),M(t.y)&&(n.top=t.y*o+l.top),M(t.width)&&(n.width=t.width*o),M(t.height)&&(n.height=t.height*o),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?B({},this.containerData):{}},getImageData:function(){return this.sized?B({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&Y(["left","top","width","height","naturalWidth","naturalHeight"],function(a){i[a]=t[a]}),i},setCanvasData:function(t){var i=this.canvasData,a=i.aspectRatio;return this.ready&&!this.disabled&&Se(t)&&(M(t.left)&&(i.left=t.left),M(t.top)&&(i.top=t.top),M(t.width)?(i.width=t.width,i.height=t.width/a):M(t.height)&&(i.height=t.height,i.width=t.height*a),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,i;return this.ready&&this.cropped&&(i={left:t.left,top:t.top,width:t.width,height:t.height}),i||{}},setCropBoxData:function(t){var i=this.cropBoxData,a=this.options.aspectRatio,l,n;return this.ready&&this.cropped&&!this.disabled&&Se(t)&&(M(t.left)&&(i.left=t.left),M(t.top)&&(i.top=t.top),M(t.width)&&t.width!==i.width&&(l=!0,i.width=t.width),M(t.height)&&t.height!==i.height&&(n=!0,i.height=t.height),a&&(l?i.height=i.width/a:n&&(i.width=i.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,a=Ai(this.image,this.imageData,i,t);if(!this.cropped)return a;var l=this.getData(t.rounded),n=l.x,r=l.y,o=l.width,h=l.height,c=a.width/Math.floor(i.naturalWidth);c!==1&&(n*=c,r*=c,o*=c,h*=c);var u=o/h,s=ge({aspectRatio:u,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),d=ge({aspectRatio:u,width:t.minWidth||0,height:t.minHeight||0},"cover"),v=ge({aspectRatio:u,width:t.width||(c!==1?a.width:o),height:t.height||(c!==1?a.height:h)}),m=v.width,y=v.height;m=Math.min(s.width,Math.max(d.width,m)),y=Math.min(s.height,Math.max(d.height,y));var w=document.createElement("canvas"),D=w.getContext("2d");w.width=De(m),w.height=De(y),D.fillStyle=t.fillColor||"transparent",D.fillRect(0,0,m,y);var _=t.imageSmoothingEnabled,C=_===void 0?!0:_,S=t.imageSmoothingQuality;D.imageSmoothingEnabled=C,S&&(D.imageSmoothingQuality=S);var b=a.width,f=a.height,x=n,P=r,T,X,oe,J,ne,te;x<=-o||x>b?(x=0,T=0,oe=0,ne=0):x<=0?(oe=-x,x=0,T=Math.min(b,o+x),ne=T):x<=b&&(oe=0,T=Math.min(o,b-x),ne=T),T<=0||P<=-h||P>f?(P=0,X=0,J=0,te=0):P<=0?(J=-P,P=0,X=Math.min(f,h+P),te=X):P<=f&&(J=0,X=Math.min(h,f-P),te=X);var z=[x,P,T,X];if(ne>0&&te>0){var ce=m/o;z.push(oe*ce,J*ce,ne*ce,te*ce)}return D.drawImage.apply(D,[a].concat(ra(z.map(function(we){return Math.floor(De(we))})))),w},setAspectRatio:function(t){var i=this.options;return!this.disabled&&!Qe(t)&&(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,a=this.dragBox,l=this.face;if(this.ready&&!this.disabled){var n=t===xt,r=i.movable&&t===ua;t=n||r?t:da,i.dragMode=t,Le(a,Be,t),Ee(a,rt,n),Ee(a,lt,r),i.cropBoxMovable||(Le(l,Be,t),Ee(l,rt,n),Ee(l,lt,r))}return this}},qi=de.Cropper,ya=(function(){function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(oi(this,e),!t||!wi.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=B({},$t,Se(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return si(e,[{key:"init",value:function(){var i=this.element,a=i.tagName.toLowerCase(),l;if(!i[k]){if(i[k]=this,a==="img"){if(this.isImg=!0,l=i.getAttribute("src")||"",this.originalUrl=l,!l)return;l=i.src}else a==="canvas"&&window.HTMLCanvasElement&&(l=i.toDataURL());this.load(l)}}},{key:"load",value:function(i){var a=this;if(i){this.url=i,this.imageData={};var l=this.element,n=this.options;if(!n.rotatable&&!n.scalable&&(n.checkOrientation=!1),!n.checkOrientation||!window.ArrayBuffer){this.clone();return}if(bi.test(i)){xi.test(i)?this.read(Li(i)):this.clone();return}var r=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=r,r.onabort=o,r.onerror=o,r.ontimeout=o,r.onprogress=function(){r.getResponseHeader("content-type")!==Vt&&r.abort()},r.onload=function(){a.read(r.response)},r.onloadend=function(){a.reloading=!1,a.xhr=null},n.checkCrossOrigin&&Ut(i)&&l.crossOrigin&&(i=Wt(i)),r.open("GET",i,!0),r.responseType="arraybuffer",r.withCredentials=l.crossOrigin==="use-credentials",r.send()}}},{key:"read",value:function(i){var a=this.options,l=this.imageData,n=$i(i),r=0,o=1,h=1;if(n>1){this.url=Vi(i,Vt);var c=Yi(n);r=c.rotate,o=c.scaleX,h=c.scaleY}a.rotatable&&(l.rotate=r),a.scalable&&(l.scaleX=o,l.scaleY=h),this.clone()}},{key:"clone",value:function(){var i=this.element,a=this.url,l=i.crossOrigin,n=a;this.options.checkCrossOrigin&&Ut(a)&&(l||(l="anonymous"),n=Wt(a)),this.crossOrigin=l,this.crossOriginUrl=n;var r=document.createElement("img");l&&(r.crossOrigin=l),r.src=n||a,r.alt=i.alt||"The image to crop",this.image=r,r.onload=this.start.bind(this),r.onerror=this.stop.bind(this),U(r,Ft),i.parentNode.insertBefore(r,i.nextSibling)}},{key:"start",value:function(){var i=this,a=this.image;a.onload=null,a.onerror=null,this.sizing=!0;var l=de.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(de.navigator.userAgent),n=function(c,u){B(i.imageData,{naturalWidth:c,naturalHeight:u,aspectRatio:c/u}),i.initialImageData=B({},i.imageData),i.sizing=!1,i.sized=!0,i.build()};if(a.naturalWidth&&!l){n(a.naturalWidth,a.naturalHeight);return}var r=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=r,r.onload=function(){n(r.width,r.height),l||o.removeChild(r)},r.src=a.src,l||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(r))}},{key:"stop",value:function(){var i=this.image;i.onload=null,i.onerror=null,i.parentNode.removeChild(i),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var i=this.element,a=this.options,l=this.image,n=i.parentNode,r=document.createElement("div");r.innerHTML=Ci;var o=r.querySelector(".".concat(k,"-container")),h=o.querySelector(".".concat(k,"-canvas")),c=o.querySelector(".".concat(k,"-drag-box")),u=o.querySelector(".".concat(k,"-crop-box")),s=u.querySelector(".".concat(k,"-face"));this.container=n,this.cropper=o,this.canvas=h,this.dragBox=c,this.cropBox=u,this.viewBox=o.querySelector(".".concat(k,"-view-box")),this.face=s,h.appendChild(l),U(i,Q),n.insertBefore(o,i.nextSibling),se(l,Ft),this.initPreview(),this.bind(),a.initialAspectRatio=Math.max(0,a.initialAspectRatio)||NaN,a.aspectRatio=Math.max(0,a.aspectRatio)||NaN,a.viewMode=Math.max(0,Math.min(3,Math.round(a.viewMode)))||0,U(u,Q),a.guides||U(u.getElementsByClassName("".concat(k,"-dashed")),Q),a.center||U(u.getElementsByClassName("".concat(k,"-center")),Q),a.background&&U(o,"".concat(k,"-bg")),a.highlight||U(s,vi),a.cropBoxMovable&&(U(s,lt),Le(s,Be,bt)),a.cropBoxResizable||(U(u.getElementsByClassName("".concat(k,"-line")),Q),U(u.getElementsByClassName("".concat(k,"-point")),Q)),this.render(),this.ready=!0,this.setDragMode(a.dragMode),a.autoCrop&&this.crop(),this.setData(a.data),G(a.ready)&&ie(i,kt,a.ready,{once:!0}),Ie(i,kt)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var i=this.cropper.parentNode;i&&i.removeChild(this.cropper),se(this.element,Q)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=qi,e}},{key:"setDefaults",value:function(i){B($t,Se(i)&&i)}}])})();B(ya.prototype,Ui,Wi,zi,Hi,ji,Xi);const Gi=["src"];var Ki=A({name:"ProCropper",__name:"cropper",props:{imgSrc:{type:String,default:""},cropperWidth:{type:Number,default:void 0},cropperHeight:{type:Number,default:void 0},cropperProps:{type:Object,default:()=>({})}},setup(e,{expose:t}){let i;const a=ii("cropper"),l=e,n=Z(1),r=Z(),o=c=>{let u;c==="minus"?u=n.value-.1:u=n.value+.1,i.zoom(u-n.value),n.value=u},h=(c,u)=>i?i.getCroppedCanvas(u).toDataURL(c.type):void 0;return Jt(()=>{var c;r.value&&(i=new ya(r.value,(c=l.cropperProps)!=null?c:{}))}),t({getCroppedCanvas:h}),(c,u)=>(Ja(),Za("div",{class:Ue(Me(a))},[Pe("div",{class:Ue(`${Me(a)}-container`)},[Pe("img",{ref_key:"imgRef",ref:r,src:e.imgSrc,class:Ue(`${Me(a)}-img`),alt:""},null,10,Gi)],2),Pe("div",{class:Ue(`${Me(a)}-control`)},[Pe("button",{onClick:u[0]||(u[0]=s=>o("minus"))},"-"),g(Me(Kt),{value:n.value,"onUpdate:value":u[1]||(u[1]=s=>n.value=s),min:.5,max:3,step:.1},null,8,["value"]),Pe("button",{onClick:u[2]||(u[2]=s=>o("plus"))},"+")],2)],2))}});const Qi=ni(Ki);function zt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var j=A({name:"FieldReadonly",inheritAttrs:!1,props:{text:{type:[String,Number],default:void 0},theme:{type:String,default:void 0},customUi:{type:Boolean,default:void 0},tooltip:{type:[Boolean,String],default:void 0},copy:{type:Boolean,default:void 0},emptyText:{type:String,default:"-"},ellipsis:{type:Boolean,default:!0},autoLine:{type:Boolean,default:!1}},setup(e,{attrs:t}){const{prefixCls:i,customUi:a}=pe(),l=p(()=>{var o,h;return(h=(o=e.customUi)!=null?o:a.value)!=null?h:!0}),n=p(()=>({[`${i}-readonly`]:!0,[`${i}-readonly-custom-ui`]:l.value,[`${i}-readonly-ellipsis`]:e.ellipsis,[`${i}-readonly-autoline`]:e.autoLine,[`${t.class}`]:!0})),r=p(()=>e.text===void 0||e.text===null||e.text===""?e.emptyText:e.text);return()=>{const o=g("div",{class:n.value,style:t?.style},[g("span",{class:`${i}-readonly-text`},[r.value]),l.value&&e.copy&&g("span",null,[g(Ea,{style:"color: rgb(134, 144, 156); font-size:12px"},null)])]);if(e.copy&&e.text)return g(Sa,{text:e.text},zt(o)?o:{default:()=>[o]});if(e.tooltip){const h=typeof e.tooltip=="string"?e.tooltip:e.text;if(h)return g(Da,{placement:"topLeft",title:h},zt(o)?o:{default:()=>[o]})}return o}}});const Zi=["addonAfter","addonBefore","suffix","prefix"];var Ji=A({name:"FieldText",props:{...L(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},suffix:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:String}},setup(e,{attrs:t}){const i=H(),a=W(),l=p({get:()=>e.value,set:r=>{var o;(o=e.onChange)==null||o.call(e,r)}}),n=p(()=>{const r={};return Zi.forEach(o=>{const h=R(e[o],a);h&&(r[o]=()=>g(N,{vnode:h},null))}),r});return()=>e.readonly?g(j,I({text:l.value,class:t.class,style:t.style},e.readonlyProps),null):g(vt,I({value:l.value,"onUpdate:value":r=>l.value=r},t,{placeholder:e.placeholder||i.getMessage("form.inputPlaceholder","请输入")}),n.value)}});const en=["addonAfter","addonBefore","prefix","upIcon","downIcon"];var tn=A({name:"FieldDigit",props:{...L(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},upIcon:{type:String,default:""},downIcon:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:String}},setup(e,{attrs:t}){const i=H(),a=W(),l=p(()=>{const r={};return en.forEach(o=>{const h=R(e[o],a);h&&(r[o]=()=>g(N,{vnode:h},null))}),r}),n=r=>{var o;(o=e.onChange)==null||o.call(e,r)};return()=>e.readonly?g(j,I({text:e.value,class:t.class,style:t.style},e.readonlyProps),null):g(Je,I({value:e.value},t,{placeholder:e.placeholder||i.getMessage("form.inputPlaceholder","请输入"),onChange:n}),l.value)}});const an=["addonAfter","addonBefore","prefix","upIcon","downIcon"];var nn=A({name:"FieldDigitRange",inheritAttrs:!1,props:{...L(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},upIcon:{type:String,default:""},downIcon:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:[String,Array],default:()=>[]},separator:{type:String,default:"~"},separatorWidth:{type:Number,default:30}},emits:["update:value","change"],setup(e,{attrs:t}){const i=H(),a=W(),l=mt.useInjectFormItemContext(),n=p(()=>aa(t,["class","style"])),r=p(()=>{const s={};return an.forEach(d=>{const v=R(e[d],a);v&&(s[d]=()=>g(N,{vnode:v},null))}),s}),o=p(()=>{var s,d,v;if((s=e.value)!=null&&s.length)return`${(d=e.value)==null?void 0:d[0]} - ${(v=e.value)==null?void 0:v[1]}`}),h=s=>(Array.isArray(e.placeholder)?e.placeholder[s]:e.placeholder)||i.getMessage("form.inputPlaceholder","请输入"),c=s=>{var d,v,m,y;if(Array.isArray(e.value)){const[w,D]=e.value;typeof w=="number"&&typeof D=="number"&&w>D?((d=e.onChange)==null||d.call(e,[D,w]),l.onFieldChange()):w===void 0&&D===void 0&&((v=e.onChange)==null||v.call(e,void 0),l.onFieldChange())}(y=(m=n.value)==null?void 0:m.onBlur)==null||y.call(m,s)},u=(s,d)=>{var v;const m=[...e.value||[]];m[s]=d===null?void 0:d,(v=e.onChange)==null||v.call(e,m),l.onFieldChange()};return()=>e.readonly?g(j,I({text:o.value,class:t.class,style:t.style},e.readonlyProps),null):g(Ia.Compact,{class:t.class,style:t.style},{default:()=>{var s,d,v,m;return[g(Je,I(n.value,{value:(s=e.value)==null?void 0:s[0],style:{width:`calc((100% - ${e.separatorWidth}px) / 2)`,marginInlineEnd:"0!important"},placeholder:h(0),defaultValue:(d=n.value.defaultValue)==null?void 0:d[0],onBlur:c,onChange:y=>u(0,y)}),r.value),g(vt,{style:{width:e.separatorWidth+"px",textAlign:"center",borderInlineStart:"0px",borderInlineEnd:"0px",pointerEvents:"none"},placeholder:e.separator,disabled:!0},null),g(Je,I(n.value,{value:(v=e.value)==null?void 0:v[1],id:`${n.value.id}-1`,style:{width:`calc((100% - ${e.separatorWidth}px) / 2)`},placeholder:h(1),defaultValue:(m=n.value.defaultValue)==null?void 0:m[1],onChange:y=>u(1,y),onBlur:c}),r.value)]}})}}),rn=A({name:"FieldTextarea",props:{...L(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},suffix:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:String}},setup(e,{attrs:t}){const i=H(),a=p({get:()=>e.value,set:l=>{var n;(n=e.onChange)==null||n.call(e,l)}});return()=>e.readonly?g(j,I({text:a.value,class:t.class,style:t.style},e.readonlyProps),null):g(Ta,I({value:a.value,"onUpdate:value":l=>a.value=l},t,{placeholder:e.placeholder||i.getMessage("form.inputPlaceholder","请输入")}),null)}});const ln=["addonAfter","addonBefore","suffix","prefix"];var on=A({name:"FieldPassword",props:{...L(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},suffix:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:String}},setup(e,{attrs:t}){const i=H(),a=W(),l=p({get:()=>e.value,set:r=>{var o;(o=e.onChange)==null||o.call(e,r)}}),n=p(()=>{const r={};return ln.forEach(o=>{const h=R(e[o],a);h&&(r[o]=()=>g(N,{vnode:h},null))}),r});return()=>g(vt.Password,I({value:l.value,"onUpdate:value":r=>l.value=r},t,{placeholder:e.placeholder||i.getMessage("form.inputPlaceholder","请输入")}),n.value)}});function sn(e){const t=Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase();return t==="string"&&typeof e=="object"?"object":e===null?"null":e===void 0?"undefined":t}const un=e=>sn(e)==="map"?e:new Map(Object.entries(e??{})),dn=e=>{const t=[],i=un(e);return i.forEach((a,l)=>{var n;const r=(n=i.get(l))!=null?n:i.get(`${l}`);if(r){if(typeof r=="object"&&r?.text){t.push({text:r?.text,value:l,label:r?.text,disabled:r.disabled});return}t.push({text:r,value:l,label:r})}}),t},ft=e=>e?.map(t=>je(t)?(t?.text&&(t.label=t?.text),Array.isArray(t.options)&&t.options.length&&(t.options=ft(t.options)),Array.isArray(t.children)&&t.children.length&&(t.children=ft(t.children)),t):{label:t,value:t});function Ve({options:e,request:t,params:i,valueEnum:a,fieldNames:l,dependencies:n,paginationConfig:r}){const{formData:o}=pe(),{index:h,rowData:c}=Gt(),u=Z(!0),s=Z(0),d=p(()=>K(e,o.value,c?.value)),v=Z([]),m=p(()=>l??{label:"label",value:"value",children:"children"}),[y,w]=xa(()=>{var S;return(S=r?.value)!=null?S:{}}),D=p(()=>{const S={};if(i){const b=K(i,o.value);et(S,b)}return Array.isArray(n)&&(n.forEach(b=>{const f=Qt(o.value,b);f&&(Array.isArray(b)?tt(S,b.join("-"),f):tt(S,b,f))}),r?.value&&w({...y?.value,current:1})),y?.value&&et(S,y?.value),S});ve([()=>a,()=>d.value],()=>{var S;if(Array.isArray(d.value)&&((S=d.value)==null?void 0:S.length)>0)v.value=ft(d.value);else{const b=K(a,o.value);v.value=dn(b)}},{immediate:!0});const _=wa({request:t}),C=Pa(async()=>{var S;u.value=!0;const b=await _(D.value,h?.value);if(Array.isArray(b))v.value=b.map(f=>(f?.text&&(f.label=f?.text),f));else if(je(b)){const{success:f,total:x,data:P}=b;f&&(r?.value?(s.value=x,((S=y?.value)==null?void 0:S.current)===1?v.value=P.map(T=>(T?.text&&(T.label=T?.text),T)):v.value=[...v.value,...P.map(T=>(T?.text&&(T.label=T?.text),T))]):v.value=P.map(T=>(T?.text&&(T.label=T?.text),T)))}u.value=!1},200);return ve(D,()=>{t&&C()},{immediate:!0}),Jt(()=>{t||(u.value=!1)}),{loading:u,total:s,fieldNames:m,mergeOptions:v,requestOptions:C,innerParams:y,setInnerParams:w}}const cn=["menuItemSelectedIcon","clearIcon","dropdownRender","maxTagPlaceholder","notFoundContent","option","removeIcon","tagRender","suffixIcon"];var hn=A({name:"FieldSelect",inheritAttrs:!1,props:{...L(),menuItemSelectedIcon:{type:String,default:""},clearIcon:{type:String,default:""},dropdownRender:{type:String,default:""},maxTagPlaceholder:{type:String,default:""},notFoundContent:{type:String,default:""},option:{type:String,default:""},removeIcon:{type:String,default:""},suffixIcon:{type:String,default:""},tagRender:{type:String,default:""},placeholder:{type:String},pagination:{type:[Boolean,Object],default:!1},showSearch:{type:Boolean,default:!1},filterOption:Function,mode:{type:String,default:void 0}},setup(e,{attrs:t,expose:i}){const a=H(),l=W(),n=p(()=>e.pagination?e.pagination===!0?{current:1,pageSize:10}:{current:e.pagination.current||1,pageSize:e.pagination.pageSize||10}:null),{mergeOptions:r,loading:o,fieldNames:h,requestOptions:c,total:u,innerParams:s,setInnerParams:d}=Ve({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,fieldNames:t.fieldNames,params:e.params,paginationConfig:n}),v=p(()=>e.request&&n.value?()=>!0:e.filterOption?e.filterOption:(b,f)=>f.label.toLowerCase().indexOf(b.toLowerCase())>=0),m=p(()=>{if(!(e.request&&o.value))return e.value}),y=p(()=>{var b;if(!m.value)return;if(Array.isArray(m.value))return r.value.filter(x=>t.labelInValue?m.value.find(P=>P.value===x.value):m.value.includes(x.value)).map(x=>{var P;return(P=x.label)!=null?P:x.text}).join("，");const f=r.value.find(x=>t.labelInValue?x.value===m.value.value:x.value===m.value);return(b=f?.label)!=null?b:f?.text}),w=p(()=>{const b={};return cn.forEach(f=>{const x=R(e[f],l);x&&(b[f]=P=>g(N,{vnode:x,props:P},null))}),b}),D=b=>typeof b>"u"?e.mode==="multiple"||e.mode==="tags"?[]:null:b,_=(b,f)=>{var x;(x=e.onChange)==null||x.call(e,D(b),f)},C=b=>{var f,x;n.value&&(d({keyword:b,current:1,pageSize:n.value.pageSize}),(Array.isArray(m.value)?(f=m.value)!=null&&f.length:m.value)&&((x=e.onChange)==null||x.call(e,D())))},S=b=>{if(!n.value)return;const{target:f}=b;f.scrollTop+f.offsetHeight===f.scrollHeight&&r.value.length<u.value&&d({...s.value,current:s.value.current+1})};return i({refresh:()=>{e.request&&c()}}),()=>e.readonly?g(j,I({text:y.value,class:t.class,style:t.style},e.readonlyProps),null):g(Ma,I({value:m.value},t,{style:{minWidth:"120px"},mode:e.mode,fieldNames:h.value,loading:o.value,filterOption:v.value,placeholder:e.placeholder||a.getMessage("form.selectPlaceholder","请选择"),options:r.value,showSearch:e.showSearch,onChange:_,onPopupScroll:S,onSearch:e.showSearch?C:void 0}),w.value)}});const fn=["maxTagPlaceholder","notFoundContent","searchPlaceholder","suffixIcon","tagRender","title"];var vn=A({name:"FieldTreeSelect",props:{...L(),maxTagPlaceholder:{type:String,default:""},notFoundContent:{type:String,default:""},searchPlaceholder:{type:String,default:""},suffixIcon:{type:String,default:""},tagRender:{type:String,default:""},title:{type:String,default:""},placeholder:{type:String},treeCheckable:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0}},setup(e,{attrs:t}){const i=H(),a=W(),{mergeOptions:l,loading:n,fieldNames:r}=Ve({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,fieldNames:t.fieldNames,params:e.params}),o=p(()=>{if(!(e.request&&n.value))return e.value}),h=p(()=>{var d;if(!o.value)return;if(Array.isArray(o.value))return o.value.length?l.value.filter(m=>o.value.includes(m.value)).map(m=>{var y;return(y=m.label)!=null?y:m.text}).join("，"):void 0;const v=l.value.find(m=>m.value===o.value);return(d=v?.label)!=null?d:v?.text}),c=p(()=>{const d={};return fn.forEach(v=>{const m=R(e[v],a);m&&(d[v]=y=>g(N,{vnode:m,props:y},null))}),d}),u=d=>typeof d>"u"?e.multiple||e.treeCheckable?[]:null:d,s=(d,v)=>{var m;(m=e.onChange)==null||m.call(e,u(d),v)};return()=>e.readonly?g(j,I({text:h.value,class:t.class,style:t.style},e.readonlyProps),null):g(_a,I({value:o.value},t,{style:{minWidth:"160px"},treeCheckable:e.treeCheckable,multiple:e.multiple,fieldNames:r.value,loading:n.value,placeholder:e.placeholder||i.getMessage("form.selectPlaceholder","请选择"),treeData:l.value,onChange:s}),c.value)}}),mn=A({name:"FieldCheckbox",props:{...L()},emits:["change"],setup(e,{attrs:t}){const i=p(()=>e.value?"是":"否"),a=l=>{var n;(n=e.onChange)==null||n.call(e,l.target.checked)};return()=>e.readonly?g(j,I({text:i.value,class:t.class,style:t.style},e.readonlyProps),null):g(Fa,I({checked:e.value},t,{onChange:a}),null)}}),gn=A({name:"FieldCheckboxGroup",props:{...L()},setup(e,{attrs:t}){const{disabled:i}=pe(),{mergeOptions:a,loading:l}=Ve({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,params:e.params}),n=p(()=>{var o;if(!e.value)return;if(Array.isArray(e.value))return e.value.length?a.value.filter(c=>e.value.includes(c.value)).map(c=>{var u;return(u=c.label)!=null?u:c.text}).join("，"):void 0;const h=a.value.find(c=>c.value===e.value);return(o=h?.label)!=null?o:h?.text}),r=o=>{var h;(h=e.onChange)==null||h.call(e,o)};return()=>{var o;return e.readonly?g(j,I({text:n.value,class:t.class,style:t.style},e.readonlyProps),null):g(Oa,I({value:e.value},t,{disabled:(o=t.disabled)!=null?o:i?.value,options:a.value,onChange:r}),{default:()=>[l.value&&g(gt,{style:"color: rgba(0, 0, 0, 0.25);"},null)]})}}});function pn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var yn=A({name:"FieldRadioGroup",props:{...L(),radioLabel:{type:String,default:""}},setup(e,{attrs:t}){const{formData:i}=pe(),a=W(),{mergeOptions:l,loading:n}=Ve({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,params:e.params}),r=p(()=>{var c;if(!e.value)return;const u=l.value.find(s=>s.value===e.value);return(c=u?.label)!=null?c:u?.text}),o=p(()=>R(e.radioLabel,a)),h=c=>{var u;(u=e.onChange)==null||u.call(e,c.target.value)};return()=>{var c;if(e.readonly)return g(j,I({text:r.value,class:t.class,style:t.style},e.readonlyProps),null);if(((c=l.value)==null?void 0:c.length)>0){let u;return g(Na,I({value:e.value},t,{onChange:h}),pn(u=l.value.map(s=>{var d;return g(Ra,{value:s.value,key:(d=s.value)==null?void 0:d.toString(),disabled:s.disabled},{default:()=>[o.value?g(N,{vnode:o.value,props:{option:s,value:e.value,formData:i.value}},null):s.label]})}))?u:{default:()=>[u]})}else return n.value?g(gt,{style:"color: rgba(0, 0, 0, 0.25);"},null):null}}});const bn=["expandIcon","clearIcon","displayRender","maxTagPlaceholder","notFoundContent","removeIcon","tagRender","suffixIcon"];var xn=A({name:"FieldCascader",props:{...L(),expandIcon:{type:String,default:""},clearIcon:{type:String,default:""},displayRender:{type:String,default:""},maxTagPlaceholder:{type:String,default:""},notFoundContent:{type:String,default:""},removeIcon:{type:String,default:""},suffixIcon:{type:String,default:""},tagRender:{type:String,default:""},placeholder:{type:String},multiple:{type:Boolean,default:void 0}},setup(e,{attrs:t}){const i=H(),a=W(),{mergeOptions:l,loading:n,fieldNames:r}=Ve({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,fieldNames:t.fieldNames,params:e.params}),o=p(()=>{if(!(e.request&&n.value))return e.value}),h=p(()=>{var d;if(!o.value)return;if(Array.isArray(o.value))return l.value.filter(m=>o.value.includes(m.value)).map(m=>{var y;return(y=m.label)!=null?y:m.text}).join("，");const v=l.value.find(m=>m.value===o.value);return(d=v?.label)!=null?d:v?.text}),c=p(()=>{const d={};return bn.forEach(v=>{const m=R(e[v],a);m&&(d[v]=y=>g(N,{vnode:m,props:y},null))}),d}),u=d=>typeof d>"u"?e.multiple?[]:null:d,s=(d,v)=>{var m;(m=e.onChange)==null||m.call(e,u(d),v)};return()=>e.readonly?g(j,I({text:h.value,class:t.class,style:t.style},e.readonlyProps),null):g(Aa,I({value:o.value},t,{style:{minWidth:"100px"},multiple:e.multiple,fieldNames:r.value,loading:n.value,placeholder:e.placeholder||i.getMessage("form.selectPlaceholder","请选择"),options:l.value,onChange:s}),c.value)}});const wn=["checkedChildren","unCheckedChildren"];var Cn=A({name:"FieldSwitch",props:{...L(),checkedChildren:{type:String},unCheckedChildren:{type:String}},setup(e,{attrs:t}){const i=H(),a=W(),l=p(()=>!e.value||e.value===t.unCheckedValue?e.unCheckedChildren||i.getMessage("switch.open","打开"):e.value||e.value===t.checkedValue?e.checkedChildren||i.getMessage("switch.close","关闭"):""),n=p(()=>{const o={};return wn.forEach(h=>{const c=R(e[h],a);c&&(o[h]=u=>g(N,{vnode:c,props:u},null))}),o}),r=(o,h)=>{var c;(c=e.onChange)==null||c.call(e,o,h)};return()=>e.readonly?g(j,I({text:l.value,class:t.class,style:t.style},e.readonlyProps),null):g(ka,I({checked:e.value},t,{onChange:r}),n.value)}});const Sn=["mark"];var En=A({name:"FieldSlider",props:{...L(),mark:{type:String,default:""}},setup(e,{attrs:t}){const i=W(),a=p(()=>{const n={};return Sn.forEach(r=>{const o=R(e[r],i);o&&(n[r]=()=>g(N,{vnode:o},null))}),n}),l=n=>{var r;(r=e.onChange)==null||r.call(e,n)};return()=>e.readonly?g(j,I({text:e.value,class:t.class,style:t.style},e.readonlyProps),null):g(Kt,I({value:e.value},t,{style:{minWidth:"120px"},onChange:l}),a.value)}});const Dn=["character"];var In=A({name:"FieldRate",props:{...L(),character:{type:String,default:""}},setup(e,{attrs:t}){const i=W(),a=p(()=>{const n={};return Dn.forEach(r=>{const o=R(e[r],i);o&&(n[r]=()=>g(N,{vnode:o},null))}),n}),l=n=>{var r;(r=e.onChange)==null||r.call(e,n)};return()=>e.readonly?g(j,I({text:e.value,class:t.class,style:t.style},e.readonlyProps),null):g(Ba,I({value:e.value},t,{style:{minWidth:"120px"},onChange:l}),a.value)}});le.extend(La);const Ht=e=>!!e?._isAMomentObject,$e=(e,t)=>ei(e)||le.isDayjs(e)||Ht(e)?Ht(e)?le(e):e:Array.isArray(e)?e.map(i=>$e(i,t)):typeof e=="number"?le(e):le(e,t),ue={date:"YYYY-MM-DD",year:"YYYY",month:"YYYY-MM",week:"YYYY-wo",quarter:"YYYY-QQ",time:"HH:mm:ss"},Tn=["dateRender","nextIcon","prevIcon","suffixIcon","superNextIcon","superPrevIcon","renderExtraFooter","monthCellRender"];var Pn=A({name:"FieldDatePicker",props:{...L(),dateRender:{type:String,default:""},nextIcon:{type:String,default:""},prevIcon:{type:String,default:""},suffixIcon:{type:String,default:""},superNextIcon:{type:String,default:""},superPrevIcon:{type:String,default:""},renderExtraFooter:{type:String,default:""},monthCellRender:{type:String,default:""},placeholder:{type:String},format:{type:[String,Function],default:void 0},picker:{type:String,default:"date"},valueFormat:{type:String,default:void 0},showTime:{type:[Boolean,Object],default:void 0}},setup(e,{attrs:t}){const i=H(),a=W(),l=p(()=>{var s;const d=ue[e.picker];return e.showTime===!0?d+" "+ue.time:je(e.showTime)?d+" "+((s=e.showTime.format)!=null?s:ue.time):d}),n=p(()=>{var s;return(s=K(e.format))!=null?s:l.value}),r=p(()=>{var s;return(s=e.valueFormat)!=null?s:l.value}),o=p(()=>$e(e.value,n.value)),h=p(()=>{if(o.value)return le(o.value).format(r.value)}),c=p(()=>{const s={};return Tn.forEach(d=>{const v=R(e[d],a);v&&(s[d]=()=>g(N,{vnode:v},null))}),s}),u=(s,d)=>{var v;(v=e.onChange)==null||v.call(e,s,d)};return()=>e.readonly?g(j,I({text:h.value,class:t.class,style:t.style},e.readonlyProps),null):g(Va,I({value:o.value},t,{format:n.value,picker:e.picker,showTime:e.showTime,valueFormat:r.value,placeholder:e.placeholder||i.getMessage("form.selectPlaceholder","请选择"),onChange:u}),c.value)}});const Mn=["dateRender","nextIcon","prevIcon","suffixIcon","superNextIcon","superPrevIcon","renderExtraFooter","separator"];var _n=A({name:"FieldDateRangePicker",props:{...L(),dateRender:{type:String,default:""},nextIcon:{type:String,default:""},prevIcon:{type:String,default:""},suffixIcon:{type:String,default:""},superNextIcon:{type:String,default:""},superPrevIcon:{type:String,default:""},renderExtraFooter:{type:String,default:""},separator:{type:String,default:""},placeholder:{type:Array,default:()=>[]},format:{type:[String,Function],default:void 0},picker:{type:String,default:"date"},valueFormat:{type:String,default:void 0},showTime:{type:[Boolean,Object],default:void 0}},setup(e,{attrs:t}){const i=H(),a=W(),l=p(()=>{var s;const d=ue[e.picker];return e.showTime===!0?d+" "+ue.time:je(e.showTime)?d+" "+((s=e.showTime.format)!=null?s:ue.time):d}),n=p(()=>{var s;return(s=K(e.format))!=null?s:l.value}),r=p(()=>{var s;return(s=e.valueFormat)!=null?s:l.value}),o=p(()=>$e(e.value,n.value)),h=p(()=>{var s;if((s=o.value)!=null&&s.length)return`${le(o.value[0]).format(r.value)} - ${le(o.value[1]).format(r.value)}`}),c=p(()=>{const s={};return Mn.forEach(d=>{const v=R(e[d],a);v&&(s[d]=()=>g(N,{vnode:v},null))}),s}),u=(s,d)=>{var v;(v=e.onChange)==null||v.call(e,s,d)};return()=>{var s;return e.readonly?g(j,I({text:h.value,class:t.class,style:t.style},e.readonlyProps),null):g($a,I({value:o.value},t,{format:n.value,picker:e.picker,showTime:e.showTime,valueFormat:r.value,placeholder:((s=e.placeholder)==null?void 0:s.length)===2?e.placeholder:[i.getMessage("form.selectPlaceholder","请选择"),i.getMessage("form.selectPlaceholder","请选择")],onChange:u}),c.value)}}});const Fn=["clearIcon","renderExtraFooter","suffixIcon"];var On=A({name:"FieldTimePicker",props:{...L(),clearIcon:{type:String,default:""},renderExtraFooter:{type:String,default:""},suffixIcon:{type:String,default:""},placeholder:{type:String},format:{type:String,default:void 0},valueFormat:{type:String,default:void 0}},setup(e,{attrs:t}){const i=H(),a=W(),l=p(()=>{var u;return(u=e.format)!=null?u:ue.time}),n=p(()=>{var u;return(u=e.valueFormat)!=null?u:ue.time}),r=p(()=>$e(e.value,l.value)),o=p(()=>{if(r.value)return le(r.value).format(n.value)}),h=p(()=>{const u={};return Fn.forEach(s=>{const d=R(e[s],a);d&&(u[s]=()=>g(N,{vnode:d},null))}),u}),c=(u,s)=>{var d;(d=e.onChange)==null||d.call(e,u,s)};return()=>e.readonly?g(j,I({text:o.value,class:t.class,style:t.style},e.readonlyProps),null):g(Ya,I({value:r.value},t,{format:l.value,valueFormat:n.value,placeholder:e.placeholder||i.getMessage("form.selectPlaceholder","请选择"),onChange:c}),h.value)}});const Rn=["dateRender","nextIcon","prevIcon","suffixIcon","superNextIcon","superPrevIcon","renderExtraFooter","separator"];var Nn=A({name:"FieldTimeRangePicker",props:{...L(),dateRender:{type:String,default:""},nextIcon:{type:String,default:""},prevIcon:{type:String,default:""},suffixIcon:{type:String,default:""},superNextIcon:{type:String,default:""},superPrevIcon:{type:String,default:""},renderExtraFooter:{type:String,default:""},separator:{type:String,default:""},placeholder:{type:Array,default:()=>[]},format:{type:String,default:void 0},valueFormat:{type:String,default:void 0}},setup(e,{attrs:t}){const i=H(),a=W(),l=p(()=>{var u;return(u=e.format)!=null?u:ue.time}),n=p(()=>{var u;return(u=e.valueFormat)!=null?u:ue.time}),r=p(()=>$e(e.value,l.value)),o=p(()=>{var u;if((u=r.value)!=null&&u.length)return`${le(r.value[0]).format(n.value)} - ${le(r.value[1]).format(n.value)}`}),h=p(()=>{const u={};return Rn.forEach(s=>{const d=R(e[s],a);d&&(u[s]=()=>g(N,{vnode:d},null))}),u}),c=(u,s)=>{var d;(d=e.onChange)==null||d.call(e,u,s)};return()=>{var u;return e.readonly?g(j,I({text:o.value,class:t.class,style:t.style},e.readonlyProps),null):g(Ua,I({value:r.value},t,{format:l.value,valueFormat:n.value,placeholder:((u=e.placeholder)==null?void 0:u.length)===2?e.placeholder:[i.getMessage("form.selectPlaceholder","请选择"),i.getMessage("form.selectPlaceholder","请选择")],onChange:c}),h.value)}}});const An=["downloadIcon","itemRender","previewIcon","removeIcon"];var kn=A({name:"FieldUploadButton",props:{...L(),iconRender:{type:String,default:""},downloadIcon:{type:String,default:""},itemRender:{type:String,default:""},previewIcon:{type:String,default:""},removeIcon:{type:String,default:""},title:{type:String},name:{type:String,default:"file"},max:{type:Number,default:void 0},disabled:{type:Boolean,default:void 0},buttonProps:{type:Object,default:void 0},fileList:{type:Array,default:void 0},listType:{type:String,default:"picture"}},setup(e,{attrs:t}){const i=H(),a=W(),l=p(()=>{var s;return(s=e.fileList)!=null?s:e.value}),n=p(()=>{var s;return e.max===void 0||!l.value||((s=l.value)==null?void 0:s.length)<e.max}),r=p(()=>e.listType==="picture-card"),o=p(()=>{const s={};return An.forEach(d=>{const v=R(e[d],a);v&&(s[d]=()=>g(N,{vnode:v},null))}),s}),h=p(()=>{const s=R(e.iconRender,a);return Ne(s)?g(N,{vnode:s},null):g(Wa,null,null)}),c=p(()=>{const s=R(e.title,a);return Ne(s)?g(N,{vnode:s},null):e.title||i.getMessage("upload.button","单击上传")}),u=s=>{var d;(d=e.onChange)==null||d.call(e,s.fileList,s)};return()=>g(ke,I({fileList:l.value},t,{listType:e.listType,name:e.name,onChange:u}),{default:()=>[n.value&&(r.value?g("span",null,[h.value,c.value]):g(za,I({disabled:e.disabled},e.buttonProps),{default:()=>[h.value,c.value]}))],...o.value})}});const Bn=["downloadIcon","itemRender","previewIcon","removeIcon"];var Ln=A({name:"FieldUploadDragger",props:{...L(),iconRender:{type:String,default:""},downloadIcon:{type:String,default:""},itemRender:{type:String,default:""},previewIcon:{type:String,default:""},removeIcon:{type:String,default:""},title:{type:String},description:{type:String},name:{type:String,default:"file"},max:{type:Number,default:void 0},disabled:{type:Boolean,default:void 0},buttonProps:{type:Object,default:void 0},fileList:{type:Array,default:void 0}},setup(e,{attrs:t}){const{token:i}=Ha.useToken(),{prefixCls:a}=pe(),l=H(),n=W(),r=p(()=>{var m;return(m=e.fileList)!=null?m:e.value}),o=p(()=>`${a}-upload`),h=p(()=>{var m;return e.max===void 0||!r.value||((m=r.value)==null?void 0:m.length)<e.max}),c=p(()=>{const m={};return Bn.forEach(y=>{const w=R(e[y],n);w&&(m[y]=()=>g(N,{vnode:w},null))}),m}),u=p(()=>{const m=R(e.iconRender,n);return Ne(m)?g(N,{vnode:m},null):g(ja,null,null)}),s=p(()=>{const m=R(e.title,n);return Ne(m)?g(N,{vnode:m},null):e.title||l.getMessage("upload.dragger.text","单击或拖动文件到此区域进行上传")}),d=p(()=>{const m=R(e.description,n);return Ne(m)?g(N,{vnode:m},null):e.description||l.getMessage("upload.dragger.hint","支持单次或批量上传")}),v=m=>{var y;(y=e.onChange)==null||y.call(e,m.fileList,m)};return()=>g(ke.Dragger,I({fileList:r.value},t,{name:e.name,style:{...t?.style,display:h.value?void 0:"none"},onChange:v}),{default:()=>[g("p",{class:`${o.value}-drag-icon`,style:{color:i.value.colorPrimary}},[u.value]),g("p",{class:`${o.value}-text`},[s.value]),g("p",{class:`${o.value}-hint`},[d.value])],...c.value})}});const Vn={aspectRatio:1,cropBoxMovable:!1,cropBoxResizable:!1,dragMode:"move",viewMode:1};var $n=A({name:"FieldUploadPicture",inheritAttrs:!1,props:{...L(),title:{type:String},showTitle:{type:Boolean,default:void 0},name:{type:String,default:"file"},disabled:{type:Boolean,default:void 0},allowClear:{type:Boolean,default:void 0},isCropper:{type:Boolean,default:!0},cropperModalTitle:{type:String},cropperModalWidth:{type:Number,default:520},cropperWidth:{type:Number,default:100},cropperHeight:{type:Number,default:100},cropperProps:{type:Object,default:()=>({})},width:{type:Number,default:50},height:{type:Number,default:50},customRequest:Function},setup(e,{attrs:t}){const i=Z(!1),a=Z(!1),l=Z(""),n=Z(),r=Z(),o=H(),{prefixCls:h,disabled:c}=pe(),u=mt.useInjectFormItemContext(),s=p(()=>({...Vn,...e.cropperProps})),d=async(C,S)=>{var b;const f=await((b=t?.beforeUpload)==null?void 0:b.call(t,C,S));if(e.isCropper){const x=C.type.indexOf("image")>=0;return x||Ka.error(`${C.name} ${o.getMessage("upload.picture.required","必须是图片")}`),x||ke.LIST_IGNORE}return f},v=C=>{var S,b;const f=C.split(","),x=f[0].match(/:(.*?);/)[1],P=atob(f[1]);let T=P.length;const X=new Uint8Array(T);for(;T--;)X[T]=P.charCodeAt(T);return new File([X],(b=(S=n.value)==null?void 0:S.name)!=null?b:"",{type:x})},m=async({file:C})=>{var S;const b=new FormData;b.append(e.name,C),a.value=!0;try{if(e.customRequest){const{url:f}=await e.customRequest(b);f&&((S=e.onChange)==null||S.call(e,f),u.onFieldChange())}}catch(f){console.log("🚀 ~ customRequest ~ error:",f)}a.value=!1},y=p(()=>{const C=aa(t,["beforeUpload"]);return e.isCropper?C.customRequest=function(){}:e.customRequest&&(C.customRequest=m),C}),w=C=>{if(n.value=C.file.originFileObj,e.isCropper){const S=new FileReader;S.onload=function(b){i.value=!0,l.value=b.target.result},S.readAsDataURL(C.file.originFileObj)}},D=()=>{var C,S;const b=(C=r.value)==null?void 0:C.getCroppedCanvas(n.value,{width:e.cropperWidth,height:e.cropperHeight});if(b){const f=v(b);i.value=!1,e.customRequest?m({file:f}):((S=e.onChange)==null||S.call(e,b,f),u.onFieldChange())}},_=C=>{var S;C.stopPropagation(),(S=e.onChange)==null||S.call(e,""),u.onFieldChange()};return()=>e.readonly?g("div",{class:`${h}-upload-picture`,style:{width:e.width+"px",height:e.height+"px",display:"block"}},[g("div",{class:`${h}-upload-picture-button`,style:{width:e.width+"px",height:e.height+"px",cursor:"auto"}},[e.value?g("div",{style:`width: 100%; height: 100%; background-size: contain; background-repeat: no-repeat; background-position: center center; background-image: url("${e.value}");`},null):g("div",{class:`${h}-upload-picture-button-empty`},null)])]):g(Ga,null,{default:()=>[g(ke,I(y.value,{"before-upload":d,"show-upload-list":!1,name:e.name,multiple:!1,class:`${h}-upload-picture`,style:{width:e.width+"px",height:e.height+"px",display:"block"},onChange:w}),{default:()=>[g(Xa,{spinning:a.value,indicator:g(gt,null,null),delay:300},{default:()=>{var C,S,b;return[g("div",{class:`${h}-upload-picture-button`,style:{width:e.width+"px",height:e.height+"px",cursor:((C=e.disabled)!=null?C:c?.value)?"not-allowed":"pointer"}},[e.value?g("div",{style:`width: 100%; height: 100%; background-size: contain; background-repeat: no-repeat; background-position: center center; background-image: url("${e.value}");`},null):g("div",{class:`${h}-upload-picture-button-empty`},[g(Zt,null,null)]),e.showTitle&&!((S=e.disabled)!=null?S:c?.value)&&g("div",{class:`${h}-upload-picture-button-mask`},[e.title||o.getMessage("upload.picture.title","修改图片")]),e.allowClear&&e.value&&!((b=e.disabled)!=null?b:c?.value)&&g("div",{class:`${h}-upload-picture-button-clear`,onClick:_},[g(qa,null,null)])])]}})]}),e.isCropper&&g(ai,{open:i.value,"onUpdate:open":C=>i.value=C,width:e.cropperModalWidth,title:e.cropperModalTitle||o.getMessage("upload.picture.cropperModalTitle","裁剪图片"),"destroy-on-close":!0,"show-fullscreen":!1,onOk:D},{default:()=>[g(Qi,{ref:r,"img-src":l.value,"cropper-props":s.value,"cropper-width":e.cropperWidth,"cropper-height":e.cropperHeight},null)]})]})}}),Yn=A({name:"FieldUploadPictureList",inheritAttrs:!1,props:{...L(),name:{type:String,default:"file"},disabled:{type:Boolean,default:void 0},width:{type:Number,default:80},height:{type:Number,default:80},crossOrigin:{type:String,default:""},maxCount:{type:Number},customRequest:Function},setup(e,{attrs:t}){const i=Z([]),a=Z(!1),l=Z(""),n=H(),{prefixCls:r,disabled:o}=pe(),h=p(()=>e.readonly||o?.value),c=async v=>{var m,y;const w=new FormData;w.append(e.name,v.file);const D=b=>{var f;b.total>0&&(b.percent=b.loaded/b.total*100),(f=v?.onProgress)==null||f.call(v,b)},{success:_,error:C,data:S}=await e.customRequest(w,D);_?(m=v.onSuccess)==null||m.call(v,S):(y=v.onError)==null||y.call(v,C,S)},u=p(()=>{const v={...t};return e.customRequest&&(v.customRequest=c),v}),s=v=>new Promise((m,y)=>{const w=new FileReader;w.readAsDataURL(v),w.onload=()=>m(w.result),w.onerror=D=>y(D)}),d=async v=>{!v.url&&!v.preview&&(v.preview=await s(v.originFileObj)),l.value=v.url||v.preview,a.value=!0};return ve(()=>e.value,v=>{at(v,i.value)||(i.value=v.map(m=>({...m,crossOrigin:e.crossOrigin})))}),ve(i,()=>{var v;(v=e.onChange)==null||v.call(e,i.value)}),()=>g(ta,null,[g(ke,I(u.value,{fileList:i.value,"onUpdate:fileList":v=>i.value=v,name:e.name,disabled:h.value,"list-type":"picture-card",maxCount:e.maxCount,class:`${r}-upload-picture-list`,style:{"--s-upload-picture-list-width":e.width+"px","--s-upload-picture-list-height":e.height+"px"},onPreview:d}),{default:()=>[(!h.value||!e.maxCount||i.value.length<e.maxCount)&&g(Zt,null,null)]}),g(Qa,{open:a.value,"onUpdate:open":v=>a.value=v,width:800,title:n.getMessage("upload.picture.viewModalTitle","查看图片"),footer:null},{default:()=>[g("img",{alt:"preview",style:"width: 100%",crossorigin:e.crossOrigin,src:l.value},null)]})])}});const jt={text:Ji,digit:tn,digitRange:nn,select:hn,cascader:xn,textarea:rn,password:on,treeSelect:vn,checkbox:mn,checkboxGroup:gn,radioGroup:yn,switch:Cn,slider:En,rate:In,date:Pn,dateRange:_n,time:On,timeRange:Nn,uploadButton:kn,uploadDragger:Ln,uploadPicture:$n,uploadPictureList:Yn},Xt={text:["type","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],digit:["disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],digitRange:["separatorWidth","separator","disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],select:["id","pagination","placeholder","disabled","allowClear","autoClearSearchValue","autofocus","bordered","clearIcon","defaultActiveFirstOption","defaultOpen","popupClassName","dropdownMatchSelectWidth","dropdownMenuStyle","dropdownRender","dropdownStyle","fieldNames","filterOption","filterSort","firstActiveValue","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","maxTagTextLength","menuItemSelectedIcon","mode","notFoundContent","open","option","optionFilterProp","optionLabelProp","options","placement","removeIcon","searchValue","showArrow","showSearch","size","status","suffixIcon","tagRender","tokenSeparators","virtual","onBlur","onFocus","onDeselect","onDropdownVisibleChange","onInputKeyDown","onMouseenter","onMouseleave","onPopupScroll","onSearch","onSelect"],textarea:["id","disabled","allowClear","autoSize","defaultValue","showCount","maxlength","placeholder","onPressEnter","onFocus","onBlur","onInput","onClear"],password:["id","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","visibilityToggle","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],treeSelect:["id","multiple","options","showCheckedStrategy","searchPlaceholder","replaceFields","loadData","filterTreeNode","placeholder","disabled","allowClear","popupClassName","defaultValue","dropdownMatchSelectWidth","dropdownStyle","fieldNames","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","notFoundContent","placement","searchValue","showSearch","size","status","suffixIcon","tagRender","title","treeCheckable","treeCheckStrictly","treeData","treeDataSimpleMode","treeDefaultExpandAll","treeDefaultExpandedKeys","treeExpandedKeys","treeIcon","treeLine","treeLoadedKeys","treeNodeFilterProp","treeNodeLabelProp","onDropdownVisibleChange","onSearch","onSelect","onTreeExpand","onUpdate:treeExpandedKeys","onUpdate:searchValue"],checkbox:["id","autofocus","disabled","indeterminate"],checkboxGroup:["id","disabled","name","options"],radioGroup:["id","class","disabled","name","options","optionType","buttonStyle","radioLabel"],cascader:["id","disabled","name","options","placeholder","allowClear","autofocus","bordered","clearIcon","changeOnSelect","defaultValue","displayRender","popupClassName","dropdownStyle","expandTrigger","fieldNames","getPopupContainer","loadData","maxTagCount","maxTagPlaceholder","multiple","notFoundContent","open","placement","showCheckedStrategy","removeIcon","searchValue","showSearch","status","suffixIcon","tagRender","onDropdownVisibleChange","onSearch"],switch:["id","checkedChildren","size","checkedValue","disabled","loading","unCheckedChildren","unCheckedValue","onClick"],slider:["id","disabled","dots","included","mark","marks","max","min","range","reverse","step","vertical","tipFormatter","tooltipPlacement","tooltipOpen","getTooltipPopupContainer","onAfterChange"],rate:["id","allowClear","allowHalf","character","count","disabled","tooltips","onBlur","onFocus","onHoverChange","onKeydown"],date:["id","allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","defaultPickerValue","disabledTime","renderExtraFooter","showNow","showTime","showToday","monthCellRender","onOpenChange","onPanelChange","onOk"],dateRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","showTime","ranges","renderExtraFooter","separator","onOpenChange","onPanelChange","onCalendarChange","onOk"],time:["id","allowClear","bordered","clearIcon","clearText","disabled","disabledTime","format","getPopupContainer","hideDisabledOptions","hourStep","inputReadOnly","minuteStep","open","placeholder","placement","popupClassName","popupStyle","renderExtraFooter","secondStep","showNow","status","suffixIcon","use12Hours","valueFormat","onOpenChange"],timeRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","ranges","renderExtraFooter","separator","order","onOpenChange","onPanelChange","onCalendarChange","onOk"],uploadButton:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","max","buttonProps"],uploadDragger:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","description","max","buttonProps"],uploadPicture:["disabled","id","customRequest","accept","action","beforeUpload","name","headers","isCropper","cropperModalTitle","cropperModalWidth","cropperWidth","cropperHeight","cropperProps","width","height","title","data","showTitle","allowClear"],uploadPictureList:["disabled","id","data","headers","customRequest","accept","action","multiple","maxCount","beforeUpload","name","previewFile","allowClear","width","height","crossOrigin"],editor:["autofocus","indentWithTab","tabSize","theme","autoDestroy","phrases","root","extensions","selection","height","disabled","placeholder","onFocus","onBlur","onReady","onUpdate"]},qt={xs:104,s:216,sm:216,m:328,md:328,l:440,lg:440,xl:552},Un=["autoLink","colon","hasFeedback","labelAlign","labelCol","htmlFor","required","validateFirst","validateStatus","validateTrigger","wrapperCol","rules","style","class"],Wn=["switch","radioButton","radio","rate"],zn=["extra","help"];var lr=A({name:"FormItem",inheritAttrs:!1,props:{item:{type:Object,default:()=>({})},grid:{type:Boolean,default:void 0}},setup(e){const{grid:t,action:i,formKey:a,prefixCls:l,formData:n,readonly:r,readonlyProps:o,disabledKeys:h,hiddenKeys:c,allDisabledKeys:u,updateHiddenKeys:s,updateDisabledKeys:d}=pe(),{isList:v,listKey:m,listName:y,rowData:w}=Gt(),D=W(),{fieldValue:_,onValueChange:C}=Ca({namePath:p(()=>e.item.name),initialValue:e.item.initialValue,convertValue:e.item.convertValue,transform:e.item.transform}),S=Z(),b=p(()=>{var E;return(E=e.grid)!=null?E:t?.value}),f=p(()=>{var E;return(E=e.item.fieldType)!=null?E:"text"}),x=p(()=>{var E;return K((E=e.item.readonly)!=null?E:r?.value,n.value,w?.value)}),P=p(()=>et({},o?.value,e.item.readonlyProps)),T=p(()=>h.value.map(E=>E.split(":")[1])),X=p(()=>c.value.map(E=>E.split(":")[1])),oe=p(()=>{var E;return(E=e.item.ignoreWidth)!=null?E:Wn.includes(f.value)}),J=p(()=>{var E;return(E=K(e.item.formItemProps,n.value))!=null?E:{}}),ne=p(()=>{var E,F,O,$;return Ke({...Dt(J.value,Un),name:x.value?void 0:e.item.name,htmlFor:x.value?void 0:(O=(E=J.value)==null?void 0:E.htmlFor)!=null?O:`form-${(F=a.value)!=null?F:""}-${e.item.key}`,rules:x.value?void 0:K(($=e.item.rules)!=null?$:J.value.rules,n.value,i)})}),te=E=>{var F,O;const{clear:$}=(F=e.item.linkage)!=null?F:{};if($){const q=(O=K($,E,n.value))!=null?O:[];q.length>0&&q.forEach(ae=>{var V;const he=v?[...(V=y?.value)!=null?V:[],...It(ae)].filter(Ye=>Ye!==void 0).flat(1):It(ae);typeof Qt(n.value,he)<"u"&&tt(n.value,he,void 0)})}},z=p(()=>{var E,F,O,$,q,ae,V,he,qe,Ye;const ee=K((E=e.item.fieldProps)!=null?E:{},n.value),Ct={...ee,id:(O=ee?.id)!=null?O:`form-${(F=a.value)!=null?F:""}-${e.item.key}`,disabled:((q=K(($=e.item.disabled)!=null?$:ee?.disabled,n.value,w?.value))!=null?q:u.value.includes(e.item.key))?!0:void 0,placeholder:(ae=e.item.placeholder)!=null?ae:ee?.placeholder,options:(he=(V=e.item.options)!=null?V:ee?.options)!=null?he:ee?.treeData,allowClear:(Ye=(qe=e.item.allowClear)!=null?qe:ee?.allowClear)!=null?Ye:!1};return Ke({valueEnum:e.item.valueEnum,dependencies:e.item.dependencies,readonly:x.value,readonlyProps:P.value,request:e.item.request,params:e.item.params,onChange:(Ge,...ba)=>{var St,Et;te(Ge),C(Ge),(Et=(St=e.item).onChange)==null||Et.call(St,Ge,...ba,i)},...Xt[f.value]?Dt(Ct,Xt[f.value]):Ct})}),ce=p(()=>{var E;const F=K((E=e.item.fieldProps)!=null?E:{},n.value),O={...F?.style};return e.item.width&&!qt[e.item.width]?O.width=ti(e.item.width)?e.item.width+"px":e.item.width:b?.value&&(O.maxWidth="100%",O.width="100%"),oe.value&&Reflect.deleteProperty(O,"width"),Ke(O)}),we=p(()=>{const E=e.item.width&&qt[e.item.width],F={[`${l}-field`]:!!E,[`${l}-field-${e.item.width}`]:E&&!oe.value};return e.item.className&&(F[e.item.className]=!0),F}),Te=p(()=>{var E;const F={};if(zn.forEach(O=>{const $=R(J.value[O],D);$&&(F[O]=()=>g(N,{vnode:$,props:{formData:n.value}},null))}),e.item.title){const O=R((E=e.item.extra)==null?void 0:E.label,D);F.label=()=>g(ta,null,[g("div",{class:`${l}-item-title`,style:J.value.titleStyles},[g(ri,{title:e.item.title,tooltip:e.item.tooltip},null)]),g(N,{vnode:O,props:{formData:n.value}},null)])}return F});return ve(_,E=>{var F,O;const{linkage:$}=e.item;if($){const{hidden:q,disabled:ae}=$;if(q){const V=(F=K(q,E,n.value))!=null?F:[];at(V,X.value)||s(e.item.key,v?V.map(he=>`${m}_${he}`):V)}if(ae){const V=(O=K(ae,E,n.value))!=null?O:[];at(V,T.value)||d(e.item.key,v?V.map(he=>`${m}_${he}`):V)}}},{immediate:!0}),ve(S,()=>{var E,F;(F=(E=e.item).onInit)==null||F.call(E,S.value)}),ve(x,()=>{x.value&&i.clearValidate(e.item.name)}),ve(()=>{var E;return(E=ne.value)==null?void 0:E.rules},()=>{i.clearValidate(e.item.name)}),()=>{var E,F;const O=R(e.item.render,D);if(O)return g(Tt,{colProps:e.item.colProps,grid:b.value},{default:()=>[g(N,{vnode:O,props:{formData:n.value}},null)]});const $=R(e.item.renderFormItem,D),q=R((E=e.item.extra)==null?void 0:E.item,D),ae=(F=jt[f.value])!=null?F:jt.text;let V=g(ae,I({ref:S,value:_.value},z.value,{style:ce.value,class:we.value}),null);return $&&(V=g(N,{vnode:$,props:{value:_.value,onChange:z.value.onChange,defaultDom:V,formData:n.value,action:i,listName:y?.value,name:e.item.name}},null)),q&&(V=g("div",{style:"display: flex; flex-direction: row; justify-content: flex-start; align-items: center;"},[V,g(N,{vnode:q,props:{formData:n.value,listName:y?.value,name:e.item.name}},null)])),g(Tt,{colProps:e.item.colProps,grid:b.value},{default:()=>[g(mt.Item,ne.value,{default:()=>[V],...Te.value})]})}}});export{lr as default};
