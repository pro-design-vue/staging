import{u as It,f as Ta,r as Ul,R as un,g as Ea,d as Ha}from"./sleep.CbAukOL6.js";import{s as de,e as h,f as F,w as he,h as qe,c as Je,p as lt,aT as Oa,F as Ee,i as zt,C as Ba,aU as zn,aL as Da,o as gt,P as uo,b as Cl,aV as Ma,aW as co,J as wt,u as Gt,j as ct,t as Kt,r as bl,d as Pe,R as Q,Q as I,q as Lt,n as Ze,A as hl,S as oe,a1 as j,X as fe,ag as it,k as Y,y as el,x as gl,l as At,$ as st,Z as ee,a2 as Ce,aQ as Fa,Y as ke,aX as Nt,a0 as _e,G as Tt,U as mt,ai as Re,g as cn,B as ut,af as $t,aY as dn,aZ as Aa,v as za,a_ as La,z as Na}from"./framework.LW9JDvVy.js";import{u as Ht}from"./useIntl.BQXbQ8uP.js";import{a as Wa,u as vo}from"./index.Dw6vpUqL.js";import{m as _a,i as Sl,j as Va,k as fo,l as Ln,n as Xl,o as Ot,p as ho,q as po,r as ja,s as Ua,t as Xa,u as mo,v as Ya,w as vn,x as yl,y as fn,z as Ga,A as go,G as qa,H as Za,J as Nn,K as Ja,L as Qa,N as er,O as tr,Q as lr,U as nr,V as Yl,W as or,X as ar,Y as rr,Z as ir,_ as yo,C as sr,$ as ur,S as wo,a0 as cr,a1 as Co}from"./theme.Cs0iWRp3.js";import{a as bo,b as dr,c as Zt}from"./validate.EEzCsTff.js";import{P as vr,o as Et,a as So,b as fr}from"./index.DELBPES_.js";import{w as hr}from"./install.BalIz2Dd.js";const pr=de(!0),mr=de("light");de("#1677ff");let Wn={};function xo(e,t){console.error(`Warning: ${t}`)}function gr(e,t,l){!t&&!Wn[l]&&(e(!1,l),Wn[l]=!0)}function yr(e,t){gr(xo,e,t)}function $o(e,t){const l=new Set;return e.forEach(n=>{t.has(n)||l.add(n)}),l}function wr(e){const{disabled:t,disableCheckbox:l,checkable:n}=e||{};return!!(t||l)||n===!1}function Cr(e,t,l,n){const o=new Set(e),u=new Set;for(let i=0;i<=l;i+=1)(t.get(i)||new Set).forEach(c=>{const{rowKey:r,record:v,children:f=[]}=c;o.has(r)&&!n(v)&&f.filter(d=>!n(d.record)).forEach(d=>{o.add(d.rowKey)})});const s=new Set;for(let i=l;i>=0;i-=1)(t.get(i)||new Set).forEach(c=>{const{parent:r,record:v}=c;if(n(v)||!c.parent||s.has(c.parent.rowKey))return;if(n(c.parent.record)){s.add(r?.rowKey);return}let f=!0,d=!1;(r?.children||[]).filter(p=>!n(p.record)).forEach(({rowKey:p})=>{const m=o.has(p);f&&!m&&(f=!1),!d&&(m||u.has(p))&&(d=!0)}),f&&o.add(r?.rowKey),d&&u.add(r?.rowKey),s.add(r?.rowKey)});return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from($o(u,o))}}function br(e,t,l,n,o){const u=new Set(e);let s=new Set(t);for(let a=0;a<=n;a+=1)(l.get(a)||new Set).forEach(r=>{const{rowKey:v,record:f,children:d=[]}=r;!u.has(v)&&!s.has(v)&&!o(f)&&d.filter(p=>!o(p.record)).forEach(p=>{u.delete(p.rowKey)})});s=new Set;const i=new Set;for(let a=n;a>=0;a-=1)(l.get(a)||new Set).forEach(r=>{const{parent:v,record:f}=r;if(o(f)||!r.parent||i.has(r.parent.rowKey))return;if(o(r.parent.record)){i.add(v?.rowKey);return}let d=!0,p=!1;(v?.children||[]).filter(m=>!o(m.record)).forEach(({rowKey:m})=>{const w=u.has(m);d&&!w&&(d=!1),!p&&(w||s.has(m))&&(p=!0)}),d||u.delete(v?.rowKey),p&&s.add(v?.rowKey),i.add(v?.rowKey)});return{checkedKeys:Array.from(u),halfCheckedKeys:Array.from($o(s,u))}}function Gl(e,t,l,n,o,u){const s=[],i=new Set(e.filter(r=>{const v=!!l[r];return v||s.push(r),v}));xo(!s.length,`Tree missing follow keys: ${s.slice(0,100).map(r=>`'${r}'`).join(", ")}`);let a;u?a=u:a=wr;let c;return t===!0?c=Cr(i,n,o,a):c=br(i,t.halfCheckedKeys,n,o,a),c}var ht=(e,t,l)=>{yr(e,`[table: ${t}] ${l}`)};const ql="SELECT_ALL",Zl="SELECT_INVERT",Jl="SELECT_NONE";function Sr(e,t,l,n){var o,u;const s=de(new Map),[i,a]=It(e.selectedRowKeys||((o=t.value)==null?void 0:o.selectedRowKeys)||((u=t.value)==null?void 0:u.defaultSelectedRowKeys)||[],{value:h(()=>{var g;return e.selectedRowKeys||((g=t.value)==null?void 0:g.selectedRowKeys)})}),c=g=>{var D;return!!((D=n.checkboxPropsMap.value.get(g.rowKey))!=null&&D.disabled)},r=F(!0),v=F(!1),f=F(!0),d=F(!0),p=F(!1),m=de(new Map),w=F(0),y=de([]),S=de([]),T=h(()=>{var g;const D=((g=t.value)==null?void 0:g.type)==="radio"?y.value.slice(0,1):y.value;return new Set(D)}),K=h(()=>{var g;return((g=t.value)==null?void 0:g.type)==="radio"?new Set:new Set(S.value)});he(l,()=>{m.value=new Map}),qe(()=>{const g=n.keyEntities.value,D=T.value;let L=!0,$=!1,z=!0,V=!0,W=!1;n.pageDataRowKeys.value.forEach(C=>{const R=g[C],{level:x}=R;c(R)?D.has(C)?$=!0:z=!1:(L=!1,D.has(C)?W=!0:V=!1);let H=m.value.get(x);H||(H=new Set),m.value.set(x,H),H.add(R),r.value=L,f.value=z,v.value=$,d.value=V,p.value=W,w.value=Math.max(w.value,x)})}),qe(()=>{var g;if((g=t.value)!=null&&g.checkStrictly)y.value=i.value||[],S.value=[];else{const{checkedKeys:D,halfCheckedKeys:L}=Gl(i.value,!0,n.keyEntities.value,m.value,w.value,c);y.value=D||[],S.value=L}});const[O,N]=Ta("");he(()=>e.rowSelection,()=>{e.rowSelection||a([])},{immediate:!0});const U=g=>{var D;let L,$;const{preserveSelectedRowKeys:z,onChange:V}=t.value,{getRecordByKey:W}=n;if(z){const C=new Map;L=g,$=g.map(R=>{let x=W(R);return!x&&s.value.has(R)&&(x=s.value.get(R)),C.set(R,x),x}),s.value=C}else L=[],$=[],g.forEach(C=>{const R=W(C);R!==void 0&&(L.push(C),$.push(R))});a(L),(D=e["onUpdate:selectedRowKeys"])==null||D.call(e,L,$),V?.(L,$)},M=h(()=>{const{onSelectInvert:g,onSelectNone:D,selections:L,hideSelectAll:$}=t.value,{pageData:z,getRowKey:V,locale:W}=n;return!L||$?null:(L===!0?[ql,Zl,Jl]:L).map(R=>R===ql?{key:"all",text:W.value.selectionAll,onSelect(){U(n.allDataRootRowKeys.value)}}:R===Zl?{key:"invert",text:W.value.selectInvert,onSelect(){const x=new Set(T.value);z.value.forEach((te,ie)=>{const A=V.value(te,ie);x.has(A)?x.delete(A):x.add(A)});const H=Array.from(x);g&&(ht(!1,"Table","`onSelectInvert` will be removed in future. Please use `onChange` instead."),g(H)),U(H)}}:R===Jl?{key:"none",text:W.value.selectNone,onSelect(){D?.(),U([])}}:R)});return{derivedSelectedKeySet:T,derivedSelectedKeys:y,derivedHalfSelectedKeySet:K,setSelectedKeys:U,triggerSingleSelection:(g,D,L,$)=>{const{onSelect:z}=t.value,{getRecordByKey:V}=n||{};if(z){const W=L.map(C=>V(C));z(V(g),D,W,$)}U(L)},mergedSelections:M,lastSelectedKey:O,setLastSelectedKey:N,mergedRowSelection:t,isCheckboxDisabled:c,maxLevel:w,levelEntities:m,allDisabled:r,allDisabledAndChecked:f,allDisabledSomeChecked:v,checkedCurrentAll:d,checkedCurrentSome:p}}const xr=F(""),$r=()=>xr.value,Ro=Symbol("HoverContextKey"),Rr=e=>{const t=F(),l=F();let n,o;const u=(a,c,r)=>{clearTimeout(n),clearTimeout(o),r||(o=setTimeout(()=>{l.value=a,t.value=c},e.rowHoverDelay.value))},s=()=>{n=setTimeout(()=>{l.value=void 0,t.value=void 0},e.rowHoverDelay.value+50)},i={rowHover:e.rowHover,hoverColumnKey:t,hoverRowKey:l,handleCellHover:u,handleCellBlur:s};return lt(Ro,i),i},ko=()=>Je(Ro,{rowHover:h(()=>{}),hoverRowKey:F(),hoverColumnKey:F(),handleCellHover:()=>{},handleCellBlur:()=>{}}),Ko=Symbol("Level"),xl=()=>Je(Ko,void 0),kr=()=>{const e=xl();lt(Ko,e===void 0?0:e+1)};function Po(e,t){return toString.call(e)===`[object ${t}]`}function Ql(e){return e&&Array.isArray(e)}function Kr(e){return Po(e,"String")}function Pr(e){return e!==null&&Po(e,"Object")}const St=(e,t)=>e?Array.isArray(e)?e.join("-"):e.toString():`${t}`;function Ir(e,t){return t?`${t}-${e}`:`${e}`}function Tr(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&delete e[t]}function Er(e){return e==null?[]:Array.isArray(e)?e:[e]}function Io(e,t){if(!t&&typeof t!="number")return e;const l=Er(t);let n=e;for(let o=0;o<l.length;o+=1){if(!n)return null;const u=l[o];n=n[u]}return n}function Hr(e){return Array.isArray(e)&&e.length===1&&(e=e[0]),e&&zt(e)&&typeof e.type!="symbol"}const Or=(e,t)=>{const l={},n=/;(?![^(]*\))/g,o=/:(.+)/;return typeof e=="object"?e:(e.split(n).forEach(function(u){if(u){const s=u.split(o);if(s.length>1){const i=s[0].trim();l[i]=s[1].trim()}}}),l)};function Br(e){let t,l=!1;return{promise:new Promise((n,o)=>{t=o,Promise.resolve().then(()=>{n("")})}).then(()=>{l||e()}).catch(()=>{}),cancel:()=>{l=!0,t&&t()}}}function Dr(e,t){if(!e)return[];const l=e.slice(),n=l.indexOf(t);return n>=0&&l.splice(n,1),l}function Mr(e,t){const l=(e||[]).slice();return l.indexOf(t)===-1&&l.push(t),l}const Fr=e=>e!=null&&e!=="",en=(e,t=!0)=>{const l=Ql(e)?e:[e],n=[];return l.forEach(o=>{Ql(o)?n.push(...en(o,t)):o&&o.type===Ee?n.push(...en(o.children,t)):o&&zt(o)?t&&!isEmptyElement(o)?n.push(o):t||n.push(o):Fr(o)&&n.push(o)}),n};function To(e=[]){const t=en(e),l=[];return t.forEach(n=>{var o,u,s,i;if(!n)return;const a=n.key,c=((o=n.props)==null?void 0:o.style)||{},r=((u=n.props)==null?void 0:u.class)||"",v=n.props||{};for(const[m,w]of Object.entries(v))v[Oa(m)]=w;const{default:f,...d}=n.children||{},p={...d,...v,style:c,class:r};if(a&&(p.key=a),(s=n.type)!=null&&s.__S_TABLE_COLUMN_GROUP)p.children=To(typeof f=="function"?f():f);else{const m=(i=n.children)==null?void 0:i.default;p.customRender=p.customRender||m}l.push(p)}),l}const hn=(e,t,l)=>Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))<=l;function Mt(e,t,l,n){let o,u=e,s=[];const i=t.length;if(i===0)return e.splice(0,0,n),e;for(let a=0;a<i;a++)o=u[t[a]],a===i-1&&(s=u),u=o?.[l]||[];return s.splice(t[i-1]+1,0,n),s}function Ft(e,t,l){let n,o=e,u=[];const s=t.length;for(let i=0;i<s;i++)n=o[t[i]],i===s-1&&(u=o),o=n?.[l]||[];return u.splice(t[s-1],1),u}function pn(e){return e.some(t=>!zt(t)||t.type!==Ba&&!(t.type===Ee&&!pn(t.children)))?e:null}const Eo=(e,t)=>t===void 0?!1:typeof t=="boolean"?t:t[e],Ho=()=>({prefixCls:String,disabled:Boolean,tabindex:[String,Number],name:String,id:String,style:{type:Object,default:()=>({})},class:String,checked:Boolean,indeterminate:Boolean,ariaLabel:String}),Oo=()=>({ignoreCellKey:Boolean,showHeaderScrollbar:Boolean,deepWatchDataSource:Boolean,deepWatchColumns:Boolean,prefixCls:String,columnDrag:{type:Boolean,default:!1},animateRows:{type:Boolean,default:void 0},dropdownPrefixCls:{type:String},columns:{type:Array,default:()=>[]},dataSource:{type:Array,default:()=>[]},virtual:{type:Boolean,default:!1},xVirtual:{type:Boolean,default:void 0},rowHeight:{type:[Number,Function],default:void 0},autoHeaderHeight:{type:Boolean,default:!1},headerHeight:{type:[Number,Array]},height:{type:[Number,String]},maxHeight:{type:[Number,String]},minHeight:{type:[Number,String]},size:{type:String,default:"middle"},bordered:{type:Boolean,default:!1},wrapText:{type:Boolean,default:!1},loading:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:()=>({})},direction:{type:String,default:void 0},stripe:{type:Boolean,default:!1},rowClassName:{type:[String,Function],default:void 0},sticky:{type:[Boolean,Object],default:!0},selectedRowKeys:{type:Array,default:void 0},expandFixed:{type:[Boolean,String],default:void 0},expandColumnWidth:{type:Number,default:void 0},expandedRowKeys:{type:Array,default:void 0},defaultExpandedRowKeys:{type:Array,default:void 0},expandedRowRender:{type:Function,default:void 0},expandRowByClick:{type:Boolean,default:void 0},expandIcon:{type:Function,default:void 0},onExpand:{type:Function,default:void 0},onExpandedRowsChange:{type:Function,default:void 0},defaultExpandAllRows:{type:Boolean,default:void 0},indentSize:Number,expandIconColumnIndex:Number,childrenColumnName:{type:String,default:void 0},rowExpandable:{type:Function,default:()=>!0},rowSelection:{type:Object,default:void 0},rowHoverDelay:{type:Number,default:59},rowHover:{type:Boolean,default:void 0},rowKey:{type:[Function,String]},customRow:{type:Function,default:()=>({})},customCell:{type:Function,default:()=>({})},customHeaderCell:{type:Function,default:()=>({})},customSummaryCellProps:{type:Function,default:()=>({})},showHeader:{type:Boolean,default:!0},showSorterTooltip:{type:[Boolean,Object],default:!0},getPopupContainer:{type:Function},locale:{type:Object,default:void 0},scrollX:{type:[Number,String]},scroll:{type:Object,default:void 0},rangeSelection:{type:[String,Boolean],default:!1},copyDelimiter:{type:String,default:""},rowDrag:{type:[Boolean]},onChange:{type:Function},summaryFixed:{type:[Boolean,String],default:!1},hasContextmenuPopup:Boolean,formatRangeCellText:{type:Function},"onUpdate:selectedRowKeys":{type:Function},onScroll:{type:Function},"onUpdate:expandedRowKeys":{type:Function},onResizeColumn:{type:Function,default:void 0},onRowDragEnd:{type:Function,default:void 0},onColumnDragEnd:{type:Function,default:void 0},onCellKeydown:{type:Function,default:void 0},onCellClick:{type:Function,default:void 0},onBeforeOpenEditor:{type:Function,default:void 0},onOpenEditor:{type:Function,default:void 0},onBeforeCloseEditor:{type:Function,default:void 0},onCloseEditor:{type:Function,default:void 0},"onUpdate:pagination":{type:Function},"onUpdate:dataSource":{type:Function},"onUpdate:columns":{type:Function},columnEmptyText:{type:[String,Boolean],default:"-"},toolBar:{type:Boolean,default:void 0},options:{type:[Object,Boolean],default:void 0},alwaysShowAlert:{type:Boolean,default:void 0},request:Function,params:Object,defaultData:Array,manual:Boolean,manualRequest:Boolean,polling:[Number,Function],debounceTime:Number,onLoad:{type:Function,default:void 0},onLoadingChange:{type:Function,default:void 0},onRequestError:{type:Function,default:void 0},onSizeChange:{type:Function,default:void 0},onSubmit:{type:Function,default:void 0},onReset:{type:Function,default:void 0},columnsState:{type:Object,default:void 0},highlightSelectRow:{type:Boolean,default:!1},paginationSticky:{type:[Boolean,Object],default:!0},horizontalScrollSticky:{type:[Boolean,Object],default:!0}}),Ar=()=>({...Oo(),title:String,subTitle:String,footer:Function,tooltip:String,cardProps:{type:[Object,Boolean],default:void 0},search:{type:[Object,Boolean],default:void 0},beforeSearchSubmit:{type:Function,default:void 0},cardBordered:{type:[Boolean,Object],default:void 0}}),zr=(e,t)=>{if(t){const{current:l,pageSize:n,total:o,showTotal:u,showSizeChanger:s,...i}=t;return{...i,current:l||1,total:o||0,pageSize:n||10,showSizeChanger:s??!0,showTotal:u||((a,c)=>`${e.getMessage("pagination.total.range","第")} ${c[0]}-${c[1]} ${e.getMessage("pagination.total.total","条/总共")} ${a} ${e.getMessage("pagination.total.item","条")}`)}}return{current:1,total:0,pageSize:10,showSizeChanger:!0,showTotal:(l,n)=>`${e.getMessage("pagination.total.range","第")} ${n[0]}-${n[1]} ${e.getMessage("pagination.total.total","条/总共")} ${l} ${e.getMessage("pagination.total.item","条")}`}},Lr=e=>{if(!e)return;let t;if(Array.isArray(e)?t=[...e]:t=[{...e}],t=t.filter(l=>!!l.order),!!t.length)return t.length>1&&(t=t.sort((l,n)=>{var o,u,s,i;return(((u=(o=n.column)==null?void 0:o.sorter)==null?void 0:u.multiple)||0)-(((i=(s=l.column)==null?void 0:s.sorter)==null?void 0:i.multiple)||0)})),t.map(l=>({field:l.field,order:l.order}))},Nr=(e,t)=>{var l;const n=F(!1),o=F(null),u=F(!!(t.manual||t.manualRequest)),s=F(),i=F(!1),a=F(""),c=Ht(),{pro:r}=Wa(),v=F({}),f=F(),d=F(),p=h(()=>{if(t.options!==!1&&t.options.search!==!1)return t.options.search===!0||!t.options.search.name?void 0:t.options.search.name}),[m,w]=It(!1,{value:h(()=>typeof t.loading=="object"?t.loading.spinning:t.loading),onChange:t.onLoadingChange}),[y,S]=It((l=t.defaultData)!=null?l:[],{value:h(()=>t.request?void 0:t.dataSource)}),T=h(()=>{var W,C;return(C=(W=r?.value)==null?void 0:W.table)!=null?C:{}}),K=h(()=>{var W,C;return t.pagination===!1?!1:t.pagination&&((W=T.value)!=null&&W.pagination)?_a(T.value.pagination,t.pagination):(C=t.pagination)!=null?C:T.value.pagination}),[O,N]=It(()=>zr(c,K.value),{onChange(W){var C,R,x;t.pagination!==!1&&((C=t["onUpdate:pagination"])==null||C.call(t,co(t.pagination)?Object.assign(t.pagination||{},W):W),(x=(R=t.pagination)==null?void 0:R.onChange)==null||x.call(R,W.current,W?.pageSize))}}),[U,M]=It(()=>{if(!(u.value||t.search!==!1))return{}}),q=zn(h(()=>{var W;return(W=O.value)==null?void 0:W.current})),g=zn(h(()=>{var W;return(W=O.value)==null?void 0:W.pageSize})),D=()=>{w(!1),i.value=!1},L=async W=>{var C,R,x,H;if(u.value){u.value=!1;return}W?i.value=!0:w(!0);const{current:te,pageSize:ie}=O.value,A={...v.value,...U.value};t?.pagination!==!1&&(A.current=te,A.pageSize=ie),a.value&&(A[(C=p.value)!=null?C:"keyword"]=a.value);try{const{data:ae=[],success:me,total:Se=0,...Z}=await((R=e.value)==null?void 0:R.call(e,A,wt(f.value),wt(d.value)))||{};return me===!1?[]:(S(ae),((x=O.value)==null?void 0:x.total)!==Se&&(O.value.total=Se||ae.length),(H=t.onLoad)==null||H.call(t,ae,Z),ae)}catch(ae){if(t.onRequestError===void 0)throw new Error(ae);y.value===void 0&&S([]),t.onRequestError(ae)}finally{D()}},$=Da(async W=>{if(s.value&&clearTimeout(s.value),!e)return;const C=new AbortController;o.value=C;try{const R=await Promise.race([L(W),new Promise((H,te)=>{var ie;(ie=o.value)==null||ie.signal.addEventListener("abort",()=>{te("aborted"),D()})})]);if(C.signal.aborted)return;const x=Ul(t.polling,R);x&&!n.value&&(s.value=setTimeout(()=>{$(x)},Math.max(x,2e3)))}catch(R){if(R==="aborted")return;throw R}},t.debounceTime||30),z=()=>{var W;(W=o.value)==null||W.abort(),D()};he(()=>t.polling,(W,C)=>{W||clearTimeout(s.value),!C&&W&&$(!0)}),he([()=>t.manual,()=>t.manualRequest],()=>{z(),$(!1),(!t.manual||!t.manualRequest)&&(u.value=!1)}),he(()=>O.value.current,()=>{var W;const{current:C,pageSize:R}=O.value||{};(!q||q.value===C)&&(!g||g.value===R)||t.pagination&&y.value&&((W=y.value)==null?void 0:W.length)>R||C!==void 0&&y.value&&y.value.length<=R&&(z(),$(!1))}),he(()=>O.value.pageSize,()=>{g.value&&(z(),$(!1))}),he(f,()=>{N({...O.value,current:1}),z(),$(!1)}),he(d,()=>{N({...O.value,current:1}),z(),$(!1)}),he(()=>t.params,()=>{N({...O.value,current:1}),z(),$(!1)},{deep:!0}),he(v,()=>{N({...O.value,current:1}),z(),$(!1)},{deep:!0}),he(U,()=>{N({...O.value,current:1}),z(),$(!1)},{immediate:!0});const V=(W,C,R,x)=>{var H;x.action==="paginate"&&N({...O.value,...W}),x.action==="sort"&&(f.value=Lr(R)),x.action==="filter"&&(d.value=C),(H=t.onChange)==null||H.call(t,W,C,R,x)};return gt(()=>{n.value=!1,t.search===!1&&$(!1)}),uo(()=>{t.polling&&$(!0)}),Cl(()=>{n.value=!0,z(),clearTimeout(s.value)}),Ma(()=>{clearTimeout(s.value)}),{keyword:a,formSearch:U,dataSource:y,loading:h(()=>typeof t?.loading=="object"?{...t?.loading,spinning:m.value}:m.value),setParams:(W,C)=>{v.value[W]=C},reload:async W=>(W&&N({...O.value,current:1}),z(),$(!1)),pollingLoading:i,pagination:O,reset:async()=>{const{pagination:W}=t||{},{current:C=1,pageSize:R=10}=W||{};N({current:C,total:0,pageSize:R})},setPagination:N,setFormSearch:M,onTableChange:V}},Bo=Symbol("ContainerContextKey"),Wr=e=>{var t;const l=F([]),[n,o]=It(()=>e.size||"middle",{value:h(()=>e.size),onChange:e.onSizeChange}),u=h(()=>{var r,v,f;if((r=e?.columnsState)!=null&&r.defaultValue){const p={};return(v=e.columns)==null||v.forEach(({key:m,dataIndex:w,fixed:y,disable:S},T)=>{const K=St(m??w,T);K&&(y||S)&&(p[K]={fixed:y,disable:S,show:!0})}),{...p,...e.columnsState.defaultValue}}const d={};return(f=e.columns)==null||f.forEach(({key:p,dataIndex:m,fixed:w,disable:y},S)=>{const T=St(p??m,S);T&&(d[T]={show:!0,fixed:w,disable:y})}),d}),[s,i]=It(()=>{var r,v;const{persistenceType:f,persistenceKey:d}=e.columnsState||{};if(d&&f&&typeof window<"u"){const p=window[f];try{const m=p?.getItem(d);if(m)return JSON.parse(m)}catch(m){console.warn(m)}}return((r=e.columnsState)==null?void 0:r.value)||((v=e.columnsState)==null?void 0:v.defaultValue)||u.value},{value:h(()=>{var r;return(r=e.columnsState)==null?void 0:r.value}),onChange:(t=e.columnsState)==null?void 0:t.onChange});he([()=>{var r;return(r=e.columnsState)==null?void 0:r.persistenceKey},u,()=>{var r;return(r=e.columnsState)==null?void 0:r.persistenceType}],()=>{const{persistenceType:r,persistenceKey:v}=e.columnsState||{};if(v&&r&&typeof window<"u"){const f=window[r];try{const d=f?.getItem(v);i(d?JSON.parse(d):u.value)}catch(d){console.warn(d)}}},{immediate:!0});const a=()=>{const{persistenceType:r,persistenceKey:v}=e.columnsState||{};if(!v||!r||typeof window>"u")return;const f=window[r];try{f?.removeItem(v)}catch(d){console.warn(d)}};he([()=>{var r;return(r=e.columnsState)==null?void 0:r.persistenceKey},()=>s.value,()=>{var r;return(r=e.columnsState)==null?void 0:r.persistenceType}],()=>{var r,v;if(!((r=e.columnsState)!=null&&r.persistenceKey)||!((v=e.columnsState)!=null&&v.persistenceType)||typeof window>"u")return;const{persistenceType:f,persistenceKey:d}=e.columnsState,p=window[f];try{p?.setItem(d,JSON.stringify(s.value))}catch(m){console.warn(m),a()}});const c={props:e,tableSize:n,setTableSize:o,sortKeyColumns:l,setSortKeyColumns:r=>{l.value=r},columnsMap:s,setColumnsMap:i,clearPersistenceStorage:a,defaultColumnKeyMap:u};return lt(Bo,c),c},$l=()=>Je(Bo,{}),_r=e=>{const t={};return Object.keys(e||{}).forEach(l=>{var n;Array.isArray(e[l])&&((n=e[l])==null?void 0:n.length)===0||e[l]!==void 0&&(t[l]=e[l])}),t};function Do(e,t){var l;const{columns:n,counter:o}=e;return(l=n?.map((u,s)=>{var i,a,c;const{key:r,dataIndex:v,disable:f,valueEnum:d,width:p}=u,m=St(r||v?.toString(),[t?.key,s].filter(Boolean).join("-")),w=o.columnsMap.value[m]||{fixed:u.fixed},y={index:s,key:m,...u,valueEnum:d,fixed:w.fixed,width:(i=w.width)!=null?i:p,disable:(a=w.disable)!=null?a:f,children:u.children?Do({...e,columns:(c=u?.children)!=null?c:[]},{...u,key:m}):void 0};return _r(y)}))==null?void 0:l.filter(u=>!u.hideInTable)}const Vr=e=>(t,l)=>{var n,o,u,s;const{fixed:i,index:a}=t,{fixed:c,index:r}=l;if(i==="left"&&c!=="left"||c==="right"&&i!=="right")return-2;if(c==="left"&&i!=="left"||i==="right"&&c!=="right")return 2;const v=t.key||`${a}`,f=l.key||`${r}`;return(n=e[v])!=null&&n.order||(o=e[f])!=null&&o.order?(((u=e[v])==null?void 0:u.order)||0)-(((s=e[f])==null?void 0:s.order)||0):(t.index||0)-(l.index||0)},jr=e=>{const t=[],l=n=>{n.forEach(o=>{var u;(u=o?.children)!=null&&u.length?l(o?.children):t.push(o)})};return l(e),t};function Ur(e,t){const{defaultValue:l,value:n=F()}=t||{};let o=typeof e=="function"?e():e;n.value!==void 0&&(o=Gt(n)),l!==void 0&&(o=typeof l=="function"?l():l);const u=F(o),s=F(o);qe(()=>{let a=n.value!==void 0?n.value:u.value;t?.postState&&(a=t.postState(a)),s.value=a});function i(a){const c=s.value;u.value=a,wt(s.value)!==a&&t?.onChange&&t?.onChange(a,c)}return he(n,()=>{u.value=n.value}),[s,i]}const qt="down",Mo="up",Xr="left",bt=10,pl=10,Fo=4,Yr="ICON_TYPE_UP",_n="ICON_TYPE_DOWN",Vn="ICON_TYPE_FORBID",Ao=Symbol("edit"),Gr=()=>{const e=de([]),t=de({}),l=(o,u)=>{o&&(Array.isArray(o)?e.value=o:e.value.includes(o)||(e.value=[o]),Object.assign(t.value,u||{}))},n=o=>{if(typeof o>"u"){e.value=[],t.value={};return}const u=Array.isArray(o)?o:[o];e.value=e.value.filter(s=>!u.includes(s)),u.forEach(s=>{delete t.value[s]})};return lt(Ao,{editCellKeys:e,openEditor:l,closeEditor:n,oldValuesMap:t}),{editCellKeys:e,openEditor:l,closeEditor:n}},zo=()=>Je(Ao,{editCellKeys:F([]),openEditor:()=>{},closeEditor:()=>{},oldValuesMap:de({})}),Lo=Symbol("PopupContextProps"),qr=()=>{const e=de(()=>{}),t=de(()=>{}),l=de(!1),n=de(()=>null);lt(Lo,{showPopupContent:e,hidePopupContent:t,visible:l,getPopupContainer:n,registerPopupContext:o=>{e.value=o.showPopupContent||(()=>{}),t.value=o.hidePopupContent||(()=>{}),n.value=o.getPopupContainer||(()=>null)}})},mn=()=>Je(Lo,{}),No=["moz","ms","webkit"];function Zr(){let e=0;return function(t){const l=new Date().getTime(),n=Math.max(0,16-(l-e)),o=window.setTimeout(function(){t(l+n)},n);return e=l+n,o}}function Jr(){if(typeof window>"u")return()=>{};if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);const e=No.filter(t=>`${t}RequestAnimationFrame`in window)[0];return e?window[`${e}RequestAnimationFrame`]:Zr()}function Qr(e){if(typeof window>"u")return null;if(window.cancelAnimationFrame)return window.cancelAnimationFrame(e);const t=No.filter(l=>`${l}CancelAnimationFrame`in window||`${l}CancelRequestAnimationFrame`in window)[0];return t?(window[`${t}CancelAnimationFrame`]||window[`${t}CancelRequestAnimationFrame`])(e):clearTimeout(e)}const jn=Jr();function We(e,t=1){let l=t;const n={id:jn(function o(){l-=1,l<=0?e():n.id=jn(o)})};return n}We.cancel=e=>{e&&Qr(e.id)};const Wo=Symbol("HScrollSymbolKey"),ei=({scrollLeft:e,maxScrollLeft:t,onScroll:l,bodyWidth:n})=>{const o=new Set,u=r=>{const v=Math.max(0,Math.min(r,t.value));o.forEach(f=>{f.scrollLeft=v})};let s;const i=r=>{var v;const f=(v=r.target)==null?void 0:v.scrollLeft;f!==e.value&&(u(f),e.value=f,l(r))},a=r=>{var v;const f=(v=r.target)==null?void 0:v.scrollLeft;f!==e.value&&(We.cancel(s),s=We(()=>{e.value=f,l(r)}))};he(e,()=>{u(e.value)},{immediate:!0}),he(n,(r,v)=>{v===0&&u(e.value)}),ct(()=>{o.forEach(r=>{r.removeEventListener("scroll",i),r.removeEventListener("scroll",a)}),o.clear()}),lt(Wo,{addHScrollDom:(r,v)=>{r&&(o.add(r),r.scrollLeft=e.value,r.addEventListener("scroll",v?a:i,{passive:!0}))},removeHScrollDom:r=>{r&&(o.delete(r),r.removeEventListener("scroll",i),r.removeEventListener("scroll",a))}})},Rl=()=>Je(Wo,{}),_o=Symbol("VScrollSymbolKey"),ti=({scrollTop:e,maxScrollTop:t,onScroll:l,updateAnimate:n,bodyWidth:o})=>{const u=new Set,s=v=>{const f=Math.max(0,Math.min(v,t.value));u.forEach(d=>{d.scrollTop=f})};let i;const a=v=>{var f;const d=(f=v.target)==null?void 0:f.scrollTop;d!==e.value&&(n(),s(d),e.value=d,l(v))};he(e,()=>{s(e.value)},{immediate:!0}),he(o,(v,f)=>{f===0&&s(e.value)});const c=v=>{var f;const d=(f=v.target)==null?void 0:f.scrollTop;d!==e.value&&(We.cancel(i),n(),i=We(()=>{e.value=d,l(v)}))};ct(()=>{u.forEach(v=>{v.removeEventListener("scroll",a),v.removeEventListener("scroll",c)}),u.clear()}),lt(_o,{addVScrollDom:(v,f)=>{v&&(u.add(v),v.scrollTop=e.value,v.addEventListener("scroll",f?c:a,{passive:!0}))},removeVScrollDom:v=>{v&&(u.delete(v),v.removeEventListener("scroll",a),v.removeEventListener("scroll",c))}})},Vo=()=>Je(_o,{}),jo=Symbol("TableContextProps"),li=e=>{lt(jo,e)},je=()=>Je(jo,{}),Ge={TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,A:65,C:67},ni=e=>{const{getDisplayedColBefore:t,getDisplayedColAfter:l,allDisplayedColumns:n,setRangeToCell:o,focusCell:u,flattenData:s,getRowByFlattenIndex:i,allCellProps:a,tabGuardTopRef:c,tabGuardBottomRef:r}=e,v=h(()=>{var C;return(C=s.value[s.value.length-1])==null?void 0:C.flattenIndex}),f=h(()=>{var C;return(C=s.value[0])==null?void 0:C.flattenIndex}),d=(C,R,x=!1)=>x?p(C,R):m(C,R),p=(C,R)=>{const x=C===Ge.UP,H=C===Ge.DOWN,te=C===Ge.LEFT;let ie,A;return x||H?(A=x?f.value:v.value,ie=R.column):(A=R.rowIndex,ie=te!==!1?n.value[0]:n.value[n.value.length-1]),{rowIndex:A,rowPinned:null,column:ie}},m=(C,R)=>{let x=R,H=!1;for(;!H;){switch(C){case Ge.UP:x=U(x);break;case Ge.DOWN:case Ge.ENTER:x=T(x);break;case Ge.RIGHT:x=S(x);break;case Ge.LEFT:x=y(x);break;default:x=null,console.warn("Table: unknown key for navigation "+C)}H=!x||w(x)}return x},w=C=>{let R;switch(C.rowPinned){case"top":case"bottom":break;default:R=i(C.rowIndex)}return!!R},y=C=>{if(!C)return null;const R=t(C.column);return R?{rowIndex:C.rowIndex,column:R,rowPinned:C.rowPinned}:null},S=C=>{if(!C)return null;const R=l(C.column);return R?{rowIndex:C.rowIndex,column:R,rowPinned:C.rowPinned}:null},T=C=>{if(!C)return null;const R=K(C);return R?{rowIndex:R.rowIndex,column:C.column,rowPinned:R.rowPinned}:null},K=C=>{const R=C.rowIndex,x=C.rowPinned;return O(C)?null:{rowIndex:R+1,rowPinned:x}},O=C=>{const R=C.rowIndex;return v.value<=R},N=C=>{const R=C.rowIndex,x=C.rowPinned;return(x?R===0:R===f.value)?null:{rowIndex:R-1,rowPinned:x}},U=C=>{if(!C)return null;const R=N({rowIndex:C.rowIndex,rowPinned:C.rowPinned});return R?{rowIndex:R.rowIndex,column:C.column,rowPinned:R.rowPinned}:null},M=C=>C.rowIndex>=f.value&&C.rowIndex<=v.value,q=(C,R)=>R?D(C):g(C),g=C=>{const R=n.value;let x=C.rowIndex,H=C.rowPinned,te=l(C.column);if(!te){te=R[0];const ie=K(C);if(!ie||!ie.rowPinned&&!M(ie))return null;x=ie?ie.rowIndex:null,H=ie?ie.rowPinned:null}return{rowIndex:x,column:te,rowPinned:H}},D=C=>{const R=n.value;let x=C.rowIndex,H=C.rowPinned,te=t(C.column);if(!te){te=R[R.length-1];const ie=N({rowIndex:C.rowIndex,rowPinned:C.rowPinned});if(!ie||!ie.rowPinned&&!M(ie))return null;x=ie?ie.rowIndex:null,H=ie?ie.rowPinned:null}return{rowIndex:x,column:te,rowPinned:H}},L=C=>{const R=(x=>{let H,te;const ie=(H=i(x.rowIndex))===null||H===void 0?void 0:H.rowKey,A=((((te=a.value[ie])===null||te===void 0?void 0:te[x.column.columnKey])||{}).props||{}).colSpan,ae=[];if(A>1){const me=n.value.findIndex(Se=>Se.columnKey===x.column.columnKey);for(let Se=0;Se<A;Se++)ae.push(n.value[me+Se])}else ae.push(x.column);return ae.filter(me=>!!me)})(C);return R.length===1?C:{rowIndex:C.rowIndex,column:R[R.length-1],rowPinned:C.rowPinned}},$=C=>{let R;const x=i(C.rowIndex),H=x?.rowKey,te=((((R=a.value[H])===null||R===void 0?void 0:R[C.column.columnKey])||{}).props||{}).rowSpan;return!!x&&te!==0&&!x.isExpandRow},z=(C,R)=>V(C,R),V=(C,R)=>{const x=W(C,R);return x&&u(x),!!x},W=(C,R)=>{let x=C;for(;x&&(x===C||!$(x));)R||(x=L(x)),x=q(x,R);return x?x.rowIndex<0?null:(e.ensureCellVisible(x),o(x),x):null};return{getNextCellToFocus:d,getNextTabbedCell:q,getLastBodyCell:()=>({rowIndex:v.value,rowPinned:null}),navigateToNextCell:(C,R)=>{const x=C.keyCode;let H=R,te=!1;for(;H&&(H===R||!$(H));)x===Ge.RIGHT&&(H=L(H)),H=d(x,H),te=!H;te&&C&&x===Ge.UP&&(H={rowIndex:-1,rowPinned:null,column:R.column}),H&&(H.rowIndex<0||(e.ensureCellVisible(H),o(H)))},onTabKeyDown:(C,R)=>{let x,H;const te=R.shiftKey;z(C,te)||(te?(x=c.value)===null||x===void 0||x.focus():(H=r.value)===null||H===void 0||H.focus()),R.preventDefault()},tabToNextCellCommon:z,getFirstCellToFocus:C=>{const R=(()=>{const x=i(f.value),H=n.value[0];return x&&H?{rowIndex:x.rowIndex,rowPinned:null,column:H}:null})();$(R)?(e.ensureCellVisible(R),o(R)):R&&z(R,C)},getLastCellToFocus:C=>{const R=(()=>{const x=i(v.value),H=n.value[n.value.length-1];return x&&H?{rowIndex:x.rowIndex,rowPinned:null,column:H}:null})();$(R)?(e.ensureCellVisible(R),o(R)):R&&z(R,C)},getRowAbove:N,getCellAbove:U,getRowBelow:K}},Uo=e=>{const{scrollContainer:t,scrollAxis:l,onScrollCallback:n=()=>{},showVerticalScrollbar:o,showHorizontalScrollbar:u}=e;let s=null,i=0,a=!1,c=!1,r=!1,v=!1;const f=l.indexOf("x")!==-1,d=l.indexOf("y")!==-1,p=h(()=>{var S,T;return(T=(S=e.scrollByTick)==null?void 0:S.value)!=null?T:20}),m=()=>{s===null&&(s=window.setInterval(w,100),i=0)},w=()=>{i++;const S=i>20?200:i>10?80:40;if(d){const T=e.getVerticalPosition();r&&e.setVerticalPosition(T-S),v&&e.setVerticalPosition(T+S)}if(f){const T=e.getHorizontalPosition();a&&e.setHorizontalPosition(T-S),c&&e.setHorizontalPosition(T+S)}n()},y=()=>{s&&(window.clearInterval(s),s=null)};return{check:(S,T=!1)=>{const K=T||!o.value;if(K&&!u.value)return;const O=t.value.getBoundingClientRect(),N=p.value;return a=S.clientX<O.left+N,c=S.clientX>O.right-N,r=S.clientY<O.top+N&&!K,v=S.clientY>O.bottom-N&&!K,a||c||r||v?m():y()},ensureCleared:y}},Xo=e=>{var t,l;const n=(l=(t=e.target)==null?void 0:t.tagName)==null?void 0:l.toLocaleLowerCase();return!!n?.match("^a$|textarea|input|select|button")},oi=e=>{let t=!1,l=null,n=null,o;const u=[],s=w=>{w.forEach(y=>{const{target:S,type:T,listener:K,options:O}=y;S.addEventListener(T,K,O)}),u.push(()=>{w.forEach(y=>{const{target:S,type:T,listener:K,options:O}=y;S.removeEventListener(T,K,O)})})},i=w=>{for(let y=0;y<w.length;y++)if(w[y].identifier===o?.identifier)return w[y];return null},a=(w,y)=>{if(!t){if(hn(w,y,Fo))return;t=!0,e.onDragStart(y)}},c=()=>{t&&(t=!1),l=null,n=null,o=null,u.forEach(w=>w()),u.length=0},r=w=>!Xo(w),v=w=>{r(w)&&w.preventDefault(),a(w,l)},f=w=>{i(w.touches)&&a(w,l)},d=w=>{i(w.changedTouches)&&c()},p=w=>{var y,S;e.level===((y=w.cellInfo)==null?void 0:y.level)&&(r(w)&&w.preventDefault(),t=!1,l=w,n=(S=w.cellInfo)==null?void 0:S.cellTarget,e.bodyElementRef.value,s([{target:document,type:"mousemove",listener:T=>v(T)},{target:document,type:"mouseup",listener:()=>{c()}},{target:document,type:"contextmenu",listener:T=>T.preventDefault()}]),v(w))};let m;return he([()=>e.bodyElementRef.value,e.enableRangeSelection],([w],[y])=>{y&&(y.removeEventListener("mousedown",p),m&&(y.removeEventListener("touchstart",m),m=null,u.forEach(S=>S()),u.length=0)),w&&e.enableRangeSelection.value&&(w.addEventListener("mousedown",p),m=S=>{S.cancelable&&(S.preventDefault(),S.stopPropagation())})}),{onBodyMousedown:p,onBodyTouchstart:w=>{t=!1,o=w.touches[0],e.bodyElementRef.value;const S=O=>d(O),T=w.target,K=document.body;s([{target:K,type:"touchmove",listener:O=>{O.cancelable&&O.preventDefault()},options:{passive:!1}},{target:T,type:"touchmove",listener:O=>f(O),options:{passive:!0}},{target:T,type:"touchend",listener:S,options:{passive:!0}},{target:T,type:"touchcancel",listener:S,options:{passive:!0}}])},getStartTarget:()=>n}};function Jt(...e){const t=[];for(let l=0;l<e.length;l++){const n=e[l];if(n){if(Kr(n))t.push(n);else if(Ql(n))for(let o=0;o<n.length;o++){const u=Jt(n[o]);u&&t.push(u)}else if(Pr(n))for(const o in n)n[o]&&t.push(o)}}return t.join(" ")}const Yo=Symbol("rangeSymbolKey"),ai=e=>{const{allColumns:t,flattenData:l,prefixCls:n,rangeSelection:o,getRowByFlattenIndex:u,rootRef:s,bodyRef:i,latestRangeStartCell:a,scrollLeft:c,scrollTop:r,scrollTo:v,showVerticalScrollbar:f,showHorizontalScrollbar:d,getIndexsByKey:p,formatRangeCellText:m,copyDelimiter:w}=e,y=xl();Uo({scrollContainer:i,scrollAxis:"xy",getVerticalPosition:()=>r.value,setVerticalPosition:B=>{v(B)},getHorizontalPosition:()=>c.value,setHorizontalPosition:B=>v({left:B}),showVerticalScrollbar:f,showHorizontalScrollbar:d});const S=h(()=>!!o.value),T=h(()=>o.value==="single"),K=h(()=>`${n.value}-body-cell-range-selected`),O=h(()=>`${n.value}-body-cell-range-single-cell`),N=h(()=>`${n.value}-body-cell-range-top`),U=h(()=>`${n.value}-body-cell-range-right`),M=h(()=>`${n.value}-body-cell-range-bottom`),q=h(()=>`${n.value}-body-cell-range-left`),g=de([]),D=h(()=>t.value.filter(B=>!B.__Internal__Column__));he(D,B=>{g.value.forEach(E=>{E.columns=E.columns.filter(le=>B.find(b=>b.columnKey===le.columnKey))}),g.value=g.value.filter(E=>E.columns.length>0)}),he(l,()=>{const B=l.value.length-1;g.value.forEach(E=>{const{startRow:le,endRow:b}=E;le.rowIndex>B&&(E.startRow=null),b.rowIndex>B&&(E.endRow=null)}),g.value=g.value.filter(E=>E.startRow&&E.endRow)});const L=B=>{var E;if((E=B.cellInfo)==null||E.level,!S.value)return;const{ctrlKey:le,metaKey:b,shiftKey:k}=B,P=le||b,X=!T.value&&P,J=g.value.length,se=k&&J>0;X||se||Ie(),B.cellInfo.cellPosition},$=B=>{},z=()=>{},V=h(()=>g.value.length===0),W=h(()=>{const B=g.value.length;if(B===0)return!1;if(B>1)return!0;const E=g.value[0],le=Se(E),b=Z(E);return le.rowPinned!==b.rowPinned||le.rowIndex!==b.rowIndex||E?.columns.length!==1});oi({onDragStart:L,onDragging:$,onDragStop:z,rootElementRef:s,bodyElementRef:i,level:y,enableRangeSelection:S});const C=(B,E)=>{switch(B.rowPinned){case"top":if(E.rowPinned!=="top")return!0;break;case"bottom":if(E.rowPinned!=="bottom")return!1;break;default:if(E.rowPinned)return E.rowPinned!=="top"}return B.rowIndex<E.rowIndex},R=B=>{let E;return B.forEach(le=>{(E===void 0||C(E,le))&&(E=le)}),E},x=B=>{let E;return B.forEach(le=>{(E===void 0||C(le,E))&&(E=le)}),E},H=(B,E)=>!B&&!E||!(B&&!E||!B&&E)&&B.rowIndex===E.rowIndex&&B.rowPinned==E.rowPinned,te=(B,E)=>{let le,b;const k=B===E||B.columnKey===E.columnKey,P=D.value.findIndex(_=>_.columnKey===B.columnKey);if(P<0)return void console.warn(`Table: column ${(le=B.originColumn.key)!==null&&le!==void 0?le:B.originColumn.dataIndex} is not valid`);const X=k?P:D.value.findIndex(_=>_.columnKey===E.columnKey);if(X<0)return void console.warn(`Table: column ${(b=E.originColumn.key)!==null&&b!==void 0?b:E.originColumn.dataIndex} is not valid`);if(k)return[B];const J=Math.min(P,X),se=J===P?X:P,ce=[];for(let _=J;_<=se;_++)ce.push(D.value[_]);return ce},ie=(B,E=!1)=>{if(!S.value)return;const le=te(B.column,B.column);if(!le||a.value===B)return;!T.value&&E||(g.value=[]);const b={rowIndex:B.rowIndex,rowPinned:B.rowPinned},k={startRow:b,endRow:b,columns:le,startColumn:B.column};g.value.push(k),a.value=B,Kt(g)},A=(B,E)=>{const le=E.column,b=te(B.startColumn,le);b&&!ae(B,E)&&(B.columns=b,B.endRow={rowIndex:E.rowIndex,rowPinned:E.rowPinned},Kt(g))},ae=(B,E)=>{const{startRow:le,endRow:b}=B,k=C(le,b)?b:le,P=E.rowIndex===k.rowIndex&&E.rowPinned===k.rowPinned,X=B.columns[0],J=B.columns[B.columns.length-1],se=B.startColumn===X?J:X;return E.column===se&&P},me=(B,E)=>{const le=E.columns!==null&&E.columns.find(k=>k.columnKey===B.column.columnKey),b=re(B.rowIndex,B.rowPinned,E);return le&&b},Se=B=>{var E;return B.startRow&&B.endRow?C(B.startRow,B.endRow)?B.startRow:B.endRow:{rowIndex:(E=l.value[0])==null?void 0:E.rowIndex,rowPinned:null}},Z=B=>{var E;return B.startRow&&B.endRow?C(B.startRow,B.endRow)?B.endRow:B.startRow:{rowIndex:(E=l.value[l.value.length-1])==null?void 0:E.rowIndex,rowPinned:null}},re=(B,E,le)=>{const b=Se(le),k=Z(le),P={rowIndex:B,rowPinned:E},X=P.rowIndex===b.rowIndex&&P.rowPinned==b.rowPinned,J=P.rowIndex===k.rowIndex&&P.rowPinned==k.rowPinned;if(X||J)return!0;const se=!C(P,b),ce=C(P,k);return se&&ce},ve=B=>V.value?0:g.value.filter(E=>me(B,E)).length,pe=B=>{const E=D.value,le=E.findIndex(b=>b.columnKey===B.columnKey);return le>0?E[le-1]:null},ye=B=>{const E=D.value,le=E.findIndex(b=>b.columnKey===B.columnKey);return le<E.length-1?E[le+1]:null},we=B=>{if(B==null)return null;const E=D.value.find(le=>le.columnKey===B);return E||console.warn("Table: could not find column "+B),E},Ke=()=>g.value,Ie=()=>{g.value=[]},Ae=B=>{if(!S.value)return;const E=(le=>{let b,k=!1;if(le.columnsKey)b=le.columnsKey.map(P=>we(P)).filter(P=>P);else{const P=we(le.columnStartKey),X=we(le.columnEndKey);if(!P||!X)return;b=te(P,X),b&&b.length&&(k=b[0]!==P)}if(b)return{startRow:le.rowStartIndex!=null?{rowIndex:le.rowStartIndex,rowPinned:null}:void 0,endRow:le.rowEndIndex!=null?{rowIndex:le.rowEndIndex,rowPinned:null}:void 0,columns:b,startColumn:k?b[b.length-1]:b[0]}})(B);E&&(E.startRow&&(a.value={rowIndex:E.startRow.rowIndex,rowPinned:E.startRow.rowPinned,column:E.startColumn}),g.value.push(E))},Ne=B=>{S.value&&(Ie(),Ae(B))},ze=B=>{let E,le;const b=(E=u(B.rowIndex))===null||E===void 0?void 0:E.rowKey,k=(le=B.column)===null||le===void 0?void 0:le.columnKey;if(b!==void 0&&k!==void 0&&s.value){const P=s.value.querySelector(`[data-row-key="${b}"] [data-column-key="${k}"][data-level="${y}"]`);if(P){const X=P.getElementsByTagName("input")[0];P.focus(),X&&X.focus()}}},ne=(B=!1)=>{if(T.value||V.value)return;const E=g.value[g.value.length-1],le=Se(E),b=Z(E),k=[];g.value.slice(0,-1).forEach(P=>{const X=Se(P),J=Z(P),se=P.columns,ce=se.filter(_=>E?.columns.indexOf(_)===-1);if(ce.length!==se.length)if(C(b,X)||C(J,le))k.push(P);else{if(C(X,le)){const _={columns:[...se],startColumn:E?.startColumn,startRow:Object.assign({},X),endRow:Te.getRowAbove(le)};k.push(_)}if(ce.length>0){const _={columns:ce,startColumn:ce.find(ge=>ge.columnKey===E?.startColumn.columnKey)?E?.startColumn:ce[0],startRow:R([Object.assign({},le),Object.assign({},X)]),endRow:x([Object.assign({},b),Object.assign({},J)])};k.push(_)}C(b,J)&&k.push({columns:[...se],startColumn:E?.startColumn,startRow:Te.getRowBelow(b),endRow:Object.assign({},J)})}else k.push(P)}),g.value=k};he(a,()=>{a.value&&ze(a.value)});const ue=B=>{e.ensureCellRowVisible(B),e.ensureCellColumnVisible(B)},Te=ni({getDisplayedColBefore:pe,getDisplayedColAfter:ye,allDisplayedColumns:D,setRangeToCell:ie,focusCell:ze,ensureCellVisible:ue,...e});lt(Yo,{cellRanges:g,extendLatestRangeToCell:B=>{if(V.value||!a.value)return;const E=g.value[g.value.length-1];A(E,B)},setRangeToCell:ie,onDragStart:L,onDragging:$,isCellInAnyRange:B=>ve(B)>0,getRangeCellClass:B=>{const E=ve(B),le=(se=>{let ce=!1,_=!1,ge=!1,xe=!1;const $e=se.column;let He,Qe;He=pe($e),Qe=ye($e);const dt=g.value.filter(et=>me(se,et));He||(xe=!0),Qe||(_=!0);for(let et=0;et<dt.length&&!(ce&&_&&ge&&xe);et++){const Xe=dt[et],pt=Se(Xe),kt=Z(Xe);!ce&&H(pt,se)&&(ce=!0),!ge&&H(kt,se)&&(ge=!0),!xe&&He&&Xe.columns.findIndex(Ct=>Ct.columnKey===He.columnKey)<0&&(xe=!0),!_&&Qe&&Xe.columns.findIndex(Ct=>Ct.columnKey===Qe.columnKey)<0&&(_=!0)}return{top:ce,right:_,bottom:ge,left:xe}})(B),b=E===1&&!W.value,k=!b&&le.top,P=!b&&le.right,X=!b&&le.bottom,J=!b&&le.left;return Jt({[K.value]:E!==0,[`${K.value}-1`]:E===1,[`${K.value}-2`]:E===2,[`${K.value}-3`]:E===3,[`${K.value}-4`]:E>=4,[O.value]:b,[N.value]:k,[U.value]:P,[M.value]:X,[q.value]:J})},enableRangeSelection:S,singleRangeSelection:T,getDisplayedColBefore:pe,getDisplayedColAfter:ye,navigationService:Te,extendLatestRangeInDirection:B=>{if(V.value||!a.value)return;const E=B.keyCode,le=B.ctrlKey||B.metaKey,b=g.value[g.value.length-1],k=a.value,P=b.columns[0],X=b.columns[b.columns.length-1],J=b.endRow.rowIndex,se=b.endRow.rowPinned,ce={column:k.column===P?X:P,rowIndex:J,rowPinned:se},_=Te.getNextCellToFocus(E,ce,le);return _?(Ne({rowStartIndex:k.rowIndex,rowEndIndex:_.rowIndex,columnStartKey:k.column.columnKey,columnEndKey:_.column.columnKey}),_):void 0},allDisplayedColumns:D,focusCell:ze,ensureCellVisible:ue,getCellRangeCount:ve,intersectLastRange:ne,level:y});const Le=()=>{const B=Ke(),E=[];let le="";B.forEach(b=>{const{startRow:k,endRow:P,columns:X}=b,[J,se]=[k.rowIndex,P.rowIndex].sort((xe,$e)=>xe-$e);let ce=D.value.findIndex(xe=>{var $e;return xe.columnKey===(($e=X[0])==null?void 0:$e.columnKey)}),_=D.value.findIndex(xe=>{var $e;return xe.columnKey===(($e=X[X.length-1])==null?void 0:$e.columnKey)});[ce,_]=[ce,_].sort((xe,$e)=>xe-$e);const ge=[];for(let xe=J;xe<=se;xe++){const $e=l.value[xe];if($e&&!$e.isExpandRow){const He=$e.rowKey,Qe=[],dt=p(He);for(let et=ce;et<=_;et++){const Xe=D.value[et].originColumn,pt=Xe.dataIndex?Io($e.record,Xe.dataIndex):void 0;if(Xe){const kt={record:$e.record,column:Xe,index:xe,recordIndexs:dt,key:He,value:pt};Qe.push(m(kt))}}ge.push(Qe.join(w.value))}}E.push(ge)}),le=E.map(b=>b.join(`prefixCls
`)).join(`prefixCls
`),(b=>{let k,P;const X=document.activeElement,J=document.createElement("textarea");J.style.position="absolute",J.style.opacity="0",J.style.width="1px",J.style.height="1px",J.value=b||" ",document.body.appendChild(J),J.select(),J.focus({preventScroll:!0}),document.execCommand("copy")||console.warn("Table: copy failed, Browser did not allow document.execCommand('copy')"),document.body.removeChild(J),X!==null&&((P=(k=X).focus)===null||P===void 0||P.call(k,{preventScroll:!0}))})(le)};return{getSelectedRange:()=>{const B=Ke(),E=[];return B.forEach(le=>{const{startColumn:b,startRow:k,endRow:P,columns:X}=le,J=l.value[k.rowIndex],se=l.value[P.rowIndex],ce={startColumn:b.originColumn,startRow:{rowIndex:J.rowIndex,recordIndexs:p(J.rowKey)},endRow:{rowIndex:se.rowIndex,recordIndexs:p(se.rowKey)},columns:X.map(_=>_.originColumn),flattenData:l.value};E.push(ce)}),E},appendCellToSelectedRange:Ae,clearAllSelectedRange:Ie,setCellRanges:B=>{S.value&&(g.value=B)},getCellRangeCount:ve,navigationService:Te,copySelectedRange:Le,onBodyKeydown:B=>{if(!(!B.ctrlKey&&!B.metaKey||!S.value)&&!Xo(B)){switch(B.keyCode){case Ge.C:Le();break;case Ge.A:(()=>{if(!S.value)return;const E=D.value;E.length!==0&&Ne({rowStartIndex:0,rowEndIndex:l.value.length-1,columnStartKey:E[0].columnKey,columnEndKey:E[E.length-1].columnKey})})()}B.preventDefault()}}}},gn=()=>Je(Yo,{});function ri(e,t,l){const n=de({}),o=de([]),u=de([]);return he([e,t,l],()=>{const s=new Map,i=new Map,a=new Map,c=[],r=[],v=l.value,f=t.value;function d(p,m=[],w=0){p.forEach((y,S)=>{const T=v(y,S);ht(!s.get(T),"Table",`You set slots duplicate key ${T}, it will cause rendering errors. Please check carefully.`),s.set(T,y);const K=m.concat([S]);i.set(T,K),a.set(K.join("-"),T),c.push(T),w===0&&r.push(T),y&&typeof y=="object"&&f in y&&d(y[f]||[],K,w+1)})}d(e.value),o.value=c,u.value=r,n.value={kvMap:s,kIndexMap:i,indexsKeyMap:a}},{immediate:!0}),{getRecordByKey:s=>{var i,a;return wt((a=(i=n.value)==null?void 0:i.kvMap)==null?void 0:a.get(s))},getIndexsByKey:s=>{var i,a;return(a=(i=n.value)==null?void 0:i.kIndexMap)==null?void 0:a.get(s)},allDataRowKeys:o,allDataRootRowKeys:u,getKeyByIndexs:s=>n.value.indexsKeyMap.get(s)}}function Pt(e,t){const l=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(l>>16)<<16|l&65535}function ii(e,t){return e<<t|e>>>32-t}function kl(e,t,l,n,o,u){return Pt(ii(Pt(Pt(t,e),Pt(n,u)),o),l)}function nt(e,t,l,n,o,u,s){return kl(t&l|~t&n,e,t,o,u,s)}function ot(e,t,l,n,o,u,s){return kl(t&n|l&~n,e,t,o,u,s)}function at(e,t,l,n,o,u,s){return kl(t^l^n,e,t,o,u,s)}function rt(e,t,l,n,o,u,s){return kl(l^(t|~n),e,t,o,u,s)}function si(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;let l,n,o,u,s,i=1732584193,a=-271733879,c=-1732584194,r=271733878;for(l=0;l<e.length;l+=16)n=i,o=a,u=c,s=r,i=nt(i,a,c,r,e[l],7,-680876936),r=nt(r,i,a,c,e[l+1],12,-389564586),c=nt(c,r,i,a,e[l+2],17,606105819),a=nt(a,c,r,i,e[l+3],22,-1044525330),i=nt(i,a,c,r,e[l+4],7,-176418897),r=nt(r,i,a,c,e[l+5],12,1200080426),c=nt(c,r,i,a,e[l+6],17,-1473231341),a=nt(a,c,r,i,e[l+7],22,-45705983),i=nt(i,a,c,r,e[l+8],7,1770035416),r=nt(r,i,a,c,e[l+9],12,-1958414417),c=nt(c,r,i,a,e[l+10],17,-42063),a=nt(a,c,r,i,e[l+11],22,-1990404162),i=nt(i,a,c,r,e[l+12],7,1804603682),r=nt(r,i,a,c,e[l+13],12,-40341101),c=nt(c,r,i,a,e[l+14],17,-1502002290),a=nt(a,c,r,i,e[l+15],22,1236535329),i=ot(i,a,c,r,e[l+1],5,-165796510),r=ot(r,i,a,c,e[l+6],9,-1069501632),c=ot(c,r,i,a,e[l+11],14,643717713),a=ot(a,c,r,i,e[l],20,-373897302),i=ot(i,a,c,r,e[l+5],5,-701558691),r=ot(r,i,a,c,e[l+10],9,38016083),c=ot(c,r,i,a,e[l+15],14,-660478335),a=ot(a,c,r,i,e[l+4],20,-405537848),i=ot(i,a,c,r,e[l+9],5,568446438),r=ot(r,i,a,c,e[l+14],9,-1019803690),c=ot(c,r,i,a,e[l+3],14,-187363961),a=ot(a,c,r,i,e[l+8],20,1163531501),i=ot(i,a,c,r,e[l+13],5,-1444681467),r=ot(r,i,a,c,e[l+2],9,-51403784),c=ot(c,r,i,a,e[l+7],14,1735328473),a=ot(a,c,r,i,e[l+12],20,-1926607734),i=at(i,a,c,r,e[l+5],4,-378558),r=at(r,i,a,c,e[l+8],11,-2022574463),c=at(c,r,i,a,e[l+11],16,1839030562),a=at(a,c,r,i,e[l+14],23,-35309556),i=at(i,a,c,r,e[l+1],4,-1530992060),r=at(r,i,a,c,e[l+4],11,1272893353),c=at(c,r,i,a,e[l+7],16,-155497632),a=at(a,c,r,i,e[l+10],23,-1094730640),i=at(i,a,c,r,e[l+13],4,681279174),r=at(r,i,a,c,e[l],11,-358537222),c=at(c,r,i,a,e[l+3],16,-722521979),a=at(a,c,r,i,e[l+6],23,76029189),i=at(i,a,c,r,e[l+9],4,-640364487),r=at(r,i,a,c,e[l+12],11,-421815835),c=at(c,r,i,a,e[l+15],16,530742520),a=at(a,c,r,i,e[l+2],23,-995338651),i=rt(i,a,c,r,e[l],6,-198630844),r=rt(r,i,a,c,e[l+7],10,1126891415),c=rt(c,r,i,a,e[l+14],15,-1416354905),a=rt(a,c,r,i,e[l+5],21,-57434055),i=rt(i,a,c,r,e[l+12],6,1700485571),r=rt(r,i,a,c,e[l+3],10,-1894986606),c=rt(c,r,i,a,e[l+10],15,-1051523),a=rt(a,c,r,i,e[l+1],21,-2054922799),i=rt(i,a,c,r,e[l+8],6,1873313359),r=rt(r,i,a,c,e[l+15],10,-30611744),c=rt(c,r,i,a,e[l+6],15,-1560198380),a=rt(a,c,r,i,e[l+13],21,1309151649),i=rt(i,a,c,r,e[l+4],6,-145523070),r=rt(r,i,a,c,e[l+11],10,-1120210379),c=rt(c,r,i,a,e[l+2],15,718787259),a=rt(a,c,r,i,e[l+9],21,-343485551),i=Pt(i,n),a=Pt(a,o),c=Pt(c,u),r=Pt(r,s);return[i,a,c,r]}function ui(e){let t,l="";const n=e.length*32;for(t=0;t<n;t+=8)l+=String.fromCharCode(e[t>>5]>>>t%32&255);return l}function ci(e){let t;const l=[];for(l[(e.length>>2)-1]=void 0,t=0;t<l.length;t+=1)l[t]=0;const n=e.length*8;for(t=0;t<n;t+=8)l[t>>5]|=(e.charCodeAt(t/8)&255)<<t%32;return l}function di(e){return ui(si(ci(e),e.length*8))}function vi(e){const t="0123456789abcdef";let l="",n,o;for(o=0;o<e.length;o+=1)n=e.charCodeAt(o),l+=t.charAt(n>>>4&15)+t.charAt(n&15);return l}function fi(e){return unescape(encodeURIComponent(e))}function hi(e){return di(fi(e))}function pi(e){return vi(hi(e))}function mi(e,t,l){return pi(e)}const cl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Go=e=>{let t="",l,n,o,u,s,i,a,c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)u=cl.indexOf(e.charAt(c++)),s=cl.indexOf(e.charAt(c++)),i=cl.indexOf(e.charAt(c++)),a=cl.indexOf(e.charAt(c++)),l=u<<2|s>>4,n=(s&15)<<4|i>>2,o=(i&3)<<6|a,t=t+String.fromCharCode(l),i!=64&&(t=t+String.fromCharCode(n)),a!=64&&(t=t+String.fromCharCode(o));return t=gi(t),t};function gi(e){let t="",l=0,n=0,o=0;for(;l<e.length;)if(n=e.charCodeAt(l),n<128)t+=String.fromCharCode(n),l++;else if(n>191&&n<224)o=e.charCodeAt(l+1),t+=String.fromCharCode((n&31)<<6|o&63),l+=2;else{o=e.charCodeAt(l+1);const u=e.charCodeAt(l+2);t+=String.fromCharCode((n&15)<<12|(o&63)<<6|u&63),l+=3}return t}const Yt=1,Un=2,yi=3,wi=4;function Ci(e){return mi(unescape(encodeURIComponent(e)))}const bi=()=>new Date(parseInt(Go("MTY3MjQxNjAwMDAwMA=="),10));function Si(e){if(!e)return{code:yi};const t=e.substring(0,32),l=e.substring(32);if(t!==Ci(l))return{code:Yt};const n=Go(l)||"",o={};n.split(",").forEach(r=>{const[v,f]=r.split("=");o[v]=f});const u=o.DOMAIN,s=Number(o.ULTIMATE||0),i="EXPERIENCE"in o;if(i){const r=parseInt(o.EXPIRY,10),v=new Date(r);if(v<new Date)return{code:Un,expiredTime:v,isTrial:i}}if(!s&&window?.location){if(!u)return{code:Yt};const r=window.location.hostname,v=u.split("."),f=r.split("."),d=f[f.length-1];if(d&&r!=="localhost"&&r!=="127.0.0.1"&&isNaN(+d))for(let p=v.length-1;p>=0;p--){const m=v[p],w=f[f.length-(v.length-p)];if(w&&m!==w)return{code:Yt}}}let a=0;try{if(a=parseInt(o.EXPIRY,10),!a||Number.isNaN(a))return{code:Yt}}catch{return{code:Yt}}const c=new Date(a+6048e5);return c<bi()?{code:Un,expiredTime:c}:{code:wi,isTrial:i,expiredTime:c}}function xi(){const e=F(""),t=h(()=>$r());return{status:h(()=>Si(t.value)),watermarkMsg:e}}function Fe(e,t){var l;const n=de();return qe(()=>{n.value=e()},{flush:(l=void 0)!=null?l:"sync"}),n}let Fl;function $i(e){if(typeof document>"u")return 0;if(Fl===void 0){const t=document.createElement("div");t.style.width="100%",t.style.height="200px";const l=document.createElement("div"),n=l.style;n.position="absolute",n.top="0",n.left="0",n.pointerEvents="none",n.visibility="hidden",n.width="200px",n.height="150px",n.overflow="hidden",l.appendChild(t),document.body.appendChild(l);const o=t.offsetWidth;l.style.overflow="scroll";let u=t.offsetWidth;o===u&&(u=l.clientWidth),document.body.removeChild(l),Fl=o-u}return Fl}const dl=20,Al=50,zl=100,yn=Symbol("viewportRef"),tl=Symbol("autoHeaderHeight");function Ri(){const e={};return(t,l,n)=>{var o;if(n===void 0||t===void 0)return 0;const u=t.$el||t;if(typeof n=="number")return n;if((o=e[l])!=null&&o[n])return e[l][n];const s=n.match(/^(.*)px$/);let i=Number(s===null?void 0:s[1]);if(e[l]=e[l]||{},Number.isNaN(i)){const a=document.createElement("div");a.style.width=n,a.style.height="0px",u.style.width=`${l}px`,u.appendChild(a),i=Math.floor(a.offsetWidth),u.removeChild(a)}return e[l][n]=i,e[l][n]}}let tn=!1;if(typeof window<"u"&&window.getComputedStyle){const e=document.createElement("div");tn=["","-webkit-","-moz-","-ms-"].some(t=>{try{e.style.position=t+"sticky"}catch{}return e.style.position!=""})}else tn=!0;var xt=tn;const ki=(e,t)=>{let l=0,n=e.length-1,o=e.length;for(;l<=n;){const u=(n-l>>1)+l;e[u].left>=t?(n=u-1,o=u):l=u+1}return o},Ll=(e,t,l)=>{const n=e.length,o=[],u=Math.max(ki(e,t)-1,0);for(let s=u;s<n;s++){const i=e[s];if(!(i.left<=l))break;o.push(i)}return o},Ki="__Internal__Checkbox__Columnkey",Qt="__Internal__Expand__Columnkey",Xn=50;function Nl(e){return e?.fixed===!0?"left":e?.fixed}const Pi=e=>{var t;const l=[],n=(u,s,i=0)=>{l[i]=l[i]||[];let a=s;return u.filter(Boolean).map(c=>{var r;const v={key:c.columnKey,column:c,colStart:a};let f=1;const d=c.children;return d&&d.length>0&&(f=n(d,a,i+1).reduce((p,m)=>p+m,0),v.hasSubColumns=!0),"rowSpan"in c&&(v.rowSpan=c.rowSpan),v.colSpan=f,v.colEnd=v.colStart+f-1,(r=l[i])==null||r.push(v),a+=f,f})};n(e,0);const o=l.length;for(let u=0;u<o;u+=1)(t=l[u])==null||t.forEach(s=>{"rowSpan"in s||s.hasSubColumns||(s.rowSpan=o-u)});return l};function Ii({props:e,rawColumns:t,bodyScrollWidth:l,baseHeight:n,measureWidthRef:o,expandType:u,expandable:s,scrollLeft:i,bodyWidth:a,xVirtual:c,draggingColumnKey:r,latestRangeStartCell:v}){const f=de([]),d=de([]),p=de([]),m=de([]),w=de([]),y=de([]),S=de([]),T=de(1),K=de([]),O=de(new Map),N=de(0);qe(()=>{N.value=K.value.reduce((Z,re)=>Z+re,0)});const U=Ri(),M=de([]),q=h(()=>{const Z=e.rowSelection||{},{checkStrictly:re=!0,fixed:ve}=Z;return{...Z,checkStrictly:re,fixed:ve===!0?"left":ve}}),g=Fe(()=>u.value==="nest"&&e.expandIconColumnIndex===void 0?e.rowSelection?1:0:e.expandIconColumnIndex>0&&e.rowSelection?e.expandIconColumnIndex-1:e.expandIconColumnIndex);qe(()=>{let Z=t.value.slice();if(s.value){const re=g.value||0,ve=t.value[re],pe=e.expandColumnWidth||48,ye=e.expandFixed===!0?"left":e.expandFixed;let we;ye!=="left"||g.value?ye==="right"&&g.value===t.value.length?we="right":we=Nl(ve):we="left";const Ke={title:"",fixed:we,width:pe,minWidth:pe,maxWidth:pe,columnKey:Qt,type:"expand",finallyWidth:pe,__Internal__Column__:!0};re>=0&&Z.splice(re,0,Ke)}if(e.rowSelection){const{columnWidth:re=48,fixed:ve,columnTitle:pe}=q.value,ye={width:re,minWidth:re,maxWidth:re,finallyWidth:re,title:pe,type:"checkbox",columnKey:Ki,__Internal__Column__:!0};if(u.value==="row"&&Z.length&&!g.value){const[we,...Ke]=Z,Ie=ve||Nl(Ke[0]);Ie&&(we.fixed=Ie),Z=[we,{...ye,fixed:Ie},...Ke]}else Z=[{...ye,fixed:ve||Nl(Z[0])},...Z]}Z.length||(Z=[{customRender:()=>null}]),M.value=Z}),he([M,n,l,o],()=>{var Z,re,ve,pe;const ye=M.value;let we=1;const Ke=[],Ie=[],Ae=[],Ne=[],ze=[],ne=[],ue=[];if(O.value=new Map,!o.value)return;const Te=[];let Le=0;const B=(P,X,J,se,ce,_,ge)=>{for(let xe=0,$e=P.length;xe<$e;xe++){const He=P[xe];if(!He)continue;const{width:Qe,fixed:dt=ge,children:et,ellipsis:Xe=!1,tooltip:pt,minWidth:kt,maxWidth:Ct}=He,Vt=U(o.value,l.value,Qe),yt=U(o.value,l.value,kt),rl=Ct?U(o.value,l.value,Ct):1/0,jt=Math.min(Math.max(Vt,yt),rl),Bt=Ir(xe,_),il=He.columnKey||He.key||Bt,vt=dt===!0?"left":dt,Ye=Object.assign({},He,{finallyWidth:jt,columnKey:il,originColumn:He,showTitle:!pt&&(Xe===!0||typeof Xe=="object"&&Xe?.showTitle!==!1),fixed:vt,hidden:He.hidden===!0});if(O.value.set(il,Ye),Ye.hidden)break;et&&et.length?(Ye.children=[],vt==="left"?X.push(Ye):vt==="right"?se.push(Ye):J.push(Ye),we=Math.max(we,ce+1),B(et,Ye.children,Ye.children,Ye.children,ce+1,Bt,vt)):(Ye.width===void 0&&Te.push(Ye),Le+=Ye.finallyWidth,vt==="left"?(Ke.push(Ye),X.push(Ye)):vt==="right"?(Ie.push(Ye),se.push(Ye)):(Ae.push(Ye),Ye.autoHeight&&Ne.push(Ye),J.push(Ye)))}};B(ye,ze,ue,ne,1,"__S_TABLE_COLUMN_Key__");let E=l.value-Le;const le=Te.length?Te:Ke.concat(Ae,Ie).filter(P=>!P.resizable||!P.__Internal__Column__),b=Math.floor(E/le.length);if(E>0)for(let P=0,X=le.length;P<X;P++){const J=le[P];let se=0;P==X-1&&E>b?se=J.finallyWidth+E:se=Math.max(Math.min(J.finallyWidth+b,(Z=J.maxWidth)!=null?Z:1/0),(re=J.minWidth)!=null?re:50),E-=se-J.finallyWidth,J.finallyWidth=se}else for(let P=0,X=Te.length;P<X;P++){const J=Te[P];J.finallyWidth=Math.min((ve=J.minWidth)!=null?ve:50,(pe=J.maxWidth)!=null?pe:1/0)}e.headerHeight!==void 0?Array.isArray(e.headerHeight)?K.value=e.headerHeight.concat(new Array(we).fill(n.value)).slice(0,we):K.value=new Array(we).fill(e.headerHeight):K.value=new Array(we).fill(n.value);const k=(P,X,J,se)=>{let ce=0,_=X;return P.forEach(ge=>{ge.left=_,ge.top=J,ge.children?(ge.rowSpan=1,ge.height=K.value[we-se],ge.finallyWidth=k(ge.children,_,ge.height,se-1)):(ge.rowSpan=se,ge.height=K.value.slice(we-se).reduce((xe,$e)=>xe+$e,0)),_+=ge.finallyWidth,ce+=ge.finallyWidth}),ce};k(ze.concat(ue,ne),0,0,we),f.value=Ke,d.value=Ie,p.value=Ae,m.value=Ne,w.value=ze,y.value=ne,S.value=ue,T.value=we},{immediate:!0});const D=de([]);let L={};const $=de({});qe(()=>{L={};const Z={};D.value=[].concat(f.value,p.value,d.value).map((re,ve)=>(re.columnIndex=ve,Z[re.columnKey]=ve,re)),$.value=Z});const z=de([]),V=de({});qe(()=>{var Z,re,ve,pe;if(e.autoHeaderHeight){z.value=Pi([].concat(w.value,S.value,y.value));const ye=[],we=[];let Ke=0,Ie=0;const Ae=D.value,Ne=Ae.length,ze=e.direction;for(let ne=0;ne<Ne;ne+=1)if(ze==="rtl"){we[ne]=Ie,Ie+=((Z=Ae[ne])==null?void 0:Z.finallyWidth)||0;const ue=Ne-ne-1;ye[ue]=Ke,Ke+=((re=Ae[ue])==null?void 0:re.finallyWidth)||0}else{ye[ne]=Ke,Ke+=((ve=Ae[ne])==null?void 0:ve.finallyWidth)||0;const ue=Ne-ne-1;we[ue]=Ie,Ie+=((pe=Ae[ue])==null?void 0:pe.finallyWidth)||0}V.value={left:ye,right:we}}else z.value=[]});const W=F(0),C=F(0),R=F(0),x=Fe(()=>W.value+C.value+R.value);qe(()=>{W.value=f.value.reduce((Z,re)=>Z+(re.finallyWidth||0),0),C.value=p.value.reduce((Z,re)=>Z+(re.finallyWidth||0),0),R.value=d.value.reduce((Z,re)=>Z+(re.finallyWidth||0),0)});const H=(Z,re=1)=>{if(`${Z}-${re}`in L)return L[`${Z}-${re}`];const ve=D.value;let pe=0,ye=0,we=0;if(ve[Z]){const Ke=ve[Z].left;for(let Ie=Z,Ae=Z+re;Ie<Ae;Ie++){const Ne=ve[Ie];pe+=Ne.finallyWidth||0,ye+=Ne.minWidth,we+=Ne.maxWidth}L[`${Z}-${re}`]={width:pe,left:Ke,minWidth:ye,maxWidth:we}}return L[`${Z}-${re}`]||{width:pe,left:0,minWidth:ye,maxWidth:we}},te=de([]),ie=de([]),A=F(!1),ae=Fe(()=>a.value-(xt?R.value:0)),me=Z=>Z.length>2e3?Z.slice(0,2e3):Z;he([i,ae,p,c],([Z,re,ve])=>{var pe,ye;if(!c.value){te.value=me(ve),A.value=!A.value;return}const we=Ll(ve,Z-dl,re+Z+dl),Ke=m.value.filter(Ie=>!we.find(Ae=>Ie===Ae));if(te.value=me([].concat(Ke,we)),(pe=v.value)!=null&&pe.column){const Ie=O.value.get((ye=v.value)==null?void 0:ye.column.columnKey);Ie&&!Ie.fixed&&!te.value.find(Ae=>Ae.columnKey===Ie.columnKey)&&te.value.splice(0,0,Ie)}A.value=!A.value});const Se=(Z,re,ve)=>Ll(Z,re,ve).map(pe=>Object.assign({},pe,pe.children?{children:Se(pe.children,re,ve)}:{}));return he(A,()=>{if(!c.value){ie.value=me(S.value);return}const Z=i.value-dl,re=ae.value+i.value+dl,ve=Ll(S.value,Z,re),pe=ve[0],ye=ve.length-1,we=ve[ye];if(pe?.children&&(ve[0]=Object.assign({},ve[0],{children:Se(pe.children,Z,re)})),we&&we!==pe&&we.children&&(ve[ye]=Object.assign({},ve[ye],{children:Se(we.children,Z,re)})),ie.value=me(ve),r.value&&!ie.value.find(Ke=>Ke.columnKey===r.value)){const Ke=O.value.get(r.value);ie.value.push(Ke.children?Object.assign({},Ke,{children:[]}):Ke)}}),{leftColumns:f,rightColumns:d,centerColumns:p,leftHeaderColumns:w,rightHeaderColumns:y,centerHeaderColumns:S,leftWidth:W,rightWidth:R,centerWidth:C,bodyMaxWidth:x,maxRowSpan:T,headerHeight:K,maxHeaderHeight:N,allColumns:D,getColumnPosition:H,getColumnPositionByKey:Z=>{const re=$.value[Z];if(!re){ht(!1,"scrollTo",`\`columnKey = ${Z}\` is Invalid`);return}return H(re)},columnKeyIndexMap:$,expandIconColumnIndex:g,visibleCenterColumns:te,visibleCenterHeaderColumns:ie,columnRowsForAutoHeaderHeight:z,stickyOffsets:V}}const wl="asc",ln="desc";function nn(e){return typeof e.sorter=="object"&&typeof e.sorter.multiple=="number"?e.sorter.multiple:!1}function on(e,t){let l=[];function n(o){l.push({column:o,key:o.columnKey,multiplePriority:nn(o),sortOrder:o.sortOrder})}return e.forEach(o=>{o.children?("sortOrder"in o&&n(o),l=[...l,...on(o.children||[],t)]):o.sorter&&("sortOrder"in o?n(o):t&&o.defaultSortOrder&&l.push({column:o,key:o.columnKey,multiplePriority:nn(o),sortOrder:o.defaultSortOrder}))}),l}function Yn(e){return typeof e=="function"?e:e&&typeof e=="object"&&e.compare?e.compare:!1}function qo(e,t,l){const n=t.slice().sort((s,i)=>i.multiplePriority-s.multiplePriority),o=e.slice(),u=n.filter(({column:{sorter:s},sortOrder:i})=>Yn(s)&&i);return u.length?o.sort((s,i)=>{for(let a=0;a<u.length;a+=1){const c=u[a],{column:{sorter:r},sortOrder:v}=c,f=Yn(r);if(f&&v){const d=f(s,i,v);if(d!==0)return v===wl?d:-d}}return 0}).map(s=>{const i=s[l];return i?{...s,[l]:qo(i,t,l)}:s}):o}function Gn(e){const{column:t,sortOrder:l}=e;return{column:t.originColumn,order:l,field:t.dataIndex,columnKey:t.columnKey}}function Wl(e){const t=e.filter(({sortOrder:l})=>l).map(Gn);return t.length===0&&e.length?{...Gn(e[e.length-1]),column:void 0}:t.length<=1?t[0]||{}:t}function Ti(e,t,l,n){const o=de(on(l.value||[],!0)),u=de([]);qe(()=>{let a=!0;const c=on(l.value,!1);let r=[];const v=f=>{a?r.push(f):r.push({...f,sortOrder:null})};if(c.length){let f=null;c.forEach(d=>{f===null?(v(d),d.sortOrder&&(d.multiplePriority===!1?a=!1:f=!0)):(f&&d.multiplePriority!==!1||(a=!1),v(d))})}else r=o.value;u.value===r||Sl(u.value,r)||(u.value=r)});const s=h(()=>qo(t.value,u.value,"children")),i=h(()=>Wl(u.value));return{sortedData:s,sorterStates:u,sorter:i,getSorters:a=>Wl(a),changeSorter:function(a){var c;let r;a.multiplePriority!==!1&&u.value.length&&((c=u.value[0])==null?void 0:c.multiplePriority)!==!1?r=[...u.value.filter(({key:v})=>v!==a.key),a]:r=[a],o.value=r,n(Wl(r),r)}}}function wn(e){let t=[];return(e||[]).forEach(({value:l,children:n})=>{t.push(l),n&&(t=[...t,...wn(n)])}),t}function qn(e){const t={};return e.forEach(({key:l,filteredKeys:n,column:o})=>{var u;const s=o.filterDropdown||((u=o?.slots)==null?void 0:u.filterDropdown)||o.customFilterDropdown,{filters:i}=o;if(s)t[l]=n||null;else if(Array.isArray(n)){const a=wn(i);t[l]=a.filter(c=>n.includes(String(c)))}else t[l]=null}),t}function Zn(e,t){return t.reduce((l,n)=>{const{column:{onFilter:o,filters:u},filteredKeys:s}=n;return o&&s&&s.length?l.filter(i=>s.some(a=>{const c=wn(u),r=c.findIndex(f=>String(f)===String(a)),v=r!==-1?c[r]:a;return o(v,i)})):l},e)}function an(e,t){let l=[];return(e||[]).forEach(n=>{var o,u;const s=n.filterDropdown||((o=n?.slots)==null?void 0:o.filterDropdown)||n.customFilterDropdown;if(n.filters||s||"onFilter"in n)if("filteredValue"in n){let i=n.filteredValue;s||(i=(u=i?.map(String))!=null?u:i),l.push({column:n,key:n.columnKey,filteredKeys:i,forceFiltered:n.filtered})}else l.push({column:n,key:n.columnKey,filteredKeys:t&&n.defaultFilteredValue?n.defaultFilteredValue:void 0,forceFiltered:n.filtered});"children"in n&&(l=[...l,...an(n.children||[],t)])}),l}function Ei(e,t,l,n){const o=F(an(l.value,!0)),u=F([]);qe(()=>{const a=an(l.value,!1);let c=[];const r=a.every(({filteredKeys:v})=>v===void 0);if(r)c=o.value;else{const v=a.every(({filteredKeys:f})=>f!==void 0);ht(r||v,"Table","`FilteredKeys` should all be controlled or not controlled.")}u.value===c||Sl(u.value,c)||(u.value=c)});const s=h(()=>qn(u.value)),i=h(()=>Zn(t.value,u.value));return{filterStates:u,filters:s,filterData:i,getFilters:a=>Zn(t.value,a),changeFilter:a=>{const c=u.value.filter(({key:r})=>r!==a.key);c.push(a),o.value=c,n(qn(c),c)}}}function Hi(e,t){let l=0,n=e.length-1;for(;l<n;){const o=l+Math.floor((n-l)/2);t(e[o])?n=o:l=o+1}return l}function Oi(e,t,l,n,o,u){const s=de([]),i=de({}),a=de({}),c=F(0),r=h(()=>e.size==="small"?39:e.size==="middle"?47:55),v=h(()=>e.size==="small"?e.rowHeight||39:e.size==="middle"?e.rowHeight||47:e.rowHeight||55);let f;const d=F(0),p=F(-1),m=F(0);qe(()=>{const g=Va(s.value,D=>D<c.value-l.value-Al);m.value=g<0?0:g});const w=F(0);he(n,()=>{w.value=n.value},{immediate:!0}),qe(()=>{if(t.value.length===s.value.length)if(o.value)if(l.value){let g=Hi(s.value,L=>L>=w.value-Al)-1;g=g<0?0:g,d.value=g>m.value?m.value:g;let D=fo(s.value,L=>L>=w.value+l.value+Al,d.value);D=D>=0?D:s.value.length-1,p.value=D>s.value.length-1?s.value.length-1:D}else d.value=0,p.value=-1;else d.value=0,p.value=t.value.length-1});const y=de({}),S=F(!1);setTimeout(()=>{S.value=!0});const T=F(!0),K=F(!1),O=de({});let N;const U=()=>{We.cancel(N),N=We(()=>{const g=y.value,D={};let L=!1;Object.values(O.value).forEach(({rowKey:$,height:z})=>{D[$]=D[$]||0,z>D[$]&&(D[$]=z)});for(const[$,z]of Object.entries(D))g[$]!==z&&(g[$]=z,L=!0);L&&(y.value=g,K.value=!K.value)})};let M;he([d,p,S],([g,D],[L,$])=>{S.value?T.value=g===L&&D===$:T.value=!0}),he([K,i],()=>{We.cancel(M),M=We(()=>{const g=r.value,D=y.value,L=i.value,$=a.value,z=t.value,V=z.length,W={};let C=0;const R=[];for(let x=0;x<V;x++){const{rowKey:H}=z[x],te=L[H]!==void 0?L[H]:D[H]===void 0?$[H]:D[H];W[H]=te,R.push(C),C+=te===void 0?g:te}a.value=W,c.value=C,s.value=R},T.value?0:1)}),ct(()=>{We.cancel(N),We.cancel(M)});const q=g=>{var D,L;const $={},z=r.value,V={},W=y.value,C=g.length;if(typeof e.rowHeight=="function")for(let R=0;R<C;R++){const{record:x,rowKey:H,isExpandRow:te=!1}=g[R];let ie=e.rowHeight(x,te,z);ie=Ln(ie)?ie:void 0,$[H]=ie,V[H]=(D=ie??W[H])!=null?D:0}else{let R=e.rowHeight;if(Ln(R))for(let x=0;x<C;x++){const{rowKey:H,isExpandRow:te=!1}=g[x];te&&(R=void 0),$[H]=R,V[H]=(L=R??W[H])!=null?L:0}else for(let x=0;x<C;x++){const{rowKey:H}=g[x];$[H]=void 0,V[H]=W[H]}}i.value=$,y.value=V};return he([t,v],([g])=>{q(g||[]),S.value=!1,setTimeout(()=>{S.value=!0})},{immediate:!0}),{rowPosition:s,rowHeights:i,viewportHeight:c,addHeight:(g,D,L,$)=>{We.cancel(f)},mergedRowHeights:a,startIndex:d,endIndex:p,getRowHeight:(g,D=1)=>{const L=t.value,$=Math.min(L.length-1,g+D-1);let z=0;const V=a.value;for(let W=g;W<=$;W++){const{rowKey:C}=L[W];z+=V[C]===void 0?r.value:V[C]}return z},addRowHeight:(g,D,L)=>{const $=O.value[g]||{};($.rowKey!==D||$.height!==L)&&(O.value[g]={rowKey:D,height:L},U())},removeRowHeight:g=>{O.value[g]&&(delete O.value[g],U())},getRowPositionByKey:g=>{var D;const L=(D=u.value[g])==null?void 0:D.flattenIndex;if(L===void 0){ht(!1,"scrollTo",`\`rowKey = ${g}\` is Invalid`);return}return s.value[L]}}}function Bi(e,t){return`${e}-${t}`}const Jn=()=>({});function Di(e,t,l,n,o,u){const s=de([]),i=de({}),a=de([]),c=de([]),r=de(new Map),v=de(Jn);return qe(()=>{var f;v.value=((f=u.value)==null?void 0:f.getCheckboxProps)||Jn}),he([e,t,n,l],()=>{const f=n.value,d=l.value,p=t.value,m=o.value,w={},y=[],S=[],T=new Map;let K=0;const O=(N,U,M,q=0,g=null)=>{const D=[],L=v.value;return N.forEach(($,z)=>{const V=f($,z),W=L?.($),C=Bi(g?g.pos:"0",z),R=M&&d?.has(V),x={record:$,indent:U,rowKey:V,rowIndex:z,pos:C,level:q,flattenIndex:K},H=Object.assign({parent:g},x);if(w[V]=H,y.push(V),T.set(V,W),W?.disabled||S.push(V),H.parent&&(H.parent.children=H.parent.children||[],H.parent.children.push(H)),M&&(D.push(x),K+=1),M&&U===0&&m==="row"){const te=`__Internal__Expand__Key_${V}`;R&&(D.push({record:$,indent:U,rowKey:te,isExpandRow:!0,rowIndex:z,pos:C,level:q,flattenIndex:K}),K+=1)}$&&typeof $=="object"&&p in $&&D.push(...O($[p]||[],U+1,R,q+1,H))}),D};s.value=O(e.value,0,!0),i.value=w,a.value=y,c.value=S,r.value=T},{immediate:!0}),{flattenData:s,keyEntities:i,pageDataRowKeys:a,pageDataEnableRowKeys:c,checkboxPropsMap:r,getRowFlattenIndexByKey:f=>{var d;return(d=i.value[f])==null?void 0:d.flattenIndex},isMyChildren:(f,d)=>{var p,m;if(f===d||d===void 0)return!1;let w=i.value[d],y=!1;for(;w&&!y;){if(((p=w.parent)==null?void 0:p.rowKey)===f){y=!0;break}w=i.value[(m=w.parent)==null?void 0:m.rowKey]}return y},getRowByFlattenIndex:f=>s.value[f]}}const vl=10,Mi=["5","10","20","50"];function Fi(e,t){const l={current:t.current,pageSize:t.pageSize};return Object.keys(e&&typeof e=="object"?e:{}).forEach(o=>{const u=t[o];typeof u!="function"&&(l[o]=u)}),l}function Ai(...e){const t={};return e.forEach(l=>{l&&Object.keys(l).forEach(n=>{const o=l[n];o!==void 0&&(t[n]=o)})}),t}function zi(e,t,l,n){const o=bl({current:1,pageSize:vl,pageSizeOptions:Mi}),u=h(()=>t.size),s=h(()=>{const{pagination:f}=t;if(t.pagination===!1)return{};const{total:d=0,...p}=f&&typeof f=="object"?f:{},m=Ai(o,p,{total:d>0?d:e.value}),w=Math.ceil((d||e.value)/m.pageSize);m.current>w&&(m.current=w||1);const y=u.value==="small"||u.value==="middle"?"small":void 0;return m.size=m.size||y,m}),i=(f=1,d)=>{o.current=f,o.pageSize=d||s.value.pageSize||vl};let a;const c=(f,d)=>{clearTimeout(a),a=setTimeout(()=>{var p,m,w,y,S;f===s.value.current&&(d||((p=s.value)==null?void 0:p.pageSize))===((m=s.value)==null?void 0:m.pageSize)||(t.pagination&&((y=(w=t.pagination).onChange)==null||y.call(w,f,d)),i(f,d),n?.(f,d||((S=s.value)==null?void 0:S.pageSize)||vl))},0)};ct(()=>{clearTimeout(a)});const r=h(()=>{const f=t.direction==="rtl"?"left":"right",{position:d}=s.value,p={};if(t.pagination===!1)return{};if(d!==null&&Array.isArray(d)){const m=d.find(S=>S.indexOf("top")!==-1),w=d.find(S=>S.indexOf("bottom")!==-1),y=d.every(S=>`${S}`=="none");m||w||y||(p.bottom=f),m&&(p.top=m.toLowerCase().replace("top","")),w&&(p.bottom=w.toLowerCase().replace("bottom",""))}else p.bottom=f;return p}),v=h(()=>{const f=l.value;if(t.pagination===!1||!s.value.pageSize)return f;const{current:d=1,total:p=0,pageSize:m=vl}=s.value;return f.length<p?f.length>m?(ht(!1,"Table","`dataSource` length is less than `pagination.total` but large than `pagination.pageSize`. Please make sure your config correct data with async mode."),f.slice((d-1)*m,d*m)):f:f.slice((d-1)*m,d*m)});return{mergedPagination:s,onChange:c,onShowSizeChange:(f,d)=>{var p,m;c(f,d),t.pagination!==!1&&((m=(p=t.pagination)==null?void 0:p.onShowSizeChange)==null||m.call(p,f,d))},pos:r,refreshPagination:i,pageData:v}}const Qn=(e,t,l,n=4)=>{if(e==t)return We(()=>({}));const o=()=>(e+=(t-e)/n,Math.abs(e-t)<1?(l(t,!0),We(()=>({}))):(l(e,!1),We(o)));return o()};function Li(e,t,l,n,o,u,s,i,a){const c=de([]),r=de([]);let v={},f=!0;return he([t,n,o],()=>{var d;if(l.value.length!==t.value.length)return;const p=[],m=[],w=[],y={},S=Math.min(n.value+2e3,o.value+1),T=((d=l.value)==null?void 0:d.slice(n.value,S))||[],K=t.value.slice(n.value,S)||[],O=i(u.value);if(l.value[O]&&(O<n.value||O>=S)&&(T.push(l.value[O]),K.push(t.value[O])),a.value){const M=a.value.rowIndex;l.value[M]&&(M<n.value||M>=S)&&(T.push(l.value[M]),K.push(t.value[M]))}T.forEach((M,q)=>{const g=v[M.rowKey];g!==void 0?(p[g]=M,m[g]=K[q],y[M.rowKey]=g):w.push([M,K[q]])});const N=w[0];u.value!==void 0&&s.value&&N&&(f&&(w.shift(),w.push(N)),f=!f);let U=0;w.forEach(([M,q])=>{const g=fo(p,D=>!D,U);g!==-1?(U=g,p[g]=M,m[g]=q,y[M.rowKey]=g):(y[M.rowKey]=p.length,p.push(M),m.push(q))}),v=y,c.value=p,r.value=m},{immediate:!0}),{data:c,pos:r}}const Ni=({leftColumns:e,rightColumns:t,visibleCenterColumns:l,allColumns:n,data:o,mergedRowHeights:u,getColumnPosition:s,bodyWidth:i,leftWidth:a,centerWidth:c,getRowHeight:r,customCell:v})=>{const f=de({}),d=de({}),p=de(new Map),m=(w,y,S,T,K)=>{var O,N,U,M;const{customRender:q,originColumn:g,dataIndex:D,columnIndex:L,left:$,customCell:z}=y,V={},W=(N=(O=z||v.value)==null?void 0:O({record:T,rowIndex:S,column:y}))!=null?N:{},C=Object.assign({overflow:K},Or(W.style||{})),R=Object.assign({},W);if(q){const H=Io(T,D),te=q({text:H,value:H,record:T,index:S,column:g});te&&bo(te)&&!dr(te)&&!zt(te)?(Object.assign(R,te.props||{}),V.children=te.children):V.children=te}R.colSpan=(U=R.colSpan)!=null?U:1,R.rowSpan=(M=R.rowSpan)!=null?M:1;const{width:x}=s(L,R.colSpan);return Object.assign(C,{width:`${x}px`,left:$-w+"px"}),x===0&&(C.display="none"),R.colSpan>1&&(C.zIndex=1),R.rowSpan>1&&(C.height=`${r(S,R.rowSpan)-1}px`),V.props=Object.assign({},R,{style:{...R.style,...C}}),V};return qe(()=>{const w={},y={},S=(O,N,U,M,q,g,D,L)=>{var $,z,V,W;const C=U.length;let R=null,x=0;for(let H=0;H<C;H++){const{columnIndex:te,columnKey:ie}=U[H],A=m(N,U[H],q,g,D);w[M][ie]=A,($=A.props)!=null&&$.rowSpan&&(y[M]=!0),H===0&&((z=A.props)==null?void 0:z.colSpan)===0&&(x=te)}if(x!==0)for(let H=x-1;H>0;H--){const te=n.value[H];if(te.fixed)break;const ie=m(N,te,q,g,D);if(((V=ie.props)==null?void 0:V.colSpan)!==0){R=te,w[M][te.columnKey]=ie,(W=ie.props)!=null&&W.rowSpan&&(y[M]=!0);break}}if(R){const H=U.slice();H.push(R),L?.set(M,H)}else L?.set(M,U)},T=new Map,K=o.value.length;for(let O=0;O<K;O++){if(!o.value[O])continue;const{record:N,isExpandRow:U,rowKey:M,rowIndex:q}=o.value[O];w[M]={};const g=u.value[M]?"hidden":"initial";U?w[M][Qt]={props:{style:{left:"0px",width:`${i.value}px`,zIndex:1}}}:(S(0,0,e.value,M,q,N,g),S(0,a.value,l.value,M,q,N,g,T),S(0,a.value+c.value,t.value,M,q,N,g))}f.value=w,d.value=y,p.value=T}),{allCellProps:f,hasMultiRowSpanInfo:d,centerRowColumnsMap:p}},Zo=Symbol("TableSlotsContext"),Rt=()=>Je(Zo,{});var Wi=Pe({name:"TableSlotsContextProvider",inheritAttrs:!1,props:{value:Object},setup(e,{slots:t}){const l=bl({});return he(()=>e.value,()=>{Tr(l),Object.assign(l,e.value)},{immediate:!0}),lt(Zo,l),()=>{var n;return(n=t.default)==null?void 0:n.call(t)}}}),_i=Pe({name:"MeasureWidth",inheritAttrs:!1}),Be=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};const Vi={style:{position:"absolute",top:"0",left:"0","z-index":"-999",width:"1px",height:"0",padding:"0",margin:"0",overflow:"hidden","pointer-events":"none"}};function ji(e,t,l,n,o,u){return I(),Q("div",Vi)}var Ui=Be(_i,[["render",ji]]);const Xi=typeof window<"u"?window:void 0;function fl(e){var t;const l=Gt(e);return(t=l?.$el)!=null?t:l}function ml(e,t,l={}){const{window:n=Xi,ignore:o,capture:u=!0,detectIframe:s=!1}=l;if(!n)return;const i=F(!0);let a;const c=m=>{n.clearTimeout(a);const w=fl(e);!w||w===m.target||m.composedPath().includes(w)||!i.value||t(m)},r=m=>o&&o.some(w=>{const y=fl(w);return y&&(m.target===y||m.composedPath().includes(y))}),v=m=>{const w=fl(e);i.value=!!w&&!m.composedPath().includes(w)&&!r(m)},f=m=>{if(m.button===0){const w=m.composedPath();m.composedPath=()=>w,a=n.setTimeout(()=>c(m),50)}},d=m=>{var w;const y=fl(e);((w=document.activeElement)==null?void 0:w.tagName)==="IFRAME"&&!y?.contains(document.activeElement)&&t(m)};n.addEventListener("click",c,{passive:!0,capture:u}),n.addEventListener("pointerdown",v,{passive:!0}),n.addEventListener("pointerup",f,{passive:!0}),s&&n.addEventListener("blur",d);const p=()=>{n.removeEventListener("click",c),n.removeEventListener("pointerdown",v),n.removeEventListener("pointerup",f),n.removeEventListener("blur",d)};return ct(()=>{p()}),p}function Jo(e,t,l,n){const{width:o,height:u}=l,{width:s,height:i}=n,a=Math.floor(o),c=Math.floor(u);t==="width"?a!==s&&e.dispatchEvent(new CustomEvent("resizewidth",{detail:{width:a}})):t==="height"?c!==i&&e.dispatchEvent(new CustomEvent("resizeheight",{detail:{height:c}})):(a!==s||c!==i)&&e.dispatchEvent(new CustomEvent("resize",{detail:{width:a,height:c}})),e.__resizeObserver__rect={width:a,height:c}}function eo(e){e.__resizeObserver__listeners&&(e.__resizeObserver__listeners.unobserve(e),e.__resizeObserver__listeners.disconnect(),e.__resizeObserver__listeners=null)}function to(e){return function(t){const l=t[0].target;Jo(l,e,l.getBoundingClientRect(),l.__resizeObserver__rect||{})}}const Wt={created(e,t){const{arg:l,value:n=!0}=t;if(n){const o=new Xl(to(l));o.observe(e),e.__resizeObserver__listeners=o}},updated(e,t){const{arg:l,value:n=!0}=t;if(n&&!e.__resizeObserver__listeners){const o=new Xl(to(l));o.observe(e),e.__resizeObserver__listeners=o}else n||eo(e)},beforeUnmount(e,t){const{arg:l,value:n=!0}=t;n&&(Jo(e,l,{width:0,height:0},e.__resizeObserver__rect||{}),eo(e))}};var Yi=Pe({name:"PopupContainer",directives:{resize:Wt},props:{prefixCls:{type:String}},setup(e,{expose:t}){const l=de(),n=de(),{registerPopupContext:o,visible:u}=mn();let s=null;const i=v=>{s=null,u.value=!1,v.style.opacity="0",a.value=null},a=de();let c;const r=()=>{const v=l.value;if(!v||!u.value||!n.value){u.value=!1;return}if(!s||!document.contains(s))return;const{x:f,y:d}=s.getBoundingClientRect(),{left:p,top:m,width:w}=n.value.getBoundingClientRect(),y=v.offsetWidth,S=v.children[0],T=Math.min(v.scrollHeight,S.scrollHeight);v.style.opacity="1",v.style.height=`${T}px`;let K=f-p;const O=d-m;K+y>w&&(K=w-y),v.style.left=`${K}px`,v.style.top=`${O}px`};return ml(l,()=>{i(l.value)}),t({alignPopup:r}),o({showPopupContent:(v,f,d)=>{u.value=!0,a.value=()=>v?v({event:f,...d,popupContaniner:l.value,hidePopup:()=>{i(l.value)}}):null,s=f.currentTarget,clearTimeout(c),c=setTimeout(()=>{r()}),f.preventDefault()},hidePopupContent:i,getPopupContainer:()=>l.value}),{hidePopup:i,alignPopup:r,handlePopupResize:()=>{r()},handleRootResize:()=>{r()},targetRef:l,rootRef:n,popupContent:a,visible:u}}});function Gi(e,t,l,n,o,u){const s=Lt("resize");return I(),Q("div",{ref:"rootRef",class:j(`${e.prefixCls}-popup`),style:{position:"absolute",top:"0",left:"0",right:"0"},onResize:t[1]||(t[1]=(...i)=>e.handleRootResize&&e.handleRootResize(...i))},[Ze(oe("div",{ref:"targetRef",class:j(`${e.prefixCls}-popup-container`)},[Ze((I(),Q("div",{class:j(`${e.prefixCls}-popup-container-inner`),onResize:t[0]||(t[0]=(...i)=>e.handlePopupResize&&e.handlePopupResize(...i))},[(I(),fe(it(e.popupContent)))],34)),[[s]])],2),[[hl,e.visible]])],34)}var qi=Be(Yi,[["render",Gi]]);const Qo=Symbol("HeaderContextProps"),ea=e=>{lt(Qo,e)},ta=()=>Je(Qo,{});let _l;function la(){return _l||(_l=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),_l}let Vl;function Cn(){return Vl||(Vl=(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream),Vl}const lo=/Chrome\/(\d+)/.exec(navigator.userAgent);lo&&+lo[1];function bn(e,t){if(e?.classList&&t){const l=Array.isArray(t)?t:t.split(" ");e.classList.add(...l)}}function Sn(e,t){if(e?.classList&&t){const l=Array.isArray(t)?t:t.split(" ");e.classList.remove(...l)}}var xn=Pe({props:{onlyAutoShow:{type:Boolean},notShowAuto:{type:Boolean}},setup:e=>{const t=je(),l=h(()=>`${t.props.prefixCls}`),n=F(),o=F(),u=F(!1),s=h(()=>{const T=`${t.scrollBarSize.value||15}px`;return{height:T,minHeight:T,maxHeight:T,width:"100%"}}),i=h(()=>{const T=`-${t.scrollBarSize.value||15}px`,K=t.props.horizontalScrollSticky,O=t.props.paginationSticky;if(K===!0){let N=0;return t.pos.value.bottom&&O&&(N+=O===!0?t.bottomPaginationHeight.value:(O.offsetBottom||0)+t.bottomPaginationHeight.value),{position:"sticky","z-index":8,bottom:`${N}px`,marginTop:T}}return{}}),a=la()||Cn(),c=h(()=>t.scrollBarSize.value===0&&a),r=h(()=>({[`${l.value}-horizontal-scroll`]:!0,[`${l.value}-horizontal-scroll-hidden`]:t.scrollBarSize.value===0,[`${l.value}-scrollbar-active`]:u.value,[`${l.value}-apple-scroll`]:a})),v=h(()=>t.showHorizontalScrollbar.value&&(!e.onlyAutoShow||c.value)&&(!e.notShowAuto||!c.value)),f=h(()=>t.showVerticalScrollbar.value),d=h(()=>{const T=`${t.bodyMaxWidth.value}px`;return{...s.value,width:T,minWidth:T,maxWidth:T}}),p=h(()=>({width:`${t.scrollBarSize.value}px`,height:"100%",overflowX:"hidden"})),{addHScrollDom:m,removeHScrollDom:w}=Rl();let y=null;const S=()=>{c.value&&(clearTimeout(y),bn(o.value,`${l.value}-scrolling`),y=setTimeout(()=>{Sn(o.value,`${l.value}-scrolling`)},500))};return gt(()=>{he(n,()=>{n.value&&(w(n.value),n.value.removeEventListener("scroll",S),m(n.value,!0),n.value.addEventListener("scroll",S,{passive:!0}))},{immediate:!0})}),ct(()=>{clearTimeout(y),n.value&&(w(n.value),n.value.removeEventListener("scroll",S))}),()=>v.value?Y("div",{ref:o,class:r.value,"aria-hidden":"true",style:{...s.value,...i.value},onMousedown:()=>u.value=!0,onMouseenter:()=>u.value=!0,onMouseleave:()=>u.value=!1,onTouchend:()=>u.value=!1},[Y("div",{key:"center",ref:n,class:`${l.value}-horizontal-scroll-viewport`,style:s.value},[Y("div",{class:`${l.value}-body-horizontal-scroll-container`,style:d.value},null)]),f.value&&Y("div",{style:p.value},null)]):null}});const Zi=()=>{const e=je().allColumns.value;return Y("colgroup",null,[e.map(t=>{const{finallyWidth:l}=t;return Y("col",{style:{width:`${l}px`}},null)})])},ll=(e,{slots:t})=>{var l;return(l=t.default)==null?void 0:l.call(t)};ll.displayName="RenderSlot";ll.inheritAttrs=!1;const nl=(e,{slots:t})=>{var l,n,o;return typeof e.vnode=="function"?((l=e.vnode)==null?void 0:l.call(e,e.props||{}))||((n=t.default)==null?void 0:n.call(t)):e.vnode||((o=t.default)==null?void 0:o.call(t))};nl.props=["vnode","props"];nl.inheritAttrs=!1;function na(e,t,l,n,o="ltr"){const u=l[e]||{},s=l[t]||{};let i,a;u.fixed==="left"?i=n.left[e]:s.fixed==="right"&&(a=n.right[t]);let c=!1,r=!1,v=!1,f=!1;const d=l[t+1],p=l[e-1];return o==="rtl"?i!==void 0?f=!(p&&p.fixed==="left"):a!==void 0&&(v=!(d&&d.fixed==="right")):i!==void 0?c=!(d&&d.fixed==="left"):a!==void 0&&(r=!(p&&p.fixed==="right")),{fixLeft:i,fixRight:a,lastFixLeft:c,firstFixRight:r,lastFixRight:v,firstFixLeft:f,isSticky:n.isSticky}}const Ji=`
<svg viewBox="64 64 896 896" focusable="false" data-icon="holder" width="1em" height="1em" fill="currentColor" aria-hidden="true">
  <path d="M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"></path>
</svg>
`,oa='<svg viewBox="64 64 896 896" focusable="false" data-icon="stop" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"></path></svg>',Qi='<svg viewBox="0 0 512 512" focusable="false" data-icon="stop" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M464 208L352 96L240 208"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M352 113.13V416"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M48 304l112 112l112-112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M160 398V96"></path></svg>',es='<svg viewBox="0 0 512 512" focusable="false" data-icon="stop" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M304 48l112 112l-112 112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M398.87 160H96"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M208 464L96 352l112-112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M114 352h302"></path></svg>',ts="ICON_TYPE_DOWN",no="ICON_TYPE_FORBID",oo=()=>document.fullscreenElement||document.body,aa=({columnKey:e,disabled:t,column:l,domRef:n})=>{const o=F(!1),u=Je(yn),{prefixCls:s,draggingColumnKey:i,onColumnDragEnd:a,scrollTo:c,leftWidth:r,rightWidth:v,centerWidth:f,bodyWidth:d,leftHeaderColumns:p,visibleCenterHeaderColumns:m,rightHeaderColumns:w,columnDrag:y}=je(),S=Je(tl,!1),T=F(0),K=F();qe(()=>{l.value.fixed==="right"?(T.value=r.value+f.value,K.value="right"):l.value.fixed?(T.value=0,K.value="left"):(T.value=r.value,K.value="center"),S&&(T.value=0)});const{dragColumnPlaceholderRef:O,headerRef:N}=ta(),U=Rt();let M;const q=F(),g=F(),D=F(),L=F(),$=document.createElement("div");let z,V;const W=F(0),C=F(!0);let R=null,x={},H=0;const te=[];let ie=null;const A=F(ts),ae=h(()=>{switch(K.value){case"left":return p.value;case"center":return m.value;case"right":return w.value;default:return[]}}),me=h(()=>{let k=()=>!1;return S&&K.value!=="center"?k=()=>{var P,X;const{x:J}=x,se=K.value==="left"?((P=u?.value)==null?void 0:P.scrollLeft)+J:((X=u?.value)==null?void 0:X.scrollLeft)+J+d.value-v.value,ce=K.value==="left"?se+r.value:se+v.value,_=window.pageXOffset||document.documentElement.scrollLeft;return g.value+bt<=se?($.style.left=se+_-20+"px",!0):g.value+bt>=ce?($.style.left=ce+_-20+"px",!0):!1}:K.value!=="center"?k=()=>{const{x:P,width:X}=x,J=window.pageXOffset||document.documentElement.scrollLeft;return g.value+bt<=P?($.style.left=P+J-20+"px",!0):g.value+bt>=P+X?($.style.left=P+J+X-20+"px",!0):!1}:k=()=>{const{x:P,width:X}=u.value.getBoundingClientRect(),J=window.pageXOffset||document.documentElement.scrollLeft;return g.value+bt<=P+r.value?($.style.left=P+J+r.value-20+"px",!0):g.value+bt>=P+X-v.value?($.style.left=P+J+X-v.value-20+"px",!0):!1},k}),Se=()=>{const{y:k,height:P}=x,X=window.pageYOffset||document.documentElement.scrollTop;return q.value+pl<=k?($.style.top=k+X-20+"px",!0):q.value>k+P?($.style.top=k+X+P-10+"px",!0):!1},Z=k=>{k.forEach(P=>{const{target:X,type:J,listener:se,options:ce}=P;X.addEventListener(J,se,ce)}),te.push(()=>{k.forEach(P=>{const{target:X,type:J,listener:se,options:ce}=P;X.removeEventListener(J,se,ce)})})},re=de(),ve=(k,P)=>{var X;if(re.value=k,!o.value){if(hn(k,P,Fo))return;o.value=!0,D.value=k.clientX,i.value=e.value,H=((X=n.value)==null?void 0:X.offsetWidth)||0,oo().appendChild($),le()}C.value=!0,g.value=k.clientX,q.value=k.clientY,Se()?(C.value=!1,clearInterval(V)):$.style.top=k.pageY-10+"px",me.value()?C.value=!1:$.style.left=k.pageX-10+"px"};let pe,ye;const we=k=>{var P;for(let X=0;X<k.length;X++)if(((P=k[X])==null?void 0:P.identifier)===ye?.identifier)return k[X];return null},Ke=k=>{o.value&&(o.value=!1,oo().removeChild($)),re.value=k,R=null,ye=null,pe=null,clearInterval(V),i.value="",O.value.style.opacity="0",te.forEach(P=>P()),te.length=0,We.cancel(M)},Ie=k=>{k.cancelable&&k.preventDefault()},Ae=k=>{if(L.value=null,t.value)return;o.value=!1;const P=k.touches[0];pe=P,ye=P,x=N.value.getBoundingClientRect();const X=n.value;Z([{target:document,type:"touchmove",listener:Ie,options:{passive:!1}},{target:X,type:"touchmove",listener:Ne,options:{passive:!0}},{target:X,type:"touchend",listener:ze,options:{passive:!0}},{target:X,type:"touchcancel",listener:ze,options:{passive:!0}}])},Ne=k=>{const P=we(k.touches);P&&ve(P,ye)},ze=k=>{let P=we(k.touches);P||(P=pe),Ke(P)},ne=k=>{if(k.preventDefault(),L.value=null,t.value)return;o.value=!1,R=k,x=N.value.getBoundingClientRect();const P=document;Z([{target:P,type:"mousemove",listener:Te},{target:P,type:"mouseup",listener:Le},{target:P,type:"contextmenu",listener:ue}])},ue=k=>k.preventDefault(),Te=k=>{ve(k,R)},Le=k=>{Ke(k)},B=h(()=>l.value.drag||l.value.drag===void 0&&y.value);gt(()=>{el(()=>{he([n,B],([k],[P])=>{P&&(P.removeEventListener("mousedown",ne),P.removeEventListener("touchstart",Ae)),k&&B.value&&(k.addEventListener("mousedown",ne),k.addEventListener("touchstart",Ae,{passive:!0}))},{flush:"post",immediate:!0})})}),ct(()=>{n.value&&(n.value.removeEventListener("mousedown",ne),n.value.removeEventListener("touchstart",Ae)),We.cancel(M),gl(null,$)});const E=()=>{let k=es;return A.value===no&&(k=oa),U.columnDragGhost?U.columnDragGhost({targetColumn:wt(L.value),column:l.value,icon:Y("span",{class:`${s.value}-drag-ghost-image-icon`,innerHTML:k},null),allowed:C.value,dragging:o.value,event:re.value}):[Y("span",{class:`${s.value}-drag-ghost-image-icon`,innerHTML:k},null),Y("span",{class:`${s.value}-drag-ghost-image-label`,style:{maxWidth:`${H}px`}},[l.value.title])]},le=()=>{ie||(ie=Y(E),gl(ie,$))};he([s],()=>{$.className=`${s.value}-drag-ghost-image`},{immediate:!0}),he([g,K],()=>{clearInterval(V),K.value==="center"&&C.value&&(V=setInterval(()=>{const{x:k,width:P}=u.value.getBoundingClientRect();if(g.value+30>k+P-v.value)c({left:u.value.scrollLeft+zl},"auto",!0),clearTimeout(z),z=setTimeout(()=>{W.value=u.value.scrollLeft+zl});else if(g.value<k+r.value){const X=Math.max(u.value.scrollLeft-zl,0);c({left:X},"auto",!0),clearTimeout(z),z=setTimeout(()=>{W.value=X})}},30))});const b=()=>{const k=g.value,{x:P}=N.value.getBoundingClientRect(),X=wt(ae.value),J=T.value-P;let se=0,ce=0;S&&K.value!=="center"&&(ce=u.value.scrollLeft,se=K.value==="left"?ce:ce+d.value-v.value-r.value-f.value);for(let _=0,ge=X.length;_<ge;_++){const{left:xe,finallyWidth:$e}=X[_],He=xe-J+se;!X[_].__Internal__Column__&&k>He&&k<He+$e&&(L.value=X[_])}L.value&&L.value.left!==l.value.left?(O.value.style.opacity="1",O.value.style.zIndex=l.value.fixed?"3":"unset",L.value.left>l.value.left?O.value.style.left=`${L.value.left-T.value+L.value.finallyWidth+se-1}px`:O.value.style.left=`${L.value.left-T.value+se-1}px`):O.value.style.opacity="0"};he([o,g,C,W],()=>{We.cancel(M),M=We(()=>{o.value&&!C.value&&(A.value=no),o.value&&C.value?(A.value="",b()):O.value.style.opacity="0"})}),he(o,()=>{!o.value&&C.value&&L.value&&(We.cancel(M),a({column:l.value.originColumn,targetColumn:wt(L.value.originColumn),event:re.value,dir:l.value.left<=L.value.left?"right":"left"}))})};var ls=Pe({name:"HeaderCellTitle",components:{ExclamationCircleOutlined:ja,InfoCircleOutlined:po,Popover:ho,Tooltip:Ot,RenderVNode:un},props:{column:{type:Object,default:()=>({})},prefixCls:String,wrapText:Boolean},setup(e){const t=Rt(),l=je(),n=Je(tl,!1),o=h(()=>l.sorterStates.value.map(({column:c,sortOrder:r})=>({column:c,order:r}))),u=h(()=>At(Ee,[st(t,"headerCell",{title:e.column.title,column:e.column.originColumn},()=>{var c,r;return[typeof e.column.title=="function"?e.column.title({column:e.column.originColumn,sortColumns:o.value,sortColumn:(c=o.value[0])==null?void 0:c.column,sortOrder:(r=o.value[0])==null?void 0:r.order}):e.column.title]})])),s=h(()=>{var c,r;return!!pn((r=(c=t.headerCellPopover)==null?void 0:c.call(t,{title:e.column.title,column:e.column.originColumn}))!=null?r:[])}),i=h(()=>e.column.showCellPopover===void 0?s.value:e.column.showCellPopover),a=h(()=>typeof i.value=="boolean"?{}:i.value);return{isShowPopover:s,tableSlotsContext:t,title:u,autoHeight:n,popoverProps:a,showCellPopover:i,altTitle:h(()=>e.column.showTitle&&typeof e.column.title=="string"?e.column.title:"")}}});const ns=["title"];function os(e,t,l,n,o,u){var s;const i=ee("RenderVNode"),a=ee("ExclamationCircleOutlined"),c=ee("Popover"),r=ee("InfoCircleOutlined"),v=ee("Tooltip");return I(),Q("span",{key:String("headerCell"in e.tableSlotsContext),class:j({[`${e.prefixCls}-header-cell-title-inner`]:!0}),title:e.altTitle,style:Re(`justify-content: ${e.column.align}`)},[oe("span",{class:j({[`${e.prefixCls}-cell-wrap-text`]:e.wrapText,[`${e.prefixCls}-cell-text-ellipsis`]:e.column.ellipsis!==!1&&!e.autoHeight})},[(I(),fe(it(e.title)))],2),e.showCellPopover?(I(),fe(c,Nt(_e({key:0},e.popoverProps)),Fa({content:ke(()=>[e.tableSlotsContext.headerCellPopover?(I(),fe(i,{key:0,vnode:e.tableSlotsContext.headerCellPopover({title:e.column.title,column:e.column.originColumn})},null,8,["vnode"])):Ce("v-if",!0)]),default:ke(()=>[Y(a,{style:{"margin-inline-start":"3px","font-size":"12px"}})]),_:2},[(s=e.popoverProps)!=null&&s.title?void 0:{name:"title",fn:ke(()=>[(I(),fe(it(e.title)))]),key:"0"}]),1040)):Ce("v-if",!0),e.column.headerTooltip?(I(),fe(v,{key:1},{title:ke(()=>[e.column.headerTooltip===!0?(I(),fe(it(e.title),{key:0})):(I(),Q(Ee,{key:1},[Tt(mt(e.column.headerTooltip),1)],64))]),default:ke(()=>[Y(r,{style:{"margin-inline-start":"3px","font-size":"12px"}})]),_:1})):Ce("v-if",!0)],14,ns)}var ra=Be(ls,[["render",os]]),as=Pe({name:"TableHeaderSorter",components:{CaretDownOutlined:Xa,CaretUpOutlined:Ua,HeaderCellTitle:ra},inheritAttrs:!1,props:{column:{type:Object,default:()=>({})},columnKey:{type:[Number,String]},sorterState:Object,sorterOrder:[String,Boolean],sortDirections:Array,nextSortOrder:String,wrapText:Boolean,showFilter:Boolean},setup(e){const t=je(),l=h(()=>{var a;return(a=e.sortDirections)==null?void 0:a.includes(wl)}),n=h(()=>{var a;return(a=e.sortDirections)==null?void 0:a.includes(ln)}),o=h(()=>t.props.prefixCls),u=h(()=>({[`${o.value}-column-sorter`]:!0,[`${o.value}-column-sorter-full`]:l.value&&n.value})),s=h(()=>({[`${o.value}-column-sorter-up`]:!0,active:e.sorterOrder===wl})),i=h(()=>({[`${o.value}-column-sorter-down`]:!0,active:e.sorterOrder===ln}));return{showUpNode:l,showDownNode:n,className:u,prefixCls:o,upClass:s,downClass:i,tableContext:t}}});function rs(e,t,l,n,o,u){const s=ee("HeaderCellTitle"),i=ee("CaretUpOutlined"),a=ee("CaretDownOutlined");return I(),Q("div",{class:j({[`${e.prefixCls}-header-cell-title`]:!0,[`${e.prefixCls}-header-cell-filter-title`]:e.showFilter})},[Y(s,{column:e.column,"wrap-text":e.wrapText,"prefix-cls":e.prefixCls},null,8,["column","wrap-text","prefix-cls"]),e.column.sorter?(I(),Q("span",{key:0,class:j(e.className)},[oe("span",{class:j(`${e.prefixCls}-column-sorter-inner`)},[e.showUpNode?(I(),fe(i,{key:0,class:j(e.upClass)},null,8,["class"])):Ce("v-if",!0),e.showDownNode?(I(),fe(a,{key:1,class:j(e.downClass)},null,8,["class"])):Ce("v-if",!0)],2)],2)):Ce("v-if",!0)],2)}var is=Be(as,[["render",rs]]);let ia=!1;try{const e=Object.defineProperty({},"passive",{get(){ia=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}var ss=ia;function ao(e,t,l,n){if(e&&e.addEventListener){let o=n;o===void 0&&ss&&(t==="touchstart"||t==="touchmove"||t==="wheel")&&(o={passive:!1}),e.addEventListener(t,l,o)}return{remove:()=>{e&&e.removeEventListener&&e.removeEventListener(t,l)}}}const ro={mouse:{move:"mousemove",stop:"mouseup"},touch:{move:"touchmove",stop:"touchend"}};var us=Pe({name:"DragHandle",props:{prefixCls:String,minWidth:{type:Number,default:Xn},maxWidth:{type:Number,default:1/0},column:{type:Object,default:void 0}},setup(e){let t=0,l={remove:()=>{}},n={remove:()=>{}};const o=je(),u=()=>{l.remove(),n.remove()};Cl(()=>{u()});const s=h(()=>typeof e.minWidth!="number"||isNaN(e.minWidth)?Xn:e.minWidth),i=h(()=>typeof e.maxWidth!="number"||isNaN(e.maxWidth)?1/0:e.maxWidth);let a,c=0;const r=F(!1),v=(S,T)=>{let K=0;S.touches?S.touches.length?K=S.touches[0].pageX:K=S.changedTouches[0].pageX:K=S.pageX;const O=t-K;let N=Math.max(c-O,s.value);N=Math.min(N,i.value),We.cancel(a),a=We(()=>{var U;(U=o.onResizeColumn)==null||U.call(o,N,e.column.originColumn,T)})},f=S=>{v(S,"move")},d=S=>{r.value=!1,v(S,"end"),u()},p=cn(),m=(S,T)=>{var K;r.value=!0,u(),c=p?.vnode.el.parentNode.offsetWidth,!(S instanceof MouseEvent&&S.which!==1)&&((K=o.onResizeColumn)==null||K.call(o,c,e.column.originColumn,"start"),S.stopPropagation&&S.stopPropagation(),t=S.touches?S.touches[0].pageX:S.pageX,l=ao(document.documentElement,T.move,f),n=ao(document.documentElement,T.stop,d))};return{handleDown:S=>{m(S,ro.mouse)},handleTouchDown:S=>{m(S,ro.touch)},dragging:r}}});function cs(e,t,l,n,o,u){return I(),Q("div",{class:j(`${e.prefixCls}-resize-handle ${e.dragging?"dragging":""}`),onMousedown:t[0]||(t[0]=ut((...s)=>e.handleDown&&e.handleDown(...s),["stop","prevent"])),"on:touchstartPassive":t[1]||(t[1]=ut((...s)=>e.handleTouchDown&&e.handleTouchDown(...s),["stop"])),onClick:t[2]||(t[2]=ut(()=>{},["stop","prevent"]))},[st(e.$slots,"default",{},()=>[oe("div",{class:j(`${e.prefixCls}-resize-handle-line`)},null,2)])],34)}var ds=Be(us,[["render",cs]]);const vs=(e,{slots:t})=>{var l;return Y("div",{onClick:n=>n.stopPropagation()},[(l=t.default)==null?void 0:l.call(t)])},_t=(e,{emit:t})=>{const{prefixCls:l,disabled:n,tabindex:o,id:u,style:s,class:i,checked:a,indeterminate:c,name:r,ariaLabel:v}=e;return Y("label",{class:{[i||""]:!!i,[`${l}-checkbox`]:!0,[`${l}-checkbox-checked`]:a,[`${l}-checkbox-disabled`]:n,[`${l}-checkbox-indeterminate`]:c},style:s,tabindex:o,id:u},[Y("input",{class:`${l}-checkbox-input`,checked:a,disabled:n,type:"checkbox",onClick:f=>{f.target.checked=a,t("change",f)},name:r,"aria-label":v===void 0?n?"This row is disabled selection":`Press Space to toggle row selection (${a?"checked":"unchecked"})`:v},null),Y("span",{class:`${l}-checkbox-inner`},null)])};_t.displayName="Checkbox";_t.props=Ho();_t.emits=["change"];const ol=(e,{emit:t})=>{const{prefixCls:l,disabled:n,tabindex:o,id:u,style:s,class:i,checked:a,indeterminate:c,name:r,ariaLabel:v}=e;return Y("span",{class:{[i||""]:!!i,[`${l}-radio`]:!0,[`${l}-radio-checked`]:a,[`${l}-radio-disabled`]:n,[`${l}-radio-indeterminate`]:c},style:s,tabindex:o,id:u},[Y("input",{class:`${l}-radio-input`,checked:a,disabled:n,type:"radio",onClick:f=>{f.target.checked=a,t("change",f)},name:r,"aria-label":v===void 0?n?"This row is disabled selection":`Press Space to toggle row selection (${a?"checked":"unchecked"})`:v},null),Y("span",{class:`${l}-radio-inner`},null)])};ol.displayName="Radio";ol.props=Ho();ol.emits=["change"];var fs=Pe({name:"FilterItems",inheritAttrs:!1,components:{Checkbox:_t,Empty:yl,Radio:ol,AMenu:vn,SubMenu:Ya,MenuItem:mo,RenderSlot:Ea},props:{filters:Array,prefixCls:String,dropdownPrefixCls:String,filteredKeys:Array,filterMultiple:Boolean,locale:{type:Object,default:void 0},root:Boolean,getPopupContainer:Function,onSelectKeys:Function,onOpenChange:Function,onMenuClick:Function,openKeys:Array},setup(e){const{prefixCls:t}=je(),l=h(()=>e.root?{multiple:e.filterMultiple,getPopupContainer:e.getPopupContainer,onSelect:e.onSelectKeys,onDeselect:e.onSelectKeys,selectedKeys:e.filteredKeys,onOpenChange:e.onOpenChange,onClick:e.onMenuClick,openKeys:e.openKeys,class:`${e.prefixCls}-dropdown-menu`}:{});return{emptyImage:yl.PRESENTED_IMAGE_SIMPLE,menuProps:l,rootPrefixCls:t,props:e}}});const hs={key:1,style:{margin:"16px 0"}};function ps(e,t,l,n,o,u){const s=ee("FilterItems",!0),i=ee("SubMenu"),a=ee("MenuItem"),c=ee("Empty");return I(),fe(it(e.root?"AMenu":"RenderSlot"),Nt(dn(e.menuProps)),{default:ke(()=>[e.filters&&e.filters.length?(I(!0),Q(Ee,{key:0},$t(e.filters,(r,v)=>(I(),Q(Ee,{key:r.value===void 0?v:r.value},[r.children?(I(),fe(i,{title:r.text,"popup-class-name":`${e.prefixCls}-dropdown-submenu`,key:r.value===void 0?v:String(r.value)},{default:ke(()=>[(I(!0),Q(Ee,null,$t(r.children,(f,d)=>(I(),fe(s,_e({ref_for:!0},e.props,{key:f.value===void 0?d:String(f.value),filters:[f],root:!1}),null,16,["filters"]))),128))]),_:2},1032,["title","popup-class-name"])):(I(),fe(a,{key:r.value===void 0?v:String(r.value)},{default:ke(()=>{var f;return[(I(),fe(it(e.filterMultiple?"Checkbox":"Radio"),{"prefix-cls":e.rootPrefixCls,checked:(f=e.filteredKeys)==null?void 0:f.includes(r.value===void 0?v:String(r.value))},null,8,["prefix-cls","checked"])),oe("span",null,mt(r.text),1)]}),_:2},1024))],64))),128)):(I(),Q("div",hs,[Y(c,{image:e.emptyImage,description:e.locale&&e.locale.filterEmptyText,"image-style":{height:24}},null,8,["image","description"])]))]),_:1},16)}var rn=Be(fs,[["render",ps]]),ms=Pe({name:"FilterDropdown",components:{FilterFilled:Ga,Dropdown:fn,FilterItems:rn,ProButton:vr,RenderVNode:un,FilterWrapper:vs},inheritAttrs:!1,props:{prefixCls:{type:String,default:""},column:{type:Object,required:!0}},setup(e){const t=je(),l=Rt(),n=F([]),o=F([]),u=h(()=>t.props.dropdownPrefixCls||"ant-dropdown"),s=h(()=>e.column.columnKey),i=h(()=>t.filterStates.value),a=h(()=>i.value.find(({key:g})=>s.value===g));he(a,()=>{var g;n.value=((g=a.value)==null?void 0:g.filteredKeys)||[]},{immediate:!0});const c=h(()=>{var g,D;return(D=(g=e.column)==null?void 0:g.getPopupContainer)!=null?D:t.props.getPopupContainer}),r=F(!1);ht(!("onFilterDropdownVisibleChange"in e.column),"@table","column.onFilterDropdownVisibleChange is deprecated. Please use column.onFilterDropdownOpenChange instead."),ht(!("filterDropdownVisible"in e.column),"@table","column.filterDropdownVisible is deprecated. Please use column.filterDropdownOpen instead.");const v=g=>{r.value=g;const{onFilterDropdownOpenChange:D,onFilterDropdownVisibleChange:L}=e.column||{},$=D||L;$?.(g)},f=Fe(()=>{const{filterDropdownVisible:g,filterDropdownOpen:D}=e.column||{},L=D??g;return typeof L=="boolean"?L:r.value});let d=0;const p=g=>{d=window.setTimeout(()=>{o.value=g})},m=()=>{window.clearTimeout(d)};Cl(()=>{window.clearTimeout(d)});const w=g=>{const D=g&&g.length?g:null,L=a.value;if(!(D!==null||L&&L.filteredKeys)||Sl(D,L?.filteredKeys))return null;const $={column:e.column,key:s.value,filteredKeys:D};t?.changeFilter($)},y=({selectedKeys:g})=>{n.value=g||[]},S=()=>{v(!1),w(n.value)},T=()=>{n.value=[],v(!1),w([])},K=(g={closeDropdown:!0})=>{v(!g.closeDropdown),w(n.value)},O=h(()=>{const{filterDropdown:g,slots:D={},customFilterDropdown:L}=e.column;return g||D.filterDropdown&&l[D.filterDropdown]||L&&l.customFilterDropdown}),N=h(()=>({prefixCls:e.prefixCls,setSelectedKeys:g=>y({selectedKeys:g}),selectedKeys:n.value,confirm:K,clearFilters:T,filters:e.column.filters,column:e.column.originColumn,open:f.value})),U=h(()=>{var g,D,L,$,z;return((g=e.column)==null?void 0:g.filterIcon)||((L=(D=e.column)==null?void 0:D.slots)==null?void 0:L.filterIcon)&&l[(z=($=e.column)==null?void 0:$.slots)==null?void 0:z.filterIcon]||l.customFilterIcon}),M=h(()=>{const{column:g}=e;return{filters:g.filters,prefixCls:e.prefixCls,filteredKeys:n.value,filterMultiple:g.filterMultiple===null||g.filterMultiple===void 0||g.filterMultiple,locale:t.locale.value,onSelectKeys:y,onOpenChange:p,onMenuClick:m,openKeys:o.value}}),q=Fe(()=>{var g;return!!((g=n.value)!=null&&g.length)});return{getPopupContainer:c,triggerOpen:v,mergedOpen:f,onReset:T,onConfirm:S,onDropdownOpenChange:g=>{v(g),g||O.value||S()},doFilter:K,filterItemsProps:M,onSelectKeys:y,filteredKeys:n,dropdownPrefixCls:u,filtered:q,locale:t.locale,customFilterDropdown:O,customFilterIcon:U,custocustomFilterDropdownProps:N}}});function gs(e,t,l,n,o,u){const s=ee("RenderVNode"),i=ee("FilterItems"),a=ee("ProButton"),c=ee("FilterWrapper"),r=ee("FilterFilled"),v=ee("Dropdown");return I(),fe(v,{trigger:["click"],open:e.mergedOpen,"get-popup-container":e.getPopupContainer,placement:"bottomRight","overlay-class-name":`${e.prefixCls}-dropdown-root`,onOpenChange:e.onDropdownOpenChange,onClick:t[0]||(t[0]=ut(()=>{},["stop"]))},{overlay:ke(()=>[Y(c,{class:j(`${e.prefixCls}-dropdown`)},{default:ke(()=>[e.customFilterDropdown?(I(),fe(s,{key:0,vnode:e.customFilterDropdown(e.custocustomFilterDropdownProps)},null,8,["vnode"])):(I(),Q(Ee,{key:1},[Y(i,_e(e.filterItemsProps,{root:"","dropdown-prefix-cls":e.dropdownPrefixCls,"get-popup-container":e.getPopupContainer,"prefix-cls":e.prefixCls}),null,16,["dropdown-prefix-cls","get-popup-container","prefix-cls"]),oe("div",{class:j(`${e.prefixCls}-dropdown-btns`)},[Y(a,{type:"link",size:"small",disabled:e.filteredKeys.length===0,onClick:e.onReset},{default:ke(()=>[Tt(mt(e.locale.filterReset),1)]),_:1},8,["disabled","onClick"]),Y(a,{type:"primary",size:"small",onClick:e.onConfirm},{default:ke(()=>[Tt(mt(e.locale.filterConfirm),1)]),_:1},8,["onClick"])],2)],64))]),_:1},8,["class"])]),default:ke(()=>[oe("span",{class:j({[`${e.prefixCls}-trigger`]:!0,active:e.filtered})},[e.customFilterIcon?(I(),fe(s,{key:0,vnode:e.customFilterIcon({column:e.column.originColumn,filtered:e.filtered})},null,8,["vnode"])):(I(),fe(r,{key:1}))],2)]),_:1},8,["open","get-popup-container","overlay-class-name","onOpenChange"])}var ys=Be(ms,[["render",gs]]),ws=Pe({name:"TableHeaderCell",components:{Sorter:is,Tooltip:Ot,DragHandle:ds,FilterDropdown:ys,MenuOutlined:go,RenderVNode:nl,FilterItems:rn},props:{component:{type:String,default:"div"},prefixCls:String,column:{type:Object,default:()=>({})},wrapText:{type:Boolean,default:!1},level:{type:Number,default:1},additionalProps:Object},setup(e){const t=je(),l=ta(),n=Rt(),{showPopupContent:o}=mn(),u=h(()=>t.draggingColumnKey.value===e.column.columnKey),s=Je(tl,!1),i=F();e.level===1&&aa({column:h(()=>e.column),columnKey:h(()=>e.column.columnKey),disabled:h(()=>!1),domRef:i});const a=h(()=>e.column.showSorterTooltip===void 0?t.props.showSorterTooltip:e.column.showSorterTooltip),c=h(()=>typeof a.value=="boolean"?{}:a.value),r=h(()=>{const $=e.column,z=$.columnKey,V=t.sorterStates.value.find(({key:A})=>A===z),W=V?V.sortOrder:null,C=$.sortDirections||["asc","desc"],R=W?C[C.indexOf(W)+1]:C[0],{cancelSort:x,triggerAsc:H,triggerDesc:te}=t.locale.value||{};let ie=x;return R===ln?ie=te:R===wl&&(ie=H),{columnKey:z,sorterState:V,sorterOrder:W,sortDirections:C,nextSortOrder:R,tip:ie,showFilter:!!($.filters||$.filterDropdown||$.slots&&$.slots.filterDropdown||$.customFilterDropdown)&&$.showFilter!==!1,wrapText:e.column.wrapText===void 0?e.wrapText:e.column.wrapText}}),v=h(()=>r.value.showFilter||!!n.menuPopup),f=h(()=>({[`${e.prefixCls}-has-icon-column`]:v.value,[`${e.prefixCls}-cell-box`]:!0})),d=h(()=>{const{prefixCls:$}=e;return{[`${$}-column-title`]:!0,[`${$}-cell-box`]:!v.value}}),p=h(()=>{const{columnIndex:$=t.columnKeyIndexMap.value[e.column.columnKey],colSpan:z=1}=e.column;return t.getColumnPosition($,z)}),m=h(()=>(e.column.customHeaderCell||t.props.customHeaderCell||(()=>({})))(e.column)),w=h(()=>{const{columnIndex:$,colSpan:z=1}=e.column;return Object.assign({},m.value,{colspan:z,colstart:$,colend:z+$-1,...e.additionalProps})}),y=h(()=>{if(s)return na(w.value.colstart,w.value.colend,t.allColumns.value,t.stickyOffsets.value,t.props.direction)}),S=h(()=>{const{prefixCls:$,column:z}=e;let V={};if(y.value&&xt){const W=`${$}-cell`,{fixLeft:C,fixRight:R,firstFixLeft:x,lastFixLeft:H,firstFixRight:te,lastFixRight:ie}=y.value;V={[`${W}-fix-left`]:typeof C=="number",[`${W}-fix-left-first`]:x,[`${W}-fix-left-last`]:H,[`${W}-fix-right`]:typeof R=="number",[`${W}-fix-right-first`]:te,[`${W}-fix-right-last`]:ie}}return Object.assign({[`${$}-cell`]:!0,[`${$}-header-cell`]:!0,[z.class||""]:!0,[z.className||""]:!0,[`${$}-column-sort`]:r.value.sorterOrder,[`${$}-column-has-sorters`]:z.sorter,[`${$}-drag-column-dragging`]:u.value},V)}),T=h(()=>{const $={};if(y.value&&xt){const{fixLeft:z,fixRight:V}=y.value;typeof z=="number"&&($.position="sticky",$.left=`${z}px`),typeof V=="number"&&($.position="sticky",$.right=`${V}px`)}return s?$:{width:`${p.value.width}px`,height:`${e.column.height}px`}}),K=F([]),O=h(()=>t.filterStates.value),N=h(()=>e.column.columnKey),U=h(()=>O.value.find(({key:$})=>N.value===$)),M=$=>{const z=$?.length?$:null;if(!(z!==null||U.value&&U.value.filteredKeys)||Sl(z,U.value==null?void 0:U.value.filteredKeys))return null;const V={column:e.column,key:N.value,filteredKeys:z};t?.changeFilter(V)};he(U,()=>{var $;K.value=(($=U.value)==null?void 0:$.filteredKeys)||[]},{immediate:!0});const q=()=>{K.value=[],M([])},g=()=>{M(K.value)},D=Fe(()=>{var $;return!!(($=K.value)!=null&&$.length)}),L=h(()=>({prefixCls:e.prefixCls,setSelectedKeys:$=>{K.value=$||[]},selectedKeysRef:K,confirm:g,clearFilters:q,filters:e.column.filters}));return{tableContext:t,sorterInfo:r,handleSortClick:($,z)=>{if(!$.sorter)return;const V={column:$,key:$.columnKey,sortOrder:z,multiplePriority:nn($)};t.changeSorter(V)},cellClass:S,widths:p,colProps:w,RenderSlot:ll,titleClass:d,domRef:i,autoHeight:s,componentStyle:T,headerContext:l,tableSlotsContext:n,cellBoxClass:f,showPopupContent:o,FilterItems:rn,h:At,hasIcon:v,menuFilterProps:L,filtered:D,tooltipProps:c,showSorterTooltip:a}}});const Cs=["data-tip"];function bs(e,t,l,n,o,u){const s=ee("Sorter"),i=ee("Tooltip"),a=ee("FilterDropdown"),c=ee("RenderVNode"),r=ee("MenuOutlined"),v=ee("DragHandle");return e.colProps.colspan?(I(),fe(it(e.component),_e({key:0,ref:"domRef",tabindex:"-1",role:"cell",class:e.cellClass,style:e.componentStyle},e.colProps,{onClick:t[1]||(t[1]=f=>e.handleSortClick(e.column,e.sorterInfo.nextSortOrder))}),{default:ke(()=>[(I(),fe(it(e.hasIcon?"div":e.RenderSlot),{class:j(e.cellBoxClass)},{default:ke(()=>[oe("span",{class:j(e.titleClass)},[e.column.sorter&&e.showSorterTooltip?(I(),fe(i,Nt(_e({key:0},e.tooltipProps)),{title:ke(()=>[Tt(mt(e.sorterInfo.tip),1)]),default:ke(()=>[oe("div",{class:j(`${e.prefixCls}-column-sorters`),"data-tip":e.sorterInfo.tip},[Y(s,_e({column:e.column},e.sorterInfo),null,16,["column"])],10,Cs)]),_:1},16)):(I(),fe(s,_e({key:1,column:e.column},e.sorterInfo),null,16,["column"]))],2),e.sorterInfo.showFilter?(I(),fe(a,{key:0,"prefix-cls":`${e.prefixCls}-filter`,column:e.column},null,8,["prefix-cls","column"])):Ce("v-if",!0),e.column.showMenu&&e.tableSlotsContext.menuPopup?(I(),Q("span",{key:1,class:j([`${e.prefixCls}-menu-popup-trigger`,e.column.showMenu==="hover"&&`${e.prefixCls}-menu-popup-trigger-hover`]),onClick:t[0]||(t[0]=ut(f=>e.showPopupContent(e.tableSlotsContext.menuPopup,f,{column:e.column.originColumn,filter:e.menuFilterProps}),["stop"]))},[e.tableSlotsContext.menuIcon?(I(),fe(c,{key:0,vnode:e.tableSlotsContext.menuIcon({column:e.column.originColumn,filtered:e.filtered})},null,8,["vnode"])):(I(),fe(r,{key:1}))],2)):Ce("v-if",!0)]),_:1},8,["class"])),e.column.resizable&&!(e.column.children&&e.column.children.length)?(I(),fe(v,{key:0,"prefix-cls":e.prefixCls,width:e.widths.width,"min-width":e.widths.minWidth,"max-width":e.widths.maxWidth,column:e.column},null,8,["prefix-cls","width","min-width","max-width","column"])):Ce("v-if",!0)]),_:1},16,["class","style"])):Ce("v-if",!0)}var sa=Be(ws,[["render",bs]]),Ss=Pe({name:"HeaderExtraCell",components:{Checkbox:_t,Dropdown:fn,AMenu:vn,MenuItem:mo,DownOutlined:qa},props:{component:{type:String,default:"div"},prefixCls:String,column:{type:Object,default:()=>({})},additionalProps:Object},setup(e){const t=Je(tl,!1),l=je(),{pageDataEnableRowKeys:n,getRecordByKey:o,mergedRowSelection:u}=l,{checkedCurrentAll:s,checkedCurrentSome:i,allDisabled:a,allDisabledAndChecked:c,allDisabledSomeChecked:r,mergedSelections:v,setSelectedKeys:f}=l.selection,d=h(()=>l.mergedRowSelection.value.type),p=h(()=>l.mergedRowSelection.value.hideSelectAll),m=h(()=>l.selection.derivedSelectedKeySet.value),w=h(()=>l.sorterStates.value.map(({column:K,sortOrder:O})=>({column:K,order:O}))),y=h(()=>{var K,O;return At(Ee,[typeof e.column.title=="function"?e.column.title({column:e.column.originColumn,sortColumns:w.value,sortColumn:(K=w.value[0])==null?void 0:K.column,sortOrder:(O=w.value[0])==null?void 0:O.order}):e.column.title])}),S=h(()=>{if(t){const K=e.additionalProps;return na(K.colstart,K.colend,l.allColumns.value,l.stickyOffsets.value,l.props.direction)}});return{cellClass:h(()=>{const{prefixCls:K}=e;let O={};if(S.value&&xt){const N=`${K}-cell`,{fixLeft:U,fixRight:M,firstFixLeft:q,lastFixLeft:g,firstFixRight:D,lastFixRight:L}=S.value;O={[`${N}-fix-left`]:typeof U=="number",[`${N}-fix-left-first`]:q,[`${N}-fix-left-last`]:g,[`${N}-fix-right`]:typeof M=="number",[`${N}-fix-right-first`]:D,[`${N}-fix-right-last`]:L}}return Object.assign({[`${K}-cell`]:!0,[`${K}-header-cell`]:!0,[`${K}-header-extra-cell`]:!0},O)}),componentStyle:h(()=>{const K={};if(S.value&&xt){const{fixLeft:O,fixRight:N}=S.value;typeof O=="number"&&(K.position="sticky",K.left=`${O}px`),typeof N=="number"&&(K.position="sticky",K.right=`${N}px`)}return t?K:{height:`${e.column.height}px`}}),getPopupContainer:h(()=>l.getPopupContainer.value),rowSelectionType:d,hideSelectAll:p,onSelectAllChange:()=>{var K,O;const N=[],U=new Set(m.value);s.value?n.value.forEach(q=>{U.delete(q),N.push(q)}):n.value.forEach(q=>{U.has(q)||(U.add(q),N.push(q))});const M=Array.from(U);(O=(K=u.value).onSelectAll)==null||O.call(K,!s,M.map(q=>o(q)),N.map(q=>o(q))),f(M)},checked:Fe(()=>a.value?c.value:!!l.flattenData.value.length&&s.value),indeterminate:Fe(()=>a.value?!c.value&&r.value:!s.value&&i.value),disabled:Fe(()=>l.flattenData.value.length===0||a.value),mergedSelections:v,onMenuClick:K=>{K?.(n.value)},autoHeight:t,title:y,h:At,Fragment:Ee}}});function xs(e,t,l,n,o,u){const s=ee("Checkbox"),i=ee("DownOutlined"),a=ee("MenuItem"),c=ee("AMenu"),r=ee("Dropdown");return I(),fe(it(e.component),_e({tabindex:"-1",role:"cell",class:e.cellClass,style:e.componentStyle},e.additionalProps,{onClick:t[0]||(t[0]=ut(()=>{},["stop"]))}),{default:ke(()=>[e.column.type!=="checkbox"||e.rowSelectionType==="radio"||e.hideSelectAll?(I(),Q(Ee,{key:0},[],64)):(I(),Q("div",{key:1,class:j(`${e.prefixCls}-selection-wrap`)},[oe("div",{class:j(`${e.prefixCls}-selection`)},[e.column.title?(I(),fe(it(e.title),{key:0})):(I(),Q(Ee,{key:1},[Y(s,{"prefix-cls":e.prefixCls,indeterminate:e.indeterminate,disabled:e.disabled,checked:e.checked,"aria-label":e.checked?"Press Space to toggle all row selection (checked)":"Press Space to toggle all row selection (unchecked)",onChange:e.onSelectAllChange},null,8,["prefix-cls","indeterminate","disabled","checked","aria-label","onChange"]),e.mergedSelections?(I(),Q("div",{key:0,class:j(`${e.prefixCls}-selection-extra`)},[Y(r,{"get-popup-container":e.getPopupContainer},{overlay:ke(()=>[Y(c,{"get-popup-container":e.getPopupContainer},{default:ke(()=>[(I(!0),Q(Ee,null,$t(e.mergedSelections,(v,f)=>(I(),Q(Ee,{key:v&&v.key||f},[v?(I(),fe(a,{key:v.key||f,onClick:d=>e.onMenuClick(v.onSelect)},{default:ke(()=>[(I(),fe(it(e.h(e.Fragment,[typeof v.text=="function"?v.text(v):v.text]))))]),_:2},1032,["onClick"])):Ce("v-if",!0)],64))),128))]),_:1},8,["get-popup-container"])]),default:ke(()=>[oe("span",null,[Y(i,{class:j(`${e.prefixCls}-selection-extra-dropdown-icon`)},null,8,["class"])])]),_:1},8,["get-popup-container"])],2)):Ce("v-if",!0)],64))],2)],2))]),_:1},16,["class","style"])}var ua=Be(Ss,[["render",xs]]),$s=Pe({name:"HeaderRow",components:{HeaderExtraCell:ua,HeaderCell:sa},props:{prefixCls:String,cells:{type:Array,default:()=>[]},wrapText:Boolean,level:Number}});function Rs(e,t,l,n,o,u){const s=ee("HeaderExtraCell"),i=ee("HeaderCell");return I(),Q("tr",null,[(I(!0),Q(Ee,null,$t(e.cells,a=>{var c;return I(),Q(Ee,{key:a.key},[(c=a?.column)!=null&&c.__Internal__Column__?(I(),fe(s,{key:0,component:"th",column:a.column,"prefix-cls":e.prefixCls,"additional-props":{colstart:a.colStart,colend:a.colEnd,rowspan:a.rowSpan,colspan:a.colSpan}},null,8,["column","prefix-cls","additional-props"])):(I(),fe(i,{key:1,component:"th",column:a.column,"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,level:e.level,"additional-props":{colstart:a.colStart,colend:a.colEnd,rowspan:a.rowSpan,colspan:a.colSpan}},null,8,["column","prefix-cls","wrap-text","level","additional-props"]))],64)}),128))])}var ks=Be($s,[["render",Rs]]),Ks=Pe({name:"TableHeader",components:{XScroll:xn,ColGroup:Zi,HeaderRow:ks},inheritAttrs:!1,directives:{resize:Wt},props:{prefixCls:String,wrapText:{type:Boolean,default:!1},sticky:{type:[Boolean,Object],default:!1}},emits:["scrollLeft","resizeheight"],setup(e,{emit:t}){const l=F(),n=F(),o=je(),u=F(0),s=F();lt(yn,n),lt(tl,!0);const i=h(()=>o.props.showHeaderScrollbar),{addHScrollDom:a,removeHScrollDom:c}=Rl();gt(()=>{a(n.value)}),ct(()=>{c(n.value)}),ea({dragColumnPlaceholderRef:s,headerRef:l,maxHeaderHeight:u});const r=h(()=>({[`${e.prefixCls}-header`]:!0,[`${e.prefixCls}-auto-header-height`]:!0,[`${e.prefixCls}-sticky-header`]:e.sticky,[`${e.prefixCls}-show-header-scrollbar`]:o.props.showHeaderScrollbar})),v=h(()=>({[`${e.prefixCls}-center-viewport`]:!0})),f=h(()=>({height:`calc(100% + ${o.showHorizontalScrollbar.value?o.scrollBarSize.value||15:0}px)`})),d=h(()=>{const y={height:`${u.value}px`};return e.sticky&&(y.top=`${(typeof e.sticky=="object"?e.sticky.offsetHeader:0)||0}px`),y}),p=h(()=>{const y=`${o.showVerticalScrollbar.value?o.scrollBarSize.value:0}px`;return{display:y==="0px"?"none":"block",width:y,minWidth:y,maxWidth:y,position:"sticky",right:`-${y}`}}),m=h(()=>o.rightWidth.value?void 0:{display:"none"}),w=h(()=>o.leftWidth.value?void 0:{position:"absolute",left:"0px",top:"0px",bottom:"0px"});return{headerClass:r,viewportClass:v,columnRows:Fe(()=>o.columnRowsForAutoHeaderHeight.value),viewportStyle:f,scrollbarStyle:p,headerStyle:d,headerRef:l,dragColumnPlaceholderRef:s,viewportRef:n,maxHeaderHeight:u,handleResize:y=>{u.value=y.detail.height},shadowRightStyle:m,shadowLeftStyle:w,showHeaderScrollbar:i,handleHeightResize:y=>{t("resizeheight",y)}}}});function Ps(e,t,l,n,o,u){const s=ee("ColGroup"),i=ee("HeaderRow"),a=ee("XScroll"),c=Lt("resize");return I(),Q(Ee,null,[Ze((I(),Q("div",{key:"header",class:j(e.headerClass),style:Re(e.headerStyle),onResizeheight:t[1]||(t[1]=(...r)=>e.handleHeightResize&&e.handleHeightResize(...r))},[oe("div",{ref:"viewportRef",class:j(e.viewportClass),style:Re(e.viewportStyle)},[oe("div",{ref:"headerRef",class:j(`${e.prefixCls}-header-container`)},[Ze((I(),Q("table",{key:"header",style:{"table-layout":"fixed",width:"100%","border-collapse":"separate","border-spacing":"0",position:"absolute"},onResizeheight:t[0]||(t[0]=(...r)=>e.handleResize&&e.handleResize(...r))},[Y(s),oe("thead",{class:j(`${e.prefixCls}-thead`)},[(I(!0),Q(Ee,null,$t(e.columnRows,(r,v)=>(I(),fe(i,{key:r.rowIndex,level:v+1,"prefix-cls":e.prefixCls,cells:r,"wrap-text":e.wrapText},null,8,["level","prefix-cls","cells","wrap-text"]))),128))],2)],32)),[[c,void 0,"height"]]),oe("span",{ref:"dragColumnPlaceholderRef",class:j(`${e.prefixCls}-drag-column-placeholder`)},null,2)],2)],6),oe("div",{class:j(`${e.prefixCls}-header-scrollbar`),style:Re(e.scrollbarStyle)},null,6),e.shadowLeftStyle?(I(),Q("div",{key:0,class:j(`${e.prefixCls}-cell-shadow-left`),style:Re(e.shadowLeftStyle)},null,6)):Ce("v-if",!0),e.shadowRightStyle?(I(),Q("div",{key:1,class:j(`${e.prefixCls}-cell-shadow-right`),style:Re(e.shadowRightStyle)},null,6)):Ce("v-if",!0),e.showHeaderScrollbar?(I(),fe(a,{key:2,"only-auto-show":""})):Ce("v-if",!0)],38)),[[c,void 0,"height"]]),e.showHeaderScrollbar?(I(),fe(a,{key:0,"not-show-auto":""})):Ce("v-if",!0)],64)}var Is=Be(Ks,[["render",Ps]]),Ts=Pe({name:"TableHeaderCellGroup",components:{HeaderCellTitle:ra},props:{prefixCls:String,column:{type:Object,default:()=>({})},wrapText:{type:Boolean,default:!1}},setup(e){const t=F();return aa({column:h(()=>e.column),columnKey:h(()=>e.column.columnKey),disabled:h(()=>!1),domRef:t}),{domRef:t}}});function Es(e,t,l,n,o,u){const s=ee("HeaderCellTitle");return I(),Q("div",{ref:"domRef",class:j({[`${e.prefixCls}-header-cell-title`]:!0,[`${e.prefixCls}-cell-group-title`]:!0,[`${e.prefixCls}-cell-box`]:!0}),style:Re(`height: ${e.column.height}px`)},[Y(s,{column:e.column,"wrap-text":e.column.wrapText===void 0?e.wrapText:e.column.wrapText,"prefix-cls":e.prefixCls},null,8,["column","wrap-text","prefix-cls"])],6)}var Hs=Be(Ts,[["render",Es]]),Os=Pe({name:"TableHeaderRows",components:{HeaderGroupCell:Hs,HeaderCell:sa,HeaderExtraCell:ua},props:{type:{type:String},leftGap:{type:Number,required:!0},isRoot:Boolean,prefixCls:String,columns:{type:Array,default:()=>[]},wrapText:{type:Boolean,default:!1},level:{type:Number,default:1}},setup(e){const t=je(),l=h(()=>t.draggingColumnKey.value);return{cellClass:h(()=>({[`${e.prefixCls}-cell`]:!0,[`${e.prefixCls}-position-absolute`]:!0})),cellStyles:F({}),getLastColumn:n=>{let o=n;for(;o&&o.children;)o=o.children[o.children.length-1];return o},cellProps:n=>(n.customHeaderCell||t.props.customHeaderCell||(()=>({})))(n),draggingColumnKey:l}}});const Bs=["data-left","data-left-gap"];function Ds(e,t,l,n,o,u){const s=ee("HeaderExtraCell"),i=ee("HeaderGroupCell"),a=ee("TableHeaderRows"),c=ee("HeaderCell");return I(!0),Q(Ee,null,$t(e.columns,r=>(I(),Q(Ee,{key:r.columnKey},[r.__Internal__Column__?(I(),fe(s,{key:0,column:r,"prefix-cls":e.prefixCls,style:Re(`width: ${r.finallyWidth}px;left: ${(r.left||0)-e.leftGap}px`)},null,8,["column","prefix-cls","style"])):r.children?(I(),Q("div",_e({key:1,tabindex:"-1",role:"group-cell",class:{[`${e.prefixCls}-cell`]:!0,[`${e.prefixCls}-header-cell`]:!0,[`${e.prefixCls}-cell-group`]:!0,[r.class||""]:!0,[r.className||""]:!0,[`${e.prefixCls}--drag-column-dragging`]:e.draggingColumnKey===r.columnKey},"data-left":r.left,"data-left-gap":e.leftGap,style:{width:`${r.finallyWidth}px`,left:`${r.left-e.leftGap}px`}},{ref_for:!0},e.cellProps),[Y(i,{"prefix-cls":e.prefixCls,column:r,"wrap-text":e.wrapText},null,8,["prefix-cls","column","wrap-text"]),oe("div",{class:j(`${e.prefixCls}-cell-group-children`)},[Y(a,{"prefix-cls":e.prefixCls,columns:r.children,"wrap-text":e.wrapText,type:e.type,"left-gap":r.left,level:e.level+1},null,8,["prefix-cls","columns","wrap-text","type","left-gap","level"])],2)],16,Bs)):(I(),fe(c,{key:2,style:Re(`left: ${r.left-e.leftGap}px`),column:r,"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,level:e.level},null,8,["style","column","prefix-cls","wrap-text","level"]))],64))),128)}var Ms=Be(Os,[["render",Ds]]),Fs=Pe({name:"TableHeaderWrap",components:{HeaderRows:Ms},directives:{resize:Wt},inheritAttrs:!1,props:{prefixCls:String,wrapText:{type:Boolean,default:!1},type:String},setup(e){const t=F(),l=F(),n=F(),o=je(),u=h(()=>o.leftHeaderColumns.value),s=h(()=>o.centerHeaderColumns.value),i=h(()=>o.visibleCenterHeaderColumns.value),a=h(()=>o.rightHeaderColumns.value),c=h(()=>o.maxHeaderHeight.value);ea({dragColumnPlaceholderRef:t,headerRef:l,maxHeaderHeight:c});const r=h(()=>({[`${e.prefixCls}-fix-left`]:!0,[`${e.prefixCls}-row-wrapper`]:!0,[`${e.prefixCls}-no-columns`]:!u.value.length,[`${e.prefixCls}-last-columns`]:u.value.length&&a.value.length===0&&s.value.length===0})),v=h(()=>({[`${e.prefixCls}-fix-right`]:!0,[`${e.prefixCls}-row-wrapper`]:!0,[`${e.prefixCls}-no-columns`]:!a.value.length,[`${e.prefixCls}-last-columns`]:a.value.length})),f=h(()=>({[`${e.prefixCls}-center`]:!0,[`${e.prefixCls}-row-wrapper`]:!0,[`${e.prefixCls}-no-columns`]:!s.value.length,[`${e.prefixCls}-last-columns`]:s.value.length&&a.value.length===0})),d=h(()=>e.type==="left"?r.value:e.type==="center"?f.value:e.type==="right"?v.value:""),p=h(()=>({[`${e.prefixCls}-center-viewport`]:!0})),m=h(()=>({[`${e.prefixCls}-center-container`]:!0})),w=h(()=>({width:`${o.centerWidth.value}px`})),y=h(()=>({})),S=h(()=>{const N=`${o.leftWidth.value}px`;return{width:N,minWidth:N,maxWidth:N}}),T=h(()=>{const N=`${o.rightWidth.value}px`;return{width:N,minWidth:N,maxWidth:N}}),K=h(()=>e.type==="left"?S.value:e.type==="center"?y.value:e.type==="right"?T.value:{}),O=h(()=>o.rightWidth.value?void 0:{display:"none"});return{fixLeftClass:r,fixRightClass:v,centerClass:f,containerClass:m,viewportClass:p,rightStyle:T,centerStyle:y,leftStyle:S,containerStyle:w,centerColumns:s,headerRef:l,tableContext:o,centerContainerRef:n,leftGap:N=>N==="left"?0:N==="center"?o.leftWidth.value:o.leftWidth.value+o.centerWidth.value,visibleCenterHeaderColumns:i,leftColumns:u,rightColumns:a,dragColumnPlaceholderRef:t,shadowRightStyle:O,rootClass:d,rootStyle:K}}});function As(e,t,l,n,o,u){const s=ee("HeaderRows");return e.type==="center"&&e.centerColumns.length||e.type!=="center"?(I(),Q("div",{key:0,ref:"headerRef",class:j(e.rootClass),style:Re(e.rootStyle)},[e.type==="left"?(I(),Q(Ee,{key:0},[Y(s,{"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"left",columns:e.leftColumns,"left-gap":e.leftGap("left")},null,8,["prefix-cls","wrap-text","columns","left-gap"]),oe("div",{class:j(`${e.prefixCls}-cell-shadow-left`)},null,2),Ze(oe("span",{ref:"dragColumnPlaceholderRef",class:j(`${e.prefixCls}-drag-column-placeholder`)},null,2),[[hl,e.tableContext.leftWidth.value]])],64)):e.type==="center"?(I(),Q(Ee,{key:1},[oe("div",{ref:"centerContainerRef",class:j(e.containerClass),style:Re(e.containerStyle)},[Y(s,{"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"center",columns:e.visibleCenterHeaderColumns,"left-gap":e.leftGap("center")},null,8,["prefix-cls","wrap-text","columns","left-gap"])],6),Ze(oe("span",{ref:"dragColumnPlaceholderRef",class:j(`${e.prefixCls}-drag-column-placeholder`)},null,2),[[hl,e.tableContext.centerWidth.value]])],64)):(I(),Q(Ee,{key:2},[oe("div",{class:j(`${e.prefixCls}-cell-shadow-right`),style:Re(e.shadowRightStyle)},null,6),Y(s,{"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"right",columns:e.rightColumns,"left-gap":e.leftGap("right")},null,8,["prefix-cls","wrap-text","columns","left-gap"]),Ze(oe("span",{ref:"dragColumnPlaceholderRef",class:j(`${e.prefixCls}-drag-column-placeholder`)},null,2),[[hl,e.tableContext.rightWidth.value]])],64))],6)):Ce("v-if",!0)}var zs=Be(Fs,[["render",As]]),Ls=Pe({name:"TableHeader",components:{XScroll:xn,HeaderRowsWrap:zs},inheritAttrs:!1,directives:{resize:Wt},props:{prefixCls:String,wrapText:{type:Boolean,default:!1},sticky:{type:[Boolean,Object],default:!1}},emits:["scrollLeft","resizeheight"],setup(e,{emit:t}){const l=F(),n=F(),o=je();lt(yn,n);const u=h(()=>o.maxHeaderHeight.value),{addHScrollDom:s,removeHScrollDom:i}=Rl();gt(()=>{s(n.value)}),ct(()=>{i(n.value)});const a=h(()=>o.props.showHeaderScrollbar),c=h(()=>({[`${e.prefixCls}-header`]:!0,[`${e.prefixCls}-sticky-header`]:e.sticky,[`${e.prefixCls}-show-header-scrollbar`]:a.value})),r=h(()=>({[`${e.prefixCls}-center-viewport`]:!0})),v=h(()=>({height:`calc(100% + ${o.showHorizontalScrollbar.value?o.scrollBarSize.value||15:0}px)`})),f=h(()=>{const d={height:`${u.value}px`};return e.sticky&&(d.top=`${(typeof e.sticky=="object"?e.sticky.offsetHeader:0)||0}px`),d});return{headerClass:c,viewportClass:r,viewportStyle:v,scrollbarStyle:h(()=>{const d=`${o.showVerticalScrollbar.value?o.scrollBarSize.value:0}px`;return{display:d==="0px"?"none":"block",width:d,minWidth:d,maxWidth:d,position:"sticky",right:`-${d}`}}),headerStyle:f,headerRef:l,viewportRef:n,maxHeaderHeight:u,showHeaderScrollbar:a,handleHeightResize:d=>{t("resizeheight",d)}}}});function Ns(e,t,l,n,o,u){const s=ee("HeaderRowsWrap"),i=ee("XScroll"),a=Lt("resize");return I(),Q(Ee,null,[Ze((I(),Q("div",{key:"header",role:"presentation",class:j(e.headerClass),style:Re(e.headerStyle),onResizeheight:t[0]||(t[0]=(...c)=>e.handleHeightResize&&e.handleHeightResize(...c))},[oe("div",{ref:"viewportRef",class:j(e.viewportClass),style:Re(e.viewportStyle)},[oe("div",{class:j(`${e.prefixCls}-header-container`)},[Y(s,{key:"left","prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"left"},null,8,["prefix-cls","wrap-text"]),Y(s,{key:"center","prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"center"},null,8,["prefix-cls","wrap-text"]),Y(s,{key:"right","prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"right"},null,8,["prefix-cls","wrap-text"])],2)],6),oe("div",{class:j(`${e.prefixCls}-header-scrollbar`),style:Re(e.scrollbarStyle)},null,6),e.showHeaderScrollbar?(I(),fe(i,{key:0,"only-auto-show":""})):Ce("v-if",!0)],38)),[[a,void 0,"height"]]),e.showHeaderScrollbar?(I(),fe(i,{key:0,"not-show-auto":""})):Ce("v-if",!0)],64)}var Ws=Be(Ls,[["render",Ns]]);const ca=Symbol("BodyContextProps"),_s=e=>{lt(ca,e)},al=()=>Je(ca,{});function Vs({hoverColumnKey:e}){const t=F(!1);let l;return he(e,n=>{clearTimeout(l),clearTimeout(void 0),n!==void 0?l=setTimeout(()=>{t.value=!0},300):t.value=!1}),{open:t}}const da=Symbol("BodyRowsContextProps"),js=e=>{lt(da,e)},Us=()=>Je(da,{}),va=Symbol("BodyRowContextProps"),Xs=e=>{lt(va,e)},Ys=()=>Je(va,{}),Gs=()=>{const{isCellInAnyRange:e,cellRanges:t,extendLatestRangeToCell:l,setRangeToCell:n,enableRangeSelection:o,getCellRangeCount:u,intersectLastRange:s,level:i}=gn();return{onCellMousedown:(a,c)=>{const{ctrlKey:r,metaKey:v,shiftKey:f}=a;if(!(!e(c)||a.button!==2))return;const d=!t.value.length;f&&d&&a.preventDefault(),f?l(c):n(c,r||v),a.cellInfo={cellPosition:c,cellTarget:a.currentTarget,level:i}},onCellMousemove:(a,c)=>{a.cellInfo={cellPosition:c,cellTarget:a.currentTarget,level:i}},onCellClick:(a,c)=>{const r=a.ctrlKey||a.metaKey;o.value&&r&&u(c)>1&&s(!0)}}},qs=()=>{const{enableRangeSelection:e,navigationService:t,extendLatestRangeInDirection:l,focusCell:n,ensureCellVisible:o}=gn(),u=(r,v)=>{v.isEditing||(r.shiftKey&&e.value?i(r):t.navigateToNextCell(r,v.cellPosition),r.preventDefault())},{props:s}=je(),i=r=>{const v=l(r);v&&o(v)},a=(r,v)=>{v.isEditing&&n(v.cellPosition)},c=(r,v)=>{t.onTabKeyDown(v.cellPosition,r)};return{onCellKeydown:(r,v)=>{if(s.onCellKeydown&&s.onCellKeydown(r,{isEditing:v.isEditing,cellPosition:{column:v.cellPosition.column.originColumn,rowIndex:v.cellPosition.rowIndex}})===!1)return;const{keyCode:f}=r,d=r.target;switch(f){case Ge.RIGHT:case Ge.LEFT:d?.tagName==="INPUT"||d?.tagName==="TEXTAREA"||d?.isContentEditable||u(r,v);break;case Ge.DOWN:case Ge.UP:case Ge.ENTER:(p=>p.tagName==="TEXTAREA"||p.isContentEditable)(r.target)||u(r,v);break;case Ge.ESC:a(r,v);break;case Ge.TAB:c(r,v)}}}},jl={},Zs={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},Js=e=>{if(typeof jl[e]=="boolean")return jl[e];const t=document.createElement(Zs[e]||"div");return jl[e="on"+e]=e in t};var Qs=Pe({name:"RowDragHandler",props:{columnKey:[String,Number],disabled:Boolean,column:Object},setup(e,{slots:t}){const l=F(!1),n=F(),{prefixCls:o,dragRowsHandle:u,draggingRowKey:s,insertToRowKey:i,onRowDragEnd:a,scrollTo:c,bodyMaxWidth:r,isMyChildren:v,getRecordByKey:f,getIndexsByKey:d,childrenColumnName:p,getKeyByIndexs:m,scrollTop:w,scrollLeft:y,showVerticalScrollbar:S,showHorizontalScrollbar:T}=je(),{dragRowPlaceholderRef:K,bodyRef:O}=al(),{height:N,top:U,rowKey:M}=Ys(),q=Rt();let g;const D=F(),L=F(),$=F(),z=document.createElement("div"),V=F(!0);let W=null,C={},R=0;const x=[];let H=null;const te=F(_n),ie=h(()=>d(M.value));gt(()=>{var b,k;u.has(e.columnKey)?(k=(b=u.get)==null?void 0:b.call(u,e.columnKey))==null||k.add(n.value):u.set(e.columnKey,new Set([n.value]))}),ct(()=>{var b,k;(b=u.get(e.columnKey))==null||b.delete(n.value),((k=u.get(e.columnKey))==null?void 0:k.size)===0&&u.delete(e.columnKey),We.cancel(g),gl(null,z)});const A=b=>{b.forEach(k=>{const{target:P,type:X,listener:J,options:se}=k;P.addEventListener(X,J,se)}),x.push(()=>{b.forEach(k=>{const{target:P,type:X,listener:J,options:se}=k;P.removeEventListener(X,J,se)})})},ae=de(),me=(b,k)=>{if(ae.value=b,!l.value){if(hn(b,k,4))return;l.value=!0,$.value=b.clientY,s.value=M.value,R=n.value.parentElement.offsetWidth,ue().appendChild(z),ze()}V.value=!0,L.value=b.clientX,D.value=b.clientY,(()=>{const{y:P,height:X}=C,J=window.pageYOffset||document.documentElement.scrollTop;return D.value+10<=P?(z.style.top=P+J-20+"px",!0):D.value>P+X&&(z.style.top=P+J+X-pl+"px",!0)})()?(V.value=!1,E()):(B(b,!1),z.style.top=b.pageY-pl+"px"),(()=>{const{x:P,width:X}=C,J=window.pageXOffset||document.documentElement.scrollLeft;return L.value+bt<=P?(z.style.left=P+J-20+"px",!0):L.value+bt>=P+X&&(z.style.left=P+J+X-20+"px",!0)})()?V.value=!1:z.style.left=b.pageX-bt+"px"};let Se,Z;const re=b=>{var k;for(let P=0;P<b.length;P++)if(((k=b[P])==null?void 0:k.identifier)===Z?.identifier)return b[P];return null},ve=b=>{l.value&&(l.value=!1,ue().removeChild(z)),ae.value=b,W=null,Z=null,Se=null,E(),s.value=null,i.value=null,K.value.style.opacity="0",x.forEach(k=>k()),x.length=0,We.cancel(g)},pe=b=>{b.cancelable&&b.preventDefault()},ye=b=>{const k=re(b.touches);k&&me(k,Z)},we=b=>{let k=re(b.touches);k||(k=Se),ve(k)},Ke=b=>b.preventDefault(),Ie=b=>{me(b,W)},Ae=b=>{ve(b)},Ne=()=>{var b;let k=Qi;if(te.value===Vn&&(k=oa),q.rowDragGhost){if("preTargetInfo"in ne)return q.rowDragGhost({record:f(M.value),preTargetInfo:ne.preTargetInfo,nextTargetInfo:ne.nextTargetInfo,column:e.column,icon:Y("span",{class:`${o.value}-drag-ghost-image-icon`,innerHTML:k},null),allowed:V.value,dragging:l.value,event:ae.value})}else return[Y("span",{class:`${o.value}-drag-ghost-image-icon`,innerHTML:k},null),Y("span",{class:`${o.value}-drag-ghost-image-label`,style:{maxWidth:`${R}px`}},[(b=t.label)==null?void 0:b.call(t)])]},ze=()=>{H||(H=Y(Ne),gl(H,z))};he([o],()=>{z.className=`${o.value}-drag-ghost-image`},{immediate:!0});const ne=bl({}),ue=()=>document.fullscreenElement||document.body,Te=()=>{const{top:b}=n.value.getBoundingClientRect();return D.value-b>=0?qt:Mo},Le=()=>{const{preTargetInfo:b,nextTargetInfo:k}=ne;if(v(M.value,b?.rowKey||"")||!V.value){K.value.style.opacity="0",i.value=null;return}let P=null;const X=b?b.indexs.slice(0,-1):[];let J=X.length?m(X.join("-")):null;if(k){const{y:se,centerY:ce,record:_,rowKey:ge}=k;_[p.value]&&D.value>se+pl&&D.value<ce&&(P=ge)}if(b&&P===null)if(k&&!v(b.rowKey,k.rowKey)&&k.indexs.slice(0,-1).join("-")!==b.indexs.slice(0,-1).join("-")||!k){const{centerY:se,height:ce,y:_}=b;if(D.value<se+ce/4)P=X.length?m(X.join("-")):null;else if(D.value<_+ce&&(!k||k.indexs.length<b.indexs.length)){const ge=X.slice(0,-1);P=ge.length?m(ge.join("-")):null,J=P}else J=null}else v(b.rowKey,k.rowKey)&&(P=b.rowKey);P===M.value&&(P=null),P!==k?.rowKey?(K.value.style.opacity="1",K.value.style.top=`${b?b.top+b.height:0}px`,K.value.style.width=`${r.value}px`,!k&&b?K.value.style.top=b.top+b.height-K.value.offsetHeight+"px":b||(K.value.style.top="0px")):K.value.style.opacity="0",ne.insertToRowKey=P??J,i.value=ne.insertToRowKey};he([l,D,V],()=>{We.cancel(g),g=We(()=>{if(l.value&&!V.value&&(te.value=Vn),l.value&&V.value){const b=Te();te.value=b===qt?_n:Yr;const k=[];for(const ce of u.get(e.columnKey).values()){const{y:_}=ce.getBoundingClientRect(),ge=+ce.getAttribute("data-scroll-top"),xe=+ce.getAttribute("data-height"),$e=ce.getAttribute("data-row-key-type");let He=ce.getAttribute("data-row-key");He=$e==="number"?+He:He,k.push({y:_,top:ge,height:xe,rowKey:He,record:f(He),indexs:d(He),centerY:_+xe/2})}k.sort((ce,_)=>ce.centerY-_.centerY);let P=k[k.length-1]||null,X=null;const J=D.value;for(let ce=0,_=k.length;ce<_;ce++){const ge=k[ce],{centerY:xe}=ge;if(J<=xe){P=k[ce-1]||null,X=ge;break}}const se={record:f(M.value),top:U.value,height:N.value,dir:b,rowKey:M.value,event:ae.value,column:e.column,preTargetInfo:P,nextTargetInfo:X,fromIndexs:ie.value,insertToRowKey:void 0};Object.assign(ne,se),Le()}else K.value.style.opacity="0"})});const{check:B,ensureCleared:E}=Uo({scrollContainer:O,scrollAxis:"y",getVerticalPosition:()=>w.value,setVerticalPosition:b=>{c(b)},getHorizontalPosition:()=>y.value,setHorizontalPosition:b=>c({left:b}),showVerticalScrollbar:S,showHorizontalScrollbar:T});he(l,()=>{!l.value&&V.value&&a(Object.assign({},ne,{event:ae.value}))});const le=h(()=>({[`${o.value}-drag-handle`]:!0,[`${o.value}-drag-handle-disabled`]:e.disabled,[`${o.value}-drag-dragging`]:l.value}));return{dragIcon:Ji,dragging:l,className:le,spanRef:n,top:U,height:N,rowKey:M,rowKeyType:h(()=>typeof M.value),onMousedown:b=>{b.preventDefault(),!e.disabled&&(l.value=!1,W=b,C=O.value.getBoundingClientRect(),A([{target:document,type:"mousemove",listener:Ie},{target:document,type:"mouseup",listener:Ae},{target:document,type:"contextmenu",listener:Ke}]))},onTouchStart:b=>{if(e.disabled)return;l.value=!1;const k=b.touches[0];Se=k,Z=k,C=O.value.getBoundingClientRect();const P=n.value;A([{target:document,type:"touchmove",listener:pe,options:{passive:!1}},{target:P,type:"touchmove",listener:ye,options:{passive:!0}},{target:P,type:"touchend",listener:we,options:{passive:!0}},{target:P,type:"touchcancel",listener:we,options:{passive:!0}}])}}}});const eu=["aria-grabbed","data-scroll-top","data-height","data-row-key","data-row-key-type","innerHTML"];function tu(e,t,l,n,o,u){return I(),Q("span",{ref:"spanRef",class:j(e.className),"aria-grabbed":e.dragging,"aria-hidden":!0,"data-scroll-top":e.top,"data-height":e.height,"data-row-key":e.rowKey,"data-row-key-type":e.rowKeyType,innerHTML:e.dragIcon,unselectable:"on",onMousedown:t[0]||(t[0]=ut((...s)=>e.onMousedown&&e.onMousedown(...s),["stop"])),"on:touchstartPassive":t[1]||(t[1]=(...s)=>e.onTouchStart&&e.onTouchStart(...s))},null,42,eu)}var lu=Be(Qs,[["render",tu]]),nu=Pe({inheritAttrs:!1,props:{prefixCls:String,tooltipProps:{type:Object,default:()=>({})},getPopupContainer:Function,open:Boolean,onCellLeave:Function,align:Object,shouldOpen:{type:[Function,Boolean]},allowEnter:{type:Boolean,default:!0}},setup(e,{slots:t,emit:l}){const n=h(()=>({offset:[0,13]})),o=cn(),u=F(!1),s=a=>{const c=document.createRange();c.setStart(a,0),c.setEnd(a,a.childNodes.length);let r=c.getBoundingClientRect().width,v=c.getBoundingClientRect().height;r-Math.floor(r)<.001&&(r=Math.floor(r)),v-Math.floor(v)<.001&&(v=Math.floor(v));const{pLeft:f,pRight:d,pTop:p,pBottom:m}=(w=>{const y=window.getComputedStyle(w,null);return{pLeft:Number.parseInt(y.paddingLeft,10)||0,pRight:Number.parseInt(y.paddingRight,10)||0,pTop:Number.parseInt(y.paddingTop,10)||0,pBottom:Number.parseInt(y.paddingBottom,10)||0}})(a);return r+(f+d)>a.offsetWidth||v+(p+m)>a.offsetHeight||a.scrollWidth>a.offsetWidth};he(()=>e.open,a=>{a?typeof e.shouldOpen=="function"?el(()=>{var c;const r=(v=>{var f;let d=((f=v?.vnode)==null?void 0:f.el)||v?.$el||v;for(;d&&!d.tagName;)d=d.nextSibling;return d})(o);if(r){const v=r.childNodes[0],f=v&&s(v);u.value=(c=e.shouldOpen)==null?void 0:c.call(e,f)}}):u.value=e.shouldOpen:u.value=!1},{immediate:!0,flush:"post"});const i=()=>{l("cellLeave")};return()=>{var a;return u.value?Y(Ot,_e({"get-popup-container":e.getPopupContainer,align:n.value},e.tooltipProps,{open:e.open,"overlay-style":e.allowEnter?{}:{pointerEvents:"none"},onOpenChange:i}),{...t}):(a=t.default)==null?void 0:a.call(t)}}}),ou=Pe({inheritAttrs:!1,props:{prefixCls:{type:String},recordIndexs:{type:Array},rowKey:{type:[Number,String]},column:{type:Object,default:()=>({})},record:{type:Object,default:()=>({})},value:{validator:()=>!0},customEditable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1},cellKey:{type:String},getPopupContainer:Function,onCloseEditor:Function,onKeydown:Function},emits:["closeEditor","keydown"],setup(e,{expose:t,emit:l}){var n,o,u;const s=Rt(),i=mn(),a=(u=(o=(n=e.column)==null?void 0:n.valueGetter)==null?void 0:o.call(n,{value:e.value,record:e.record,column:e.column,recordIndexs:e.recordIndexs}))!=null?u:e.value,c=F(a),r=de(null),v=je();gt(()=>{el(()=>{var y,S,T,K;r.value&&!e.multiple&&((S=(y=r.value)==null?void 0:y.focus)==null||S.call(y),(K=(T=r.value)==null?void 0:T.select)==null||K.call(T))})}),t({value:c,inputRef:r});const f=(y,S)=>{var T,K;(K=(T=e.column).valueChange)==null||K.call(T,y,{column:e.column,record:e.record,recordIndexs:e.recordIndexs,newValue:S,oldValue:a})},d=h(()=>v.props.childrenColumnName||"children"),p=()=>{var y,S,T;const K=e.recordIndexs;let O=v.props.dataSource||[],N={};K.forEach(q=>{N=O[q],O=N[d.value]||[]});const U=(T=(S=(y=e.column).valueParser)==null?void 0:S.call(y,{column:e.column,record:N,recordIndexs:K,newValue:c.value,oldValue:a}))!=null?T:c.value,M=e.column.valueSetter;if(M){const q=M({column:e.column,record:N,recordIndexs:K,newValue:c.value,oldValue:a});if(Zt(q)){q.then(g=>{g&&l("closeEditor",[e.cellKey])}).catch(()=>{});return}q&&l("closeEditor",[e.cellKey])}else ht(e.column.dataIndex!==void 0||e.column.dataIndex!==null,"Editable","If not have column dataIndex, you should to set valueSetter for editable columns, otherwise the value cannot be modified."),Za(N,e.column.dataIndex,U),l("closeEditor",[e.cellKey])};let m=!1;const w=y=>{l("closeEditor",y??[e.cellKey])};return{modelValue:c,inputRef:r,handleInput:y=>{var S;f(y,(S=y.target)==null?void 0:S.value)},handleKeyDown:y=>{const{which:S}=y;S===Ge.ENTER?p():(S===Ge.ESC&&(m=!0,l("closeEditor",null)),l("keydown",y))},handleBlur:()=>{m||e.multiple||p()},tableSlots:s,popup:i,save:p,closeEditor:w,getCustomEditorProps:()=>({modelValue:c,save:p,onInput:f,closeEditor:w,column:e.column.originColumn,editorRef:r,getPopupContainer:e.getPopupContainer,record:e.record,recordIndexs:e.recordIndexs})}}});const au=["data-cell-auto"];function ru(e,t,l,n,o,u){return I(),Q("div",{class:j(`${e.prefixCls}-cell-edit-inner`),"data-cell-auto":e.autoHeight},[e.customEditable?(I(),Q(Ee,{key:0},[e.tableSlots.cellEditor?(I(),fe(it(e.tableSlots.cellEditor),Nt(_e({key:0},e.getCustomEditorProps())),null,16)):Ce("v-if",!0)],64)):Ze((I(),Q("input",{key:1,"onUpdate:modelValue":t[0]||(t[0]=s=>e.modelValue=s),ref:"inputRef",class:j(`${e.prefixCls}-cell-edit-input`),type:"text",onInput:t[1]||(t[1]=(...s)=>e.handleInput&&e.handleInput(...s)),onKeydown:t[2]||(t[2]=(...s)=>e.handleKeyDown&&e.handleKeyDown(...s)),onBlur:t[3]||(t[3]=(...s)=>e.handleBlur&&e.handleBlur(...s))},null,34)),[[Aa,e.modelValue]])],10,au)}var iu=Be(ou,[["render",ru]]);const sn={created(e,t){const{value:l={}}=t,{resizeObserver:n}=l;n?.observe(e)},unmounted(e,t){const{value:l={}}=t,{resizeObserver:n,calMaxHeight:o}=l;n?.unobserve(e),el(()=>{o?.()})}},su={prefixCls:String,rowIndex:{type:Number,required:!0},flattenRowIndex:{type:Number,required:!0},rowKey:{type:[Number,String]},column:{type:Object,default:()=>({})},item:{type:Object,default:()=>({})},wrapText:{type:Boolean,default:!1},type:{type:String},height:Number,hasAppendNode:Boolean,resizeObserver:{type:Object},calMaxHeight:Function,tooltipOpen:Boolean,getPopupContainer:Function,onCellLeave:Function,editCellKeys:Array,onOpenEditor:Function,onCloseEditor:Function,onMousedown:Function,onMousemove:Function,onKeydown:Function,onClick:Function};let io=0;const uu={success:"#03bf64",processing:"#315efb",error:"#e8353e",warning:"#eb8903"},fa=(e,{slots:t,emit:l})=>{var n,o,u,s,i;const a=Rt(),c=je(),{onBodyCellContextmenu:r}=al(),{getRangeCellClass:v}=gn(),f=xl(),{oldValuesMap:d}=zo(),{prefixCls:p,column:m,wrapText:w,rowKey:y,item:S,rowIndex:T,hasAppendNode:K,tooltipOpen:O,editCellKeys:N}=e,U=m.columnKey,M=Ul(m?.valueEnum,e.item),q=typeof m.rowDrag=="function"?m.rowDrag({record:S,column:m.originColumn}):!!m.rowDrag,g=m.rowDrag,D=c.sorterStates.value.find(({key:b})=>b===U),$={sorterOrder:D?D.sortOrder:null},z=`${e.rowKey} ${U}`,V=m.dataIndex?m.renderText?m.renderText(Nn(S,m.dataIndex),S,T):Nn(S,m.dataIndex):void 0,W=Ul(m?.valueStatus,V,e.item),C=c.getIndexsByKey(y);let R=!1,x=N?.includes(z);if(x){const b=typeof m.editable=="function"&&m.editable({record:S,column:m.originColumn,recordIndexs:C,value:V});R=m.editable==="cellEditorSlot"||b==="cellEditorSlot",x=x&&(R&&!!a.cellEditor||m.editable===!0||!!b)}let{editableTrigger:H=["dblClick"]}=m;H=Array.isArray(H)?H:[H];const te={[`${p}-cell-inner`]:!0},ie={[`${p}-cell-content`]:!0,[`${p}-cell-wrap-text`]:m.wrapText===void 0?w:m.wrapText,[`${p}-cell-text-ellipsis`]:!!m.ellipsis},A={textAlign:`${m.align}`,color:W?uu[W]||"valueStatus":void 0};bo(m.ellipsis)&&m.ellipsis.line>1&&(A["-webkit-box-orient"]="vertical",A["-webkit-line-clamp"]=m.ellipsis.line,A["white-space"]="normal",A.display="-webkit-box",A.padding="0 16px");const ae=((o=(n=c.allCellProps.value)==null?void 0:n[y])==null?void 0:o[m.columnKey])||{},me=ae.props||{},Se=me.rowSpan,Z={rowIndex:e.flattenRowIndex,rowPinned:null,column:m},re={[`${p}-cell`]:!0,[`${p}-body-cell`]:!0,[`${p}-cell-multi`]:Se>1,[`${p}-cell-hidden`]:Se===0,[`${p}-column-sort`]:$.sorterOrder,[`${p}-with-append`]:K,[`${p}-cell-inline-edit`]:x,[v(Z)]:!0},ve=()=>{var b,k,P,X,J,se,ce;const _=(P=(k=(b=e.column)==null?void 0:b.valueGetter)==null?void 0:k.call(b,{value:V,record:S,column:m,recordIndexs:C}))!=null?P:V,ge=(J=(X=c.props)==null?void 0:X.onBeforeOpenEditor)==null?void 0:J.call(X,ye);Zt(ge)?ge.then(xe=>{var $e,He;xe&&(l("openEditor",z,{[z]:_}),(He=($e=c.props)==null?void 0:$e.onOpenEditor)==null||He.call($e,ye))}):ge!==!1&&(l("openEditor",z,{[z]:_}),(ce=(se=c.props)==null?void 0:se.onOpenEditor)==null||ce.call(se,ye))},pe=b=>{var k,P,X,J;const se=(P=(k=c.props)==null?void 0:k.onBeforeCloseEditor)==null?void 0:P.call(k,{...ye,oldValue:d.value[z]});Zt(se)?se.then(ce=>{var _,ge;ce&&(l("closeEditor",b??z),(ge=(_=c.props)==null?void 0:_.onCloseEditor)==null||ge.call(_,{...ye,oldValue:d.value[z]}))}):se!==!1&&(l("closeEditor",b??z),(J=(X=c.props)==null?void 0:X.onCloseEditor)==null||J.call(X,{...ye,oldValue:d.value[z]}))},ye={record:S,column:m.originColumn,text:V,value:V,index:T,recordIndexs:c.getIndexsByKey(y),key:z,valueStatus:W,openEditor:ve,closeEditor:pe};let we=C&&((u=a.bodyCell)==null?void 0:u.call(a,ye))||[];const Ke=c.props.columnEmptyText!==!1?c.props.columnEmptyText:"";if(!pn(we)){let b;if(ae.children)b=ae.children;else if(M){const k=M[V];k&&k.text?k.status?b=Y(Ja,{status:k.status,text:k.text}):k.color?b=Y(Qa,{color:k.color,bordered:!1},()=>k.text):b=k.text||Ke:b=Ke}else b=V||Ke;we=[typeof b=="object"&&Hr(b)||typeof b!="object"?b:null]}const Ie={resizeObserver:e.resizeObserver,calMaxHeight:e.calMaxHeight},Ae=m.tooltip,Ne=e.height===void 0&&Se===1&&m?.autoHeight,ze=!m.showTitle||typeof V!="string"&&typeof V!="number"?void 0:V,ne=!!Ae&&O,ue=c.props.ignoreCellKey?{}:{key:z};let Te=Y("div",{class:te,style:(s=me?.style)!=null&&s.height?"":`height: ${e.height}px`,"data-cell-auto":Ne},[Y("div",_e({class:ie,style:A,title:ze},ue),[K?(i=t.appendNode)==null?void 0:i.call(t):null,we])]);Te=Ne?Ze(Te,[[sn,Ie]]):Te;let Le=null,B=ne;if(ne){const b={...m.tooltip===!0?{}:m.tooltip};b.title?(b.title=b.title(ye),B=!(!b.title&&b.title!==0)):(b.title=V,B=!(!b.title&&b.title!==0)),Le=Y(nu,{getPopupContainer:e.getPopupContainer,align:{offset:[0,13]},tooltipProps:b,open:B,allowEnter:b?.allowEnter,shouldOpen:k=>{var P;return b?.shouldOpen?(P=b?.shouldOpen)==null?void 0:P.call(b,k,ye):!0},onCellLeave:()=>{l("cellLeave")}},{default:()=>[b.allowEnter!==!1?Te:za(Te,{onMouseleave:()=>{l("cellLeave")}})],title:()=>{var k;return(k=a.tooltipTitle)==null?void 0:k.call(a,ye)}})}else Le=Te;const E=()=>{H.includes("dblClick")&&ve()},le=x?Y(iu,{prefixCls:p,recordIndexs:C,rowKey:y,cellKey:z,column:m,record:S,onCloseEditor:pe,value:V,customEditable:R,getPopupContainer:e.getPopupContainer,multiple:N.length>1,autoHeight:Ne},null):null;return Y("div",_e(me,{onMouseleave:()=>{B||l("cellLeave")},tabindex:"-1",role:"cell","data-column-key":U,class:re,onContextmenu:b=>{(c.props.hasContextmenuPopup||c.props.rangeSelection)&&b.button===0&&b.ctrlKey?b.preventDefault():(r(b,ye,e.type),H.includes("contextmenu")&&ve())},onDblclick:E,onClick:b=>{var k,P;if((P=(k=c.props)==null?void 0:k.onCellClick)==null||P.call(k,b,ye),(()=>{if(!Cn()||Js("dblclick"))return!1;const X=new Date().getTime(),J=X-io<200;return io=X,J})()){E(),b.preventDefault();return}l("click",b,Z),H.includes("click")&&ve()},onMousedown:b=>{l("mousedown",b,Z)},onMousemove:b=>{l("mousemove",b,Z)},onKeydown:b=>{l("keydown",b,{cellPosition:Z,isEditing:x})},"data-level":f,"aria-selected":"true"}),[g?Y(lu,{disabled:!q,columnKey:U,column:m.originColumn},{label:()=>we}):null,Le,Ne&&le?Y("label",{class:`${p}-cell-edit-wrapper`,onMousedown:b=>b.stopPropagation()},[Ze(le,[[sn,Ie]])]):le?Y("label",{class:`${p}-cell-edit-wrapper`,onMousedown:b=>b.stopPropagation()},[le]):null])};fa.props=su;var cu=Pe({name:"TableExpandedRow",directives:{cellResize:sn},components:{RenderVNode:nl},props:{prefixCls:String,rowKey:{type:[Number,String]},item:{type:Object,default:()=>({})},rowIndex:Number,resizeObserver:{type:Object},calMaxHeight:Function},setup(e){const t=F(),l=Rt(),n=je(),o=h(()=>n.rowHeights.value[e.rowKey]===void 0),u=Fe(()=>{var d;return((d=n.allCellProps.value[e.rowKey])==null?void 0:d[Qt])||{}}),{onBodyCellContextmenu:s}=al(),i=h(()=>{const{prefixCls:d}=e;return{[`${d}-cell`]:!0}}),a=h(()=>{const{prefixCls:d}=e;return{[`${d}-cell-inner`]:!0}}),c=h(()=>{var d,p;return{...u.value.props,style:{...((p=(d=u.value)==null?void 0:d.props)==null?void 0:p.style)||{},minWidth:"100%"}}}),r=h(()=>{var d,p;return(p=(d=n.props)==null?void 0:d.expandedRowRender)==null?void 0:p.call(d,{record:e.item,index:e.rowIndex,indent:1,expanded:!0})}),v=h(()=>o.value?{resizeObserver:e.resizeObserver,calMaxHeight:e.calMaxHeight}:{}),f=h(()=>({record:e.item,index:e.rowIndex,recordIndexs:n.getIndexsByKey(e.rowKey),key:e.rowKey,isExpand:!0}));return{cellClass:i,tableSlotsContext:l,mergedCellProps:c,cellInnerClass:a,cellInnerRef:t,expandContent:r,autoHeight:o,cellResizeBind:v,onBodyCellContextmenu:s,contextmenuProps:f}}});const du=["data-cell-auto"];function vu(e,t,l,n,o,u){const s=ee("RenderVNode"),i=Lt("cell-resize");return I(),Q("div",_e(e.mergedCellProps,{tabindex:"-1",role:"cell",class:e.cellClass,onContextmenu:t[0]||(t[0]=a=>e.onBodyCellContextmenu(a,e.contextmenuProps,"left"))}),[Ze((I(),Q("div",{ref:"cellInnerRef","data-cell-auto":e.autoHeight,class:j(e.cellInnerClass)},[oe("div",{class:j(`${e.prefixCls}-cell-content`)},[(I(),fe(s,{key:e.rowKey,vnode:e.expandContent},null,8,["vnode"]))],2)],10,du)),[[i,e.cellResizeBind]])],16)}var fu=Be(cu,[["render",vu]]),hu=Pe({name:"ProTableExpandIcon",props:{prefixCls:String,record:Object,expanded:Boolean,expandable:Boolean,disabled:Boolean,onExpand:Function},emits:["expand"],setup(e,{emit:t}){const l=je(),n=h(()=>{const{prefixCls:o,expanded:u,expandable:s,disabled:i}=e,a=`${o}-row-expand-icon`;return{[a]:!0,[`${a}-spaced`]:!s,[`${a}-expanded`]:s&&u,[`${a}-collapsed`]:s&&!u,[`${a}-disabled`]:!!i}});return{handleClick:()=>{e.disabled||t("expand",e.record)},className:n,label:h(()=>e.expanded?l.locale.value.collapse:l.locale.value.expand),expandIcon:h(()=>l.props.expandIcon),props:e}}});const pu=["aria-label"];function mu(e,t,l,n,o,u){return e.expandIcon?(I(),Q("span",{key:0,onClick:t[0]||(t[0]=ut(()=>{},["stop"]))},[(I(),fe(it(()=>e.expandIcon(e.props))))])):(I(),Q("button",{key:1,type:"button",class:j(e.className),"aria-label":e.label,onClick:t[1]||(t[1]=ut((...s)=>e.handleClick&&e.handleClick(...s),["stop"]))},null,10,pu))}var ha=Be(hu,[["render",mu]]),gu=Pe({name:"BodyExtraCell",components:{Checkbox:_t,Radio:ol,ExpandIcon:ha,MenuOutlined:go},props:{prefixCls:String,rowIndex:{type:Number,required:!0},type:{type:String},column:{type:Object,default:()=>({})},record:{type:Object},rowKey:{type:[Number,String]},expanded:Boolean,supportExpand:Boolean},setup(e){const t=je(),l=xl(),n=h(()=>t.mergedRowSelection.value.type),o=h(()=>t.selection.derivedSelectedKeySet.value),u=F(!1),s=F(!1),i=h(()=>t.checkboxPropsMap.value.get(e.rowKey)),{onBodyCellContextmenu:a}=al(),c=h(()=>{var f,d;return(d=(f=t.allCellProps.value[e.rowKey])==null?void 0:f[e.column.columnKey])!=null?d:{}});qe(()=>{var f,d,p;const{selection:{derivedHalfSelectedKeySet:m},expandType:w}=t;u.value=o.value.has(e.rowKey);const y=m.value.has(e.rowKey);w.value==="nest"?(s.value=y,ht(typeof((f=i.value)==null?void 0:f.indeterminate)!="boolean","Table","set `indeterminate` using `rowSelection.getCheckboxProps` is not allowed with tree structured dataSource.")):s.value=(p=(d=i.value)==null?void 0:d.indeterminate)!=null?p:y});const r=h(()=>{var f,d;const{column:p}=e;return{...c.value.props,style:{...((d=(f=c.value)==null?void 0:f.props)==null?void 0:d.style)||{},width:`${p.finallyWidth||0}px`}}}),v=h(()=>({record:e.record,column:e.column.originColumn,index:e.rowIndex,recordIndexs:t.getIndexsByKey(e.rowKey),key:e.rowKey}));return{handleRadioChange:f=>{u.value&&!t.mergedRowSelection.value.allowCancelRadio||t.selection.triggerSingleSelection(e.rowKey,!u.value,u.value?[]:[e.rowKey],f)},handleCheckboxChange:f=>{const{shiftKey:d}=f,{selection:{lastSelectedKey:p,setLastSelectedKey:m,setSelectedKeys:w,triggerSingleSelection:y,mergedRowSelection:S,derivedSelectedKeys:T,isCheckboxDisabled:K,levelEntities:O,maxLevel:N},getRecordByKey:U,pageDataEnableRowKeys:M,keyEntities:q}=t,{checkStrictly:g,onSelectMultiple:D}=S.value,L=e.rowKey;let $=-1,z=-1;const V=M.value;if(d&&g){const W=new Set([p.value,L]);V.some((C,R)=>{if(W.has(C)){if($!==-1)return z=R,!0;$=R}return!1})}if(z!==-1&&$!==z&&g){const W=V.slice($,z+1),C=[];u.value?W.forEach(x=>{o.value.has(x)&&(C.push(x),o.value.delete(x))}):W.forEach(x=>{o.value.has(x)||(C.push(x),o.value.add(x))});const R=Array.from(o.value);D?.(!u.value,R.map(x=>U(x)),C.map(x=>U(x))),w(R)}else{const W=T.value;if(g){let C=[];u.value?C=Dr(W,L):C=Mr(W,L),y(L,!u.value,C,f)}else{const{checkedKeys:C,halfCheckedKeys:R}=Gl([...W,L],!0,q.value,O.value,N.value,K);let x=C;if(u.value){const H=new Set(C);H.delete(L),x=Gl(Array.from(H),{halfCheckedKeys:R},q.value,O.value,N.value,K).checkedKeys}y(L,!u.value,x,f)}}m(L)},onInternalTriggerExpand:(f,d)=>{t.onTriggerExpand(f,e.rowKey,d)},rowSelectionType:n,keySet:o,checked:u,mergedIndeterminate:s,checkboxProps:i,mergedCellProps:r,onBodyCellContextmenu:a,contextmenuProps:v,level:l}}});const yu=["data-level"],wu={key:2,draggable:!0};function Cu(e,t,l,n,o,u){const s=ee("Radio"),i=ee("Checkbox"),a=ee("ExpandIcon"),c=ee("MenuOutlined");return I(),Q("div",_e(e.mergedCellProps,{key:`${e.rowKey} ${e.column.columnKey}`,tabindex:"-1",role:"cell","data-level":e.level,class:{[`${e.prefixCls}-cell`]:!0,[`${e.prefixCls}-body-cell`]:!0,[`${e.prefixCls}-extra-cell`]:!0,[`${e.prefixCls}-row-expand-icon-cell`]:!0},onContextmenu:t[2]||(t[2]=r=>e.onBodyCellContextmenu(r,e.contextmenuProps,e.type)),onClick:t[3]||(t[3]=ut(()=>{},["stop"]))}),[e.column.type==="checkbox"?(I(),Q(Ee,{key:0},[e.rowSelectionType==="radio"?(I(),fe(s,_e({key:0,"prefix-cls":e.prefixCls},e.checkboxProps,{checked:e.checked,onClick:t[0]||(t[0]=ut(()=>{},["stop"])),onChange:e.handleRadioChange}),null,16,["prefix-cls","checked","onChange"])):(I(),fe(i,_e({key:1,"prefix-cls":e.prefixCls},e.checkboxProps,{indeterminate:e.mergedIndeterminate,checked:e.checked,onClick:t[1]||(t[1]=ut(()=>{},["stop"])),onChange:e.handleCheckboxChange}),null,16,["prefix-cls","indeterminate","checked","onChange"]))],64)):e.column.type==="expand"?(I(),fe(a,{key:1,"prefix-cls":e.prefixCls,expandable:"",expanded:e.expanded,record:e.record,disabled:!e.supportExpand,onExpand:e.onInternalTriggerExpand},null,8,["prefix-cls","expanded","record","disabled","onExpand"])):e.column.type==="draggable"?(I(),Q("div",wu,[st(e.$slots,"draggable-handle",{},()=>[Y(c)])])):Ce("v-if",!0)],16,yu)}var bu=Be(gu,[["render",Cu]]);let Su=0;var xu=Pe({name:"ProTableBodyRow",components:{ExpandIcon:ha,BodyCell:fa,ExpandedRow:fu,BodyExtraCell:bu,RenderSlot:ll},inheritAttrs:!1,props:{prefixCls:String,isExpandRow:Boolean,record:{type:Object},type:{type:String},rowKey:{type:[Number,String],required:!0},supportExpand:Boolean,pos:Number,rowIndex:Number,flattenRowIndex:Number,indent:Number,wrapText:{type:Boolean,default:!1},getRowClassName:{type:Function}},setup(e){const t="row_uni_id_"+Su++,l=je(),n=cn(),{editCellKeys:o,closeEditor:u,openEditor:s}=zo();let i=!1;const a=F(),{onCellMousedown:c,onCellMousemove:r,onCellClick:v}=Gs(),{onCellKeydown:f}=qs(),d=()=>{if(i)return;let ne=0,ue=[];a.value&&(ue=a.value.querySelectorAll("div[data-cell-auto=true]")),ue.forEach(Te=>{const{offsetWidth:Le,offsetHeight:B}=Te;let E=Le?B:0;const le=getComputedStyle(Te.parentNode);E+=parseFloat(le.getPropertyValue("border-top-width"))+parseFloat(le.getPropertyValue("border-bottom-width")),ne=ne>E?ne:E}),ue.length?l.addRowHeight(t,e.rowKey,ne):l.removeRowHeight(t)};he(()=>e.rowKey,()=>{d()},{flush:"post"});const p=new Xl(()=>{d()}),{columns:m,columnStartIndex:w}=Us(),y=h(()=>(e.type==="center"?l.centerRowColumnsMap.value.get(e.rowKey):m.value).filter(ne=>!!ne)),{tooltipOpen:S,leftPopupContainer:T,centerPopupContainer:K,rightPopupContainer:O}=al(),{handleCellBlur:N,handleCellHover:U,hoverRowKey:M,hoverColumnKey:q,rowHover:g}=ko(),D=h(()=>e.type==="left"?T.value:e.type==="center"?K.value:e.type==="right"?O.value:null),L=Fe(()=>l.draggingRowKey.value===e.rowKey),$=Fe(()=>M.value===e.rowKey);he([$,a],()=>{a.value&&g.value&&($.value?bn(a.value,`${e.prefixCls}-row-hover`):Sn(a.value,`${e.prefixCls}-row-hover`))},{immediate:!0,flush:"post"});const z=Fe(()=>S.value&&$.value);let V;ct(()=>{i=!0,p.disconnect(),clearTimeout(V),l.removeRowHeight(t)});const W=Fe(()=>!l.hasMultiRowSpanInfo.value[e.rowKey]),C=h(()=>{var ne,ue;return(ue=(ne=l.props).customRow)==null?void 0:ue.call(ne,e.record,e.rowIndex)}),R=h(()=>{var ne;return(ne=l.props.rowSelection)==null?void 0:ne.type}),x=F(!1),H=h(()=>l.expandedRowKeys.value),te=Fe(()=>{var ne,ue;return(ue=(ne=H.value).has)==null?void 0:ue.call(ne,e.rowKey)}),ie=h(()=>l.expandIconColumnIndex.value||0),A=h(()=>l.indentSize.value);qe(()=>{te.value&&(x.value=!0)});const ae=h(()=>{var ne,ue;return l.expandType.value==="row"&&((ue=(ne=l.props).rowExpandable)==null?void 0:ue.call(ne,e.record))}),me=h(()=>l.expandType.value==="nest"),Se=h(()=>{var ne;return!!(l.childrenColumnName.value&&((ne=e.record)!=null&&ne[l.childrenColumnName.value]))}),Z=h(()=>ae.value||me.value),re=(ne,ue)=>{l.onTriggerExpand(ne,e.rowKey,ue)},ve=h(()=>l.mergedRowHeights.value),pe=Fe(()=>ve.value[e.rowKey]),ye=Fe(()=>l.rowHeights.value[e.rowKey]),we=h(()=>l.props.highlightSelectRow&&l.selection.derivedSelectedKeySet.value.has(e.rowKey)),Ke=h(()=>{var ne;const{prefixCls:ue,record:Te,rowIndex:Le,indent:B}=e,E=Le%2==0;return Jt({[`${ue}-row`]:!0,[`${ue}-row-level-${B}`]:!0,[`${ue}-row-hover`]:$.value&&g.value,[`${ue}-row-dragging`]:L.value,[`${ue}-row-dragging-insert-target`]:l.insertToRowKey.value===e.rowKey,[`${ue}-row-odd`]:!E,[`${ue}-row-even`]:E,[`${ue}-no-height`]:!pe.value,[`${ue}-row-selected`]:we.value},(ne=e.getRowClassName)==null?void 0:ne.call(e,Te,Le,B))}),Ie=h(()=>{var ne;const{prefixCls:ue,record:Te,rowIndex:Le,indent:B}=e;return Jt({[`${ue}-row`]:!0,[`${ue}-expanded-row`]:!0,[`${ue}-expanded-row-level-${B+1}`]:!0,[`${ue}-no-height`]:!pe.value},(ne=e.getRowClassName)==null?void 0:ne.call(e,Te,Le,B))}),Ae=Fe(()=>{var ne,ue,Te,Le;return(Le=(Te=(ue=(ne=l.allCellProps.value[e.rowKey])==null?void 0:ne[Qt])==null?void 0:ue.props)==null?void 0:Te.style)==null?void 0:Le.width}),Ne=h(()=>{const ne={opacity:1,[`--${e.prefixCls}-row-bg`]:`var(--${e.prefixCls}-row-bg-${e.rowKey}, var(--${e.prefixCls}-bg))`};return W.value?ne.transform=`translateY(${e.pos}px)`:ne.top=`${e.pos}px`,pe.value!==void 0?ne.height=`${pe.value}px`:ne.height=`${l.baseHeight.value}px`,e.isExpandRow&&w.value===0&&(ne.width=Ae.value,ne.minWidth="100%"),ne});he(()=>({...Ne.value}),(ne,ue={})=>{l.animateRows.value&&!l.useAnimate.value&&(ne.top!==ue.top||ne.height!==ue.height||ne.transform!==ue.transform)&&el(()=>{clearTimeout(V),n?.vnode.el&&n.vnode.el.style&&(n.vnode.el.style.transition="none",V=setTimeout(()=>{var Te,Le;(Le=(Te=n?.vnode)==null?void 0:Te.el)!=null&&Le.style&&(n.vnode.el.style.transition=null)},100))})},{immediate:!0}),Xs({top:h(()=>e.pos),height:h(()=>pe.value!==void 0?pe.value:l.baseHeight.value),rowKey:h(()=>e.rowKey)});const ze=h(()=>({[`${e.prefixCls}-cell`]:!0,[`${e.prefixCls}-position-absolute`]:!0}));return{rowClass:Ke,rowStyle:Ne,cellClass:ze,tableContext:l,mergedRowHeights:ve,handleCellBlur:N,handleCellHover:U,handleClick:ne=>{l.props.expandRowByClick&&Z.value&&re(e.record,ne)},rowSelectionType:R,nestExpandable:me,hasNestChildren:Se,mergedExpandable:Z,expandIconColumnIndex:ie,indentSize:A,expanded:te,onInternalTriggerExpand:re,customRowProps:C,expandColumnKey:Qt,expandRowClass:Ie,mergedColumns:y,height:pe,cellHeight:ye,columnStartIndex:w,resizeObserver:p,calMaxHeight:d,bodyRow:a,hoverRowKey:M,hoverColumnKey:q,xVirtual:Fe(()=>l.xVirtual.value),getPopupContainer:()=>D.value,editCellKeys:o,closeEditor:u,openEditor:s,mergedTooltipOpen:z,onCellMousedown:c,onCellKeydown:f,onCellMousemove:r,onCellClick:v}}});const $u=["data-row-key"],Ru=["data-row-key"];function ku(e,t,l,n,o,u){const s=ee("ExpandedRow"),i=ee("BodyExtraCell"),a=ee("ExpandIcon"),c=ee("BodyCell"),r=ee("RenderSlot");return e.isExpandRow?(I(),Q(Ee,{key:0},[e.columnStartIndex===0?(I(),Q("div",{key:0,ref:"bodyRow","data-row-key":e.rowKey,class:j(e.expandRowClass),style:Re(e.rowStyle),role:"row"},[Y(s,{"prefix-cls":e.prefixCls,item:e.record,"row-key":e.rowKey,"row-index":e.rowIndex,"resize-observer":e.resizeObserver,"cal-max-height":e.calMaxHeight},null,8,["prefix-cls","item","row-key","row-index","resize-observer","cal-max-height"])],14,$u)):Ce("v-if",!0)],64)):(I(),Q("div",_e({key:1},e.customRowProps,{ref:"bodyRow",class:e.rowClass,style:e.rowStyle,"data-row-key":e.rowKey,role:"row",onClick:t[0]||(t[0]=(...v)=>e.handleClick&&e.handleClick(...v))}),[Y(r,null,{default:ke(()=>[(I(!0),Q(Ee,null,$t(e.mergedColumns,(v,f)=>{var d;return I(),Q(Ee,{key:v&&v.columnKey},[v&&v.__Internal__Column__?(I(),fe(i,{key:0,"prefix-cls":e.prefixCls,"row-key":e.rowKey,"row-index":e.rowIndex,type:e.type,column:(d=e.mergedColumns)==null?void 0:d[f],expanded:e.expanded,"support-expand":e.mergedExpandable,record:e.record,onMouseenter:p=>e.handleCellHover(e.rowKey,v.columnKey,e.tableContext.draggingRowKey.value),onMouseleave:e.handleCellBlur},null,8,["prefix-cls","row-key","row-index","type","column","expanded","support-expand","record","onMouseenter","onMouseleave"])):v?(I(),fe(c,{key:1,"prefix-cls":e.prefixCls,item:e.record,"row-key":e.rowKey,type:e.type,"row-index":e.rowIndex,"flatten-row-index":e.flattenRowIndex,"wrap-text":e.wrapText,column:v,"resize-observer":e.resizeObserver,"cal-max-height":e.calMaxHeight,"has-append-node":v.columnIndex===e.expandIconColumnIndex&&e.nestExpandable,height:e.cellHeight,"get-popup-container":e.getPopupContainer,"tooltip-open":e.mergedTooltipOpen&&e.hoverColumnKey===v.columnKey,"edit-cell-keys":e.editCellKeys,onCloseEditor:e.closeEditor,onOpenEditor:e.openEditor,onMouseenter:p=>e.handleCellHover(e.rowKey,v.columnKey,e.tableContext.draggingRowKey.value),onCellLeave:e.handleCellBlur,onMousedown:e.onCellMousedown,onMousemove:e.onCellMousemove,onKeydown:e.onCellKeydown,onClick:e.onCellClick},{appendNode:ke(()=>[oe("div",{class:j(`${e.prefixCls}-append-node`)},[oe("span",{style:Re(`padding-left: ${(e.indent||0)*e.indentSize}px`),class:j(`${e.prefixCls}-row-indent indent-level-${e.indent}`)},null,6),Y(a,{expanded:e.expanded,"prefix-cls":e.prefixCls,expandable:e.hasNestChildren,record:e.record,disabled:!e.mergedExpandable,onExpand:e.onInternalTriggerExpand},null,8,["expanded","prefix-cls","expandable","record","disabled","onExpand"])],2)]),_:1},8,["prefix-cls","item","row-key","type","row-index","flatten-row-index","wrap-text","column","resize-observer","cal-max-height","has-append-node","height","get-popup-container","tooltip-open","edit-cell-keys","onCloseEditor","onOpenEditor","onMouseenter","onCellLeave","onMousedown","onMousemove","onKeydown","onClick"])):Ce("v-if",!0)],64)}),128))]),_:1}),e.type!=="center"?(I(),Q("div",{key:0,class:j(`${e.prefixCls}-cell-shadow-${e.type}`)},null,2)):Ce("v-if",!0)],16,Ru))}var Ku=Be(xu,[["render",ku]]),Pu=Pe({name:"TableBodyRows",components:{Row:Ku},inheritAttrs:!1,props:{prefixCls:String,type:{type:String},wrapText:{type:Boolean,default:!1},getRowClassName:{type:Function}},setup(e){const t=je(),l=h(()=>t.data.value),n=h(()=>t.dataRowPosition.value),o=de([]),u=de(0);return qe(()=>{e.type==="left"?(o.value=t.leftColumns.value,u.value=0):e.type==="right"?(o.value=t.rightColumns.value,u.value=t.leftColumns.value.length+t.centerColumns.value.length):(u.value=t.leftColumns.value.length,o.value=t.visibleCenterColumns.value)}),js({columns:o,columnStartIndex:u}),{data:l,columns:o,rowPosition:n,transitionName:h(()=>`${e.prefixCls}-row`),virtual:Fe(()=>t.virtual.value)}}});function Iu(e,t,l,n,o,u){const s=ee("Row");return I(!0),Q(Ee,null,$t(e.data,(i,a)=>(I(),Q(Ee,{key:a},[i?(I(),fe(s,{key:0,"prefix-cls":e.prefixCls,record:i.record,"row-key":i.rowKey,indent:i.indent,pos:e.rowPosition[a],"row-index":i.rowIndex,"flatten-row-index":i.flattenIndex,"wrap-text":e.wrapText,"get-row-class-name":e.getRowClassName,"is-expand-row":i.isExpandRow,type:e.type},null,8,["prefix-cls","record","row-key","indent","pos","row-index","flatten-row-index","wrap-text","get-row-class-name","is-expand-row","type"])):Ce("v-if",!0)],64))),128)}var Tu=Be(Pu,[["render",Iu]]),Eu=Pe({props:{onlyAutoShow:{type:Boolean},notShowAuto:{type:Boolean}},setup:e=>{const t=je(),l=h(()=>`${t.props.prefixCls}`),n=F(),o=F(),u=F(!1),s=h(()=>{const w=`${t.scrollBarSize.value||15}px`;return{width:w,minWidth:w,maxWidth:w}}),i=la()||Cn(),a=h(()=>t.scrollBarSize.value===0&&i),c=h(()=>({[`${l.value}-vertical-scroll`]:!0,[`${l.value}-vertical-scroll-hidden`]:t.scrollBarSize.value===0,[`${l.value}-scrollbar-active`]:u.value,[`${l.value}-apple-scroll`]:i})),r=h(()=>t.showVerticalScrollbar.value&&(!e.onlyAutoShow||a.value)&&(!e.notShowAuto||!a.value)),v=h(()=>{const w=`${t.scrollBarSize.value||15}px`;return{height:`${t.viewportHeight.value||15}px`,width:w,minWidth:w,maxWidth:w}}),{addVScrollDom:f,removeVScrollDom:d}=Vo();let p=null;const m=()=>{a.value&&(clearTimeout(p),bn(o.value,`${l.value}-scrolling`),p=setTimeout(()=>{Sn(o.value,`${l.value}-scrolling`)},500))};return gt(()=>{he(n,()=>{n.value&&(d(n.value),n.value.removeEventListener("scroll",m),f(n.value,!0),n.value.addEventListener("scroll",m,{passive:!0}))},{immediate:!0})}),ct(()=>{clearTimeout(p),n.value&&(d(n.value),n.value.removeEventListener("scroll",m))}),()=>r.value?Y("div",{ref:o,class:c.value,"aria-hidden":"true",style:s.value,onMousedown:()=>u.value=!0,onMouseenter:()=>u.value=!0,onMouseleave:()=>u.value=!1,onTouchend:()=>u.value=!1},[Y("div",{key:"center",ref:n,class:`${l.value}-vertical-scroll-viewport`,style:s.value},[Y("div",{class:`${l.value}-body-vertical-scroll-container`,style:v.value},null)])]):null}}),Hu=Pe({name:"TableBody",components:{BodyRows:Tu,Empty:yl,RenderVNode:nl,RenderSlot:ll,HorizontalScroll:xn,YScroll:Eu},directives:{resize:Wt},inheritAttrs:!1,props:{prefixCls:String,wrapText:{type:Boolean,default:!1},bodyScrollWidth:{type:Number},bodyWidth:{type:Number},bodyHeight:{type:Number},height:{type:[Number,String]},scrollX:[Number,String],summaryFixed:[Boolean,String],emptyText:Function,summary:Function},emits:["scroll","scrollLeft","scrollTop","update:bodyWidth","update:bodyHeight","update:bodyScrollWidth","keydown"],slots:{},setup(e,{emit:t,attrs:l,expose:n}){const o=je(),u=Rt(),s=F(),i=F(),a=F(),c=F(),r=F(),v=F(),f=F(),d=F(),p=F(),m=F(0),w=h(()=>o.leftColumns.value),y=h(()=>o.centerColumns.value),S=h(()=>o.rightColumns.value),T=h(()=>o.status.value.code!==4),K=F(),O=F(),N=F(),U=F(),M=F(),q=F(),{hoverColumnKey:g}=ko(),{open:D}=Vs({hoverColumnKey:g}),L=de(),$=F(),z=F({clientX:0,clientY:0}),V=_=>{_.style.display="none",_.style.opacity="0",_.style.left="0px",_.style.top="0px",_.style.height="1px",_.style.maxWidth=e.bodyWidth-4+"px"},W=()=>{const{clientX:_,clientY:ge}=z.value,xe=$.value,$e=xe==="left"?U.value:xe==="right"?q.value:M.value;if(!xe||!$e)return;$e.style.display="block";const{left:He,top:Qe}=$e.parentElement.getBoundingClientRect(),dt=$e.children[0],et=Math.min($e.scrollHeight,dt.scrollHeight,ze.value-4);$e.style.opacity="1",$e.style.height=`${et}px`;let Xe=_-He,pt=ge-Qe;pt+et>ze.value&&(pt=ze.value-et-2),$.value==="center"?Xe+$e.offsetWidth>o.centerWidth.value&&(Xe=o.centerWidth.value-$e.offsetWidth-2):$.value==="right"?Xe+$e.offsetWidth>o.rightWidth.value&&(Xe=o.rightWidth.value-$e.offsetWidth-2):Xe+$e.offsetWidth>e.bodyWidth&&(Xe=e.bodyWidth-$e.offsetWidth-2),$e.style.left=`${Xe}px`,$e.style.top=`${pt}px`},C=h(()=>o.showVerticalScrollbar.value),R=h(()=>o.showHorizontalScrollbar.value);he([o.centerWidth,o.rightWidth,()=>e.bodyWidth],()=>{W()},{flush:"post"});let x;ml(U,()=>{$.value==="left"&&($.value=null,V(U.value))}),ml(M,()=>{$.value==="center"&&($.value=null,V(M.value))}),ml(q,()=>{$.value==="right"&&($.value=null,V(q.value))}),_s({onBodyCellContextmenu:(_,ge,xe)=>{if(o.props.hasContextmenuPopup){const{clientX:$e,clientY:He}=_;V(U.value),V(M.value),V(q.value),$.value=xe,L.value=()=>{var Qe;return(Qe=u.contextmenuPopup)==null?void 0:Qe.call(u,{event:_,...ge,hidePopup:()=>{$.value=null,V(U.value),V(M.value),V(q.value)}})},z.value={clientX:$e,clientY:He},clearTimeout(x),x=setTimeout(()=>{W()}),_.preventDefault()}},bodyRef:i,tooltipOpen:D,leftPopupContainer:K,centerPopupContainer:O,rightPopupContainer:N,dragRowPlaceholderRef:s}),n({bodyRef:i}),ct(()=>{clearTimeout(x),clearTimeout(void 0)});const{addHScrollDom:H,removeHScrollDom:te}=Rl(),{addVScrollDom:ie,removeVScrollDom:A}=Vo();gt(()=>{he(f,(_,ge)=>{te(ge),H(_)},{flush:"post",immediate:!0}),he(p,(_,ge)=>{te(ge),H(_)},{flush:"post",immediate:!0}),he(d,(_,ge)=>{A(ge),ie(_)},{flush:"post",immediate:!0})}),ct(()=>{te(f.value),te(p.value),A(d.value)});const ae=F(0),me=F(0),Se=h(()=>{const _=`${o.showVerticalScrollbar.value?o.scrollBarSize.value:0}px`;return{display:_==="0px"?"none":"block",width:_,minWidth:_,maxWidth:_,position:"sticky",right:`-${_}`}}),Z=h(()=>({width:`calc(100% + ${o.showVerticalScrollbar.value?o.scrollBarSize.value:0}px)`,overflowX:"hidden",overflowY:"auto",height:"100%"})),re=h(()=>o.pageData.value.length===0),ve=h(()=>e.bodyWidth-o.rightWidth.value>o.leftWidth.value?{position:"absolute",left:`${o.leftWidth.value}px`,height:"100%"}:{display:"none"}),pe=h(()=>o.rightWidth.value?{position:"absolute",left:e.bodyWidth-o.rightWidth.value+"px",height:"100%"}:{display:"none"}),ye=h(()=>({[`${e.prefixCls}-body`]:!0,[`${e.prefixCls}-unselectable`]:o.props.rangeSelection!==!1})),we=h(()=>({[`${e.prefixCls}-fix-left`]:!0,[`${e.prefixCls}-no-columns`]:!w.value.length})),Ke=h(()=>({[`${e.prefixCls}-fix-right`]:!0,[`${e.prefixCls}-no-columns`]:!S.value.length})),Ie=h(()=>({[`${e.prefixCls}-center`]:!0,[`${e.prefixCls}-no-columns`]:!y.value.length})),Ae=h(()=>({[`${e.prefixCls}-center-viewport`]:!0})),Ne=h(()=>({[`${e.prefixCls}-center-container`]:!0})),ze=h(()=>o.viewportHeight.value+(e.summaryFixed?me.value:m.value+me.value)),ne=h(()=>({width:`${o.centerWidth.value}px`,height:`${ze.value}px`})),ue=h(()=>({height:`calc(100% + ${o.scrollBarSize.value||15}px)`})),Te=h(()=>({height:`${ze.value}px`,width:`${o.bodyMaxWidth.value}px`,minWidth:"100%"})),Le=h(()=>({height:`${ze.value}px`,overflow:"hidden",minHeight:"100%",transform:"translateZ(0)"})),B=h(()=>({...l.style||{},maxHeight:typeof e.height=="number"?`${e.height}px`:e.height,overflowY:"hidden"})),E=h(()=>({height:o.showHorizontalScrollbar.value?`calc(100% + ${o.scrollBarSize.value||15}px)`:"calc(100%)",zIndex:"unset !important",overflowX:"auto",overflowY:"hidden"})),le=h(()=>({height:`${ze.value}px`})),b=h(()=>{const _=`${o.leftWidth.value}px`;return{width:_,minWidth:_,maxWidth:_,height:`${ze.value}px`}}),k=h(()=>{const _=`${o.rightWidth.value}px`;return{width:_,minWidth:_,maxWidth:_,height:`${ze.value}px`}}),P=h(()=>({[`${e.prefixCls}-summary`]:!0,[`${e.prefixCls}-position-absolute`]:!re.value})),X=h(()=>[P.value,`${e.prefixCls}-summary-fixed`,`${e.prefixCls}-summary-fixed-${e.summaryFixed}`]),J=h(()=>{const _={height:`${m.value}px`};return Object.assign(_,e.summaryFixed?R.value?{borderTop:"none"}:{}:{position:"absolute",bottom:0,width:`${e.bodyWidth}px`,borderTop:"none"})}),se=h(()=>{if(typeof o.props.sticky=="object"){const{offsetHeader:_=0,topSummary:ge=!1}=o.props.sticky;return ge?{...J.value,position:"sticky",top:`${_+o.realHeaderHeight.value}px`}:J.value}return J.value}),ce=h(()=>({width:`${e.bodyWidth}px`}));return La(a,_=>{var ge;const xe=(ge=_[0])==null?void 0:ge.contentRect;t("update:bodyWidth",xe?.width||0),t("update:bodyHeight",xe?.height||0)}),{bodyContainerStyle:E,measureDomStyle:h(()=>({width:"100%",height:"100%!important",position:"absolute!important",fontSize:"100px!important",opacity:"0.1!important",textAlign:"center!important",top:"0px!important",left:"0px!important",pointerEvents:"none",display:"block!important",color:"#000000!important",margin:"0px!important",padding:"0px!important",transform:"unset!important",visibility:"visible!important",zIndex:"999!important"})),isEmpty:re,emptyStyle:ce,handleEmptyHeight:_=>{me.value=_.detail.height},bodyClass:ye,fixLeftClass:we,fixRightClass:Ke,centerClass:Ie,containerClass:Ne,summaryViewportClass:Ae,summaryClass:P,rightStyle:k,centerStyle:le,leftStyle:b,summaryViewportStyle:ue,containerStyle:ne,summaryStyle:J,viewportHeight:ze,leftColumns:w,centerColumns:y,rightColumns:S,bodyInnerWidth:ae,handleBodyInnerResize:_=>{ae.value=_.detail.width},handleBodyScrollResize:_=>{t("update:bodyScrollWidth",_.detail.width)},bodyRef:i,measureDomRef:a,bodyInnerRef:c,viewportRef:v,summaryViewportRef:f,handleResize:_=>{m.value=_.detail.height},bodyStyle:B,handleBodyResize:_=>{t("update:bodyWidth",_.detail.width),t("update:bodyHeight",_.detail.height)},emptyImage:yl.PRESENTED_IMAGE_SIMPLE,scrollLayerStyle:Te,getRowClassName:(_,ge)=>{const xe=o.props.rowClassName;return typeof xe=="function"?xe(_,ge):xe},showWatermark:T,leftPopupContainer:K,centerPopupContainer:O,rightPopupContainer:N,dragRowPlaceholderRef:s,leftShadowStyle:ve,rightShadowStyle:pe,fixedSummaryClass:X,scrollLayerRef:r,scrollbarStyle:Se,topSummaryStyle:se,leftTarget:U,centerTarget:M,rightTarget:q,popupContent:L,popupContentPos:$,handleContextmenuPopupResize:()=>{W()},handleDragStart:_=>{if(_.target instanceof HTMLImageElement)return _.preventDefault(),!1},handleKeydown:_=>{t("keydown",_)},bodyViewportStyle:Z,bodyViewportRef:d,bodyContainerRef:p,rowsHeightStyle:Le,showYScrollbar:C}}});const Ou={style:{width:"100%",overflow:"hidden",position:"relative",transform:"translateZ(0)"}};function Bu(e,t,l,n,o,u){const s=ee("RenderVNode"),i=ee("RenderSlot"),a=ee("BodyRows"),c=ee("Empty"),r=ee("YScroll"),v=ee("HorizontalScroll"),f=Lt("resize");return I(),Q(Ee,null,[Y(i,null,{default:ke(()=>[e.summary&&e.summaryFixed==="top"?(I(),Q("div",{key:"summary",class:j(e.fixedSummaryClass),style:Re(e.topSummaryStyle)},[oe("div",{class:j(e.summaryViewportClass),style:Re(e.summaryViewportStyle)},[oe("div",{ref:"summaryViewportRef",class:j(`${e.prefixCls}-summary-container`),style:{height:"calc(100% + 15px)"}},[Ze((I(),Q("div",{onResizeheight:t[0]||(t[0]=(...d)=>e.handleResize&&e.handleResize(...d))},[Y(s,{vnode:e.summary},null,8,["vnode"])],32)),[[f,void 0,"height"]])],2),oe("div",{class:j(`${e.prefixCls}-cell-shadow-left`),style:Re(e.leftShadowStyle)},null,6),oe("div",{class:j(`${e.prefixCls}-cell-shadow-right`),style:Re(e.rightShadowStyle)},null,6),oe("div",{class:j(`${e.prefixCls}-summary-scrollbar`),style:Re(e.scrollbarStyle)},null,6)],6)],6)):Ce("v-if",!0)]),_:1}),oe("div",{key:"body",ref:"bodyRef",class:j(e.bodyClass),style:Re(e.bodyStyle),onDragstart:t[8]||(t[8]=(...d)=>e.handleDragStart&&e.handleDragStart(...d)),onKeydown:t[9]||(t[9]=(...d)=>e.handleKeydown&&e.handleKeydown(...d))},[oe("div",Ou,[oe("div",{ref:"bodyViewportRef",class:j(`${e.prefixCls}-body-viewport-container`),style:Re(e.bodyViewportStyle)},[oe("div",{style:Re(e.rowsHeightStyle)},[oe("div",{ref:"bodyContainerRef",class:j(`${e.prefixCls}-body-container`),style:Re(e.bodyContainerStyle)},[oe("div",{ref:"leftPopupContainer",key:"left",class:j(e.fixLeftClass),style:Re(e.leftStyle)},[e.leftColumns.length?(I(),fe(a,{key:0,"get-row-class-name":e.getRowClassName,type:"left","prefix-cls":e.prefixCls,"wrap-text":e.wrapText},null,8,["get-row-class-name","prefix-cls","wrap-text"])):(I(),Q("div",{key:1,class:j(`${e.prefixCls}-cell-shadow-left`)},null,2)),e.summary&&!e.summaryFixed?(I(),Q("div",{key:"summary",class:j(e.summaryClass),style:Re(e.summaryStyle)},[oe("div",{class:j(e.summaryViewportClass),style:Re(e.summaryViewportStyle)},[oe("div",{ref:"summaryViewportRef",class:j(`${e.prefixCls}-summary-container`)},[Ze((I(),Q("div",{onResizeheight:t[1]||(t[1]=(...d)=>e.handleResize&&e.handleResize(...d))},[Y(s,{vnode:e.summary},null,8,["vnode"])],32)),[[f,void 0,"height"]])],2),oe("div",{style:Re(e.leftShadowStyle),class:j(`${e.prefixCls}-cell-shadow-left`)},null,6),oe("div",{style:Re(e.rightShadowStyle),class:j(`${e.prefixCls}-cell-shadow-right`)},null,6)],6)],6)):Ce("v-if",!0),oe("div",{ref:"leftTarget",class:j(`${e.prefixCls}-body-contextmenu-container`)},[Ze((I(),Q("div",{class:j(`${e.prefixCls}-body-contextmenu-container-inner`),onResize:t[2]||(t[2]=(...d)=>e.handleContextmenuPopupResize&&e.handleContextmenuPopupResize(...d))},[e.popupContentPos==="left"?(I(),fe(it(e.popupContent),{key:0})):Ce("v-if",!0)],34)),[[f]])],2)],6),oe("div",{key:"center",class:j(e.centerClass),style:Re(e.centerStyle)},[oe("div",{ref:"centerPopupContainer",class:j(e.containerClass),style:Re(e.containerStyle)},[e.centerColumns.length?(I(),fe(a,{key:0,"get-row-class-name":e.getRowClassName,type:"center","prefix-cls":e.prefixCls,"wrap-text":e.wrapText},null,8,["get-row-class-name","prefix-cls","wrap-text"])):Ce("v-if",!0),oe("div",{ref:"centerTarget",class:j(`${e.prefixCls}-body-contextmenu-container`)},[Ze((I(),Q("div",{class:j(`${e.prefixCls}-body-contextmenu-container-inner`),onResize:t[3]||(t[3]=(...d)=>e.handleContextmenuPopupResize&&e.handleContextmenuPopupResize(...d))},[e.popupContentPos==="center"?(I(),fe(it(e.popupContent),{key:0})):Ce("v-if",!0)],34)),[[f]])],2)],6)],6),oe("div",{key:"right",ref:"rightPopupContainer",class:j(e.fixRightClass),style:Re(e.rightStyle)},[e.rightColumns.length?(I(),fe(a,{key:0,"get-row-class-name":e.getRowClassName,type:"right","prefix-cls":e.prefixCls,"wrap-text":e.wrapText},null,8,["get-row-class-name","prefix-cls","wrap-text"])):(I(),Q("div",{key:1,class:j(`${e.prefixCls}-cell-shadow-right`)},null,2)),oe("div",{ref:"rightTarget",class:j(`${e.prefixCls}-body-contextmenu-container`)},[Ze((I(),Q("div",{class:j(`${e.prefixCls}-body-contextmenu-container-inner`),onResize:t[4]||(t[4]=(...d)=>e.handleContextmenuPopupResize&&e.handleContextmenuPopupResize(...d))},[e.popupContentPos==="right"?(I(),fe(it(e.popupContent),{key:0})):Ce("v-if",!0)],34)),[[f,!0]])],2)],6),oe("span",{ref:"dragRowPlaceholderRef",class:j(`${e.prefixCls}-drag-placeholder`)},null,2)],6)],4),e.isEmpty?(I(),Q("div",{key:"empty",class:j(`${e.prefixCls}-empty-container`)},[Ze((I(),Q("div",{style:{padding:"1px"},onResizeheight:t[5]||(t[5]=(...d)=>e.handleEmptyHeight&&e.handleEmptyHeight(...d))},[Y(s,{vnode:e.emptyText},{default:ke(()=>[Y(c,{image:e.emptyImage},null,8,["image"])]),_:1},8,["vnode"])],32)),[[f,void 0,"height"]])],2)):Ce("v-if",!0)],6),oe("div",{ref:"measureDomRef",style:Re(e.measureDomStyle)},null,4),Ze(oe("div",{class:j(`${e.prefixCls}-body-scroll-measure`),style:Re(`min-width: ${e.bodyInnerWidth}px`),onResizewidth:t[6]||(t[6]=(...d)=>e.handleBodyScrollResize&&e.handleBodyScrollResize(...d))},null,38),[[f,void 0,"width"]]),Ze(oe("div",{class:j(`${e.prefixCls}-body-inner-measure`),style:Re(`min-width: ${e.scrollX}px`),onResizewidth:t[7]||(t[7]=(...d)=>e.handleBodyInnerResize&&e.handleBodyInnerResize(...d))},null,38),[[f,void 0,"width"]])]),Y(r,{style:Re(`height: ${e.bodyHeight}px`)},null,8,["style"])],38),Y(i,null,{default:ke(()=>[e.summary&&e.summaryFixed==="bottom"?(I(),Q("div",{key:"summary",class:j(e.fixedSummaryClass),style:Re(e.summaryStyle)},[oe("div",{class:j(e.summaryViewportClass),style:Re(e.summaryViewportStyle)},[oe("div",{ref:"summaryViewportRef",class:j(`${e.prefixCls}-summary-container`),style:{height:"calc(100% + 15px)"}},[Ze((I(),Q("div",{onResizeheight:t[10]||(t[10]=(...d)=>e.handleResize&&e.handleResize(...d))},[Y(s,{vnode:e.summary},null,8,["vnode"])],32)),[[f,!0,"height"]])],2),oe("div",{style:Re(e.leftShadowStyle),class:j(`${e.prefixCls}-cell-shadow-left`)},null,6),oe("div",{style:Re(e.rightShadowStyle),class:j(`${e.prefixCls}-cell-shadow-right`)},null,6),oe("div",{class:j(`${e.prefixCls}-summary-scrollbar`),style:Re(e.scrollbarStyle)},null,6)],6)],6)):Ce("v-if",!0)]),_:1}),Y(v)],64)}var Du=Be(Hu,[["render",Bu]]);const so=[];var Mu=Pe({name:"ProTable",inheritAttrs:!1,directives:{resize:Wt},components:{TableSlotsContextProvider:Wi,Spin:tr,MeasureWidth:Ui,Pagination:er,PopupContainer:qi,AutoHeightHeader:Is,ProHeader:Ws,ProBody:Du},props:Oo(),emits:["update:pagination","scroll","update:selectedRowKeys","update:expandedRowKeys","update:columns","update:sorter","update:filters","expand","expandedRowsChange","resizeColumn","update:dataSource","cellKeydown"],slots:{},setup(e,{expose:t,emit:l,slots:n}){const o=h(()=>{var G;return(G=e.rowKey)!=null?G:"id"}),u=de(null),s=vo("custom-ui"),{editCellKeys:i,openEditor:a,closeEditor:c}=Gr();qr();const r=h(()=>e.getPopupContainer),{status:v,watermarkMsg:f}=xi(),d=new Map,p=F(null),m=F(null),w=new Map,y=F(""),S=de(null),T=h(()=>e.summaryFixed===!0||e.summaryFixed===""?"bottom":e.summaryFixed),K=F(0);qe(()=>{ht(!(typeof o.value=="function"&&o.value.length>1),"table","`index` parameter of `rowKey` function is deprecated. There is no guarantee that it will work as expected.")});const O=Je("localeData",{antLocale:{Table:{triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"}}}),N=h(()=>{const G=O?.antLocale||{};return{...G.locale==="zh-cn"?{triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"}:{},...G.Table||{},...e.locale||{}}}),U=F(0),M=F(0),q=F(),g=F(0),D=F(0),L=de(),$=Fe(()=>{var G,be;return(be=e.scrollX)!=null?be:(G=e.scroll)==null?void 0:G.x}),z=Fe(()=>{var G,be,De;return(De=(be=(G=e.scroll)==null?void 0:G.y)!=null?be:e.height)!=null?De:e.maxHeight}),V=F(typeof $.value=="number"?$.value:0);he($,()=>{V.value=typeof $.value=="number"?$.value:0});const W=Fe(()=>!(e.virtual===!1||!z.value)),C=Fe(()=>e.xVirtual||e.virtual!==!1&&e.xVirtual!==!1),R=h(()=>typeof o.value=="function"?o.value:G=>G?.[o.value]),x=de([]),H=de([]);let te,ie;he(()=>e.deepWatchDataSource,()=>{te&&te(),te=he(()=>e.dataSource,()=>{x.value=wt(e.dataSource)||so,Kt(x)},{immediate:!0,deep:!!e.deepWatchDataSource})},{immediate:!0,deep:!0}),he(()=>e.deepWatchColumns,()=>{ie&&ie(),ie=he(()=>e.columns,()=>{H.value=wt(e.columns)||so,Kt(H)},{immediate:!0,deep:!0})},{immediate:!0,deep:!!e.deepWatchColumns});const A=h(()=>e.childrenColumnName||"children"),{getRecordByKey:ae,getIndexsByKey:me,getKeyByIndexs:Se,allDataRowKeys:Z,allDataRootRowKeys:re}=ri(x,A,R),ve=de([]);qe(()=>{e.defaultExpandedRowKeys&&(ve.value=e.defaultExpandedRowKeys),e.defaultExpandAllRows&&(ve.value=Z.value)});const pe=h(()=>{const G=e.rowSelection||{},{checkStrictly:be=!0}=G;return{...G,checkStrictly:be}}),ye=h(()=>new Set(e.expandedRowKeys||ve.value||[])),we=h(()=>typeof e.loading=="boolean"?{spinning:e.loading}:typeof e.loading=="object"?{spinning:!0,...e.loading}:{spinning:!1});uo(()=>{sl({left:0,top:0})});let Ke=()=>{};const Ie=de($i()),Ae=h(()=>e.size==="small"?39:e.size==="middle"?47:55),Ne=h(()=>e.expandedRowRender),ze=Fe(()=>x.value.some(G=>G?.[A.value])?"nest":Ne.value?"row":null),ne=Fe(()=>!!e.expandedRowRender),ue=Ii({props:e,rawColumns:H,bodyScrollWidth:V,baseHeight:Ae,measureWidthRef:L,expandable:ne,expandType:ze,scrollLeft:M,bodyWidth:g,xVirtual:C,draggingColumnKey:y,latestRangeStartCell:S}),{sortedData:Te,sorterStates:Le,sorter:B,changeSorter:E}=Ti(e,x,ue.allColumns,(G,be)=>{U.value>D.value&&Xt(),Ke({sorter:G,sorterStates:be},"sort",!1)}),{filterData:le,filterStates:b,filters:k,changeFilter:P}=Ei(e,Te,ue.allColumns,(G,be)=>{Ke({filters:G,filterStates:be},"filter",!0)}),X=Fe(()=>le.value.length),J=h(()=>e.pagination===!1?{}:Fi(e.pagination,ce.value)),se=(G,be)=>{const De={...J.value,current:G,pageSize:be};e["onUpdate:pagination"]&&l("update:pagination",co(e.pagination)?Object.assign(e.pagination||{},De):De)},{mergedPagination:ce,pos:_,refreshPagination:ge,onChange:xe,onShowSizeChange:$e,pageData:He}=zi(X,e,le,(G,be)=>{const De={...J.value,current:G,pageSize:be};se(G,be),Xt(),Ke({pagination:De},"paginate")}),{flattenData:Qe,keyEntities:dt,pageDataRowKeys:et,pageDataEnableRowKeys:Xe,checkboxPropsMap:pt,getRowFlattenIndexByKey:kt,isMyChildren:Ct,getRowByFlattenIndex:Vt}=Di(He,A,ye,R,ze,pe),yt=Oi(e,Qe,D,U,W,dt),{rowPosition:rl,viewportHeight:jt,startIndex:Bt,endIndex:il}=yt,{leftWidth:vt,rightWidth:Ye,centerWidth:Kl,bodyMaxWidth:Pl}=ue,Rn=Sr(e,pe,x,{prefixCls:h(()=>e.prefixCls),pageData:He,getRowKey:R,getRecordByKey:ae,locale:N,keyEntities:dt,checkboxPropsMap:pt,allDataRootRowKeys:re,pageDataRowKeys:et}),Il=F();let kn,Kn;const sl=(G={},be="auto",De=!1)=>{De||Xt();const Me=typeof G=="number"?{top:G}:G;let Oe,Ve;if("left"in Me)Oe=Me.left||0;else if("columnIndex"in Me){const Ue=ue.getColumnPosition(Me.columnIndex);Ue&&(Oe=Ue.left-vt.value)}else if("columnKey"in Me){const Ue=ue.getColumnPositionByKey(Me.columnKey);Ue&&(Oe=Ue.left-vt.value)}if("top"in Me)Ve=Math.min(Math.max(Me.top||0,0),Tn.value);else if("rowKey"in Me){const Ue=yt.getRowPositionByKey(Me.rowKey);Ue&&(Ve=Ue)}Oe=Math.max(Math.min(In.value,Oe||0),0),Bl.value||(Ve=0),be==="smooth"?(Oe!==void 0&&(We.cancel(kn),kn=Qn(M.value,Oe,Ue=>{M.value=Ue})),Ve!==void 0&&(We.cancel(Kn),Kn=Qn(U.value,Ve,Ue=>{U.value=Ue}))):(Oe!==void 0&&(M.value=Oe),Ve!==void 0&&(U.value=Ve))},Ut=F(!1),ul=h(()=>{var G;return!!((G=e.animateRows)!=null?G:pr.value)});let Pn;he(ul,G=>{Ut.value=G},{immediate:!0});const Xt=()=>{Ut.value=!1,clearTimeout(Pn),Pn=setTimeout(()=>{Ut.value=ul.value},100)},In=h(()=>Pl.value-g.value),Tn=h(()=>jt.value-D.value),En=G=>{l("scroll",G)};ei({scrollLeft:M,maxScrollLeft:In,onScroll:En,bodyWidth:g}),ti({scrollTop:U,maxScrollTop:Tn,onScroll:En,updateAnimate:Xt,bodyWidth:g});const{data:Tl,pos:ma}=Li(e,rl,Qe,Bt,il,p,Ut,kt,S),El=F(!1),Hl=F(!1),Hn=F(!1);qe(()=>{El.value=xt&&!!M.value,Hl.value=xt&&Kl.value-(g.value-vt.value-Ye.value)>M.value,Hn.value=!El.value&&!Hl.value});const ga=h(()=>Jt({[`${e.prefixCls}`]:!0,[`${e.prefixCls}-support-sticky`]:xt,[`${e.prefixCls}-stripe`]:e.stripe,[`${e.prefixCls}-bordered`]:e.bordered,[`${e.prefixCls}-${e.size}`]:!0,[`${e.prefixCls}-ping-left`]:El.value,[`${e.prefixCls}-ping-right`]:Hl.value,[`${e.prefixCls}-no-ping`]:Hn.value,[`${e.prefixCls}-has-animate`]:ul.value})),ya=h(()=>({height:typeof e.height=="number"?`${e.height}px`:e.height,maxHeight:typeof e.maxHeight=="number"?`${e.maxHeight}px`:e.maxHeight,minHeight:typeof e.minHeight=="number"?`${e.minHeight}px`:e.minHeight})),Ol=F(!1),wa=lr(()=>{Ol.value=Pl.value>g.value,g.value>V.value&&(V.value=g.value)},100);he([Pl,g],()=>{wa()});const Bl=Fe(()=>!!z.value&&D.value+.9<jt.value),Ca=Fe(()=>!e.scroll||e.scroll&&e.scroll.scrollToFirstRowOnChange!==!1);Ke=(G,be,De=!1)=>{var Me,Oe,Ve;De&&(ge(),se(1,ce.value.pageSize),e.pagination&&((Oe=(Me=e.pagination).onChange)==null||Oe.call(Me,1,ce.value.pageSize))),Ca.value&&(U.value=0),(Ve=e.onChange)==null||Ve.call(e,G.pagination||ce.value,G.filters||k.value,G.sorter||B.value,{currentDataSource:G.currentDataSource||le.value,action:be})};const ba=h(()=>Et(ce.value,["position","onChange","onShowSizeChange"])),Sa=h(()=>({[`${e.prefixCls}-pagination`]:!0,[`${e.prefixCls}-pagination-${_.value.bottom}`]:!0,[`${s}`]:!0})),On=F(0),xa=h(()=>{var G,be;return e.paginationSticky?e.paginationSticky===!0?{position:"sticky","z-index":9,bottom:"0px"}:{position:"sticky","z-index":9,bottom:`${(be=(G=e.paginationSticky)==null?void 0:G.offsetBottom)!=null?be:0}px`}:{}}),$a=h(()=>typeof e.indentSize=="number"?e.indentSize:15),Dl=Ni({leftColumns:ue.leftColumns,rightColumns:ue.rightColumns,visibleCenterColumns:ue.visibleCenterColumns,allColumns:ue.allColumns,data:Tl,mergedRowHeights:yt.mergedRowHeights,getColumnPosition:ue.getColumnPosition,bodyWidth:g,leftWidth:vt,centerWidth:Kl,getRowHeight:yt.getRowHeight,customCell:Na(e,"customCell")});he([K,M],()=>{var G,be;(be=(G=u.value)==null?void 0:G.alignPopup)==null||be.call(G)},{flush:"post"}),li({...yt,...ue,...Dl,rootRef:q,rawData:x,getRowFlattenIndexByKey:kt,prefixCls:h(()=>e.prefixCls),draggingRowKey:p,insertToRowKey:m,status:v,useAnimate:Ut,animateRows:ul,watermarkMsg:f,onResizeColumn:(G,be,De)=>{var Me;const Oe=be.width;((Me=e.onResizeColumn)==null?void 0:Me.call(e,G,be,De))!==!1&&(Oe===G&&be.width===G||(be.width=Oe!==be.width?be.width:G,Kt(H)),De==="end"&&l("update:columns",H.value,"resize"))},onRowDragEnd:G=>{var be;const{insertToRowKey:De,record:Me,fromIndexs:Oe,rowKey:Ve,dir:Ue,preTargetInfo:tt,nextTargetInfo:Dt}=G,ft=wt(Me),Ml=(be=e.onRowDragEnd)==null?void 0:be.call(e,{...G,record:ft,fromIndexs:Oe});if(Ml===!1)return;const Fn=()=>{if(!Ct(Ve,tt?.rowKey)&&De!==Ve){if(De!==null){const An=ae(De);De===tt?.rowKey||De===Dt?.rowKey?Ue===qt?(Mt(An[A.value],[],A.value,ft),Ft(x.value,Oe,A.value)):(Ft(x.value,Oe,A.value),Mt(An[A.value],[],A.value,ft)):Ue===qt?(Mt(x.value,tt?.indexs,A.value,ft),Ft(x.value,Oe,A.value)):(Ft(x.value,Oe,A.value),Mt(x.value,tt?.indexs,A.value,ft))}else Ue===qt&&tt?(Mt(x.value,[tt.indexs[0]],A.value,ft),Ft(x.value,Oe,A.value)):Ue===Mo&&Dt&&(Ft(x.value,Oe,A.value),Mt(x.value,tt?.indexs?[tt.indexs[0]]:[],A.value,ft));Kt(x),l("update:dataSource",x.value)}};Zt(Ml)?Ml.then(()=>{Fn()}).catch(()=>{}):Fn()},virtual:W,xVirtual:C,dataRowPosition:ma,rawColumns:H,bodyHeight:D,scrollTop:U,scrollLeft:M,supportSticky:xt,childrenColumnName:A,bodyScrollWidth:V,baseHeight:Ae,startIndex:Bt,data:Tl,pageData:He,getRecordByKey:ae,getIndexsByKey:me,expandType:ze,flattenData:Qe,expandedRowKeys:ye,indentSize:$a,props:e,bodyWidth:g,scrollTo:sl,scrollBarSize:Ie,leftWidth:vt,rightWidth:Ye,centerWidth:Kl,showVerticalScrollbar:Bl,showHorizontalScrollbar:Ol,getRowKey:R,selection:Rn,updateSelectedRowKeys:G=>{l("update:selectedRowKeys",G)},locale:N,sorterStates:Le,changeSorter:E,changeFilter:P,filterStates:b,onTriggerExpand:(G,be)=>{let De;const Me=ye.value.has(be);Me?(ye.value.delete(be),De=[...ye.value]):De=[...ye.value,be],ve.value=De,l("update:expandedRowKeys",De),l("expand",!Me,G),l("expandedRowsChange",De)},keyEntities:dt,pageDataRowKeys:et,pageDataEnableRowKeys:Xe,checkboxPropsMap:pt,mergedRowSelection:pe,getPopupContainer:r,allDataRowKeys:Z,allDataRootRowKeys:re,dragRowsHandle:d,isMyChildren:Ct,getKeyByIndexs:Se,getRowByFlattenIndex:Vt,draggingColumnKey:y,dragColumnsHandle:w,onColumnDragEnd:G=>{var be;const{dir:De,column:Me,targetColumn:Oe}=G,Ve=(be=e.onColumnDragEnd)==null?void 0:be.call(e,G);if(Ve===!1)return;const Ue=()=>{if(Me===Oe||Me.key===Oe.key)return;const tt=H.value.findIndex(ft=>ft===Me||ft.key===Me.key),Dt=H.value.findIndex(ft=>ft===Oe||ft.key===Oe.key);De===Xr?(H.value.splice(tt,1),H.value.splice(Dt,0,Me)):(H.value.splice(Dt+1,0,Me),H.value.splice(tt,1)),Kt(H),l("update:columns",H.value,"drag")};Zt(Ve)?Ve.then(()=>{Ue()}).catch(()=>{}):Ue()},onColumnDrag:()=>{},columnDrag:h(()=>e.columnDrag),summaryFixed:T,realHeaderHeight:K,bottomPaginationHeight:On,pos:_});const Bn=F(),Dn=F(),{navigationService:Mn,getSelectedRange:Ra,clearAllSelectedRange:ka,copySelectedRange:Ka,appendCellToSelectedRange:Pa,onBodyKeydown:Ia}=ai({allColumns:ue.allColumns,flattenData:Qe,rangeSelection:h(()=>e.rangeSelection),getRowByFlattenIndex:Vt,rootRef:q,prefixCls:h(()=>e.prefixCls),allCellProps:Dl.allCellProps,tabGuardTopRef:Bn,tabGuardBottomRef:Dn,ensureCellColumnVisible:G=>{if(!G.column||G.column.fixed)return;const be=M.value,De=ue.getColumnPositionByKey(G.column.columnKey);if(De){const{width:Me,left:Oe}=De,Ve=vt.value,Ue=Ye.value;Oe-Ve<be?M.value=Oe-Ve:Oe+Me>be+g.value-Ue&&(M.value=Oe+Me-g.value+Ue)}},ensureCellRowVisible:G=>{var be;const{rowIndex:De}=G,Me=U.value,Oe=Vt(De),Ve=yt.getRowPositionByKey(Oe.rowKey),Ue=(((be=Dl.allCellProps.value[Oe.rowKey])==null?void 0:be[G.column.columnKey])||{}).props||{},tt=yt.getRowHeight(De,Ue.rowSpan);Ve!==void 0&&(Xt(),Ve<Me?U.value=Ve:Ve+tt>Me+D.value&&(U.value=Ve+tt-D.value))},latestRangeStartCell:S,bodyRef:h(()=>{var G;return(G=Il.value)==null?void 0:G.bodyRef}),scrollLeft:M,scrollTop:U,scrollTo:sl,showVerticalScrollbar:Bl,showHorizontalScrollbar:Ol,getIndexsByKey:me,formatRangeCellText:G=>e.formatRangeCellText?e.formatRangeCellText(G):G.value?G.value:"",editCellKeys:i,copyDelimiter:h(()=>e.copyDelimiter)});return t({scrollTo:sl,scrollLeft:M,scrollTop:U,bodyRef:h(()=>{var G;return(G=Il.value)==null?void 0:G.bodyRef}),getSelectedRange:Ra,clearAllSelectedRange:ka,copySelectedRange:Ka,appendCellToSelectedRange:Pa,openEditor:G=>{a(G.map(be=>`${be.rowKey} ${be.columnKey}`))},closeEditor:G=>{G?c(G.map(be=>`${be.rowKey} ${be.columnKey}`)):c()}}),{bodyRef:Il,spinProps:we,rowPosition:rl,viewportHeight:jt,startIndex:Bt,data:Tl,watermarkMsg:f,rootStyle:ya,rootClass:ga,onBodyKeydown:Ia,watermarkStyle:h(()=>({minWidth:"100px!important",minHeight:"40px!important",position:"absolute!important",fontSize:"20px!important",opacity:"0.8!important",bottom:"40px!important",right:"40px!important",pointerEvents:"none",display:"block!important",zIndex:"999999!important",color:"#000000!important",margin:"0px!important",padding:"0px!important",transform:"unset!important"})),mergedPagination:ce,pos:_,onPaginationChange:xe,scrollBarSize:Ie,scrollTop:U,bodyScrollWidth:V,bodyWidth:g,scrollLeft:M,cal:yt,selection:Rn,locale:N,paginationProps:ba,slots:n,mergedScrollX:$,mergedScrollY:z,bodyHeight:D,measureWidthRef:L,flattenData:Qe,rootRef:q,mergedSummaryFixed:T,handleResize:G=>{K.value=G.detail.height},handlePaginationResize:G=>{On.value=G.detail.height},popupContainer:u,handleGuardTopKeydown:G=>{G.keyCode!==Ge.TAB||G.shiftKey||(Mn.getFirstCellToFocus(G.shiftKey),G.preventDefault())},handleGuardBottomKeydown:G=>{G.keyCode===Ge.TAB&&G.shiftKey&&(Mn.getLastCellToFocus(G.shiftKey),G.preventDefault())},tabGuardTopRef:Bn,tabGuardBottomRef:Dn,onShowSizeChange:$e,customUiCls:s,paginationClass:Sa,bottomPaginationStyle:xa}}});function Fu(e,t,l,n,o,u){const s=ee("Pagination"),i=ee("AutoHeightHeader"),a=ee("ProHeader"),c=ee("ProBody"),r=ee("PopupContainer"),v=ee("Spin"),f=ee("MeasureWidth"),d=ee("TableSlotsContextProvider"),p=Lt("resize");return I(),fe(d,{value:{...e.slots}},{default:ke(()=>[Y(v,Nt(dn(e.spinProps)),{default:ke(()=>[e.pos.top?(I(),fe(s,_e({key:0,class:`${e.prefixCls}-pagination ${e.prefixCls}-pagination-${e.pos.top} ${e.customUiCls}`},e.paginationProps,{onChange:e.onPaginationChange,onShowSizeChange:e.onShowSizeChange}),null,16,["class","onChange","onShowSizeChange"])):Ce("v-if",!0),oe("div",{ref:"tabGuardTopRef",role:"presentation",tabindex:"0",style:{position:"absolute",width:"0",height:"0"},onKeydown:t[0]||(t[0]=(...m)=>e.handleGuardTopKeydown&&e.handleGuardTopKeydown(...m))},null,544),oe("div",{key:"content",ref:"ref",class:j(e.rootClass),style:Re(e.rootStyle)},[e.showHeader?(I(),Q(Ee,{key:0},[e.autoHeaderHeight?(I(),fe(i,{key:0,"prefix-cls":e.prefixCls,sticky:e.sticky,onResizeheight:e.handleResize},null,8,["prefix-cls","sticky","onResizeheight"])):(I(),fe(a,{key:1,"prefix-cls":e.prefixCls,sticky:e.sticky,onResizeheight:e.handleResize},null,8,["prefix-cls","sticky","onResizeheight"]))],64)):Ce("v-if",!0),Y(c,{ref:"bodyRef",bodyScrollWidth:e.bodyScrollWidth,"onUpdate:bodyScrollWidth":t[1]||(t[1]=m=>e.bodyScrollWidth=m),bodyWidth:e.bodyWidth,"onUpdate:bodyWidth":t[2]||(t[2]=m=>e.bodyWidth=m),bodyHeight:e.bodyHeight,"onUpdate:bodyHeight":t[3]||(t[3]=m=>e.bodyHeight=m),"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,"scroll-x":e.mergedScrollX,height:e.mergedScrollY,"summary-fixed":e.mergedSummaryFixed,summary:e.$slots.summary,"empty-text":e.$slots.emptyText,onKeydown:e.onBodyKeydown},null,8,["bodyScrollWidth","bodyWidth","bodyHeight","prefix-cls","wrap-text","scroll-x","height","summary-fixed","summary","empty-text","onKeydown"])],6),oe("div",{ref:"tabGuardBottomRef",role:"presentation",tabindex:"0",style:{position:"absolute",width:"0",height:"0"},onKeydown:t[4]||(t[4]=(...m)=>e.handleGuardBottomKeydown&&e.handleGuardBottomKeydown(...m))},null,544),e.$slots.footer?(I(),Q("div",{key:"footer",class:j(`${e.prefixCls}-footer`)},[st(e.$slots,"footer")],2)):Ce("v-if",!0),Y(r,{ref:"popupContainer","prefix-cls":e.prefixCls},null,8,["prefix-cls"]),e.pos.bottom?Ze((I(),Q("div",{key:2,style:Re(e.bottomPaginationStyle),class:j(`${e.prefixCls}-pagination-wrap`),onResizeheight:t[5]||(t[5]=(...m)=>e.handlePaginationResize&&e.handlePaginationResize(...m))},[Y(s,_e({class:e.paginationClass},e.paginationProps,{onChange:e.onPaginationChange,onShowSizeChange:e.onShowSizeChange}),null,16,["class","onChange","onShowSizeChange"])],38)),[[p,void 0,"height"]]):Ce("v-if",!0)]),_:3},16),Y(f,{ref:"measureWidthRef"},null,512)]),_:3},8,["value"])}var Au=Be(Mu,[["render",Fu]]),zu=Pe({name:"TableToolBarSearch",inheritAttrs:!1,components:{AInputSearch:nr},emits:["search"],setup(e,{emit:t,attrs:l}){var n,o;const u=F((o=(n=l.defaultValue)!=null?n:l.value)!=null?o:""),s=Ht();return{attrs:l,intl:s,searchValue:u,onSearch:a=>{t("search",a)}}}});function Lu(e,t,l,n,o,u){var s;const i=ee("AInputSearch");return I(),fe(i,_e({"allow-clear":"",placeholder:e.attrs.placeholder||e.intl.getMessage("form.inputPlaceholder","请输入"),style:(s=e.attrs.style)!=null?s:{width:"200px"}},e.attrs,{value:e.searchValue,"onUpdate:value":t[0]||(t[0]=a=>e.searchValue=a),onSearch:e.onSearch}),null,16,["placeholder","style","value","onSearch"])}var Nu=Be(zu,[["render",Lu]]),Wu=Pe({name:"DensityIcon",inheritAttrs:!1,components:{Dropdown:fn,Tooltip:Ot,AMenu:vn,ColumnHeightOutlined:Yl},props:{prefixCls:String},setup(){const e=Ht(),t=$l(),l=h(()=>({selectedKeys:[t.tableSize.value],onClick:({key:n})=>{var o;(o=t.setTableSize)==null||o.call(t,n)},items:[{key:"default",label:e.getMessage("tableToolBar.densityLarger","宽松")},{key:"middle",label:e.getMessage("tableToolBar.densityMiddle","中等")},{key:"small",label:e.getMessage("tableToolBar.densitySmall","紧凑")}]}));return{h:At,intl:e,menuProps:l,ColumnHeightOutlined:Yl}}});function _u(e,t,l,n,o,u){const s=ee("ColumnHeightOutlined"),i=ee("Tooltip"),a=ee("AMenu"),c=ee("Dropdown");return I(),fe(c,{trigger:"click",overlayStyle:{width:"80px"}},{overlay:ke(()=>[Y(a,Nt(dn(e.menuProps)),null,16)]),default:ke(()=>[Y(i,{title:e.intl.getMessage("tableToolBar.density","密度")},{default:ke(()=>[oe("div",{class:j(`${e.prefixCls}-toolbar-actions-item`)},[Y(s)],2)]),_:1},8,["title"])]),_:1})}var Vu=Be(Wu,[["render",_u]]),ju=Pe({name:"CheckboxListItem",inheritAttrs:!1,components:{Tooltip:Ot,VerticalAlignMiddleOutlined:rr,VerticalAlignTopOutlined:ar,VerticalAlignBottomOutlined:or},props:{className:String,title:String,columnKey:[String,Number],fixed:[Boolean,String],isRoot:Boolean},setup(e){const{columnsMap:t,setColumnsMap:l}=$l();return{intl:Ht(),onClick:u=>{var s,i;const a=t.value[(s=e.columnKey)!=null?s:""]||{},c={...t.value,[(i=e.columnKey)!=null?i:""]:{...a,fixed:u}};l(c)}}}});function Uu(e,t,l,n,o,u){const s=ee("VerticalAlignTopOutlined"),i=ee("Tooltip"),a=ee("VerticalAlignMiddleOutlined"),c=ee("VerticalAlignBottomOutlined");return I(),Q("span",{class:j(`${e.className}-list-item`),key:e.columnKey},[oe("div",{class:j(`${e.className}-list-item-title`)},[st(e.$slots,"default")],2),e.isRoot?(I(),Q("span",{key:0,class:j(`${e.className}-list-item-option`)},[e.fixed!=="left"?(I(),fe(i,{key:0,title:e.intl.getMessage("tableToolBar.leftPin","固定在列首")},{default:ke(()=>[oe("span",{onClick:t[0]||(t[0]=ut(r=>e.onClick("left"),["stop","prevent"]))},[Y(s)])]),_:1},8,["title"])):Ce("v-if",!0),e.fixed?(I(),fe(i,{key:1,title:e.intl.getMessage("tableToolBar.noPin","不固定")},{default:ke(()=>[oe("span",{onClick:t[1]||(t[1]=ut(r=>e.onClick(),["stop","prevent"]))},[Y(a)])]),_:1},8,["title"])):Ce("v-if",!0),e.fixed!=="right"?(I(),fe(i,{key:2,title:e.intl.getMessage("tableToolBar.rightPin","固定在列尾")},{default:ke(()=>[oe("span",{onClick:t[2]||(t[2]=ut(r=>e.onClick("right"),["stop","prevent"]))},[Y(c)])]),_:1},8,["title"])):Ce("v-if",!0)],2)):Ce("v-if",!0)],2)}var Xu=Be(ju,[["render",Uu]]),Yu=Pe({name:"CheckboxList",inheritAttrs:!1,components:{Tree:ir,CheckboxListItem:Xu,RenderVNode:un},props:{className:String,title:String,checkable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},showTitle:{type:Boolean,default:!0},listHeight:{type:Number,default:void 0},list:{type:Array,default:()=>[]}},setup(e){const{columnsMap:t,setColumnsMap:l,sortKeyColumns:n,setSortKeyColumns:o}=$l(),u=de([]),s=new Map,i=F([]),a=h(()=>e.list&&e.list.length>0),c=(f,d)=>f.map(({key:p,children:m,...w})=>{var y,S;const T=St(p,[d?.columnKey,w.index||"0"].filter(Boolean).join("-")),K=t.value[T||"null"]||{show:!0};K.show!==!1&&!m&&u.value.push(T);const O={key:T,...Et(w,["className"]),selectable:!1,disabled:K.disable===!0,disableCheckbox:typeof K.disable=="boolean"?K.disable:(y=K.disable)==null?void 0:y.checkbox,isLeaf:d?!0:void 0,isRoot:!d};return m&&(O.children=c(m,{...K,columnKey:T}),(S=O.children)!=null&&S.every(N=>{var U;return(U=u.value)==null?void 0:U.includes(N.key)})&&u.value.push(T)),s.set(p,O),O});return he([t,()=>e.list,a],()=>{u.value=[];const f=c(e.list);Kt(u),i.value=f?.map(d=>Et(d,["disabled"]))},{immediate:!0}),{show:a,treeData:i,checkedKeys:u,onCheckTree:f=>{const d={...t.value},p=m=>{var w,y,S;const T={...d[m]};T.show=f.checked,(w=s?.get(m))!=null&&w.children&&((S=(y=s.get(m))==null?void 0:y.children)==null||S.forEach(K=>p(K.key))),d[m]=T};p(f.node.key),l({...d})},move:(f,d,p)=>{const m={...t.value},w=[...n.value],y=w.findIndex(O=>O===f),S=w.findIndex(O=>O===d),T=p>y;if(y<0)return;const K=w[y];w.splice(y,1),p===0?w.unshift(K):w.splice(T?S:S+1,0,K),w.forEach((O,N)=>{m[O]={...m[O]||{},order:N}}),l(m),o(w)}}}});const Gu={style:{"max-height":"260px",overflow:"auto"}};function qu(e,t,l,n,o,u){var s,i;const a=ee("RenderVNode"),c=ee("CheckboxListItem"),r=ee("Tree");return e.show?(I(),Q(Ee,{key:0},[e.showTitle?(I(),Q("span",{key:0,class:j(`${e.className}-list-title`)},mt(e.title),3)):Ce("v-if",!0),oe("div",Gu,[Y(r,{"block-node":"",selectable:!1,checkable:e.checkable,draggable:e.draggable&&!!((s=e.treeData)!=null&&s.length)&&((i=e.treeData)==null?void 0:i.length)>1,checkedKeys:e.checkedKeys,height:e.listHeight,treeData:e.treeData,onCheck:t[0]||(t[0]=(v,f)=>e.onCheckTree(f)),onDrop:t[1]||(t[1]=v=>{const f=v.node.key,d=v.dragNode.key,{dropPosition:p,dropToGap:m}=v,w=p===-1||!m?p+1:p;e.move(d,f,w)})},{title:ke(({title:v,key:f,fixed:d,isRoot:p})=>[v?(I(),fe(c,{key:0,className:e.className,columnKey:f,fixed:d,isRoot:p},{default:ke(()=>[Y(a,{vnode:v},null,8,["vnode"])]),_:2},1032,["className","columnKey","fixed","isRoot"])):Ce("v-if",!0)]),_:1},8,["checkable","draggable","checkedKeys","height","treeData"])])],64)):Ce("v-if",!0)}var Zu=Be(Yu,[["render",qu]]),Ju=Pe({name:"GroupCheckboxList",components:{CheckboxList:Zu},inheritAttrs:!1,props:{className:String,checkable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},listsHeight:{type:Number,default:void 0},localColumns:{type:Array,default:()=>[]}},setup(e){const t=Ht(),l=F([]),n=F([]),o=F([]);he(()=>e.localColumns,()=>{const a=[],c=[],r=[];e.localColumns.forEach(v=>{if(v.hideInSetting)return;const{fixed:f}=v;if(f==="left"||f===!0){c.push(v);return}if(f==="right"){a.push(v);return}r.push(v)}),l.value=a,n.value=c,o.value=r},{immediate:!0});const u=h(()=>l.value&&l.value.length>0),s=h(()=>n.value&&n.value.length>0),i=h(()=>({[`${e.className}-list`]:!0,[`${e.className}-list-group`]:u.value||s.value}));return{intl:t,showRight:u,showLeft:s,rightList:l,leftList:n,list:o,listClass:i}}});function Qu(e,t,l,n,o,u){const s=ee("CheckboxList");return I(),Q("div",{class:j(e.listClass)},[Y(s,{title:e.intl.getMessage("tableToolBar.leftFixedTitle","固定在左侧"),list:e.leftList,checkable:e.checkable,draggable:e.draggable,className:e.className,listsHeight:e.listsHeight},null,8,["title","list","checkable","draggable","className","listsHeight"]),Y(s,{title:e.intl.getMessage("tableToolBar.noFixedTitle","不固定"),list:e.list,checkable:e.checkable,draggable:e.draggable,className:e.className,showTitle:e.showLeft||e.showRight,listsHeight:e.listsHeight},null,8,["title","list","checkable","draggable","className","showTitle","listsHeight"]),Y(s,{title:e.intl.getMessage("tableToolBar.rightFixedTitle","固定在右侧"),list:e.rightList,checkable:e.checkable,draggable:e.draggable,className:e.className,listsHeight:e.listsHeight},null,8,["title","list","checkable","draggable","className","listsHeight"])],2)}var ec=Be(Ju,[["render",Qu]]),tc=Pe({name:"ColumnSetting",inheritAttrs:!1,props:{prefixCls:String,checkable:{type:Boolean,default:!0},checkedReset:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},listsHeight:{type:Number,default:void 0},columns:{type:Array,default:()=>[]}},components:{Popover:ho,Tooltip:Ot,Checkbox:sr,GroupCheckboxList:ec,SettingOutlined:yo},setup(e){const t=Ht(),l=F(null),n=$l(),o=h(()=>`${e.prefixCls}-column-setting`),u=h(()=>e.columns),{columnsMap:s,setColumnsMap:i,clearPersistenceStorage:a}=n;gt(()=>{var p,m;(p=n.props.columnsState)!=null&&p.value&&(l.value=JSON.parse(JSON.stringify(((m=n.props.columnsState)==null?void 0:m.value)||{})))});const c=(p=!0)=>{const m={},w=y=>{y.forEach(({key:S,fixed:T,index:K,children:O,disable:N})=>{var U,M;const q=St(S,K);q&&(m[q]={show:N?(U=s[q])==null?void 0:U.show:p,fixed:T,disable:N,order:(M=s[q])==null?void 0:M.order}),O&&w(O)})};w(u.value),i(m)},r=p=>{p.target.checked?c():c(!1)},v=()=>{var p;a?.(),i({...n.defaultColumnKeyMap.value,...((p=n.props.columnsState)==null?void 0:p.defaultValue)||l.value})},f=h(()=>Object.values(s.value).filter(p=>!p||p.show===!1)),d=h(()=>f.value.length>0&&f.value.length!==u.value.length);return{intl:t,indeterminate:d,unCheckedKeys:f,localColumns:u,clearClick:v,checkedAll:r,setAllSelectAction:c,className:o}}});const lc={key:1};function nc(e,t,l,n,o,u){const s=ee("SettingOutlined"),i=ee("Tooltip"),a=ee("Checkbox"),c=ee("GroupCheckboxList"),r=ee("Popover");return I(),fe(r,{trigger:"click",placement:"bottomLeft",arrow:!1,"overlay-class-name":`${e.className}-popover`,"overlay-style":{paddingTop:"0",width:"224px"}},{title:ke(()=>[oe("div",{class:j(`${e.className}-title`)},[e.checkable?(I(),fe(a,{key:0,indeterminate:e.indeterminate,checked:e.unCheckedKeys.length===0&&e.unCheckedKeys.length!==e.localColumns.length,onChange:e.checkedAll},{default:ke(()=>[Tt(mt(e.intl.getMessage("tableToolBar.columnDisplay","列展示")),1)]),_:1},8,["indeterminate","checked","onChange"])):(I(),Q("div",lc)),e.checkedReset?(I(),Q("a",{key:2,class:j(`${e.className}-action-rest-button`),onClick:t[0]||(t[0]=(...v)=>e.clearClick&&e.clearClick(...v))},mt(e.intl.getMessage("tableToolBar.reset","重置")),3)):Ce("v-if",!0)],2)]),content:ke(()=>[Y(c,{checkable:e.checkable,draggable:e.draggable,className:e.className,localColumns:e.localColumns,listsHeight:e.listsHeight},null,8,["checkable","draggable","className","localColumns","listsHeight"])]),default:ke(()=>[Y(i,{title:e.intl.getMessage("tableToolBar.columnSetting","列设置")},{default:ke(()=>[oe("div",{class:j(`${e.prefixCls}-toolbar-actions-item`)},[Y(s)],2)]),_:1},8,["title"])]),_:1},8,["overlay-class-name"])}var oc=Be(tc,[["render",nc]]),ac=Pe({name:"TableToolBar",inheritAttrs:!1,components:{Space:wo,ProSearch:Nu,DensityIcon:Vu,Tooltip:Ot,ColumnSetting:oc,ReloadOutlined:ur,InfoCircleOutlined:po},props:{prefixCls:String,title:String,subTitle:String,tooltip:String,options:{type:[Object,Boolean],default:void 0},actionsRef:Object,selectedRowKeys:{type:Array,default:()=>[]},selectedRows:{type:Array,default:()=>[]},tableColumn:{type:Array,default:()=>[]},onFormSearchSubmit:{type:Function,default:void 0}},setup(e){const t=Ht(),l={reload:()=>{var a;return(a=e.actionsRef)==null?void 0:a.reload()},density:!0,setting:!0,filter:!1,search:!1},n=h(()=>e.options===!1?{}:{...l,...e.options}),o={onChange:a=>{e.actionsRef.keyword.value=a.target.value}},u=h(()=>{var a;return e.options===!1||!n.value.search?!1:n.value.search===!0?o:Et({...(a=n.value.search)!=null?a:{},...o},["name","onSearch"])}),s=async a=>{var c,r,v;if(!e.options||!e.options.search)return;const{name:f="keyword"}=e.options.search===!0?{}:e.options.search;((r=(c=e.options.search)==null?void 0:c.onSearch)==null?void 0:r.call(c,a))!==!1&&((v=e.onFormSearchSubmit)==null||v.call(e,So({[f]:a})))},i=a=>{var c,r;n.value.reload!==!1&&typeof n.value.reload!="boolean"&&((r=(c=n.value).reload)==null||r.call(c,a,e.actionsRef))};return gt(()=>{(u.value.value||u.value.defaultValue)&&(e.actionsRef.keyword.value=u.value.value||u.value.defaultValue)}),{h:At,intl:t,mergeOptions:n,searchConfig:u,FilterOutlined:cr,SettingOutlined:yo,ColumnHeightOutlined:Yl,onSearch:s,onReload:i}}});function rc(e,t,l,n,o,u){const s=ee("InfoCircleOutlined"),i=ee("Tooltip"),a=ee("ProSearch"),c=ee("Space"),r=ee("ReloadOutlined"),v=ee("DensityIcon"),f=ee("ColumnSetting");return I(),Q("div",{class:j(`${e.prefixCls}-toolbar`)},[oe("div",{class:j(`${e.prefixCls}-toolbar-container`)},[st(e.$slots,"toolbar",{},()=>[oe("div",{class:j(`${e.prefixCls}-toolbar-left`)},[e.title||e.$slots.title?(I(),Q("div",{key:0,class:j(`${e.prefixCls}-toolbar-title`)},[st(e.$slots,"title",{},()=>[Tt(mt(e.title),1)]),oe("div",{class:j(`${e.prefixCls}-toolbar-subtitle`)},mt(e.subTitle),3),e.tooltip?(I(),fe(i,{key:0,title:e.tooltip},{default:ke(()=>[Y(s,{style:{"margin-inline-start":"3px"}})]),_:1},8,["title"])):Ce("v-if",!0)],2)):Ce("v-if",!0),e.options!==!1?(I(),fe(c,{key:1,class:j(`${e.prefixCls}-toolbar-options`)},{default:ke(()=>[e.mergeOptions.search!==!1&&!(e.title||e.$slots.title)?(I(),Q(Ee,{key:0},[Y(a,_e(e.searchConfig,{onSearch:e.onSearch}),null,16,["onSearch"]),st(e.$slots,"searchExtra",{setParams:e.actionsRef.setParams})],64)):Ce("v-if",!0)]),_:3},8,["class"])):Ce("v-if",!0)],2),oe("div",{class:j(`${e.prefixCls}-toolbar-right`)},[Y(c,{class:j(`${e.prefixCls}-toolbar-actions`)},{default:ke(()=>[e.mergeOptions.search!==!1&&(e.title||e.$slots.title)?(I(),Q(Ee,{key:0},[Y(a,_e(e.searchConfig,{onSearch:e.onSearch}),null,16,["onSearch"]),st(e.$slots,"searchExtra",{setParams:e.actionsRef.setParams})],64)):Ce("v-if",!0),st(e.$slots,"actions",{setParams:e.actionsRef.setParams}),e.options!==!1?(I(),Q(Ee,{key:1},[e.mergeOptions.reload!==!1?(I(),fe(i,{key:0,title:e.intl.getMessage("tableToolBar.reload","刷新")},{default:ke(()=>{var d;return[oe("div",{class:j(`${e.prefixCls}-toolbar-actions-item`)},[Y(r,{spin:(d=e.actionsRef)==null?void 0:d.pollingLoading.value,onClick:e.onReload},null,8,["spin","onClick"])],2)]}),_:1},8,["title"])):Ce("v-if",!0),e.mergeOptions.density!==!1?(I(),fe(v,{key:1,prefixCls:e.prefixCls},null,8,["prefixCls"])):Ce("v-if",!0),e.mergeOptions.setting!==!1?(I(),fe(f,{key:2,"prefix-cls":e.prefixCls,columns:e.tableColumn},null,8,["prefix-cls","columns"])):Ce("v-if",!0)],64)):Ce("v-if",!0)]),_:3},8,["class"])],2)])],2)],2)}var ic=Be(ac,[["render",rc]]),sc=Pe({name:"ProTableAlert",props:{prefixCls:String,selectedRowKeys:{type:Array,default:()=>[]},selectedRows:{type:Array,default:()=>[]}},inheritAttrs:!1,components:{Space:wo},emits:["cleanSelected"],setup(e,{emit:t,slots:l}){return{slots:l,onCleanSelected:()=>{t("cleanSelected")}}}});function uc(e,t,l,n,o,u){const s=ee("Space");return I(),Q("div",{class:j(`${e.prefixCls}-alert`)},[oe("div",{class:j(`${e.prefixCls}-alert-container`)},[oe("div",{class:j(`${e.prefixCls}-alert-info`)},[st(e.$slots,"info",{selectedRowKeys:e.selectedRowKeys,selectedRows:e.selectedRows,onCleanSelected:e.onCleanSelected},()=>[Y(s,null,{default:ke(()=>[Tt(" 已选择 "+mt(e.selectedRowKeys.length)+" 项 ",1),e.slots.actions?(I(),Q("a",{class:"pro-link",onClick:t[0]||(t[0]=(...i)=>e.onCleanSelected&&e.onCleanSelected(...i)),key:"0"},"取消选择")):Ce("v-if",!0)]),_:1})])],2),oe("div",{class:j(`${e.prefixCls}-alert-actions`)},[Y(s,null,{default:ke(()=>[st(e.$slots,"actions",{selectedRowKeys:e.selectedRowKeys,selectedRows:e.selectedRows,onCleanSelected:e.onCleanSelected},()=>[oe("a",{class:"pro-link",onClick:t[1]||(t[1]=(...i)=>e.onCleanSelected&&e.onCleanSelected(...i)),key:"0"},"取消选择")])]),_:3})],2)],2)],2)}var cc=Be(sc,[["render",uc]]);function dc(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}var vc=Pe({props:{prefixCls:String,items:{type:Array,default:()=>[]},search:{type:Object,default:void 0},cardBordered:{type:[Boolean,Object],default:void 0},loading:Boolean,manual:Boolean,tableShowCard:Boolean,beforeSearchSubmit:{type:Function,default:e=>e},onSubmit:{type:Function,default:void 0},onReset:{type:Function,default:void 0},onFormSearchSubmit:{type:Function,default:void 0},onSearchTabChange:{type:Function,default:void 0}},setup:e=>{var t,l,n;const o=F(((t=e.search)==null?void 0:t.cardProps)!==!1?(n=(l=e.search)==null?void 0:l.cardProps)==null?void 0:n.activeTabKey:""),u=h(()=>{var a,c;return(a=e.search)!=null&&a.cardProps?(c=e.search)==null?void 0:c.cardProps:{}}),s=async(a,c)=>{var r,v,f,d,p,m,w,y;const S=(v=(r=u.value)==null?void 0:r.tabList)!=null&&v.length?{[(d=(f=e.search)==null?void 0:f.tabName)!=null?d:"tab"]:u.value.activeTabKey||((w=(m=(p=u.value)==null?void 0:p.tabList)==null?void 0:m[0])==null?void 0:w.key)}:{},T=So(e.beforeSearchSubmit({...a,...S}));(y=e.onFormSearchSubmit)==null||y.call(e,T),e.onSubmit&&!c&&e.onSubmit(T)},i=a=>{var c,r,v,f,d;o.value=a,(v=e.onSearchTabChange)==null||v.call(e,{[(r=(c=e.search)==null?void 0:c.tabName)!=null?r:"tab"]:a}),(d=(f=u.value)==null?void 0:f.onTabChange)==null||d.call(f,a)};return()=>{var a,c,r,v;const f=Y(Ha,_e({class:`${e.prefixCls}-form`},Et(e.search||{},["cardProps","tabName"]),{items:e.items,loading:e.loading,style:{marginBlockEnd:((a=e.search)==null?void 0:a.cardProps)!==!1&&e.tableShowCard?0:"30px",...(c=e.search)==null?void 0:c.style},onReset:e.onReset,onFinish:d=>{s(d,!1)},onValuesChange:d=>{var p,m,w;((p=e.search)==null?void 0:p.submitter)===!1&&s(d,!0),(w=(m=e.search)==null?void 0:m.onValuesChange)==null||w.call(m,d)},onInit:d=>{s(d,!0)}}),null);return((r=e.search)==null?void 0:r.cardProps)!==!1&&e.tableShowCard?Y(Co,_e({class:`${e.prefixCls}-search`,activeTabKey:o.value,bordered:Eo("search",e.cardBordered),style:{marginBlockEnd:"16px"}},Et((v=u.value)!=null?v:{},["onTabChange","activeTabKey"]),{onTabChange:i}),dc(f)?f:{default:()=>[f]}):f}}});function fc(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}var hc=Pe({name:"ProTable",inheritAttrs:!1,props:Ar(),slots:{},emits:["keydown"],setup(e,{expose:t,slots:l,attrs:n,emit:o}){var u;const s=F(),i=F(),a=vo("table"),{hoverRowKey:c}=Rr({rowHoverDelay:h(()=>e.rowHoverDelay),rowHover:h(()=>e.rowHover)}),r=h(()=>{var A;return(A=e.prefixCls)!=null?A:a});kr(),he(c,(A,ae)=>{i.value&&(i.value.style.removeProperty(`--${r.value}-row-bg-${ae}`),i.value.style.setProperty(`--${r.value}-row-bg-${A}`,"hsl(var(--pro-accent))"))},{flush:"post"});const v=A=>{A.stopPropagation(),o("keydown",A)},f=h(()=>{if(e.request)return async(A,ae,me)=>{const Se={...A||{},...e.params||{}};return await e.request(Se,ae,me)}}),d=Nr(f,e),{dataSource:p,loading:m,pagination:w,pollingLoading:y,onTableChange:S,reload:T,reset:K}=d,O=h(()=>e.pagination===!1?!1:w.value),N=h(()=>typeof m.value=="boolean"?m.value:typeof m.value=="object"?m.value.spinning:void 0),U=A=>{var ae,me;if(e.options&&e.options.search){const{name:Se="keyword"}=e.options.search===!0?{}:e.options.search;if(((me=(ae=e.options.search)==null?void 0:ae.onSearch)==null?void 0:me.call(ae,d.keyword.value))!==!1){d.setFormSearch({...A,[Se]:d.keyword.value});return}}d.setFormSearch(A)},M=Wr(e),q=h(()=>Do({columns:e.columns,counter:M}).sort(Vr(M.columnsMap.value)));he(q,()=>{if(q.value&&q.value.length>0){const A=q.value.map(ae=>St(ae.key,ae.index));M.setSortKeyColumns(A)}},{immediate:!0});const g=h(()=>{const A=ae=>ae.map(me=>{const Se=St(me.key,me.index),Z=M.columnsMap.value[Se];return Z&&Z.show===!1?!1:me.children?{...me,children:A(me.children)}:me}).filter(Boolean);return A(q.value)}),D=(A,ae)=>{var me;const Se={...M.columnsMap.value},Z=A.map(re=>St(re.key,re.index));if(ae==="resize"){const re=ve=>{ve.forEach(pe=>{var ye;const we=St(pe.key,pe.index),Ke={...Se[we]};(ye=pe.children)!=null&&ye.length?re(pe.children):(Ke.width=pe.width,Se[we]=Ke)})};re(A)}else Z.forEach((re,ve)=>{Se[re]={...Se[re]||{},order:ve}});M.setColumnsMap(Se),M.setSortKeyColumns(Z),(me=e["onUpdate:columns"])==null||me.call(e,A,ae)},L=h(()=>{var A,ae,me;return e.search===!1?[]:(ae=(A=e.search)==null?void 0:A.items)!=null&&ae.length?(me=e.search)==null?void 0:me.items:jr(e.columns).filter(Se=>!Se.hideInSearch).map(Se=>fr({...Se,width:void 0,tooltip:Se.headerTooltip,name:Se.dataIndex},["dataIndex","width"]))}),$=F(new Map),z=h(()=>typeof e.rowKey=="function"?e.rowKey:A=>A?.[e.rowKey||"id"]);he([()=>p.value,z],()=>{var A;(A=p.value)!=null&&A.length&&p.value.forEach(ae=>{const me=z.value(ae,-1);$.value.set(me,ae)}),x()});const[V,W]=Ur(e.selectedRowKeys||(e.rowSelection?((u=e.rowSelection)==null?void 0:u.defaultSelectedRowKeys)||[]:void 0),{value:h(()=>e.selectedRowKeys||(e.rowSelection?e.rowSelection.selectedRowKeys:void 0))}),C=h(()=>({selectedRowKeys:V.value,preserveSelectedRowKeys:!0,...e.rowSelection,onChange:(A,ae)=>{var me;e.rowSelection&&e.rowSelection.onChange&&e.rowSelection.onChange(A,ae),(me=e["onUpdate:selectedRowKeys"])==null||me.call(e,A,ae),W(A)}})),R=h(()=>{var A;return(A=V.value)==null?void 0:A.map(ae=>{var me;return(me=$.value)==null?void 0:me.get(ae)})}),x=()=>{var A;e.rowSelection&&e.rowSelection.onChange&&e.rowSelection.onChange([],[]),(A=e["onUpdate:selectedRowKeys"])==null||A.call(e,[],[]),W([])},H=h(()=>e.options===!1&&!e.title&&!l.title&&!l.toolbar&&!l.searchExtra&&!l.toolbarActions),te=h(()=>{var A;return(e.search===!1||!((A=L.value)!=null&&A.length))&&e.toolBar===!1}),ie=h(()=>e.cardProps===!1||te.value===!0?{}:H.value?{padding:0}:e.pagination!==!1?{paddingBlockEnd:0}:{});return t({scrollTo:(A,ae)=>{var me;(me=s.value)==null||me.scrollTo(A,ae)},scrollLeft:h(()=>{var A;return Gt((A=s.value)==null?void 0:A.scrollLeft)}),scrollTop:h(()=>{var A;return Gt((A=s.value)==null?void 0:A.scrollTop)}),bodyRef:h(()=>{var A;return Gt((A=s.value)==null?void 0:A.bodyRef)}),copySelectedRange:()=>{var A;return(A=s.value)==null?void 0:A.copySelectedRange()},getSelectedRange:()=>{var A;return(A=s.value)==null?void 0:A.getSelectedRange()},clearAllSelectedRange:()=>{var A;return(A=s.value)==null?void 0:A.clearAllSelectedRange()},clearDataSource:()=>{p.value=[]},appendCellToSelectedRange:A=>{var ae;return(ae=s.value)==null?void 0:ae.appendCellToSelectedRange(A)},openEditor:A=>{var ae;return(ae=s.value)==null?void 0:ae.openEditor(A)},closeEditor:A=>{var ae;return(ae=s.value)==null?void 0:ae.closeEditor(A)},reload:T,reset:K}),()=>{var A,ae,me;const{expandIcon:Se=l.expandIcon,expandedRowRender:Z=l.expandedRowRender}=e,re=g.value||To((A=l.default)==null?void 0:A.call(l))||[];let ve=Y(Ee,null,[e.toolBar!==!1&&!H.value&&Y(ic,{title:e.title,subTitle:e.subTitle,tooltip:e.tooltip,prefixCls:r.value,options:e.options,actionsRef:d,tableColumn:q.value,selectedRowKeys:V.value,selectedRows:R.value,onFormSearchSubmit:pe=>{d.setFormSearch({...d.formSearch.value,...pe})}},{toolbar:l.toolbar,title:l.title,searchExtra:l.searchExtra,actions:l.toolbarActions}),!!e.rowSelection&&((ae=e.rowSelection)==null?void 0:ae.type)!=="radio"&&e.alwaysShowAlert!==!1&&!!V.value.length&&Y(cc,{prefixCls:r.value,selectedRowKeys:V.value,selectedRows:R.value,onCleanSelected:x},{info:l.alertInfo,actions:l.alertActions}),Y(Au,_e({ref:s},Et(e,["onChange","onUpdate:pagination","onUpdate:selectedRowKeys","onUpdate:columns"]),{prefixCls:r.value,columns:re||[],size:M.tableSize.value,dataSource:p.value,loading:m.value,rowSelection:e.rowSelection?C.value:void 0,pagination:O.value,expandIcon:Se,expandedRowRender:Z,hasContextmenuPopup:!!l.contextmenuPopup,onChange:S,"onUpdate:columns":D}),{...l,footer:e.footer||l.footer})]);if(!(e.cardProps===!1||te.value)){const pe=(function(){return ve})();ve=Y(Co,_e({bordered:Eo("table",e.cardBordered),bodyStyle:ie.value},e.cardProps),fc(ve)?ve:{default:()=>[pe]})}return Y("div",_e({ref:i},n,{class:[`${r.value}-wrapper ${e.bordered?r.value+"-wrapper-bordered":""} ${mr.value==="dark"?r.value+"-wrapper-dark":""} ${y.value?r.value+"-wrapper-polling":""}`,n.class],onKeydown:v}),[e.search!==!1&&!!((me=L.value)!=null&&me.length)&&Y(vc,{prefixCls:r.value,items:L.value,cardBordered:e.cardBordered,search:e.search,tableShowCard:e.cardProps!==!1,loading:N.value,beforeSearchSubmit:e.beforeSearchSubmit,manual:e.manual||e.manualRequest,onReset:e.onReset,onSubmit:e.onSubmit,onFormSearchSubmit:U,onSearchTabChange:pe=>{d.setFormSearch({...d.formSearch.value,...pe})}},null),ve])}}}),pc=Pe({name:"ProTableColumn",slots:["title","filterIcon"]}),mc=Pe({name:"ProTableColumnGroup",slots:["title"],__S_TABLE_COLUMN_GROUP:!0});const gc=Symbol("SummaryCtx"),pa=Symbol("SummaryRowCtx"),yc=e=>{lt(pa,e)},wc=()=>Je(pa,{}),Cc=()=>Je(gc,{});let bc=1;var Sc=Pe({name:"ProTableSummaryCell",props:{index:{type:Number},colSpan:{type:Number,default:1},align:{type:String},columnKey:String},setup(e){const t=Cc(),l=je(),n=wc(),o="id_"+bc++,u=Fe(()=>e.columnKey?l.columnKeyIndexMap.value[e.columnKey]:e.index),s=h(()=>u.value>=0&&u.value<=l.allColumns.value.length);qe(()=>{s.value&&n.updateCell(o,u.value,e.colSpan),setTimeout(()=>{ht(s.value,"TableSummaryCell",`'index=${e.index}' or 'columnKey=${e.columnKey||""}' is not valid`)})}),Cl(()=>{n.removeCell(o)});const i=h(()=>n.cells.value[u.value]||{width:0,visible:!1,style:{}}),{allColumns:a}=l,c=h(()=>a.value[u.value]),r=h(()=>l.pageData.value),v=F();he(c,()=>{var y;v.value=(y=c.value)==null?void 0:y.dataIndex},{immediate:!0});const f=h(()=>{let y=0;const S=r.value;for(let T=0;T<S.length;T++){const K=S[T];if(y+=Number(K[v.value]),isNaN(y))break}return y}),d=h(()=>l.prefixCls.value),p=h(()=>{const{fixed:y,isLastFixedLeft:S,isFirstFixedRight:T}=i.value;return{[`${d.value}-cell`]:!0,[`${d.value}-summary-cell`]:!0,[`${d.value}-summary-cell-fixed-${y}`]:!!y,[`${d.value}-summary-cell-last-fixed-left`]:S,[`${d.value}-summary-cell-first-fixed-right`]:T}}),m=h(()=>{const y=`${i.value.width}px`;return{width:y,minWidth:y,maxWidth:y,order:u.value}}),w=h(()=>({[`${d.value}-cell-inner`]:!0}));return{prefixCls:d,column:c,summaryCtx:t,pageData:r,total:f,cellClass:p,cellConfig:i,cellStyle:m,cellInnerClass:w}}});function xc(e,t,l,n,o,u){return e.cellConfig.visible?(I(),Q("div",{key:0,tabindex:"-1",role:"cell",class:j(e.cellClass),style:Re(e.cellConfig.style)},[oe("div",{class:j(e.cellInnerClass)},[oe("div",{class:j(`${e.prefixCls}-cell-content`)},[st(e.$slots,"default",{column:e.column,total:e.total,data:e.pageData})],2)],2)],6)):Ce("v-if",!0)}var $c=Be(Sc,[["render",xc]]),Rc=Pe({name:"ProTableSummaryRow",setup(){const e=je(),t=bl({}),l=F([]),n=F([]),o=h(()=>Object.values(t).sort((d,p)=>d.index-p.index));yc({cells:l,updateCell:(d,p,m)=>{t[d]={index:p,colSpan:m}},removeCell:d=>{delete t[d]}});const u=Fe(()=>e.leftColumns.value.length-1),s=Fe(()=>e.leftColumns.value.length+e.centerColumns.value.length-1),i=Fe(()=>e.allColumns.value.length-1),a=()=>{const d=[];let p=0;const m=u.value,w=s.value,y=i.value;let S=e.rightWidth.value;for(let O=0,N=o.value.length;O<N;O++){const U=o.value[O],{index:M,colSpan:q=1}=U;if(M<=m){M-p>0&&d.push({index:p,colSpan:M-p,isPlaceholder:!0,fixed:"left"});const g={...U,colSpan:Math.min(m-M+1,q),fixed:"left"};d.push(g),p=M+g.colSpan}else if(M<=w){p<=m&&(d.push({index:p,colSpan:m-p+1,isPlaceholder:!0,fixed:"left"}),p=m+1),M-p>0&&d.push({index:p,colSpan:M-p,isPlaceholder:!0});const g={...U,colSpan:Math.min(w-M+1,q)};d.push(g),p=M+g.colSpan}else{p<=m&&(d.push({index:p,colSpan:m-p+1,isPlaceholder:!0,fixed:"left"}),p=m+1),p<=w&&(d.push({index:p,colSpan:w-p+1,isPlaceholder:!0}),p=w+1),M-p>0&&d.push({index:p,colSpan:M-p,isPlaceholder:!0,fixed:"right"});const g={...U,colSpan:Math.min(y-M+1,q),fixed:"right"};d.push(g),p=M+g.colSpan}}p<=m&&(d.push({index:p,colSpan:m-p+1,isPlaceholder:!0,fixed:"left"}),p=m+1),p<=w&&(d.push({index:p,colSpan:w-p+1,isPlaceholder:!0}),p=w+1),p<=y&&d.push({index:p,colSpan:y-p+1,isPlaceholder:!0,fixed:"right"});const T=[],K=[];d.forEach((O,N)=>{const{index:U,colSpan:M,isPlaceholder:q,fixed:g}=O,D=e.getColumnPosition(U,M),{width:L,left:$}=D;g==="right"&&(S-=L);const z={index:U,width:L,style:Object.assign({width:`${L}px`,minWidth:`${L}px`,maxWidth:`${L}px`,order:U,borderRight:q&&U===0?"none":void 0},g?{position:"sticky",[g]:g==="left"?`${$}px`:`${S}px`}:{}),fixed:g||!1,visible:!0};g!=="left"||d[N+1]&&d[N+1].fixed==="left"?g!=="right"||d[N-1]&&d[N-1].fixed==="right"||(z.isFirstFixedRight=!0):(z.isLastFixedLeft=!0,delete z.style.borderRight),q?K.push(z):T[z.index]=z}),l.value=T,n.value=K};let c;he([e.allColumns,o],()=>{c&&c(),c=Br(a).cancel},{immediate:!0});const r=h(()=>{const{prefixCls:d}=e.props;return{[`${d}-row`]:!0,[`${d}-summary-row`]:!0}}),v=h(()=>{const{prefixCls:d}=e.props;return{[`${d}-cell`]:!0,[`${d}-summary-cell`]:!0}}),f=h(()=>({width:`${e.bodyMaxWidth.value}px`}));return{prefixCls:h(()=>e.props.prefixCls),rowClass:r,placeholderCell:n,cellClass:v,rowStyle:f}}});function kc(e,t,l,n,o,u){return I(),Q("div",{role:"row",class:j(e.rowClass),style:Re(e.rowStyle)},[st(e.$slots,"default"),(I(!0),Q(Ee,null,$t(e.placeholderCell,s=>(I(),Q("div",{key:s.index,tabindex:"-1",role:"cell",class:j([e.cellClass,{[`${e.prefixCls}-summary-cell-fixed-${s.fixed}`]:!!s.fixed,[`${e.prefixCls}-summary-cell-last-fixed-left`]:s.isLastFixedLeft,[`${e.prefixCls}-summary-cell-first-fixed-right`]:s.isFirstFixedRight}]),style:Re(s.style)},"   ",6))),128))],6)}var Kc=Be(Rc,[["render",kc]]),Pc=Pe({name:"ProTableSummary",props:{fixed:Boolean},setup(){ht(!1,"s-table-summary","you do not need s-table-summary, you can use summaryFixed prop at s-table")}});function Ic(e,t,l,n,o,u){return st(e.$slots,"default")}var Tc=Be(Pc,[["render",Ic]]);const $n=hr(hc,{Column:pc,ColumnGroup:mc,Summary:Tc,SummaryRow:Kc,SummaryCell:$c});$n.SELECTION_ALL=ql;$n.SELECTION_INVERT=Zl;$n.SELECTION_NONE=Jl;export{$n as P,Kc as a,$c as b};
