import{u as It,f as Ta,r as Ul,R as un,g as Ea,d as Ha}from"./sleep.CDBRrz6X.js";import{s as ce,e as h,f as F,w as he,h as qe,c as Je,p as lt,aT as Oa,F as Ee,i as zt,C as Ba,aU as zn,aL as Da,o as gt,P as uo,b as Cl,aV as Ma,aW as co,J as wt,u as Gt,j as ct,t as Kt,r as bl,d as Pe,R as ee,Q as I,q as Lt,n as Ze,A as hl,S as oe,a1 as _,X as fe,ag as it,k as X,y as el,x as gl,l as At,$ as st,Z as te,a2 as Ce,aQ as Fa,Y as ke,aX as Nt,a0 as _e,G as Tt,U as mt,ai as Re,g as cn,B as ut,af as $t,aY as dn,aZ as Aa,v as za,a_ as La,z as Na}from"./framework.LW9JDvVy.js";import{u as Ht}from"./useIntl.BGP28NP6.js";import{i as Sl,j as Wa,k as vo,l as Ln,m as Xl,n as Ot,o as fo,p as ho,q as _a,r as Va,s as ja,t as po,u as Ua,v as vn,w as yl,x as fn,y as Xa,z as mo,A as Ya,G as Ga,H as Nn,J as qa,K as Za,L as Ja,N as Qa,O as er,Q as tr,U as Yl,V as lr,W as nr,X as or,Y as ar,Z as go,C as rr,_ as ir,S as yo,$ as sr,a0 as wo}from"./theme.B4BxmoT-.js";import{a as Co,b as ur,c as Zt}from"./validate.EEzCsTff.js";import{P as cr,o as Et,a as bo,b as dr}from"./index.CtnPqtEh.js";import{u as So}from"./index.Dw6vpUqL.js";import{w as vr}from"./install.BalIz2Dd.js";const fr=ce(!0),hr=ce("light");ce("#1677ff");let Wn={};function xo(e,t){console.error(`Warning: ${t}`)}function pr(e,t,l){!t&&!Wn[l]&&(e(!1,l),Wn[l]=!0)}function mr(e,t){pr(xo,e,t)}function $o(e,t){const l=new Set;return e.forEach(n=>{t.has(n)||l.add(n)}),l}function gr(e){const{disabled:t,disableCheckbox:l,checkable:n}=e||{};return!!(t||l)||n===!1}function yr(e,t,l,n){const o=new Set(e),u=new Set;for(let i=0;i<=l;i+=1)(t.get(i)||new Set).forEach(c=>{const{rowKey:r,record:v,children:f=[]}=c;o.has(r)&&!n(v)&&f.filter(d=>!n(d.record)).forEach(d=>{o.add(d.rowKey)})});const s=new Set;for(let i=l;i>=0;i-=1)(t.get(i)||new Set).forEach(c=>{const{parent:r,record:v}=c;if(n(v)||!c.parent||s.has(c.parent.rowKey))return;if(n(c.parent.record)){s.add(r?.rowKey);return}let f=!0,d=!1;(r?.children||[]).filter(p=>!n(p.record)).forEach(({rowKey:p})=>{const m=o.has(p);f&&!m&&(f=!1),!d&&(m||u.has(p))&&(d=!0)}),f&&o.add(r?.rowKey),d&&u.add(r?.rowKey),s.add(r?.rowKey)});return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from($o(u,o))}}function wr(e,t,l,n,o){const u=new Set(e);let s=new Set(t);for(let a=0;a<=n;a+=1)(l.get(a)||new Set).forEach(r=>{const{rowKey:v,record:f,children:d=[]}=r;!u.has(v)&&!s.has(v)&&!o(f)&&d.filter(p=>!o(p.record)).forEach(p=>{u.delete(p.rowKey)})});s=new Set;const i=new Set;for(let a=n;a>=0;a-=1)(l.get(a)||new Set).forEach(r=>{const{parent:v,record:f}=r;if(o(f)||!r.parent||i.has(r.parent.rowKey))return;if(o(r.parent.record)){i.add(v?.rowKey);return}let d=!0,p=!1;(v?.children||[]).filter(m=>!o(m.record)).forEach(({rowKey:m})=>{const y=u.has(m);d&&!y&&(d=!1),!p&&(y||s.has(m))&&(p=!0)}),d||u.delete(v?.rowKey),p&&s.add(v?.rowKey),i.add(v?.rowKey)});return{checkedKeys:Array.from(u),halfCheckedKeys:Array.from($o(s,u))}}function Gl(e,t,l,n,o,u){const s=[],i=new Set(e.filter(r=>{const v=!!l[r];return v||s.push(r),v}));xo(!s.length,`Tree missing follow keys: ${s.slice(0,100).map(r=>`'${r}'`).join(", ")}`);let a;u?a=u:a=gr;let c;return t===!0?c=yr(i,n,o,a):c=wr(i,t.halfCheckedKeys,n,o,a),c}var ht=(e,t,l)=>{mr(e,`[table: ${t}] ${l}`)};const ql="SELECT_ALL",Zl="SELECT_INVERT",Jl="SELECT_NONE";function Cr(e,t,l,n){var o,u;const s=ce(new Map),[i,a]=It(e.selectedRowKeys||((o=t.value)==null?void 0:o.selectedRowKeys)||((u=t.value)==null?void 0:u.defaultSelectedRowKeys)||[],{value:h(()=>{var g;return e.selectedRowKeys||((g=t.value)==null?void 0:g.selectedRowKeys)})}),c=g=>{var H;return!!((H=n.checkboxPropsMap.value.get(g.rowKey))!=null&&H.disabled)},r=F(!0),v=F(!1),f=F(!0),d=F(!0),p=F(!1),m=ce(new Map),y=F(0),C=ce([]),b=ce([]),T=h(()=>{var g;const H=((g=t.value)==null?void 0:g.type)==="radio"?C.value.slice(0,1):C.value;return new Set(H)}),k=h(()=>{var g;return((g=t.value)==null?void 0:g.type)==="radio"?new Set:new Set(b.value)});he(l,()=>{m.value=new Map}),qe(()=>{const g=n.keyEntities.value,H=T.value;let N=!0,S=!1,M=!0,A=!0,G=!1;n.pageDataRowKeys.value.forEach(x=>{const K=g[x],{level:R}=K;c(K)?H.has(x)?S=!0:M=!1:(N=!1,H.has(x)?G=!0:A=!1);let O=m.value.get(R);O||(O=new Set),m.value.set(R,O),O.add(K),r.value=N,f.value=M,v.value=S,d.value=A,p.value=G,y.value=Math.max(y.value,R)})}),qe(()=>{var g;if((g=t.value)!=null&&g.checkStrictly)C.value=i.value||[],b.value=[];else{const{checkedKeys:H,halfCheckedKeys:N}=Gl(i.value,!0,n.keyEntities.value,m.value,y.value,c);C.value=H||[],b.value=N}});const[L,V]=Ta("");he(()=>e.rowSelection,()=>{e.rowSelection||a([])},{immediate:!0});const j=g=>{var H;let N,S;const{preserveSelectedRowKeys:M,onChange:A}=t.value,{getRecordByKey:G}=n;if(M){const x=new Map;N=g,S=g.map(K=>{let R=G(K);return!R&&s.value.has(K)&&(R=s.value.get(K)),x.set(K,R),R}),s.value=x}else N=[],S=[],g.forEach(x=>{const K=G(x);K!==void 0&&(N.push(x),S.push(K))});a(N),(H=e["onUpdate:selectedRowKeys"])==null||H.call(e,N,S),A?.(N,S)},D=h(()=>{const{onSelectInvert:g,onSelectNone:H,selections:N,hideSelectAll:S}=t.value,{pageData:M,getRowKey:A,locale:G}=n;return!N||S?null:(N===!0?[ql,Zl,Jl]:N).map(K=>K===ql?{key:"all",text:G.value.selectionAll,onSelect(){j(n.allDataRootRowKeys.value)}}:K===Zl?{key:"invert",text:G.value.selectInvert,onSelect(){const R=new Set(T.value);M.value.forEach((J,de)=>{const z=A.value(J,de);R.has(z)?R.delete(z):R.add(z)});const O=Array.from(R);g&&(ht(!1,"Table","`onSelectInvert` will be removed in future. Please use `onChange` instead."),g(O)),j(O)}}:K===Jl?{key:"none",text:G.value.selectNone,onSelect(){H?.(),j([])}}:K)});return{derivedSelectedKeySet:T,derivedSelectedKeys:C,derivedHalfSelectedKeySet:k,setSelectedKeys:j,triggerSingleSelection:(g,H,N,S)=>{const{onSelect:M}=t.value,{getRecordByKey:A}=n||{};if(M){const G=N.map(x=>A(x));M(A(g),H,G,S)}j(N)},mergedSelections:D,lastSelectedKey:L,setLastSelectedKey:V,mergedRowSelection:t,isCheckboxDisabled:c,maxLevel:y,levelEntities:m,allDisabled:r,allDisabledAndChecked:f,allDisabledSomeChecked:v,checkedCurrentAll:d,checkedCurrentSome:p}}const br=F(""),Sr=()=>br.value,Ro=Symbol("HoverContextKey"),xr=e=>{const t=F(),l=F();let n,o;const u=(a,c,r)=>{clearTimeout(n),clearTimeout(o),r||(o=setTimeout(()=>{l.value=a,t.value=c},e.rowHoverDelay.value))},s=()=>{n=setTimeout(()=>{l.value=void 0,t.value=void 0},e.rowHoverDelay.value+50)},i={rowHover:e.rowHover,hoverColumnKey:t,hoverRowKey:l,handleCellHover:u,handleCellBlur:s};return lt(Ro,i),i},ko=()=>Je(Ro,{rowHover:h(()=>{}),hoverRowKey:F(),hoverColumnKey:F(),handleCellHover:()=>{},handleCellBlur:()=>{}}),Ko=Symbol("Level"),xl=()=>Je(Ko,void 0),$r=()=>{const e=xl();lt(Ko,e===void 0?0:e+1)};function Po(e,t){return toString.call(e)===`[object ${t}]`}function Ql(e){return e&&Array.isArray(e)}function Rr(e){return Po(e,"String")}function kr(e){return e!==null&&Po(e,"Object")}const St=(e,t)=>e?Array.isArray(e)?e.join("-"):e.toString():`${t}`;function Kr(e,t){return t?`${t}-${e}`:`${e}`}function Pr(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&delete e[t]}function Ir(e){return e==null?[]:Array.isArray(e)?e:[e]}function Io(e,t){if(!t&&typeof t!="number")return e;const l=Ir(t);let n=e;for(let o=0;o<l.length;o+=1){if(!n)return null;const u=l[o];n=n[u]}return n}function Tr(e){return Array.isArray(e)&&e.length===1&&(e=e[0]),e&&zt(e)&&typeof e.type!="symbol"}const Er=(e,t)=>{const l={},n=/;(?![^(]*\))/g,o=/:(.+)/;return typeof e=="object"?e:(e.split(n).forEach(function(u){if(u){const s=u.split(o);if(s.length>1){const i=s[0].trim();l[i]=s[1].trim()}}}),l)};function Hr(e){let t,l=!1;return{promise:new Promise((n,o)=>{t=o,Promise.resolve().then(()=>{n("")})}).then(()=>{l||e()}).catch(()=>{}),cancel:()=>{l=!0,t&&t()}}}function Or(e,t){if(!e)return[];const l=e.slice(),n=l.indexOf(t);return n>=0&&l.splice(n,1),l}function Br(e,t){const l=(e||[]).slice();return l.indexOf(t)===-1&&l.push(t),l}const Dr=e=>e!=null&&e!=="",en=(e,t=!0)=>{const l=Ql(e)?e:[e],n=[];return l.forEach(o=>{Ql(o)?n.push(...en(o,t)):o&&o.type===Ee?n.push(...en(o.children,t)):o&&zt(o)?t&&!isEmptyElement(o)?n.push(o):t||n.push(o):Dr(o)&&n.push(o)}),n};function To(e=[]){const t=en(e),l=[];return t.forEach(n=>{var o,u,s,i;if(!n)return;const a=n.key,c=((o=n.props)==null?void 0:o.style)||{},r=((u=n.props)==null?void 0:u.class)||"",v=n.props||{};for(const[m,y]of Object.entries(v))v[Oa(m)]=y;const{default:f,...d}=n.children||{},p={...d,...v,style:c,class:r};if(a&&(p.key=a),(s=n.type)!=null&&s.__S_TABLE_COLUMN_GROUP)p.children=To(typeof f=="function"?f():f);else{const m=(i=n.children)==null?void 0:i.default;p.customRender=p.customRender||m}l.push(p)}),l}const hn=(e,t,l)=>Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))<=l;function Mt(e,t,l,n){let o,u=e,s=[];const i=t.length;if(i===0)return e.splice(0,0,n),e;for(let a=0;a<i;a++)o=u[t[a]],a===i-1&&(s=u),u=o?.[l]||[];return s.splice(t[i-1]+1,0,n),s}function Ft(e,t,l){let n,o=e,u=[];const s=t.length;for(let i=0;i<s;i++)n=o[t[i]],i===s-1&&(u=o),o=n?.[l]||[];return u.splice(t[s-1],1),u}function pn(e){return e.some(t=>!zt(t)||t.type!==Ba&&!(t.type===Ee&&!pn(t.children)))?e:null}const Eo=(e,t)=>t===void 0?!1:typeof t=="boolean"?t:t[e],Ho=()=>({prefixCls:String,disabled:Boolean,tabindex:[String,Number],name:String,id:String,style:{type:Object,default:()=>({})},class:String,checked:Boolean,indeterminate:Boolean,ariaLabel:String}),Oo=()=>({ignoreCellKey:Boolean,showHeaderScrollbar:Boolean,deepWatchDataSource:Boolean,deepWatchColumns:Boolean,prefixCls:String,columnDrag:{type:Boolean,default:!1},animateRows:{type:Boolean,default:void 0},dropdownPrefixCls:{type:String},columns:{type:Array,default:()=>[]},dataSource:{type:Array,default:()=>[]},virtual:{type:Boolean,default:!1},xVirtual:{type:Boolean,default:void 0},rowHeight:{type:[Number,Function],default:void 0},autoHeaderHeight:{type:Boolean,default:!1},headerHeight:{type:[Number,Array]},height:{type:[Number,String]},maxHeight:{type:[Number,String]},minHeight:{type:[Number,String]},size:{type:String,default:"middle"},bordered:{type:Boolean,default:!1},wrapText:{type:Boolean,default:!1},loading:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:()=>({})},direction:{type:String,default:void 0},stripe:{type:Boolean,default:!1},rowClassName:{type:[String,Function],default:void 0},sticky:{type:[Boolean,Object],default:!0},selectedRowKeys:{type:Array,default:void 0},expandFixed:{type:[Boolean,String],default:void 0},expandColumnWidth:{type:Number,default:void 0},expandedRowKeys:{type:Array,default:void 0},defaultExpandedRowKeys:{type:Array,default:void 0},expandedRowRender:{type:Function,default:void 0},expandRowByClick:{type:Boolean,default:void 0},expandIcon:{type:Function,default:void 0},onExpand:{type:Function,default:void 0},onExpandedRowsChange:{type:Function,default:void 0},defaultExpandAllRows:{type:Boolean,default:void 0},indentSize:Number,expandIconColumnIndex:Number,childrenColumnName:{type:String,default:void 0},rowExpandable:{type:Function,default:()=>!0},rowSelection:{type:Object,default:void 0},rowHoverDelay:{type:Number,default:59},rowHover:{type:Boolean,default:void 0},rowKey:{type:[Function,String]},customRow:{type:Function,default:()=>({})},customCell:{type:Function,default:()=>({})},customHeaderCell:{type:Function,default:()=>({})},customSummaryCellProps:{type:Function,default:()=>({})},showHeader:{type:Boolean,default:!0},showSorterTooltip:{type:[Boolean,Object],default:!0},getPopupContainer:{type:Function},locale:{type:Object,default:void 0},scrollX:{type:[Number,String]},scroll:{type:Object,default:void 0},rangeSelection:{type:[String,Boolean],default:!1},copyDelimiter:{type:String,default:""},rowDrag:{type:[Boolean]},onChange:{type:Function},summaryFixed:{type:[Boolean,String],default:!1},hasContextmenuPopup:Boolean,formatRangeCellText:{type:Function},"onUpdate:selectedRowKeys":{type:Function},onScroll:{type:Function},"onUpdate:expandedRowKeys":{type:Function},onResizeColumn:{type:Function,default:void 0},onRowDragEnd:{type:Function,default:void 0},onColumnDragEnd:{type:Function,default:void 0},onCellKeydown:{type:Function,default:void 0},onCellClick:{type:Function,default:void 0},onBeforeOpenEditor:{type:Function,default:void 0},onOpenEditor:{type:Function,default:void 0},onBeforeCloseEditor:{type:Function,default:void 0},onCloseEditor:{type:Function,default:void 0},"onUpdate:pagination":{type:Function},"onUpdate:dataSource":{type:Function},"onUpdate:columns":{type:Function},columnEmptyText:{type:[String,Boolean],default:"-"},toolBar:{type:Boolean,default:void 0},options:{type:[Object,Boolean],default:void 0},alwaysShowAlert:{type:Boolean,default:void 0},request:Function,params:Object,defaultData:Array,manual:Boolean,manualRequest:Boolean,polling:[Number,Function],debounceTime:Number,onLoad:{type:Function,default:void 0},onLoadingChange:{type:Function,default:void 0},onRequestError:{type:Function,default:void 0},onSizeChange:{type:Function,default:void 0},onSubmit:{type:Function,default:void 0},onReset:{type:Function,default:void 0},columnsState:{type:Object,default:void 0},highlightSelectRow:{type:Boolean,default:!1},paginationSticky:{type:[Boolean,Object],default:!0},horizontalScrollSticky:{type:[Boolean,Object],default:!0}}),Mr=()=>({...Oo(),title:String,subTitle:String,footer:Function,tooltip:String,cardProps:{type:[Object,Boolean],default:void 0},search:{type:[Object,Boolean],default:void 0},beforeSearchSubmit:{type:Function,default:void 0},cardBordered:{type:[Boolean,Object],default:void 0}}),Fr=({pagination:e},t)=>{if(e){const{current:l,pageSize:n,total:o,showTotal:u,showSizeChanger:s,...i}=e;return{...i,current:l||1,total:o||0,pageSize:n||10,showSizeChanger:s??!0,showTotal:u||((a,c)=>`${t.getMessage("pagination.total.range","第")} ${c[0]}-${c[1]} ${t.getMessage("pagination.total.total","条/总共")} ${a} ${t.getMessage("pagination.total.item","条")}`)}}return{current:1,total:0,pageSize:10,showSizeChanger:!0,showTotal:(l,n)=>`${t.getMessage("pagination.total.range","第")} ${n[0]}-${n[1]} ${t.getMessage("pagination.total.total","条/总共")} ${l} ${t.getMessage("pagination.total.item","条")}`}},Ar=e=>{if(!e)return;let t;if(Array.isArray(e)?t=[...e]:t=[{...e}],t=t.filter(l=>!!l.order),!!t.length)return t.length>1&&(t=t.sort((l,n)=>{var o,u,s,i;return(((u=(o=n.column)==null?void 0:o.sorter)==null?void 0:u.multiple)||0)-(((i=(s=l.column)==null?void 0:s.sorter)==null?void 0:i.multiple)||0)})),t.map(l=>({field:l.field,order:l.order}))},zr=(e,t)=>{var l;const n=F(!1),o=F(null),u=F(!!(t.manual||t.manualRequest)),s=F(),i=F(!1),a=F(""),c=Ht(),r=F({}),v=F(),f=F(),d=h(()=>{if(t.options!==!1&&t.options.search!==!1)return t.options.search===!0||!t.options.search.name?void 0:t.options.search.name}),[p,m]=It(!1,{value:h(()=>typeof t.loading=="object"?t.loading.spinning:t.loading),onChange:t.onLoadingChange}),[y,C]=It((l=t.defaultData)!=null?l:[],{value:h(()=>t.request?void 0:t.dataSource)}),[b,T]=It(()=>Fr(t,c),{onChange(S){var M,A,G;t.pagination!==!1&&((M=t["onUpdate:pagination"])==null||M.call(t,co(t.pagination)?Object.assign(t.pagination||{},S):S),(G=(A=t.pagination)==null?void 0:A.onChange)==null||G.call(A,S.current,S?.pageSize))}}),[k,L]=It(()=>{if(!(u.value||t.search!==!1))return{}}),V=zn(h(()=>{var S;return(S=b.value)==null?void 0:S.current})),j=zn(h(()=>{var S;return(S=b.value)==null?void 0:S.pageSize})),D=()=>{m(!1),i.value=!1},q=async S=>{var M,A,G,x;if(u.value){u.value=!1;return}S?i.value=!0:m(!0);const{current:K,pageSize:R}=b.value,O={...r.value,...k.value};t?.pagination!==!1&&(O.current=K,O.pageSize=R),a.value&&(O[(M=d.value)!=null?M:"keyword"]=a.value);try{const{data:J=[],success:de,total:z=0,...ie}=await((A=e.value)==null?void 0:A.call(e,O,wt(v.value),wt(f.value)))||{};return de===!1?[]:(C(J),((G=b.value)==null?void 0:G.total)!==z&&(b.value.total=z||J.length),(x=t.onLoad)==null||x.call(t,J,ie),J)}catch(J){if(t.onRequestError===void 0)throw new Error(J);y.value===void 0&&C([]),t.onRequestError(J)}finally{D()}},g=Da(async S=>{if(s.value&&clearTimeout(s.value),!e)return;const M=new AbortController;o.value=M;try{const A=await Promise.race([q(S),new Promise((x,K)=>{var R;(R=o.value)==null||R.signal.addEventListener("abort",()=>{K("aborted"),D()})})]);if(M.signal.aborted)return;const G=Ul(t.polling,A);G&&!n.value&&(s.value=setTimeout(()=>{g(G)},Math.max(G,2e3)))}catch(A){if(A==="aborted")return;throw A}},t.debounceTime||30),H=()=>{var S;(S=o.value)==null||S.abort(),D()};he(()=>t.polling,(S,M)=>{S||clearTimeout(s.value),!M&&S&&g(!0)}),he([()=>t.manual,()=>t.manualRequest],()=>{H(),g(!1),(!t.manual||!t.manualRequest)&&(u.value=!1)}),he(()=>b.value.current,()=>{var S;const{current:M,pageSize:A}=b.value||{};(!V||V.value===M)&&(!j||j.value===A)||t.pagination&&y.value&&((S=y.value)==null?void 0:S.length)>A||M!==void 0&&y.value&&y.value.length<=A&&(H(),g(!1))}),he(()=>b.value.pageSize,()=>{j.value&&(H(),g(!1))}),he(v,()=>{T({...b.value,current:1}),H(),g(!1)}),he(f,()=>{T({...b.value,current:1}),H(),g(!1)}),he(()=>t.params,()=>{T({...b.value,current:1}),H(),g(!1)},{deep:!0}),he(r,()=>{T({...b.value,current:1}),H(),g(!1)},{deep:!0}),he(k,()=>{T({...b.value,current:1}),H(),g(!1)},{immediate:!0});const N=(S,M,A,G)=>{var x;G.action==="paginate"&&T({...b.value,...S}),G.action==="sort"&&(v.value=Ar(A)),G.action==="filter"&&(f.value=M),(x=t.onChange)==null||x.call(t,S,M,A,G)};return gt(()=>{n.value=!1,t.search===!1&&g(!1)}),uo(()=>{t.polling&&g(!0)}),Cl(()=>{n.value=!0,H(),clearTimeout(s.value)}),Ma(()=>{clearTimeout(s.value)}),{keyword:a,formSearch:k,dataSource:y,loading:h(()=>typeof t?.loading=="object"?{...t?.loading,spinning:p.value}:p.value),setParams:(S,M)=>{r.value[S]=M},reload:async S=>(S&&T({...b.value,current:1}),H(),g(!1)),pollingLoading:i,pagination:b,reset:async()=>{const{pagination:S}=t||{},{current:M=1,pageSize:A=10}=S||{};T({current:M,total:0,pageSize:A})},setPagination:T,setFormSearch:L,onTableChange:N}},Bo=Symbol("ContainerContextKey"),Lr=e=>{var t;const l=F([]),[n,o]=It(()=>e.size||"middle",{value:h(()=>e.size),onChange:e.onSizeChange}),u=h(()=>{var r,v,f;if((r=e?.columnsState)!=null&&r.defaultValue){const p={};return(v=e.columns)==null||v.forEach(({key:m,dataIndex:y,fixed:C,disable:b},T)=>{const k=St(m??y,T);k&&(C||b)&&(p[k]={fixed:C,disable:b,show:!0})}),{...p,...e.columnsState.defaultValue}}const d={};return(f=e.columns)==null||f.forEach(({key:p,dataIndex:m,fixed:y,disable:C},b)=>{const T=St(p??m,b);T&&(d[T]={show:!0,fixed:y,disable:C})}),d}),[s,i]=It(()=>{var r,v;const{persistenceType:f,persistenceKey:d}=e.columnsState||{};if(d&&f&&typeof window<"u"){const p=window[f];try{const m=p?.getItem(d);if(m)return JSON.parse(m)}catch(m){console.warn(m)}}return((r=e.columnsState)==null?void 0:r.value)||((v=e.columnsState)==null?void 0:v.defaultValue)||u.value},{value:h(()=>{var r;return(r=e.columnsState)==null?void 0:r.value}),onChange:(t=e.columnsState)==null?void 0:t.onChange});he([()=>{var r;return(r=e.columnsState)==null?void 0:r.persistenceKey},u,()=>{var r;return(r=e.columnsState)==null?void 0:r.persistenceType}],()=>{const{persistenceType:r,persistenceKey:v}=e.columnsState||{};if(v&&r&&typeof window<"u"){const f=window[r];try{const d=f?.getItem(v);i(d?JSON.parse(d):u.value)}catch(d){console.warn(d)}}},{immediate:!0});const a=()=>{const{persistenceType:r,persistenceKey:v}=e.columnsState||{};if(!v||!r||typeof window>"u")return;const f=window[r];try{f?.removeItem(v)}catch(d){console.warn(d)}};he([()=>{var r;return(r=e.columnsState)==null?void 0:r.persistenceKey},()=>s.value,()=>{var r;return(r=e.columnsState)==null?void 0:r.persistenceType}],()=>{var r,v;if(!((r=e.columnsState)!=null&&r.persistenceKey)||!((v=e.columnsState)!=null&&v.persistenceType)||typeof window>"u")return;const{persistenceType:f,persistenceKey:d}=e.columnsState,p=window[f];try{p?.setItem(d,JSON.stringify(s.value))}catch(m){console.warn(m),a()}});const c={props:e,tableSize:n,setTableSize:o,sortKeyColumns:l,setSortKeyColumns:r=>{l.value=r},columnsMap:s,setColumnsMap:i,clearPersistenceStorage:a,defaultColumnKeyMap:u};return lt(Bo,c),c},$l=()=>Je(Bo,{}),Nr=e=>{const t={};return Object.keys(e||{}).forEach(l=>{var n;Array.isArray(e[l])&&((n=e[l])==null?void 0:n.length)===0||e[l]!==void 0&&(t[l]=e[l])}),t};function Do(e,t){var l;const{columns:n,counter:o}=e;return(l=n?.map((u,s)=>{var i,a,c;const{key:r,dataIndex:v,disable:f,valueEnum:d,width:p}=u,m=St(r||v?.toString(),[t?.key,s].filter(Boolean).join("-")),y=o.columnsMap.value[m]||{fixed:u.fixed},C={index:s,key:m,...u,valueEnum:d,fixed:y.fixed,width:(i=y.width)!=null?i:p,disable:(a=y.disable)!=null?a:f,children:u.children?Do({...e,columns:(c=u?.children)!=null?c:[]},{...u,key:m}):void 0};return Nr(C)}))==null?void 0:l.filter(u=>!u.hideInTable)}const Wr=e=>(t,l)=>{var n,o,u,s;const{fixed:i,index:a}=t,{fixed:c,index:r}=l;if(i==="left"&&c!=="left"||c==="right"&&i!=="right")return-2;if(c==="left"&&i!=="left"||i==="right"&&c!=="right")return 2;const v=t.key||`${a}`,f=l.key||`${r}`;return(n=e[v])!=null&&n.order||(o=e[f])!=null&&o.order?(((u=e[v])==null?void 0:u.order)||0)-(((s=e[f])==null?void 0:s.order)||0):(t.index||0)-(l.index||0)},_r=e=>{const t=[],l=n=>{n.forEach(o=>{var u;(u=o?.children)!=null&&u.length?l(o?.children):t.push(o)})};return l(e),t};function Vr(e,t){const{defaultValue:l,value:n=F()}=t||{};let o=typeof e=="function"?e():e;n.value!==void 0&&(o=Gt(n)),l!==void 0&&(o=typeof l=="function"?l():l);const u=F(o),s=F(o);qe(()=>{let a=n.value!==void 0?n.value:u.value;t?.postState&&(a=t.postState(a)),s.value=a});function i(a){const c=s.value;u.value=a,wt(s.value)!==a&&t?.onChange&&t?.onChange(a,c)}return he(n,()=>{u.value=n.value}),[s,i]}const qt="down",Mo="up",jr="left",bt=10,pl=10,Fo=4,Ur="ICON_TYPE_UP",_n="ICON_TYPE_DOWN",Vn="ICON_TYPE_FORBID",Ao=Symbol("edit"),Xr=()=>{const e=ce([]),t=ce({}),l=(o,u)=>{o&&(Array.isArray(o)?e.value=o:e.value.includes(o)||(e.value=[o]),Object.assign(t.value,u||{}))},n=o=>{if(typeof o>"u"){e.value=[],t.value={};return}const u=Array.isArray(o)?o:[o];e.value=e.value.filter(s=>!u.includes(s)),u.forEach(s=>{delete t.value[s]})};return lt(Ao,{editCellKeys:e,openEditor:l,closeEditor:n,oldValuesMap:t}),{editCellKeys:e,openEditor:l,closeEditor:n}},zo=()=>Je(Ao,{editCellKeys:F([]),openEditor:()=>{},closeEditor:()=>{},oldValuesMap:ce({})}),Lo=Symbol("PopupContextProps"),Yr=()=>{const e=ce(()=>{}),t=ce(()=>{}),l=ce(!1),n=ce(()=>null);lt(Lo,{showPopupContent:e,hidePopupContent:t,visible:l,getPopupContainer:n,registerPopupContext:o=>{e.value=o.showPopupContent||(()=>{}),t.value=o.hidePopupContent||(()=>{}),n.value=o.getPopupContainer||(()=>null)}})},mn=()=>Je(Lo,{}),No=["moz","ms","webkit"];function Gr(){let e=0;return function(t){const l=new Date().getTime(),n=Math.max(0,16-(l-e)),o=window.setTimeout(function(){t(l+n)},n);return e=l+n,o}}function qr(){if(typeof window>"u")return()=>{};if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);const e=No.filter(t=>`${t}RequestAnimationFrame`in window)[0];return e?window[`${e}RequestAnimationFrame`]:Gr()}function Zr(e){if(typeof window>"u")return null;if(window.cancelAnimationFrame)return window.cancelAnimationFrame(e);const t=No.filter(l=>`${l}CancelAnimationFrame`in window||`${l}CancelRequestAnimationFrame`in window)[0];return t?(window[`${t}CancelAnimationFrame`]||window[`${t}CancelRequestAnimationFrame`])(e):clearTimeout(e)}const jn=qr();function We(e,t=1){let l=t;const n={id:jn(function o(){l-=1,l<=0?e():n.id=jn(o)})};return n}We.cancel=e=>{e&&Zr(e.id)};const Wo=Symbol("HScrollSymbolKey"),Jr=({scrollLeft:e,maxScrollLeft:t,onScroll:l,bodyWidth:n})=>{const o=new Set,u=r=>{const v=Math.max(0,Math.min(r,t.value));o.forEach(f=>{f.scrollLeft=v})};let s;const i=r=>{var v;const f=(v=r.target)==null?void 0:v.scrollLeft;f!==e.value&&(u(f),e.value=f,l(r))},a=r=>{var v;const f=(v=r.target)==null?void 0:v.scrollLeft;f!==e.value&&(We.cancel(s),s=We(()=>{e.value=f,l(r)}))};he(e,()=>{u(e.value)},{immediate:!0}),he(n,(r,v)=>{v===0&&u(e.value)}),ct(()=>{o.forEach(r=>{r.removeEventListener("scroll",i),r.removeEventListener("scroll",a)}),o.clear()}),lt(Wo,{addHScrollDom:(r,v)=>{r&&(o.add(r),r.scrollLeft=e.value,r.addEventListener("scroll",v?a:i,{passive:!0}))},removeHScrollDom:r=>{r&&(o.delete(r),r.removeEventListener("scroll",i),r.removeEventListener("scroll",a))}})},Rl=()=>Je(Wo,{}),_o=Symbol("VScrollSymbolKey"),Qr=({scrollTop:e,maxScrollTop:t,onScroll:l,updateAnimate:n,bodyWidth:o})=>{const u=new Set,s=v=>{const f=Math.max(0,Math.min(v,t.value));u.forEach(d=>{d.scrollTop=f})};let i;const a=v=>{var f;const d=(f=v.target)==null?void 0:f.scrollTop;d!==e.value&&(n(),s(d),e.value=d,l(v))};he(e,()=>{s(e.value)},{immediate:!0}),he(o,(v,f)=>{f===0&&s(e.value)});const c=v=>{var f;const d=(f=v.target)==null?void 0:f.scrollTop;d!==e.value&&(We.cancel(i),n(),i=We(()=>{e.value=d,l(v)}))};ct(()=>{u.forEach(v=>{v.removeEventListener("scroll",a),v.removeEventListener("scroll",c)}),u.clear()}),lt(_o,{addVScrollDom:(v,f)=>{v&&(u.add(v),v.scrollTop=e.value,v.addEventListener("scroll",f?c:a,{passive:!0}))},removeVScrollDom:v=>{v&&(u.delete(v),v.removeEventListener("scroll",a),v.removeEventListener("scroll",c))}})},Vo=()=>Je(_o,{}),jo=Symbol("TableContextProps"),ei=e=>{lt(jo,e)},je=()=>Je(jo,{}),Ge={TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,A:65,C:67},ti=e=>{const{getDisplayedColBefore:t,getDisplayedColAfter:l,allDisplayedColumns:n,setRangeToCell:o,focusCell:u,flattenData:s,getRowByFlattenIndex:i,allCellProps:a,tabGuardTopRef:c,tabGuardBottomRef:r}=e,v=h(()=>{var x;return(x=s.value[s.value.length-1])==null?void 0:x.flattenIndex}),f=h(()=>{var x;return(x=s.value[0])==null?void 0:x.flattenIndex}),d=(x,K,R=!1)=>R?p(x,K):m(x,K),p=(x,K)=>{const R=x===Ge.UP,O=x===Ge.DOWN,J=x===Ge.LEFT;let de,z;return R||O?(z=R?f.value:v.value,de=K.column):(z=K.rowIndex,de=J!==!1?n.value[0]:n.value[n.value.length-1]),{rowIndex:z,rowPinned:null,column:de}},m=(x,K)=>{let R=K,O=!1;for(;!O;){switch(x){case Ge.UP:R=j(R);break;case Ge.DOWN:case Ge.ENTER:R=T(R);break;case Ge.RIGHT:R=b(R);break;case Ge.LEFT:R=C(R);break;default:R=null,console.warn("Table: unknown key for navigation "+x)}O=!R||y(R)}return R},y=x=>{let K;switch(x.rowPinned){case"top":case"bottom":break;default:K=i(x.rowIndex)}return!!K},C=x=>{if(!x)return null;const K=t(x.column);return K?{rowIndex:x.rowIndex,column:K,rowPinned:x.rowPinned}:null},b=x=>{if(!x)return null;const K=l(x.column);return K?{rowIndex:x.rowIndex,column:K,rowPinned:x.rowPinned}:null},T=x=>{if(!x)return null;const K=k(x);return K?{rowIndex:K.rowIndex,column:x.column,rowPinned:K.rowPinned}:null},k=x=>{const K=x.rowIndex,R=x.rowPinned;return L(x)?null:{rowIndex:K+1,rowPinned:R}},L=x=>{const K=x.rowIndex;return v.value<=K},V=x=>{const K=x.rowIndex,R=x.rowPinned;return(R?K===0:K===f.value)?null:{rowIndex:K-1,rowPinned:R}},j=x=>{if(!x)return null;const K=V({rowIndex:x.rowIndex,rowPinned:x.rowPinned});return K?{rowIndex:K.rowIndex,column:x.column,rowPinned:K.rowPinned}:null},D=x=>x.rowIndex>=f.value&&x.rowIndex<=v.value,q=(x,K)=>K?H(x):g(x),g=x=>{const K=n.value;let R=x.rowIndex,O=x.rowPinned,J=l(x.column);if(!J){J=K[0];const de=k(x);if(!de||!de.rowPinned&&!D(de))return null;R=de?de.rowIndex:null,O=de?de.rowPinned:null}return{rowIndex:R,column:J,rowPinned:O}},H=x=>{const K=n.value;let R=x.rowIndex,O=x.rowPinned,J=t(x.column);if(!J){J=K[K.length-1];const de=V({rowIndex:x.rowIndex,rowPinned:x.rowPinned});if(!de||!de.rowPinned&&!D(de))return null;R=de?de.rowIndex:null,O=de?de.rowPinned:null}return{rowIndex:R,column:J,rowPinned:O}},N=x=>{const K=(R=>{let O,J;const de=(O=i(R.rowIndex))===null||O===void 0?void 0:O.rowKey,z=((((J=a.value[de])===null||J===void 0?void 0:J[R.column.columnKey])||{}).props||{}).colSpan,ie=[];if(z>1){const me=n.value.findIndex(Se=>Se.columnKey===R.column.columnKey);for(let Se=0;Se<z;Se++)ie.push(n.value[me+Se])}else ie.push(R.column);return ie.filter(me=>!!me)})(x);return K.length===1?x:{rowIndex:x.rowIndex,column:K[K.length-1],rowPinned:x.rowPinned}},S=x=>{let K;const R=i(x.rowIndex),O=R?.rowKey,J=((((K=a.value[O])===null||K===void 0?void 0:K[x.column.columnKey])||{}).props||{}).rowSpan;return!!R&&J!==0&&!R.isExpandRow},M=(x,K)=>A(x,K),A=(x,K)=>{const R=G(x,K);return R&&u(R),!!R},G=(x,K)=>{let R=x;for(;R&&(R===x||!S(R));)K||(R=N(R)),R=q(R,K);return R?R.rowIndex<0?null:(e.ensureCellVisible(R),o(R),R):null};return{getNextCellToFocus:d,getNextTabbedCell:q,getLastBodyCell:()=>({rowIndex:v.value,rowPinned:null}),navigateToNextCell:(x,K)=>{const R=x.keyCode;let O=K,J=!1;for(;O&&(O===K||!S(O));)R===Ge.RIGHT&&(O=N(O)),O=d(R,O),J=!O;J&&x&&R===Ge.UP&&(O={rowIndex:-1,rowPinned:null,column:K.column}),O&&(O.rowIndex<0||(e.ensureCellVisible(O),o(O)))},onTabKeyDown:(x,K)=>{let R,O;const J=K.shiftKey;M(x,J)||(J?(R=c.value)===null||R===void 0||R.focus():(O=r.value)===null||O===void 0||O.focus()),K.preventDefault()},tabToNextCellCommon:M,getFirstCellToFocus:x=>{const K=(()=>{const R=i(f.value),O=n.value[0];return R&&O?{rowIndex:R.rowIndex,rowPinned:null,column:O}:null})();S(K)?(e.ensureCellVisible(K),o(K)):K&&M(K,x)},getLastCellToFocus:x=>{const K=(()=>{const R=i(v.value),O=n.value[n.value.length-1];return R&&O?{rowIndex:R.rowIndex,rowPinned:null,column:O}:null})();S(K)?(e.ensureCellVisible(K),o(K)):K&&M(K,x)},getRowAbove:V,getCellAbove:j,getRowBelow:k}},Uo=e=>{const{scrollContainer:t,scrollAxis:l,onScrollCallback:n=()=>{},showVerticalScrollbar:o,showHorizontalScrollbar:u}=e;let s=null,i=0,a=!1,c=!1,r=!1,v=!1;const f=l.indexOf("x")!==-1,d=l.indexOf("y")!==-1,p=h(()=>{var b,T;return(T=(b=e.scrollByTick)==null?void 0:b.value)!=null?T:20}),m=()=>{s===null&&(s=window.setInterval(y,100),i=0)},y=()=>{i++;const b=i>20?200:i>10?80:40;if(d){const T=e.getVerticalPosition();r&&e.setVerticalPosition(T-b),v&&e.setVerticalPosition(T+b)}if(f){const T=e.getHorizontalPosition();a&&e.setHorizontalPosition(T-b),c&&e.setHorizontalPosition(T+b)}n()},C=()=>{s&&(window.clearInterval(s),s=null)};return{check:(b,T=!1)=>{const k=T||!o.value;if(k&&!u.value)return;const L=t.value.getBoundingClientRect(),V=p.value;return a=b.clientX<L.left+V,c=b.clientX>L.right-V,r=b.clientY<L.top+V&&!k,v=b.clientY>L.bottom-V&&!k,a||c||r||v?m():C()},ensureCleared:C}},Xo=e=>{var t,l;const n=(l=(t=e.target)==null?void 0:t.tagName)==null?void 0:l.toLocaleLowerCase();return!!n?.match("^a$|textarea|input|select|button")},li=e=>{let t=!1,l=null,n=null,o;const u=[],s=y=>{y.forEach(C=>{const{target:b,type:T,listener:k,options:L}=C;b.addEventListener(T,k,L)}),u.push(()=>{y.forEach(C=>{const{target:b,type:T,listener:k,options:L}=C;b.removeEventListener(T,k,L)})})},i=y=>{for(let C=0;C<y.length;C++)if(y[C].identifier===o?.identifier)return y[C];return null},a=(y,C)=>{if(!t){if(hn(y,C,Fo))return;t=!0,e.onDragStart(C)}},c=()=>{t&&(t=!1),l=null,n=null,o=null,u.forEach(y=>y()),u.length=0},r=y=>!Xo(y),v=y=>{r(y)&&y.preventDefault(),a(y,l)},f=y=>{i(y.touches)&&a(y,l)},d=y=>{i(y.changedTouches)&&c()},p=y=>{var C,b;e.level===((C=y.cellInfo)==null?void 0:C.level)&&(r(y)&&y.preventDefault(),t=!1,l=y,n=(b=y.cellInfo)==null?void 0:b.cellTarget,e.bodyElementRef.value,s([{target:document,type:"mousemove",listener:T=>v(T)},{target:document,type:"mouseup",listener:()=>{c()}},{target:document,type:"contextmenu",listener:T=>T.preventDefault()}]),v(y))};let m;return he([()=>e.bodyElementRef.value,e.enableRangeSelection],([y],[C])=>{C&&(C.removeEventListener("mousedown",p),m&&(C.removeEventListener("touchstart",m),m=null,u.forEach(b=>b()),u.length=0)),y&&e.enableRangeSelection.value&&(y.addEventListener("mousedown",p),m=b=>{b.cancelable&&(b.preventDefault(),b.stopPropagation())})}),{onBodyMousedown:p,onBodyTouchstart:y=>{t=!1,o=y.touches[0],e.bodyElementRef.value;const b=L=>d(L),T=y.target,k=document.body;s([{target:k,type:"touchmove",listener:L=>{L.cancelable&&L.preventDefault()},options:{passive:!1}},{target:T,type:"touchmove",listener:L=>f(L),options:{passive:!0}},{target:T,type:"touchend",listener:b,options:{passive:!0}},{target:T,type:"touchcancel",listener:b,options:{passive:!0}}])},getStartTarget:()=>n}};function Jt(...e){const t=[];for(let l=0;l<e.length;l++){const n=e[l];if(n){if(Rr(n))t.push(n);else if(Ql(n))for(let o=0;o<n.length;o++){const u=Jt(n[o]);u&&t.push(u)}else if(kr(n))for(const o in n)n[o]&&t.push(o)}}return t.join(" ")}const Yo=Symbol("rangeSymbolKey"),ni=e=>{const{allColumns:t,flattenData:l,prefixCls:n,rangeSelection:o,getRowByFlattenIndex:u,rootRef:s,bodyRef:i,latestRangeStartCell:a,scrollLeft:c,scrollTop:r,scrollTo:v,showVerticalScrollbar:f,showHorizontalScrollbar:d,getIndexsByKey:p,formatRangeCellText:m,copyDelimiter:y}=e,C=xl();Uo({scrollContainer:i,scrollAxis:"xy",getVerticalPosition:()=>r.value,setVerticalPosition:B=>{v(B)},getHorizontalPosition:()=>c.value,setHorizontalPosition:B=>v({left:B}),showVerticalScrollbar:f,showHorizontalScrollbar:d});const b=h(()=>!!o.value),T=h(()=>o.value==="single"),k=h(()=>`${n.value}-body-cell-range-selected`),L=h(()=>`${n.value}-body-cell-range-single-cell`),V=h(()=>`${n.value}-body-cell-range-top`),j=h(()=>`${n.value}-body-cell-range-right`),D=h(()=>`${n.value}-body-cell-range-bottom`),q=h(()=>`${n.value}-body-cell-range-left`),g=ce([]),H=h(()=>t.value.filter(B=>!B.__Internal__Column__));he(H,B=>{g.value.forEach(E=>{E.columns=E.columns.filter(le=>B.find(w=>w.columnKey===le.columnKey))}),g.value=g.value.filter(E=>E.columns.length>0)}),he(l,()=>{const B=l.value.length-1;g.value.forEach(E=>{const{startRow:le,endRow:w}=E;le.rowIndex>B&&(E.startRow=null),w.rowIndex>B&&(E.endRow=null)}),g.value=g.value.filter(E=>E.startRow&&E.endRow)});const N=B=>{var E;if((E=B.cellInfo)==null||E.level,!b.value)return;const{ctrlKey:le,metaKey:w,shiftKey:$}=B,P=le||w,U=!T.value&&P,Z=g.value.length,re=$&&Z>0;U||re||Ie(),B.cellInfo.cellPosition},S=B=>{},M=()=>{},A=h(()=>g.value.length===0),G=h(()=>{const B=g.value.length;if(B===0)return!1;if(B>1)return!0;const E=g.value[0],le=Se(E),w=Q(E);return le.rowPinned!==w.rowPinned||le.rowIndex!==w.rowIndex||E?.columns.length!==1});li({onDragStart:N,onDragging:S,onDragStop:M,rootElementRef:s,bodyElementRef:i,level:C,enableRangeSelection:b});const x=(B,E)=>{switch(B.rowPinned){case"top":if(E.rowPinned!=="top")return!0;break;case"bottom":if(E.rowPinned!=="bottom")return!1;break;default:if(E.rowPinned)return E.rowPinned!=="top"}return B.rowIndex<E.rowIndex},K=B=>{let E;return B.forEach(le=>{(E===void 0||x(E,le))&&(E=le)}),E},R=B=>{let E;return B.forEach(le=>{(E===void 0||x(le,E))&&(E=le)}),E},O=(B,E)=>!B&&!E||!(B&&!E||!B&&E)&&B.rowIndex===E.rowIndex&&B.rowPinned==E.rowPinned,J=(B,E)=>{let le,w;const $=B===E||B.columnKey===E.columnKey,P=H.value.findIndex(W=>W.columnKey===B.columnKey);if(P<0)return void console.warn(`Table: column ${(le=B.originColumn.key)!==null&&le!==void 0?le:B.originColumn.dataIndex} is not valid`);const U=$?P:H.value.findIndex(W=>W.columnKey===E.columnKey);if(U<0)return void console.warn(`Table: column ${(w=E.originColumn.key)!==null&&w!==void 0?w:E.originColumn.dataIndex} is not valid`);if($)return[B];const Z=Math.min(P,U),re=Z===P?U:P,ue=[];for(let W=Z;W<=re;W++)ue.push(H.value[W]);return ue},de=(B,E=!1)=>{if(!b.value)return;const le=J(B.column,B.column);if(!le||a.value===B)return;!T.value&&E||(g.value=[]);const w={rowIndex:B.rowIndex,rowPinned:B.rowPinned},$={startRow:w,endRow:w,columns:le,startColumn:B.column};g.value.push($),a.value=B,Kt(g)},z=(B,E)=>{const le=E.column,w=J(B.startColumn,le);w&&!ie(B,E)&&(B.columns=w,B.endRow={rowIndex:E.rowIndex,rowPinned:E.rowPinned},Kt(g))},ie=(B,E)=>{const{startRow:le,endRow:w}=B,$=x(le,w)?w:le,P=E.rowIndex===$.rowIndex&&E.rowPinned===$.rowPinned,U=B.columns[0],Z=B.columns[B.columns.length-1],re=B.startColumn===U?Z:U;return E.column===re&&P},me=(B,E)=>{const le=E.columns!==null&&E.columns.find($=>$.columnKey===B.column.columnKey),w=ae(B.rowIndex,B.rowPinned,E);return le&&w},Se=B=>{var E;return B.startRow&&B.endRow?x(B.startRow,B.endRow)?B.startRow:B.endRow:{rowIndex:(E=l.value[0])==null?void 0:E.rowIndex,rowPinned:null}},Q=B=>{var E;return B.startRow&&B.endRow?x(B.startRow,B.endRow)?B.endRow:B.startRow:{rowIndex:(E=l.value[l.value.length-1])==null?void 0:E.rowIndex,rowPinned:null}},ae=(B,E,le)=>{const w=Se(le),$=Q(le),P={rowIndex:B,rowPinned:E},U=P.rowIndex===w.rowIndex&&P.rowPinned==w.rowPinned,Z=P.rowIndex===$.rowIndex&&P.rowPinned==$.rowPinned;if(U||Z)return!0;const re=!x(P,w),ue=x(P,$);return re&&ue},ve=B=>A.value?0:g.value.filter(E=>me(B,E)).length,pe=B=>{const E=H.value,le=E.findIndex(w=>w.columnKey===B.columnKey);return le>0?E[le-1]:null},ye=B=>{const E=H.value,le=E.findIndex(w=>w.columnKey===B.columnKey);return le<E.length-1?E[le+1]:null},we=B=>{if(B==null)return null;const E=H.value.find(le=>le.columnKey===B);return E||console.warn("Table: could not find column "+B),E},Ke=()=>g.value,Ie=()=>{g.value=[]},Ae=B=>{if(!b.value)return;const E=(le=>{let w,$=!1;if(le.columnsKey)w=le.columnsKey.map(P=>we(P)).filter(P=>P);else{const P=we(le.columnStartKey),U=we(le.columnEndKey);if(!P||!U)return;w=J(P,U),w&&w.length&&($=w[0]!==P)}if(w)return{startRow:le.rowStartIndex!=null?{rowIndex:le.rowStartIndex,rowPinned:null}:void 0,endRow:le.rowEndIndex!=null?{rowIndex:le.rowEndIndex,rowPinned:null}:void 0,columns:w,startColumn:$?w[w.length-1]:w[0]}})(B);E&&(E.startRow&&(a.value={rowIndex:E.startRow.rowIndex,rowPinned:E.startRow.rowPinned,column:E.startColumn}),g.value.push(E))},Ne=B=>{b.value&&(Ie(),Ae(B))},ze=B=>{let E,le;const w=(E=u(B.rowIndex))===null||E===void 0?void 0:E.rowKey,$=(le=B.column)===null||le===void 0?void 0:le.columnKey;if(w!==void 0&&$!==void 0&&s.value){const P=s.value.querySelector(`[data-row-key="${w}"] [data-column-key="${$}"][data-level="${C}"]`);if(P){const U=P.getElementsByTagName("input")[0];P.focus(),U&&U.focus()}}},ne=(B=!1)=>{if(T.value||A.value)return;const E=g.value[g.value.length-1],le=Se(E),w=Q(E),$=[];g.value.slice(0,-1).forEach(P=>{const U=Se(P),Z=Q(P),re=P.columns,ue=re.filter(W=>E?.columns.indexOf(W)===-1);if(ue.length!==re.length)if(x(w,U)||x(Z,le))$.push(P);else{if(x(U,le)){const W={columns:[...re],startColumn:E?.startColumn,startRow:Object.assign({},U),endRow:Te.getRowAbove(le)};$.push(W)}if(ue.length>0){const W={columns:ue,startColumn:ue.find(ge=>ge.columnKey===E?.startColumn.columnKey)?E?.startColumn:ue[0],startRow:K([Object.assign({},le),Object.assign({},U)]),endRow:R([Object.assign({},w),Object.assign({},Z)])};$.push(W)}x(w,Z)&&$.push({columns:[...re],startColumn:E?.startColumn,startRow:Te.getRowBelow(w),endRow:Object.assign({},Z)})}else $.push(P)}),g.value=$};he(a,()=>{a.value&&ze(a.value)});const se=B=>{e.ensureCellRowVisible(B),e.ensureCellColumnVisible(B)},Te=ti({getDisplayedColBefore:pe,getDisplayedColAfter:ye,allDisplayedColumns:H,setRangeToCell:de,focusCell:ze,ensureCellVisible:se,...e});lt(Yo,{cellRanges:g,extendLatestRangeToCell:B=>{if(A.value||!a.value)return;const E=g.value[g.value.length-1];z(E,B)},setRangeToCell:de,onDragStart:N,onDragging:S,isCellInAnyRange:B=>ve(B)>0,getRangeCellClass:B=>{const E=ve(B),le=(re=>{let ue=!1,W=!1,ge=!1,xe=!1;const $e=re.column;let He,Qe;He=pe($e),Qe=ye($e);const dt=g.value.filter(et=>me(re,et));He||(xe=!0),Qe||(W=!0);for(let et=0;et<dt.length&&!(ue&&W&&ge&&xe);et++){const Xe=dt[et],pt=Se(Xe),kt=Q(Xe);!ue&&O(pt,re)&&(ue=!0),!ge&&O(kt,re)&&(ge=!0),!xe&&He&&Xe.columns.findIndex(Ct=>Ct.columnKey===He.columnKey)<0&&(xe=!0),!W&&Qe&&Xe.columns.findIndex(Ct=>Ct.columnKey===Qe.columnKey)<0&&(W=!0)}return{top:ue,right:W,bottom:ge,left:xe}})(B),w=E===1&&!G.value,$=!w&&le.top,P=!w&&le.right,U=!w&&le.bottom,Z=!w&&le.left;return Jt({[k.value]:E!==0,[`${k.value}-1`]:E===1,[`${k.value}-2`]:E===2,[`${k.value}-3`]:E===3,[`${k.value}-4`]:E>=4,[L.value]:w,[V.value]:$,[j.value]:P,[D.value]:U,[q.value]:Z})},enableRangeSelection:b,singleRangeSelection:T,getDisplayedColBefore:pe,getDisplayedColAfter:ye,navigationService:Te,extendLatestRangeInDirection:B=>{if(A.value||!a.value)return;const E=B.keyCode,le=B.ctrlKey||B.metaKey,w=g.value[g.value.length-1],$=a.value,P=w.columns[0],U=w.columns[w.columns.length-1],Z=w.endRow.rowIndex,re=w.endRow.rowPinned,ue={column:$.column===P?U:P,rowIndex:Z,rowPinned:re},W=Te.getNextCellToFocus(E,ue,le);return W?(Ne({rowStartIndex:$.rowIndex,rowEndIndex:W.rowIndex,columnStartKey:$.column.columnKey,columnEndKey:W.column.columnKey}),W):void 0},allDisplayedColumns:H,focusCell:ze,ensureCellVisible:se,getCellRangeCount:ve,intersectLastRange:ne,level:C});const Le=()=>{const B=Ke(),E=[];let le="";B.forEach(w=>{const{startRow:$,endRow:P,columns:U}=w,[Z,re]=[$.rowIndex,P.rowIndex].sort((xe,$e)=>xe-$e);let ue=H.value.findIndex(xe=>{var $e;return xe.columnKey===(($e=U[0])==null?void 0:$e.columnKey)}),W=H.value.findIndex(xe=>{var $e;return xe.columnKey===(($e=U[U.length-1])==null?void 0:$e.columnKey)});[ue,W]=[ue,W].sort((xe,$e)=>xe-$e);const ge=[];for(let xe=Z;xe<=re;xe++){const $e=l.value[xe];if($e&&!$e.isExpandRow){const He=$e.rowKey,Qe=[],dt=p(He);for(let et=ue;et<=W;et++){const Xe=H.value[et].originColumn,pt=Xe.dataIndex?Io($e.record,Xe.dataIndex):void 0;if(Xe){const kt={record:$e.record,column:Xe,index:xe,recordIndexs:dt,key:He,value:pt};Qe.push(m(kt))}}ge.push(Qe.join(y.value))}}E.push(ge)}),le=E.map(w=>w.join(`prefixCls
`)).join(`prefixCls
`),(w=>{let $,P;const U=document.activeElement,Z=document.createElement("textarea");Z.style.position="absolute",Z.style.opacity="0",Z.style.width="1px",Z.style.height="1px",Z.value=w||" ",document.body.appendChild(Z),Z.select(),Z.focus({preventScroll:!0}),document.execCommand("copy")||console.warn("Table: copy failed, Browser did not allow document.execCommand('copy')"),document.body.removeChild(Z),U!==null&&((P=($=U).focus)===null||P===void 0||P.call($,{preventScroll:!0}))})(le)};return{getSelectedRange:()=>{const B=Ke(),E=[];return B.forEach(le=>{const{startColumn:w,startRow:$,endRow:P,columns:U}=le,Z=l.value[$.rowIndex],re=l.value[P.rowIndex],ue={startColumn:w.originColumn,startRow:{rowIndex:Z.rowIndex,recordIndexs:p(Z.rowKey)},endRow:{rowIndex:re.rowIndex,recordIndexs:p(re.rowKey)},columns:U.map(W=>W.originColumn),flattenData:l.value};E.push(ue)}),E},appendCellToSelectedRange:Ae,clearAllSelectedRange:Ie,setCellRanges:B=>{b.value&&(g.value=B)},getCellRangeCount:ve,navigationService:Te,copySelectedRange:Le,onBodyKeydown:B=>{if(!(!B.ctrlKey&&!B.metaKey||!b.value)&&!Xo(B)){switch(B.keyCode){case Ge.C:Le();break;case Ge.A:(()=>{if(!b.value)return;const E=H.value;E.length!==0&&Ne({rowStartIndex:0,rowEndIndex:l.value.length-1,columnStartKey:E[0].columnKey,columnEndKey:E[E.length-1].columnKey})})()}B.preventDefault()}}}},gn=()=>Je(Yo,{});function oi(e,t,l){const n=ce({}),o=ce([]),u=ce([]);return he([e,t,l],()=>{const s=new Map,i=new Map,a=new Map,c=[],r=[],v=l.value,f=t.value;function d(p,m=[],y=0){p.forEach((C,b)=>{const T=v(C,b);ht(!s.get(T),"Table",`You set slots duplicate key ${T}, it will cause rendering errors. Please check carefully.`),s.set(T,C);const k=m.concat([b]);i.set(T,k),a.set(k.join("-"),T),c.push(T),y===0&&r.push(T),C&&typeof C=="object"&&f in C&&d(C[f]||[],k,y+1)})}d(e.value),o.value=c,u.value=r,n.value={kvMap:s,kIndexMap:i,indexsKeyMap:a}},{immediate:!0}),{getRecordByKey:s=>{var i,a;return wt((a=(i=n.value)==null?void 0:i.kvMap)==null?void 0:a.get(s))},getIndexsByKey:s=>{var i,a;return(a=(i=n.value)==null?void 0:i.kIndexMap)==null?void 0:a.get(s)},allDataRowKeys:o,allDataRootRowKeys:u,getKeyByIndexs:s=>n.value.indexsKeyMap.get(s)}}function Pt(e,t){const l=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(l>>16)<<16|l&65535}function ai(e,t){return e<<t|e>>>32-t}function kl(e,t,l,n,o,u){return Pt(ai(Pt(Pt(t,e),Pt(n,u)),o),l)}function nt(e,t,l,n,o,u,s){return kl(t&l|~t&n,e,t,o,u,s)}function ot(e,t,l,n,o,u,s){return kl(t&n|l&~n,e,t,o,u,s)}function at(e,t,l,n,o,u,s){return kl(t^l^n,e,t,o,u,s)}function rt(e,t,l,n,o,u,s){return kl(l^(t|~n),e,t,o,u,s)}function ri(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;let l,n,o,u,s,i=1732584193,a=-271733879,c=-1732584194,r=271733878;for(l=0;l<e.length;l+=16)n=i,o=a,u=c,s=r,i=nt(i,a,c,r,e[l],7,-680876936),r=nt(r,i,a,c,e[l+1],12,-389564586),c=nt(c,r,i,a,e[l+2],17,606105819),a=nt(a,c,r,i,e[l+3],22,-1044525330),i=nt(i,a,c,r,e[l+4],7,-176418897),r=nt(r,i,a,c,e[l+5],12,1200080426),c=nt(c,r,i,a,e[l+6],17,-1473231341),a=nt(a,c,r,i,e[l+7],22,-45705983),i=nt(i,a,c,r,e[l+8],7,1770035416),r=nt(r,i,a,c,e[l+9],12,-1958414417),c=nt(c,r,i,a,e[l+10],17,-42063),a=nt(a,c,r,i,e[l+11],22,-1990404162),i=nt(i,a,c,r,e[l+12],7,1804603682),r=nt(r,i,a,c,e[l+13],12,-40341101),c=nt(c,r,i,a,e[l+14],17,-1502002290),a=nt(a,c,r,i,e[l+15],22,1236535329),i=ot(i,a,c,r,e[l+1],5,-165796510),r=ot(r,i,a,c,e[l+6],9,-1069501632),c=ot(c,r,i,a,e[l+11],14,643717713),a=ot(a,c,r,i,e[l],20,-373897302),i=ot(i,a,c,r,e[l+5],5,-701558691),r=ot(r,i,a,c,e[l+10],9,38016083),c=ot(c,r,i,a,e[l+15],14,-660478335),a=ot(a,c,r,i,e[l+4],20,-405537848),i=ot(i,a,c,r,e[l+9],5,568446438),r=ot(r,i,a,c,e[l+14],9,-1019803690),c=ot(c,r,i,a,e[l+3],14,-187363961),a=ot(a,c,r,i,e[l+8],20,1163531501),i=ot(i,a,c,r,e[l+13],5,-1444681467),r=ot(r,i,a,c,e[l+2],9,-51403784),c=ot(c,r,i,a,e[l+7],14,1735328473),a=ot(a,c,r,i,e[l+12],20,-1926607734),i=at(i,a,c,r,e[l+5],4,-378558),r=at(r,i,a,c,e[l+8],11,-2022574463),c=at(c,r,i,a,e[l+11],16,1839030562),a=at(a,c,r,i,e[l+14],23,-35309556),i=at(i,a,c,r,e[l+1],4,-1530992060),r=at(r,i,a,c,e[l+4],11,1272893353),c=at(c,r,i,a,e[l+7],16,-155497632),a=at(a,c,r,i,e[l+10],23,-1094730640),i=at(i,a,c,r,e[l+13],4,681279174),r=at(r,i,a,c,e[l],11,-358537222),c=at(c,r,i,a,e[l+3],16,-722521979),a=at(a,c,r,i,e[l+6],23,76029189),i=at(i,a,c,r,e[l+9],4,-640364487),r=at(r,i,a,c,e[l+12],11,-421815835),c=at(c,r,i,a,e[l+15],16,530742520),a=at(a,c,r,i,e[l+2],23,-995338651),i=rt(i,a,c,r,e[l],6,-198630844),r=rt(r,i,a,c,e[l+7],10,1126891415),c=rt(c,r,i,a,e[l+14],15,-1416354905),a=rt(a,c,r,i,e[l+5],21,-57434055),i=rt(i,a,c,r,e[l+12],6,1700485571),r=rt(r,i,a,c,e[l+3],10,-1894986606),c=rt(c,r,i,a,e[l+10],15,-1051523),a=rt(a,c,r,i,e[l+1],21,-2054922799),i=rt(i,a,c,r,e[l+8],6,1873313359),r=rt(r,i,a,c,e[l+15],10,-30611744),c=rt(c,r,i,a,e[l+6],15,-1560198380),a=rt(a,c,r,i,e[l+13],21,1309151649),i=rt(i,a,c,r,e[l+4],6,-145523070),r=rt(r,i,a,c,e[l+11],10,-1120210379),c=rt(c,r,i,a,e[l+2],15,718787259),a=rt(a,c,r,i,e[l+9],21,-343485551),i=Pt(i,n),a=Pt(a,o),c=Pt(c,u),r=Pt(r,s);return[i,a,c,r]}function ii(e){let t,l="";const n=e.length*32;for(t=0;t<n;t+=8)l+=String.fromCharCode(e[t>>5]>>>t%32&255);return l}function si(e){let t;const l=[];for(l[(e.length>>2)-1]=void 0,t=0;t<l.length;t+=1)l[t]=0;const n=e.length*8;for(t=0;t<n;t+=8)l[t>>5]|=(e.charCodeAt(t/8)&255)<<t%32;return l}function ui(e){return ii(ri(si(e),e.length*8))}function ci(e){const t="0123456789abcdef";let l="",n,o;for(o=0;o<e.length;o+=1)n=e.charCodeAt(o),l+=t.charAt(n>>>4&15)+t.charAt(n&15);return l}function di(e){return unescape(encodeURIComponent(e))}function vi(e){return ui(di(e))}function fi(e){return ci(vi(e))}function hi(e,t,l){return fi(e)}const cl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Go=e=>{let t="",l,n,o,u,s,i,a,c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)u=cl.indexOf(e.charAt(c++)),s=cl.indexOf(e.charAt(c++)),i=cl.indexOf(e.charAt(c++)),a=cl.indexOf(e.charAt(c++)),l=u<<2|s>>4,n=(s&15)<<4|i>>2,o=(i&3)<<6|a,t=t+String.fromCharCode(l),i!=64&&(t=t+String.fromCharCode(n)),a!=64&&(t=t+String.fromCharCode(o));return t=pi(t),t};function pi(e){let t="",l=0,n=0,o=0;for(;l<e.length;)if(n=e.charCodeAt(l),n<128)t+=String.fromCharCode(n),l++;else if(n>191&&n<224)o=e.charCodeAt(l+1),t+=String.fromCharCode((n&31)<<6|o&63),l+=2;else{o=e.charCodeAt(l+1);const u=e.charCodeAt(l+2);t+=String.fromCharCode((n&15)<<12|(o&63)<<6|u&63),l+=3}return t}const Yt=1,Un=2,mi=3,gi=4;function yi(e){return hi(unescape(encodeURIComponent(e)))}const wi=()=>new Date(parseInt(Go("MTY3MjQxNjAwMDAwMA=="),10));function Ci(e){if(!e)return{code:mi};const t=e.substring(0,32),l=e.substring(32);if(t!==yi(l))return{code:Yt};const n=Go(l)||"",o={};n.split(",").forEach(r=>{const[v,f]=r.split("=");o[v]=f});const u=o.DOMAIN,s=Number(o.ULTIMATE||0),i="EXPERIENCE"in o;if(i){const r=parseInt(o.EXPIRY,10),v=new Date(r);if(v<new Date)return{code:Un,expiredTime:v,isTrial:i}}if(!s&&window?.location){if(!u)return{code:Yt};const r=window.location.hostname,v=u.split("."),f=r.split("."),d=f[f.length-1];if(d&&r!=="localhost"&&r!=="127.0.0.1"&&isNaN(+d))for(let p=v.length-1;p>=0;p--){const m=v[p],y=f[f.length-(v.length-p)];if(y&&m!==y)return{code:Yt}}}let a=0;try{if(a=parseInt(o.EXPIRY,10),!a||Number.isNaN(a))return{code:Yt}}catch{return{code:Yt}}const c=new Date(a+6048e5);return c<wi()?{code:Un,expiredTime:c}:{code:gi,isTrial:i,expiredTime:c}}function bi(){const e=F(""),t=h(()=>Sr());return{status:h(()=>Ci(t.value)),watermarkMsg:e}}function Fe(e,t){var l;const n=ce();return qe(()=>{n.value=e()},{flush:(l=void 0)!=null?l:"sync"}),n}let Fl;function Si(e){if(typeof document>"u")return 0;if(Fl===void 0){const t=document.createElement("div");t.style.width="100%",t.style.height="200px";const l=document.createElement("div"),n=l.style;n.position="absolute",n.top="0",n.left="0",n.pointerEvents="none",n.visibility="hidden",n.width="200px",n.height="150px",n.overflow="hidden",l.appendChild(t),document.body.appendChild(l);const o=t.offsetWidth;l.style.overflow="scroll";let u=t.offsetWidth;o===u&&(u=l.clientWidth),document.body.removeChild(l),Fl=o-u}return Fl}const dl=20,Al=50,zl=100,yn=Symbol("viewportRef"),tl=Symbol("autoHeaderHeight");function xi(){const e={};return(t,l,n)=>{var o;if(n===void 0||t===void 0)return 0;const u=t.$el||t;if(typeof n=="number")return n;if((o=e[l])!=null&&o[n])return e[l][n];const s=n.match(/^(.*)px$/);let i=Number(s===null?void 0:s[1]);if(e[l]=e[l]||{},Number.isNaN(i)){const a=document.createElement("div");a.style.width=n,a.style.height="0px",u.style.width=`${l}px`,u.appendChild(a),i=Math.floor(a.offsetWidth),u.removeChild(a)}return e[l][n]=i,e[l][n]}}let tn=!1;if(typeof window<"u"&&window.getComputedStyle){const e=document.createElement("div");tn=["","-webkit-","-moz-","-ms-"].some(t=>{try{e.style.position=t+"sticky"}catch{}return e.style.position!=""})}else tn=!0;var xt=tn;const $i=(e,t)=>{let l=0,n=e.length-1,o=e.length;for(;l<=n;){const u=(n-l>>1)+l;e[u].left>=t?(n=u-1,o=u):l=u+1}return o},Ll=(e,t,l)=>{const n=e.length,o=[],u=Math.max($i(e,t)-1,0);for(let s=u;s<n;s++){const i=e[s];if(!(i.left<=l))break;o.push(i)}return o},Ri="__Internal__Checkbox__Columnkey",Qt="__Internal__Expand__Columnkey",Xn=50;function Nl(e){return e?.fixed===!0?"left":e?.fixed}const ki=e=>{var t;const l=[],n=(u,s,i=0)=>{l[i]=l[i]||[];let a=s;return u.filter(Boolean).map(c=>{var r;const v={key:c.columnKey,column:c,colStart:a};let f=1;const d=c.children;return d&&d.length>0&&(f=n(d,a,i+1).reduce((p,m)=>p+m,0),v.hasSubColumns=!0),"rowSpan"in c&&(v.rowSpan=c.rowSpan),v.colSpan=f,v.colEnd=v.colStart+f-1,(r=l[i])==null||r.push(v),a+=f,f})};n(e,0);const o=l.length;for(let u=0;u<o;u+=1)(t=l[u])==null||t.forEach(s=>{"rowSpan"in s||s.hasSubColumns||(s.rowSpan=o-u)});return l};function Ki({props:e,rawColumns:t,bodyScrollWidth:l,baseHeight:n,measureWidthRef:o,expandType:u,expandable:s,scrollLeft:i,bodyWidth:a,xVirtual:c,draggingColumnKey:r,latestRangeStartCell:v}){const f=ce([]),d=ce([]),p=ce([]),m=ce([]),y=ce([]),C=ce([]),b=ce([]),T=ce(1),k=ce([]),L=ce(new Map),V=ce(0);qe(()=>{V.value=k.value.reduce((Q,ae)=>Q+ae,0)});const j=xi(),D=ce([]),q=h(()=>{const Q=e.rowSelection||{},{checkStrictly:ae=!0,fixed:ve}=Q;return{...Q,checkStrictly:ae,fixed:ve===!0?"left":ve}}),g=Fe(()=>u.value==="nest"&&e.expandIconColumnIndex===void 0?e.rowSelection?1:0:e.expandIconColumnIndex>0&&e.rowSelection?e.expandIconColumnIndex-1:e.expandIconColumnIndex);qe(()=>{let Q=t.value.slice();if(s.value){const ae=g.value||0,ve=t.value[ae],pe=e.expandColumnWidth||48,ye=e.expandFixed===!0?"left":e.expandFixed;let we;ye!=="left"||g.value?ye==="right"&&g.value===t.value.length?we="right":we=Nl(ve):we="left";const Ke={title:"",fixed:we,width:pe,minWidth:pe,maxWidth:pe,columnKey:Qt,type:"expand",finallyWidth:pe,__Internal__Column__:!0};ae>=0&&Q.splice(ae,0,Ke)}if(e.rowSelection){const{columnWidth:ae=48,fixed:ve,columnTitle:pe}=q.value,ye={width:ae,minWidth:ae,maxWidth:ae,finallyWidth:ae,title:pe,type:"checkbox",columnKey:Ri,__Internal__Column__:!0};if(u.value==="row"&&Q.length&&!g.value){const[we,...Ke]=Q,Ie=ve||Nl(Ke[0]);Ie&&(we.fixed=Ie),Q=[we,{...ye,fixed:Ie},...Ke]}else Q=[{...ye,fixed:ve||Nl(Q[0])},...Q]}Q.length||(Q=[{customRender:()=>null}]),D.value=Q}),he([D,n,l,o],()=>{var Q,ae,ve,pe;const ye=D.value;let we=1;const Ke=[],Ie=[],Ae=[],Ne=[],ze=[],ne=[],se=[];if(L.value=new Map,!o.value)return;const Te=[];let Le=0;const B=(P,U,Z,re,ue,W,ge)=>{for(let xe=0,$e=P.length;xe<$e;xe++){const He=P[xe];if(!He)continue;const{width:Qe,fixed:dt=ge,children:et,ellipsis:Xe=!1,tooltip:pt,minWidth:kt,maxWidth:Ct}=He,Vt=j(o.value,l.value,Qe),yt=j(o.value,l.value,kt),rl=Ct?j(o.value,l.value,Ct):1/0,jt=Math.min(Math.max(Vt,yt),rl),Bt=Kr(xe,W),il=He.columnKey||He.key||Bt,vt=dt===!0?"left":dt,Ye=Object.assign({},He,{finallyWidth:jt,columnKey:il,originColumn:He,showTitle:!pt&&(Xe===!0||typeof Xe=="object"&&Xe?.showTitle!==!1),fixed:vt,hidden:He.hidden===!0});if(L.value.set(il,Ye),Ye.hidden)break;et&&et.length?(Ye.children=[],vt==="left"?U.push(Ye):vt==="right"?re.push(Ye):Z.push(Ye),we=Math.max(we,ue+1),B(et,Ye.children,Ye.children,Ye.children,ue+1,Bt,vt)):(Ye.width===void 0&&Te.push(Ye),Le+=Ye.finallyWidth,vt==="left"?(Ke.push(Ye),U.push(Ye)):vt==="right"?(Ie.push(Ye),re.push(Ye)):(Ae.push(Ye),Ye.autoHeight&&Ne.push(Ye),Z.push(Ye)))}};B(ye,ze,se,ne,1,"__S_TABLE_COLUMN_Key__");let E=l.value-Le;const le=Te.length?Te:Ke.concat(Ae,Ie).filter(P=>!P.resizable||!P.__Internal__Column__),w=Math.floor(E/le.length);if(E>0)for(let P=0,U=le.length;P<U;P++){const Z=le[P];let re=0;P==U-1&&E>w?re=Z.finallyWidth+E:re=Math.max(Math.min(Z.finallyWidth+w,(Q=Z.maxWidth)!=null?Q:1/0),(ae=Z.minWidth)!=null?ae:50),E-=re-Z.finallyWidth,Z.finallyWidth=re}else for(let P=0,U=Te.length;P<U;P++){const Z=Te[P];Z.finallyWidth=Math.min((ve=Z.minWidth)!=null?ve:50,(pe=Z.maxWidth)!=null?pe:1/0)}e.headerHeight!==void 0?Array.isArray(e.headerHeight)?k.value=e.headerHeight.concat(new Array(we).fill(n.value)).slice(0,we):k.value=new Array(we).fill(e.headerHeight):k.value=new Array(we).fill(n.value);const $=(P,U,Z,re)=>{let ue=0,W=U;return P.forEach(ge=>{ge.left=W,ge.top=Z,ge.children?(ge.rowSpan=1,ge.height=k.value[we-re],ge.finallyWidth=$(ge.children,W,ge.height,re-1)):(ge.rowSpan=re,ge.height=k.value.slice(we-re).reduce((xe,$e)=>xe+$e,0)),W+=ge.finallyWidth,ue+=ge.finallyWidth}),ue};$(ze.concat(se,ne),0,0,we),f.value=Ke,d.value=Ie,p.value=Ae,m.value=Ne,y.value=ze,C.value=ne,b.value=se,T.value=we},{immediate:!0});const H=ce([]);let N={};const S=ce({});qe(()=>{N={};const Q={};H.value=[].concat(f.value,p.value,d.value).map((ae,ve)=>(ae.columnIndex=ve,Q[ae.columnKey]=ve,ae)),S.value=Q});const M=ce([]),A=ce({});qe(()=>{var Q,ae,ve,pe;if(e.autoHeaderHeight){M.value=ki([].concat(y.value,b.value,C.value));const ye=[],we=[];let Ke=0,Ie=0;const Ae=H.value,Ne=Ae.length,ze=e.direction;for(let ne=0;ne<Ne;ne+=1)if(ze==="rtl"){we[ne]=Ie,Ie+=((Q=Ae[ne])==null?void 0:Q.finallyWidth)||0;const se=Ne-ne-1;ye[se]=Ke,Ke+=((ae=Ae[se])==null?void 0:ae.finallyWidth)||0}else{ye[ne]=Ke,Ke+=((ve=Ae[ne])==null?void 0:ve.finallyWidth)||0;const se=Ne-ne-1;we[se]=Ie,Ie+=((pe=Ae[se])==null?void 0:pe.finallyWidth)||0}A.value={left:ye,right:we}}else M.value=[]});const G=F(0),x=F(0),K=F(0),R=Fe(()=>G.value+x.value+K.value);qe(()=>{G.value=f.value.reduce((Q,ae)=>Q+(ae.finallyWidth||0),0),x.value=p.value.reduce((Q,ae)=>Q+(ae.finallyWidth||0),0),K.value=d.value.reduce((Q,ae)=>Q+(ae.finallyWidth||0),0)});const O=(Q,ae=1)=>{if(`${Q}-${ae}`in N)return N[`${Q}-${ae}`];const ve=H.value;let pe=0,ye=0,we=0;if(ve[Q]){const Ke=ve[Q].left;for(let Ie=Q,Ae=Q+ae;Ie<Ae;Ie++){const Ne=ve[Ie];pe+=Ne.finallyWidth||0,ye+=Ne.minWidth,we+=Ne.maxWidth}N[`${Q}-${ae}`]={width:pe,left:Ke,minWidth:ye,maxWidth:we}}return N[`${Q}-${ae}`]||{width:pe,left:0,minWidth:ye,maxWidth:we}},J=ce([]),de=ce([]),z=F(!1),ie=Fe(()=>a.value-(xt?K.value:0)),me=Q=>Q.length>2e3?Q.slice(0,2e3):Q;he([i,ie,p,c],([Q,ae,ve])=>{var pe,ye;if(!c.value){J.value=me(ve),z.value=!z.value;return}const we=Ll(ve,Q-dl,ae+Q+dl),Ke=m.value.filter(Ie=>!we.find(Ae=>Ie===Ae));if(J.value=me([].concat(Ke,we)),(pe=v.value)!=null&&pe.column){const Ie=L.value.get((ye=v.value)==null?void 0:ye.column.columnKey);Ie&&!Ie.fixed&&!J.value.find(Ae=>Ae.columnKey===Ie.columnKey)&&J.value.splice(0,0,Ie)}z.value=!z.value});const Se=(Q,ae,ve)=>Ll(Q,ae,ve).map(pe=>Object.assign({},pe,pe.children?{children:Se(pe.children,ae,ve)}:{}));return he(z,()=>{if(!c.value){de.value=me(b.value);return}const Q=i.value-dl,ae=ie.value+i.value+dl,ve=Ll(b.value,Q,ae),pe=ve[0],ye=ve.length-1,we=ve[ye];if(pe?.children&&(ve[0]=Object.assign({},ve[0],{children:Se(pe.children,Q,ae)})),we&&we!==pe&&we.children&&(ve[ye]=Object.assign({},ve[ye],{children:Se(we.children,Q,ae)})),de.value=me(ve),r.value&&!de.value.find(Ke=>Ke.columnKey===r.value)){const Ke=L.value.get(r.value);de.value.push(Ke.children?Object.assign({},Ke,{children:[]}):Ke)}}),{leftColumns:f,rightColumns:d,centerColumns:p,leftHeaderColumns:y,rightHeaderColumns:C,centerHeaderColumns:b,leftWidth:G,rightWidth:K,centerWidth:x,bodyMaxWidth:R,maxRowSpan:T,headerHeight:k,maxHeaderHeight:V,allColumns:H,getColumnPosition:O,getColumnPositionByKey:Q=>{const ae=S.value[Q];if(!ae){ht(!1,"scrollTo",`\`columnKey = ${Q}\` is Invalid`);return}return O(ae)},columnKeyIndexMap:S,expandIconColumnIndex:g,visibleCenterColumns:J,visibleCenterHeaderColumns:de,columnRowsForAutoHeaderHeight:M,stickyOffsets:A}}const wl="asc",ln="desc";function nn(e){return typeof e.sorter=="object"&&typeof e.sorter.multiple=="number"?e.sorter.multiple:!1}function on(e,t){let l=[];function n(o){l.push({column:o,key:o.columnKey,multiplePriority:nn(o),sortOrder:o.sortOrder})}return e.forEach(o=>{o.children?("sortOrder"in o&&n(o),l=[...l,...on(o.children||[],t)]):o.sorter&&("sortOrder"in o?n(o):t&&o.defaultSortOrder&&l.push({column:o,key:o.columnKey,multiplePriority:nn(o),sortOrder:o.defaultSortOrder}))}),l}function Yn(e){return typeof e=="function"?e:e&&typeof e=="object"&&e.compare?e.compare:!1}function qo(e,t,l){const n=t.slice().sort((s,i)=>i.multiplePriority-s.multiplePriority),o=e.slice(),u=n.filter(({column:{sorter:s},sortOrder:i})=>Yn(s)&&i);return u.length?o.sort((s,i)=>{for(let a=0;a<u.length;a+=1){const c=u[a],{column:{sorter:r},sortOrder:v}=c,f=Yn(r);if(f&&v){const d=f(s,i,v);if(d!==0)return v===wl?d:-d}}return 0}).map(s=>{const i=s[l];return i?{...s,[l]:qo(i,t,l)}:s}):o}function Gn(e){const{column:t,sortOrder:l}=e;return{column:t.originColumn,order:l,field:t.dataIndex,columnKey:t.columnKey}}function Wl(e){const t=e.filter(({sortOrder:l})=>l).map(Gn);return t.length===0&&e.length?{...Gn(e[e.length-1]),column:void 0}:t.length<=1?t[0]||{}:t}function Pi(e,t,l,n){const o=ce(on(l.value||[],!0)),u=ce([]);qe(()=>{let a=!0;const c=on(l.value,!1);let r=[];const v=f=>{a?r.push(f):r.push({...f,sortOrder:null})};if(c.length){let f=null;c.forEach(d=>{f===null?(v(d),d.sortOrder&&(d.multiplePriority===!1?a=!1:f=!0)):(f&&d.multiplePriority!==!1||(a=!1),v(d))})}else r=o.value;u.value===r||Sl(u.value,r)||(u.value=r)});const s=h(()=>qo(t.value,u.value,"children")),i=h(()=>Wl(u.value));return{sortedData:s,sorterStates:u,sorter:i,getSorters:a=>Wl(a),changeSorter:function(a){var c;let r;a.multiplePriority!==!1&&u.value.length&&((c=u.value[0])==null?void 0:c.multiplePriority)!==!1?r=[...u.value.filter(({key:v})=>v!==a.key),a]:r=[a],o.value=r,n(Wl(r),r)}}}function wn(e){let t=[];return(e||[]).forEach(({value:l,children:n})=>{t.push(l),n&&(t=[...t,...wn(n)])}),t}function qn(e){const t={};return e.forEach(({key:l,filteredKeys:n,column:o})=>{var u;const s=o.filterDropdown||((u=o?.slots)==null?void 0:u.filterDropdown)||o.customFilterDropdown,{filters:i}=o;if(s)t[l]=n||null;else if(Array.isArray(n)){const a=wn(i);t[l]=a.filter(c=>n.includes(String(c)))}else t[l]=null}),t}function Zn(e,t){return t.reduce((l,n)=>{const{column:{onFilter:o,filters:u},filteredKeys:s}=n;return o&&s&&s.length?l.filter(i=>s.some(a=>{const c=wn(u),r=c.findIndex(f=>String(f)===String(a)),v=r!==-1?c[r]:a;return o(v,i)})):l},e)}function an(e,t){let l=[];return(e||[]).forEach(n=>{var o,u;const s=n.filterDropdown||((o=n?.slots)==null?void 0:o.filterDropdown)||n.customFilterDropdown;if(n.filters||s||"onFilter"in n)if("filteredValue"in n){let i=n.filteredValue;s||(i=(u=i?.map(String))!=null?u:i),l.push({column:n,key:n.columnKey,filteredKeys:i,forceFiltered:n.filtered})}else l.push({column:n,key:n.columnKey,filteredKeys:t&&n.defaultFilteredValue?n.defaultFilteredValue:void 0,forceFiltered:n.filtered});"children"in n&&(l=[...l,...an(n.children||[],t)])}),l}function Ii(e,t,l,n){const o=F(an(l.value,!0)),u=F([]);qe(()=>{const a=an(l.value,!1);let c=[];const r=a.every(({filteredKeys:v})=>v===void 0);if(r)c=o.value;else{const v=a.every(({filteredKeys:f})=>f!==void 0);ht(r||v,"Table","`FilteredKeys` should all be controlled or not controlled.")}u.value===c||Sl(u.value,c)||(u.value=c)});const s=h(()=>qn(u.value)),i=h(()=>Zn(t.value,u.value));return{filterStates:u,filters:s,filterData:i,getFilters:a=>Zn(t.value,a),changeFilter:a=>{const c=u.value.filter(({key:r})=>r!==a.key);c.push(a),o.value=c,n(qn(c),c)}}}function Ti(e,t){let l=0,n=e.length-1;for(;l<n;){const o=l+Math.floor((n-l)/2);t(e[o])?n=o:l=o+1}return l}function Ei(e,t,l,n,o,u){const s=ce([]),i=ce({}),a=ce({}),c=F(0),r=h(()=>e.size==="small"?39:e.size==="middle"?47:55),v=h(()=>e.size==="small"?e.rowHeight||39:e.size==="middle"?e.rowHeight||47:e.rowHeight||55);let f;const d=F(0),p=F(-1),m=F(0);qe(()=>{const g=Wa(s.value,H=>H<c.value-l.value-Al);m.value=g<0?0:g});const y=F(0);he(n,()=>{y.value=n.value},{immediate:!0}),qe(()=>{if(t.value.length===s.value.length)if(o.value)if(l.value){let g=Ti(s.value,N=>N>=y.value-Al)-1;g=g<0?0:g,d.value=g>m.value?m.value:g;let H=vo(s.value,N=>N>=y.value+l.value+Al,d.value);H=H>=0?H:s.value.length-1,p.value=H>s.value.length-1?s.value.length-1:H}else d.value=0,p.value=-1;else d.value=0,p.value=t.value.length-1});const C=ce({}),b=F(!1);setTimeout(()=>{b.value=!0});const T=F(!0),k=F(!1),L=ce({});let V;const j=()=>{We.cancel(V),V=We(()=>{const g=C.value,H={};let N=!1;Object.values(L.value).forEach(({rowKey:S,height:M})=>{H[S]=H[S]||0,M>H[S]&&(H[S]=M)});for(const[S,M]of Object.entries(H))g[S]!==M&&(g[S]=M,N=!0);N&&(C.value=g,k.value=!k.value)})};let D;he([d,p,b],([g,H],[N,S])=>{b.value?T.value=g===N&&H===S:T.value=!0}),he([k,i],()=>{We.cancel(D),D=We(()=>{const g=r.value,H=C.value,N=i.value,S=a.value,M=t.value,A=M.length,G={};let x=0;const K=[];for(let R=0;R<A;R++){const{rowKey:O}=M[R],J=N[O]!==void 0?N[O]:H[O]===void 0?S[O]:H[O];G[O]=J,K.push(x),x+=J===void 0?g:J}a.value=G,c.value=x,s.value=K},T.value?0:1)}),ct(()=>{We.cancel(V),We.cancel(D)});const q=g=>{var H,N;const S={},M=r.value,A={},G=C.value,x=g.length;if(typeof e.rowHeight=="function")for(let K=0;K<x;K++){const{record:R,rowKey:O,isExpandRow:J=!1}=g[K];let de=e.rowHeight(R,J,M);de=Ln(de)?de:void 0,S[O]=de,A[O]=(H=de??G[O])!=null?H:0}else{let K=e.rowHeight;if(Ln(K))for(let R=0;R<x;R++){const{rowKey:O,isExpandRow:J=!1}=g[R];J&&(K=void 0),S[O]=K,A[O]=(N=K??G[O])!=null?N:0}else for(let R=0;R<x;R++){const{rowKey:O}=g[R];S[O]=void 0,A[O]=G[O]}}i.value=S,C.value=A};return he([t,v],([g])=>{q(g||[]),b.value=!1,setTimeout(()=>{b.value=!0})},{immediate:!0}),{rowPosition:s,rowHeights:i,viewportHeight:c,addHeight:(g,H,N,S)=>{We.cancel(f)},mergedRowHeights:a,startIndex:d,endIndex:p,getRowHeight:(g,H=1)=>{const N=t.value,S=Math.min(N.length-1,g+H-1);let M=0;const A=a.value;for(let G=g;G<=S;G++){const{rowKey:x}=N[G];M+=A[x]===void 0?r.value:A[x]}return M},addRowHeight:(g,H,N)=>{const S=L.value[g]||{};(S.rowKey!==H||S.height!==N)&&(L.value[g]={rowKey:H,height:N},j())},removeRowHeight:g=>{L.value[g]&&(delete L.value[g],j())},getRowPositionByKey:g=>{var H;const N=(H=u.value[g])==null?void 0:H.flattenIndex;if(N===void 0){ht(!1,"scrollTo",`\`rowKey = ${g}\` is Invalid`);return}return s.value[N]}}}function Hi(e,t){return`${e}-${t}`}const Jn=()=>({});function Oi(e,t,l,n,o,u){const s=ce([]),i=ce({}),a=ce([]),c=ce([]),r=ce(new Map),v=ce(Jn);return qe(()=>{var f;v.value=((f=u.value)==null?void 0:f.getCheckboxProps)||Jn}),he([e,t,n,l],()=>{const f=n.value,d=l.value,p=t.value,m=o.value,y={},C=[],b=[],T=new Map;let k=0;const L=(V,j,D,q=0,g=null)=>{const H=[],N=v.value;return V.forEach((S,M)=>{const A=f(S,M),G=N?.(S),x=Hi(g?g.pos:"0",M),K=D&&d?.has(A),R={record:S,indent:j,rowKey:A,rowIndex:M,pos:x,level:q,flattenIndex:k},O=Object.assign({parent:g},R);if(y[A]=O,C.push(A),T.set(A,G),G?.disabled||b.push(A),O.parent&&(O.parent.children=O.parent.children||[],O.parent.children.push(O)),D&&(H.push(R),k+=1),D&&j===0&&m==="row"){const J=`__Internal__Expand__Key_${A}`;K&&(H.push({record:S,indent:j,rowKey:J,isExpandRow:!0,rowIndex:M,pos:x,level:q,flattenIndex:k}),k+=1)}S&&typeof S=="object"&&p in S&&H.push(...L(S[p]||[],j+1,K,q+1,O))}),H};s.value=L(e.value,0,!0),i.value=y,a.value=C,c.value=b,r.value=T},{immediate:!0}),{flattenData:s,keyEntities:i,pageDataRowKeys:a,pageDataEnableRowKeys:c,checkboxPropsMap:r,getRowFlattenIndexByKey:f=>{var d;return(d=i.value[f])==null?void 0:d.flattenIndex},isMyChildren:(f,d)=>{var p,m;if(f===d||d===void 0)return!1;let y=i.value[d],C=!1;for(;y&&!C;){if(((p=y.parent)==null?void 0:p.rowKey)===f){C=!0;break}y=i.value[(m=y.parent)==null?void 0:m.rowKey]}return C},getRowByFlattenIndex:f=>s.value[f]}}const vl=10,Bi=["5","10","20","50"];function Di(e,t){const l={current:t.current,pageSize:t.pageSize};return Object.keys(e&&typeof e=="object"?e:{}).forEach(o=>{const u=t[o];typeof u!="function"&&(l[o]=u)}),l}function Mi(...e){const t={};return e.forEach(l=>{l&&Object.keys(l).forEach(n=>{const o=l[n];o!==void 0&&(t[n]=o)})}),t}function Fi(e,t,l,n){const o=bl({current:1,pageSize:vl,pageSizeOptions:Bi}),u=h(()=>t.size),s=h(()=>{const{pagination:f}=t;if(t.pagination===!1)return{};const{total:d=0,...p}=f&&typeof f=="object"?f:{},m=Mi(o,p,{total:d>0?d:e.value}),y=Math.ceil((d||e.value)/m.pageSize);m.current>y&&(m.current=y||1);const C=u.value==="small"||u.value==="middle"?"small":void 0;return m.size=m.size||C,m}),i=(f=1,d)=>{o.current=f,o.pageSize=d||s.value.pageSize||vl};let a;const c=(f,d)=>{clearTimeout(a),a=setTimeout(()=>{var p,m,y,C,b;f===s.value.current&&(d||((p=s.value)==null?void 0:p.pageSize))===((m=s.value)==null?void 0:m.pageSize)||(t.pagination&&((C=(y=t.pagination).onChange)==null||C.call(y,f,d)),i(f,d),n?.(f,d||((b=s.value)==null?void 0:b.pageSize)||vl))},0)};ct(()=>{clearTimeout(a)});const r=h(()=>{const f=t.direction==="rtl"?"left":"right",{position:d}=s.value,p={};if(t.pagination===!1)return{};if(d!==null&&Array.isArray(d)){const m=d.find(b=>b.indexOf("top")!==-1),y=d.find(b=>b.indexOf("bottom")!==-1),C=d.every(b=>`${b}`=="none");m||y||C||(p.bottom=f),m&&(p.top=m.toLowerCase().replace("top","")),y&&(p.bottom=y.toLowerCase().replace("bottom",""))}else p.bottom=f;return p}),v=h(()=>{const f=l.value;if(t.pagination===!1||!s.value.pageSize)return f;const{current:d=1,total:p=0,pageSize:m=vl}=s.value;return f.length<p?f.length>m?(ht(!1,"Table","`dataSource` length is less than `pagination.total` but large than `pagination.pageSize`. Please make sure your config correct data with async mode."),f.slice((d-1)*m,d*m)):f:f.slice((d-1)*m,d*m)});return{mergedPagination:s,onChange:c,onShowSizeChange:(f,d)=>{var p,m;c(f,d),t.pagination!==!1&&((m=(p=t.pagination)==null?void 0:p.onShowSizeChange)==null||m.call(p,f,d))},pos:r,refreshPagination:i,pageData:v}}const Qn=(e,t,l,n=4)=>{if(e==t)return We(()=>({}));const o=()=>(e+=(t-e)/n,Math.abs(e-t)<1?(l(t,!0),We(()=>({}))):(l(e,!1),We(o)));return o()};function Ai(e,t,l,n,o,u,s,i,a){const c=ce([]),r=ce([]);let v={},f=!0;return he([t,n,o],()=>{var d;if(l.value.length!==t.value.length)return;const p=[],m=[],y=[],C={},b=Math.min(n.value+2e3,o.value+1),T=((d=l.value)==null?void 0:d.slice(n.value,b))||[],k=t.value.slice(n.value,b)||[],L=i(u.value);if(l.value[L]&&(L<n.value||L>=b)&&(T.push(l.value[L]),k.push(t.value[L])),a.value){const D=a.value.rowIndex;l.value[D]&&(D<n.value||D>=b)&&(T.push(l.value[D]),k.push(t.value[D]))}T.forEach((D,q)=>{const g=v[D.rowKey];g!==void 0?(p[g]=D,m[g]=k[q],C[D.rowKey]=g):y.push([D,k[q]])});const V=y[0];u.value!==void 0&&s.value&&V&&(f&&(y.shift(),y.push(V)),f=!f);let j=0;y.forEach(([D,q])=>{const g=vo(p,H=>!H,j);g!==-1?(j=g,p[g]=D,m[g]=q,C[D.rowKey]=g):(C[D.rowKey]=p.length,p.push(D),m.push(q))}),v=C,c.value=p,r.value=m},{immediate:!0}),{data:c,pos:r}}const zi=({leftColumns:e,rightColumns:t,visibleCenterColumns:l,allColumns:n,data:o,mergedRowHeights:u,getColumnPosition:s,bodyWidth:i,leftWidth:a,centerWidth:c,getRowHeight:r,customCell:v})=>{const f=ce({}),d=ce({}),p=ce(new Map),m=(y,C,b,T,k)=>{var L,V,j,D;const{customRender:q,originColumn:g,dataIndex:H,columnIndex:N,left:S,customCell:M}=C,A={},G=(V=(L=M||v.value)==null?void 0:L({record:T,rowIndex:b,column:C}))!=null?V:{},x=Object.assign({overflow:k},Er(G.style||{})),K=Object.assign({},G);if(q){const O=Io(T,H),J=q({text:O,value:O,record:T,index:b,column:g});J&&Co(J)&&!ur(J)&&!zt(J)?(Object.assign(K,J.props||{}),A.children=J.children):A.children=J}K.colSpan=(j=K.colSpan)!=null?j:1,K.rowSpan=(D=K.rowSpan)!=null?D:1;const{width:R}=s(N,K.colSpan);return Object.assign(x,{width:`${R}px`,left:S-y+"px"}),R===0&&(x.display="none"),K.colSpan>1&&(x.zIndex=1),K.rowSpan>1&&(x.height=`${r(b,K.rowSpan)-1}px`),A.props=Object.assign({},K,{style:{...K.style,...x}}),A};return qe(()=>{const y={},C={},b=(L,V,j,D,q,g,H,N)=>{var S,M,A,G;const x=j.length;let K=null,R=0;for(let O=0;O<x;O++){const{columnIndex:J,columnKey:de}=j[O],z=m(V,j[O],q,g,H);y[D][de]=z,(S=z.props)!=null&&S.rowSpan&&(C[D]=!0),O===0&&((M=z.props)==null?void 0:M.colSpan)===0&&(R=J)}if(R!==0)for(let O=R-1;O>0;O--){const J=n.value[O];if(J.fixed)break;const de=m(V,J,q,g,H);if(((A=de.props)==null?void 0:A.colSpan)!==0){K=J,y[D][J.columnKey]=de,(G=de.props)!=null&&G.rowSpan&&(C[D]=!0);break}}if(K){const O=j.slice();O.push(K),N?.set(D,O)}else N?.set(D,j)},T=new Map,k=o.value.length;for(let L=0;L<k;L++){if(!o.value[L])continue;const{record:V,isExpandRow:j,rowKey:D,rowIndex:q}=o.value[L];y[D]={};const g=u.value[D]?"hidden":"initial";j?y[D][Qt]={props:{style:{left:"0px",width:`${i.value}px`,zIndex:1}}}:(b(0,0,e.value,D,q,V,g),b(0,a.value,l.value,D,q,V,g,T),b(0,a.value+c.value,t.value,D,q,V,g))}f.value=y,d.value=C,p.value=T}),{allCellProps:f,hasMultiRowSpanInfo:d,centerRowColumnsMap:p}},Zo=Symbol("TableSlotsContext"),Rt=()=>Je(Zo,{});var Li=Pe({name:"TableSlotsContextProvider",inheritAttrs:!1,props:{value:Object},setup(e,{slots:t}){const l=bl({});return he(()=>e.value,()=>{Pr(l),Object.assign(l,e.value)},{immediate:!0}),lt(Zo,l),()=>{var n;return(n=t.default)==null?void 0:n.call(t)}}}),Ni=Pe({name:"MeasureWidth",inheritAttrs:!1}),Be=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};const Wi={style:{position:"absolute",top:"0",left:"0","z-index":"-999",width:"1px",height:"0",padding:"0",margin:"0",overflow:"hidden","pointer-events":"none"}};function _i(e,t,l,n,o,u){return I(),ee("div",Wi)}var Vi=Be(Ni,[["render",_i]]);const ji=typeof window<"u"?window:void 0;function fl(e){var t;const l=Gt(e);return(t=l?.$el)!=null?t:l}function ml(e,t,l={}){const{window:n=ji,ignore:o,capture:u=!0,detectIframe:s=!1}=l;if(!n)return;const i=F(!0);let a;const c=m=>{n.clearTimeout(a);const y=fl(e);!y||y===m.target||m.composedPath().includes(y)||!i.value||t(m)},r=m=>o&&o.some(y=>{const C=fl(y);return C&&(m.target===C||m.composedPath().includes(C))}),v=m=>{const y=fl(e);i.value=!!y&&!m.composedPath().includes(y)&&!r(m)},f=m=>{if(m.button===0){const y=m.composedPath();m.composedPath=()=>y,a=n.setTimeout(()=>c(m),50)}},d=m=>{var y;const C=fl(e);((y=document.activeElement)==null?void 0:y.tagName)==="IFRAME"&&!C?.contains(document.activeElement)&&t(m)};n.addEventListener("click",c,{passive:!0,capture:u}),n.addEventListener("pointerdown",v,{passive:!0}),n.addEventListener("pointerup",f,{passive:!0}),s&&n.addEventListener("blur",d);const p=()=>{n.removeEventListener("click",c),n.removeEventListener("pointerdown",v),n.removeEventListener("pointerup",f),n.removeEventListener("blur",d)};return ct(()=>{p()}),p}function Jo(e,t,l,n){const{width:o,height:u}=l,{width:s,height:i}=n,a=Math.floor(o),c=Math.floor(u);t==="width"?a!==s&&e.dispatchEvent(new CustomEvent("resizewidth",{detail:{width:a}})):t==="height"?c!==i&&e.dispatchEvent(new CustomEvent("resizeheight",{detail:{height:c}})):(a!==s||c!==i)&&e.dispatchEvent(new CustomEvent("resize",{detail:{width:a,height:c}})),e.__resizeObserver__rect={width:a,height:c}}function eo(e){e.__resizeObserver__listeners&&(e.__resizeObserver__listeners.unobserve(e),e.__resizeObserver__listeners.disconnect(),e.__resizeObserver__listeners=null)}function to(e){return function(t){const l=t[0].target;Jo(l,e,l.getBoundingClientRect(),l.__resizeObserver__rect||{})}}const Wt={created(e,t){const{arg:l,value:n=!0}=t;if(n){const o=new Xl(to(l));o.observe(e),e.__resizeObserver__listeners=o}},updated(e,t){const{arg:l,value:n=!0}=t;if(n&&!e.__resizeObserver__listeners){const o=new Xl(to(l));o.observe(e),e.__resizeObserver__listeners=o}else n||eo(e)},beforeUnmount(e,t){const{arg:l,value:n=!0}=t;n&&(Jo(e,l,{width:0,height:0},e.__resizeObserver__rect||{}),eo(e))}};var Ui=Pe({name:"PopupContainer",directives:{resize:Wt},props:{prefixCls:{type:String}},setup(e,{expose:t}){const l=ce(),n=ce(),{registerPopupContext:o,visible:u}=mn();let s=null;const i=v=>{s=null,u.value=!1,v.style.opacity="0",a.value=null},a=ce();let c;const r=()=>{const v=l.value;if(!v||!u.value||!n.value){u.value=!1;return}if(!s||!document.contains(s))return;const{x:f,y:d}=s.getBoundingClientRect(),{left:p,top:m,width:y}=n.value.getBoundingClientRect(),C=v.offsetWidth,b=v.children[0],T=Math.min(v.scrollHeight,b.scrollHeight);v.style.opacity="1",v.style.height=`${T}px`;let k=f-p;const L=d-m;k+C>y&&(k=y-C),v.style.left=`${k}px`,v.style.top=`${L}px`};return ml(l,()=>{i(l.value)}),t({alignPopup:r}),o({showPopupContent:(v,f,d)=>{u.value=!0,a.value=()=>v?v({event:f,...d,popupContaniner:l.value,hidePopup:()=>{i(l.value)}}):null,s=f.currentTarget,clearTimeout(c),c=setTimeout(()=>{r()}),f.preventDefault()},hidePopupContent:i,getPopupContainer:()=>l.value}),{hidePopup:i,alignPopup:r,handlePopupResize:()=>{r()},handleRootResize:()=>{r()},targetRef:l,rootRef:n,popupContent:a,visible:u}}});function Xi(e,t,l,n,o,u){const s=Lt("resize");return I(),ee("div",{ref:"rootRef",class:_(`${e.prefixCls}-popup`),style:{position:"absolute",top:"0",left:"0",right:"0"},onResize:t[1]||(t[1]=(...i)=>e.handleRootResize&&e.handleRootResize(...i))},[Ze(oe("div",{ref:"targetRef",class:_(`${e.prefixCls}-popup-container`)},[Ze((I(),ee("div",{class:_(`${e.prefixCls}-popup-container-inner`),onResize:t[0]||(t[0]=(...i)=>e.handlePopupResize&&e.handlePopupResize(...i))},[(I(),fe(it(e.popupContent)))],34)),[[s]])],2),[[hl,e.visible]])],34)}var Yi=Be(Ui,[["render",Xi]]);const Qo=Symbol("HeaderContextProps"),ea=e=>{lt(Qo,e)},ta=()=>Je(Qo,{});let _l;function la(){return _l||(_l=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),_l}let Vl;function Cn(){return Vl||(Vl=(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream),Vl}const lo=/Chrome\/(\d+)/.exec(navigator.userAgent);lo&&+lo[1];function bn(e,t){if(e?.classList&&t){const l=Array.isArray(t)?t:t.split(" ");e.classList.add(...l)}}function Sn(e,t){if(e?.classList&&t){const l=Array.isArray(t)?t:t.split(" ");e.classList.remove(...l)}}var xn=Pe({props:{onlyAutoShow:{type:Boolean},notShowAuto:{type:Boolean}},setup:e=>{const t=je(),l=h(()=>`${t.props.prefixCls}`),n=F(),o=F(),u=F(!1),s=h(()=>{const T=`${t.scrollBarSize.value||15}px`;return{height:T,minHeight:T,maxHeight:T,width:"100%"}}),i=h(()=>{const T=`-${t.scrollBarSize.value||15}px`,k=t.props.horizontalScrollSticky,L=t.props.paginationSticky;if(k===!0){let V=0;return t.pos.value.bottom&&L&&(V+=L===!0?t.bottomPaginationHeight.value:(L.offsetBottom||0)+t.bottomPaginationHeight.value),{position:"sticky","z-index":8,bottom:`${V}px`,marginTop:T}}return{}}),a=la()||Cn(),c=h(()=>t.scrollBarSize.value===0&&a),r=h(()=>({[`${l.value}-horizontal-scroll`]:!0,[`${l.value}-horizontal-scroll-hidden`]:t.scrollBarSize.value===0,[`${l.value}-scrollbar-active`]:u.value,[`${l.value}-apple-scroll`]:a})),v=h(()=>t.showHorizontalScrollbar.value&&(!e.onlyAutoShow||c.value)&&(!e.notShowAuto||!c.value)),f=h(()=>t.showVerticalScrollbar.value),d=h(()=>{const T=`${t.bodyMaxWidth.value}px`;return{...s.value,width:T,minWidth:T,maxWidth:T}}),p=h(()=>({width:`${t.scrollBarSize.value}px`,height:"100%",overflowX:"hidden"})),{addHScrollDom:m,removeHScrollDom:y}=Rl();let C=null;const b=()=>{c.value&&(clearTimeout(C),bn(o.value,`${l.value}-scrolling`),C=setTimeout(()=>{Sn(o.value,`${l.value}-scrolling`)},500))};return gt(()=>{he(n,()=>{n.value&&(y(n.value),n.value.removeEventListener("scroll",b),m(n.value,!0),n.value.addEventListener("scroll",b,{passive:!0}))},{immediate:!0})}),ct(()=>{clearTimeout(C),n.value&&(y(n.value),n.value.removeEventListener("scroll",b))}),()=>v.value?X("div",{ref:o,class:r.value,"aria-hidden":"true",style:{...s.value,...i.value},onMousedown:()=>u.value=!0,onMouseenter:()=>u.value=!0,onMouseleave:()=>u.value=!1,onTouchend:()=>u.value=!1},[X("div",{key:"center",ref:n,class:`${l.value}-horizontal-scroll-viewport`,style:s.value},[X("div",{class:`${l.value}-body-horizontal-scroll-container`,style:d.value},null)]),f.value&&X("div",{style:p.value},null)]):null}});const Gi=()=>{const e=je().allColumns.value;return X("colgroup",null,[e.map(t=>{const{finallyWidth:l}=t;return X("col",{style:{width:`${l}px`}},null)})])},ll=(e,{slots:t})=>{var l;return(l=t.default)==null?void 0:l.call(t)};ll.displayName="RenderSlot";ll.inheritAttrs=!1;const nl=(e,{slots:t})=>{var l,n,o;return typeof e.vnode=="function"?((l=e.vnode)==null?void 0:l.call(e,e.props||{}))||((n=t.default)==null?void 0:n.call(t)):e.vnode||((o=t.default)==null?void 0:o.call(t))};nl.props=["vnode","props"];nl.inheritAttrs=!1;function na(e,t,l,n,o="ltr"){const u=l[e]||{},s=l[t]||{};let i,a;u.fixed==="left"?i=n.left[e]:s.fixed==="right"&&(a=n.right[t]);let c=!1,r=!1,v=!1,f=!1;const d=l[t+1],p=l[e-1];return o==="rtl"?i!==void 0?f=!(p&&p.fixed==="left"):a!==void 0&&(v=!(d&&d.fixed==="right")):i!==void 0?c=!(d&&d.fixed==="left"):a!==void 0&&(r=!(p&&p.fixed==="right")),{fixLeft:i,fixRight:a,lastFixLeft:c,firstFixRight:r,lastFixRight:v,firstFixLeft:f,isSticky:n.isSticky}}const qi=`
<svg viewBox="64 64 896 896" focusable="false" data-icon="holder" width="1em" height="1em" fill="currentColor" aria-hidden="true">
  <path d="M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"></path>
</svg>
`,oa='<svg viewBox="64 64 896 896" focusable="false" data-icon="stop" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"></path></svg>',Zi='<svg viewBox="0 0 512 512" focusable="false" data-icon="stop" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M464 208L352 96L240 208"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M352 113.13V416"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M48 304l112 112l112-112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M160 398V96"></path></svg>',Ji='<svg viewBox="0 0 512 512" focusable="false" data-icon="stop" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M304 48l112 112l-112 112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M398.87 160H96"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M208 464L96 352l112-112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M114 352h302"></path></svg>',Qi="ICON_TYPE_DOWN",no="ICON_TYPE_FORBID",oo=()=>document.fullscreenElement||document.body,aa=({columnKey:e,disabled:t,column:l,domRef:n})=>{const o=F(!1),u=Je(yn),{prefixCls:s,draggingColumnKey:i,onColumnDragEnd:a,scrollTo:c,leftWidth:r,rightWidth:v,centerWidth:f,bodyWidth:d,leftHeaderColumns:p,visibleCenterHeaderColumns:m,rightHeaderColumns:y,columnDrag:C}=je(),b=Je(tl,!1),T=F(0),k=F();qe(()=>{l.value.fixed==="right"?(T.value=r.value+f.value,k.value="right"):l.value.fixed?(T.value=0,k.value="left"):(T.value=r.value,k.value="center"),b&&(T.value=0)});const{dragColumnPlaceholderRef:L,headerRef:V}=ta(),j=Rt();let D;const q=F(),g=F(),H=F(),N=F(),S=document.createElement("div");let M,A;const G=F(0),x=F(!0);let K=null,R={},O=0;const J=[];let de=null;const z=F(Qi),ie=h(()=>{switch(k.value){case"left":return p.value;case"center":return m.value;case"right":return y.value;default:return[]}}),me=h(()=>{let $=()=>!1;return b&&k.value!=="center"?$=()=>{var P,U;const{x:Z}=R,re=k.value==="left"?((P=u?.value)==null?void 0:P.scrollLeft)+Z:((U=u?.value)==null?void 0:U.scrollLeft)+Z+d.value-v.value,ue=k.value==="left"?re+r.value:re+v.value,W=window.pageXOffset||document.documentElement.scrollLeft;return g.value+bt<=re?(S.style.left=re+W-20+"px",!0):g.value+bt>=ue?(S.style.left=ue+W-20+"px",!0):!1}:k.value!=="center"?$=()=>{const{x:P,width:U}=R,Z=window.pageXOffset||document.documentElement.scrollLeft;return g.value+bt<=P?(S.style.left=P+Z-20+"px",!0):g.value+bt>=P+U?(S.style.left=P+Z+U-20+"px",!0):!1}:$=()=>{const{x:P,width:U}=u.value.getBoundingClientRect(),Z=window.pageXOffset||document.documentElement.scrollLeft;return g.value+bt<=P+r.value?(S.style.left=P+Z+r.value-20+"px",!0):g.value+bt>=P+U-v.value?(S.style.left=P+Z+U-v.value-20+"px",!0):!1},$}),Se=()=>{const{y:$,height:P}=R,U=window.pageYOffset||document.documentElement.scrollTop;return q.value+pl<=$?(S.style.top=$+U-20+"px",!0):q.value>$+P?(S.style.top=$+U+P-10+"px",!0):!1},Q=$=>{$.forEach(P=>{const{target:U,type:Z,listener:re,options:ue}=P;U.addEventListener(Z,re,ue)}),J.push(()=>{$.forEach(P=>{const{target:U,type:Z,listener:re,options:ue}=P;U.removeEventListener(Z,re,ue)})})},ae=ce(),ve=($,P)=>{var U;if(ae.value=$,!o.value){if(hn($,P,Fo))return;o.value=!0,H.value=$.clientX,i.value=e.value,O=((U=n.value)==null?void 0:U.offsetWidth)||0,oo().appendChild(S),le()}x.value=!0,g.value=$.clientX,q.value=$.clientY,Se()?(x.value=!1,clearInterval(A)):S.style.top=$.pageY-10+"px",me.value()?x.value=!1:S.style.left=$.pageX-10+"px"};let pe,ye;const we=$=>{var P;for(let U=0;U<$.length;U++)if(((P=$[U])==null?void 0:P.identifier)===ye?.identifier)return $[U];return null},Ke=$=>{o.value&&(o.value=!1,oo().removeChild(S)),ae.value=$,K=null,ye=null,pe=null,clearInterval(A),i.value="",L.value.style.opacity="0",J.forEach(P=>P()),J.length=0,We.cancel(D)},Ie=$=>{$.cancelable&&$.preventDefault()},Ae=$=>{if(N.value=null,t.value)return;o.value=!1;const P=$.touches[0];pe=P,ye=P,R=V.value.getBoundingClientRect();const U=n.value;Q([{target:document,type:"touchmove",listener:Ie,options:{passive:!1}},{target:U,type:"touchmove",listener:Ne,options:{passive:!0}},{target:U,type:"touchend",listener:ze,options:{passive:!0}},{target:U,type:"touchcancel",listener:ze,options:{passive:!0}}])},Ne=$=>{const P=we($.touches);P&&ve(P,ye)},ze=$=>{let P=we($.touches);P||(P=pe),Ke(P)},ne=$=>{if($.preventDefault(),N.value=null,t.value)return;o.value=!1,K=$,R=V.value.getBoundingClientRect();const P=document;Q([{target:P,type:"mousemove",listener:Te},{target:P,type:"mouseup",listener:Le},{target:P,type:"contextmenu",listener:se}])},se=$=>$.preventDefault(),Te=$=>{ve($,K)},Le=$=>{Ke($)},B=h(()=>l.value.drag||l.value.drag===void 0&&C.value);gt(()=>{el(()=>{he([n,B],([$],[P])=>{P&&(P.removeEventListener("mousedown",ne),P.removeEventListener("touchstart",Ae)),$&&B.value&&($.addEventListener("mousedown",ne),$.addEventListener("touchstart",Ae,{passive:!0}))},{flush:"post",immediate:!0})})}),ct(()=>{n.value&&(n.value.removeEventListener("mousedown",ne),n.value.removeEventListener("touchstart",Ae)),We.cancel(D),gl(null,S)});const E=()=>{let $=Ji;return z.value===no&&($=oa),j.columnDragGhost?j.columnDragGhost({targetColumn:wt(N.value),column:l.value,icon:X("span",{class:`${s.value}-drag-ghost-image-icon`,innerHTML:$},null),allowed:x.value,dragging:o.value,event:ae.value}):[X("span",{class:`${s.value}-drag-ghost-image-icon`,innerHTML:$},null),X("span",{class:`${s.value}-drag-ghost-image-label`,style:{maxWidth:`${O}px`}},[l.value.title])]},le=()=>{de||(de=X(E),gl(de,S))};he([s],()=>{S.className=`${s.value}-drag-ghost-image`},{immediate:!0}),he([g,k],()=>{clearInterval(A),k.value==="center"&&x.value&&(A=setInterval(()=>{const{x:$,width:P}=u.value.getBoundingClientRect();if(g.value+30>$+P-v.value)c({left:u.value.scrollLeft+zl},"auto",!0),clearTimeout(M),M=setTimeout(()=>{G.value=u.value.scrollLeft+zl});else if(g.value<$+r.value){const U=Math.max(u.value.scrollLeft-zl,0);c({left:U},"auto",!0),clearTimeout(M),M=setTimeout(()=>{G.value=U})}},30))});const w=()=>{const $=g.value,{x:P}=V.value.getBoundingClientRect(),U=wt(ie.value),Z=T.value-P;let re=0,ue=0;b&&k.value!=="center"&&(ue=u.value.scrollLeft,re=k.value==="left"?ue:ue+d.value-v.value-r.value-f.value);for(let W=0,ge=U.length;W<ge;W++){const{left:xe,finallyWidth:$e}=U[W],He=xe-Z+re;!U[W].__Internal__Column__&&$>He&&$<He+$e&&(N.value=U[W])}N.value&&N.value.left!==l.value.left?(L.value.style.opacity="1",L.value.style.zIndex=l.value.fixed?"3":"unset",N.value.left>l.value.left?L.value.style.left=`${N.value.left-T.value+N.value.finallyWidth+re-1}px`:L.value.style.left=`${N.value.left-T.value+re-1}px`):L.value.style.opacity="0"};he([o,g,x,G],()=>{We.cancel(D),D=We(()=>{o.value&&!x.value&&(z.value=no),o.value&&x.value?(z.value="",w()):L.value.style.opacity="0"})}),he(o,()=>{!o.value&&x.value&&N.value&&(We.cancel(D),a({column:l.value.originColumn,targetColumn:wt(N.value.originColumn),event:ae.value,dir:l.value.left<=N.value.left?"right":"left"}))})};var es=Pe({name:"HeaderCellTitle",components:{ExclamationCircleOutlined:_a,InfoCircleOutlined:ho,Popover:fo,Tooltip:Ot,RenderVNode:un},props:{column:{type:Object,default:()=>({})},prefixCls:String,wrapText:Boolean},setup(e){const t=Rt(),l=je(),n=Je(tl,!1),o=h(()=>l.sorterStates.value.map(({column:c,sortOrder:r})=>({column:c,order:r}))),u=h(()=>At(Ee,[st(t,"headerCell",{title:e.column.title,column:e.column.originColumn},()=>{var c,r;return[typeof e.column.title=="function"?e.column.title({column:e.column.originColumn,sortColumns:o.value,sortColumn:(c=o.value[0])==null?void 0:c.column,sortOrder:(r=o.value[0])==null?void 0:r.order}):e.column.title]})])),s=h(()=>{var c,r;return!!pn((r=(c=t.headerCellPopover)==null?void 0:c.call(t,{title:e.column.title,column:e.column.originColumn}))!=null?r:[])}),i=h(()=>e.column.showCellPopover===void 0?s.value:e.column.showCellPopover),a=h(()=>typeof i.value=="boolean"?{}:i.value);return{isShowPopover:s,tableSlotsContext:t,title:u,autoHeight:n,popoverProps:a,showCellPopover:i,altTitle:h(()=>e.column.showTitle&&typeof e.column.title=="string"?e.column.title:"")}}});const ts=["title"];function ls(e,t,l,n,o,u){var s;const i=te("RenderVNode"),a=te("ExclamationCircleOutlined"),c=te("Popover"),r=te("InfoCircleOutlined"),v=te("Tooltip");return I(),ee("span",{key:String("headerCell"in e.tableSlotsContext),class:_({[`${e.prefixCls}-header-cell-title-inner`]:!0}),title:e.altTitle,style:Re(`justify-content: ${e.column.align}`)},[oe("span",{class:_({[`${e.prefixCls}-cell-wrap-text`]:e.wrapText,[`${e.prefixCls}-cell-text-ellipsis`]:e.column.ellipsis!==!1&&!e.autoHeight})},[(I(),fe(it(e.title)))],2),e.showCellPopover?(I(),fe(c,Nt(_e({key:0},e.popoverProps)),Fa({content:ke(()=>[e.tableSlotsContext.headerCellPopover?(I(),fe(i,{key:0,vnode:e.tableSlotsContext.headerCellPopover({title:e.column.title,column:e.column.originColumn})},null,8,["vnode"])):Ce("v-if",!0)]),default:ke(()=>[X(a,{style:{"margin-inline-start":"3px","font-size":"12px"}})]),_:2},[(s=e.popoverProps)!=null&&s.title?void 0:{name:"title",fn:ke(()=>[(I(),fe(it(e.title)))]),key:"0"}]),1040)):Ce("v-if",!0),e.column.headerTooltip?(I(),fe(v,{key:1},{title:ke(()=>[e.column.headerTooltip===!0?(I(),fe(it(e.title),{key:0})):(I(),ee(Ee,{key:1},[Tt(mt(e.column.headerTooltip),1)],64))]),default:ke(()=>[X(r,{style:{"margin-inline-start":"3px","font-size":"12px"}})]),_:1})):Ce("v-if",!0)],14,ts)}var ra=Be(es,[["render",ls]]),ns=Pe({name:"TableHeaderSorter",components:{CaretDownOutlined:ja,CaretUpOutlined:Va,HeaderCellTitle:ra},inheritAttrs:!1,props:{column:{type:Object,default:()=>({})},columnKey:{type:[Number,String]},sorterState:Object,sorterOrder:[String,Boolean],sortDirections:Array,nextSortOrder:String,wrapText:Boolean,showFilter:Boolean},setup(e){const t=je(),l=h(()=>{var a;return(a=e.sortDirections)==null?void 0:a.includes(wl)}),n=h(()=>{var a;return(a=e.sortDirections)==null?void 0:a.includes(ln)}),o=h(()=>t.props.prefixCls),u=h(()=>({[`${o.value}-column-sorter`]:!0,[`${o.value}-column-sorter-full`]:l.value&&n.value})),s=h(()=>({[`${o.value}-column-sorter-up`]:!0,active:e.sorterOrder===wl})),i=h(()=>({[`${o.value}-column-sorter-down`]:!0,active:e.sorterOrder===ln}));return{showUpNode:l,showDownNode:n,className:u,prefixCls:o,upClass:s,downClass:i,tableContext:t}}});function os(e,t,l,n,o,u){const s=te("HeaderCellTitle"),i=te("CaretUpOutlined"),a=te("CaretDownOutlined");return I(),ee("div",{class:_({[`${e.prefixCls}-header-cell-title`]:!0,[`${e.prefixCls}-header-cell-filter-title`]:e.showFilter})},[X(s,{column:e.column,"wrap-text":e.wrapText,"prefix-cls":e.prefixCls},null,8,["column","wrap-text","prefix-cls"]),e.column.sorter?(I(),ee("span",{key:0,class:_(e.className)},[oe("span",{class:_(`${e.prefixCls}-column-sorter-inner`)},[e.showUpNode?(I(),fe(i,{key:0,class:_(e.upClass)},null,8,["class"])):Ce("v-if",!0),e.showDownNode?(I(),fe(a,{key:1,class:_(e.downClass)},null,8,["class"])):Ce("v-if",!0)],2)],2)):Ce("v-if",!0)],2)}var as=Be(ns,[["render",os]]);let ia=!1;try{const e=Object.defineProperty({},"passive",{get(){ia=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}var rs=ia;function ao(e,t,l,n){if(e&&e.addEventListener){let o=n;o===void 0&&rs&&(t==="touchstart"||t==="touchmove"||t==="wheel")&&(o={passive:!1}),e.addEventListener(t,l,o)}return{remove:()=>{e&&e.removeEventListener&&e.removeEventListener(t,l)}}}const ro={mouse:{move:"mousemove",stop:"mouseup"},touch:{move:"touchmove",stop:"touchend"}};var is=Pe({name:"DragHandle",props:{prefixCls:String,minWidth:{type:Number,default:Xn},maxWidth:{type:Number,default:1/0},column:{type:Object,default:void 0}},setup(e){let t=0,l={remove:()=>{}},n={remove:()=>{}};const o=je(),u=()=>{l.remove(),n.remove()};Cl(()=>{u()});const s=h(()=>typeof e.minWidth!="number"||isNaN(e.minWidth)?Xn:e.minWidth),i=h(()=>typeof e.maxWidth!="number"||isNaN(e.maxWidth)?1/0:e.maxWidth);let a,c=0;const r=F(!1),v=(b,T)=>{let k=0;b.touches?b.touches.length?k=b.touches[0].pageX:k=b.changedTouches[0].pageX:k=b.pageX;const L=t-k;let V=Math.max(c-L,s.value);V=Math.min(V,i.value),We.cancel(a),a=We(()=>{var j;(j=o.onResizeColumn)==null||j.call(o,V,e.column.originColumn,T)})},f=b=>{v(b,"move")},d=b=>{r.value=!1,v(b,"end"),u()},p=cn(),m=(b,T)=>{var k;r.value=!0,u(),c=p?.vnode.el.parentNode.offsetWidth,!(b instanceof MouseEvent&&b.which!==1)&&((k=o.onResizeColumn)==null||k.call(o,c,e.column.originColumn,"start"),b.stopPropagation&&b.stopPropagation(),t=b.touches?b.touches[0].pageX:b.pageX,l=ao(document.documentElement,T.move,f),n=ao(document.documentElement,T.stop,d))};return{handleDown:b=>{m(b,ro.mouse)},handleTouchDown:b=>{m(b,ro.touch)},dragging:r}}});function ss(e,t,l,n,o,u){return I(),ee("div",{class:_(`${e.prefixCls}-resize-handle ${e.dragging?"dragging":""}`),onMousedown:t[0]||(t[0]=ut((...s)=>e.handleDown&&e.handleDown(...s),["stop","prevent"])),"on:touchstartPassive":t[1]||(t[1]=ut((...s)=>e.handleTouchDown&&e.handleTouchDown(...s),["stop"])),onClick:t[2]||(t[2]=ut(()=>{},["stop","prevent"]))},[st(e.$slots,"default",{},()=>[oe("div",{class:_(`${e.prefixCls}-resize-handle-line`)},null,2)])],34)}var us=Be(is,[["render",ss]]);const cs=(e,{slots:t})=>{var l;return X("div",{onClick:n=>n.stopPropagation()},[(l=t.default)==null?void 0:l.call(t)])},_t=(e,{emit:t})=>{const{prefixCls:l,disabled:n,tabindex:o,id:u,style:s,class:i,checked:a,indeterminate:c,name:r,ariaLabel:v}=e;return X("label",{class:{[i||""]:!!i,[`${l}-checkbox`]:!0,[`${l}-checkbox-checked`]:a,[`${l}-checkbox-disabled`]:n,[`${l}-checkbox-indeterminate`]:c},style:s,tabindex:o,id:u},[X("input",{class:`${l}-checkbox-input`,checked:a,disabled:n,type:"checkbox",onClick:f=>{f.target.checked=a,t("change",f)},name:r,"aria-label":v===void 0?n?"This row is disabled selection":`Press Space to toggle row selection (${a?"checked":"unchecked"})`:v},null),X("span",{class:`${l}-checkbox-inner`},null)])};_t.displayName="Checkbox";_t.props=Ho();_t.emits=["change"];const ol=(e,{emit:t})=>{const{prefixCls:l,disabled:n,tabindex:o,id:u,style:s,class:i,checked:a,indeterminate:c,name:r,ariaLabel:v}=e;return X("span",{class:{[i||""]:!!i,[`${l}-radio`]:!0,[`${l}-radio-checked`]:a,[`${l}-radio-disabled`]:n,[`${l}-radio-indeterminate`]:c},style:s,tabindex:o,id:u},[X("input",{class:`${l}-radio-input`,checked:a,disabled:n,type:"radio",onClick:f=>{f.target.checked=a,t("change",f)},name:r,"aria-label":v===void 0?n?"This row is disabled selection":`Press Space to toggle row selection (${a?"checked":"unchecked"})`:v},null),X("span",{class:`${l}-radio-inner`},null)])};ol.displayName="Radio";ol.props=Ho();ol.emits=["change"];var ds=Pe({name:"FilterItems",inheritAttrs:!1,components:{Checkbox:_t,Empty:yl,Radio:ol,AMenu:vn,SubMenu:Ua,MenuItem:po,RenderSlot:Ea},props:{filters:Array,prefixCls:String,dropdownPrefixCls:String,filteredKeys:Array,filterMultiple:Boolean,locale:{type:Object,default:void 0},root:Boolean,getPopupContainer:Function,onSelectKeys:Function,onOpenChange:Function,onMenuClick:Function,openKeys:Array},setup(e){const{prefixCls:t}=je(),l=h(()=>e.root?{multiple:e.filterMultiple,getPopupContainer:e.getPopupContainer,onSelect:e.onSelectKeys,onDeselect:e.onSelectKeys,selectedKeys:e.filteredKeys,onOpenChange:e.onOpenChange,onClick:e.onMenuClick,openKeys:e.openKeys,class:`${e.prefixCls}-dropdown-menu`}:{});return{emptyImage:yl.PRESENTED_IMAGE_SIMPLE,menuProps:l,rootPrefixCls:t,props:e}}});const vs={key:1,style:{margin:"16px 0"}};function fs(e,t,l,n,o,u){const s=te("FilterItems",!0),i=te("SubMenu"),a=te("MenuItem"),c=te("Empty");return I(),fe(it(e.root?"AMenu":"RenderSlot"),Nt(dn(e.menuProps)),{default:ke(()=>[e.filters&&e.filters.length?(I(!0),ee(Ee,{key:0},$t(e.filters,(r,v)=>(I(),ee(Ee,{key:r.value===void 0?v:r.value},[r.children?(I(),fe(i,{title:r.text,"popup-class-name":`${e.prefixCls}-dropdown-submenu`,key:r.value===void 0?v:String(r.value)},{default:ke(()=>[(I(!0),ee(Ee,null,$t(r.children,(f,d)=>(I(),fe(s,_e({ref_for:!0},e.props,{key:f.value===void 0?d:String(f.value),filters:[f],root:!1}),null,16,["filters"]))),128))]),_:2},1032,["title","popup-class-name"])):(I(),fe(a,{key:r.value===void 0?v:String(r.value)},{default:ke(()=>{var f;return[(I(),fe(it(e.filterMultiple?"Checkbox":"Radio"),{"prefix-cls":e.rootPrefixCls,checked:(f=e.filteredKeys)==null?void 0:f.includes(r.value===void 0?v:String(r.value))},null,8,["prefix-cls","checked"])),oe("span",null,mt(r.text),1)]}),_:2},1024))],64))),128)):(I(),ee("div",vs,[X(c,{image:e.emptyImage,description:e.locale&&e.locale.filterEmptyText,"image-style":{height:24}},null,8,["image","description"])]))]),_:1},16)}var rn=Be(ds,[["render",fs]]),hs=Pe({name:"FilterDropdown",components:{FilterFilled:Xa,Dropdown:fn,FilterItems:rn,ProButton:cr,RenderVNode:un,FilterWrapper:cs},inheritAttrs:!1,props:{prefixCls:{type:String,default:""},column:{type:Object,required:!0}},setup(e){const t=je(),l=Rt(),n=F([]),o=F([]),u=h(()=>t.props.dropdownPrefixCls||"ant-dropdown"),s=h(()=>e.column.columnKey),i=h(()=>t.filterStates.value),a=h(()=>i.value.find(({key:g})=>s.value===g));he(a,()=>{var g;n.value=((g=a.value)==null?void 0:g.filteredKeys)||[]},{immediate:!0});const c=h(()=>{var g,H;return(H=(g=e.column)==null?void 0:g.getPopupContainer)!=null?H:t.props.getPopupContainer}),r=F(!1);ht(!("onFilterDropdownVisibleChange"in e.column),"@table","column.onFilterDropdownVisibleChange is deprecated. Please use column.onFilterDropdownOpenChange instead."),ht(!("filterDropdownVisible"in e.column),"@table","column.filterDropdownVisible is deprecated. Please use column.filterDropdownOpen instead.");const v=g=>{r.value=g;const{onFilterDropdownOpenChange:H,onFilterDropdownVisibleChange:N}=e.column||{},S=H||N;S?.(g)},f=Fe(()=>{const{filterDropdownVisible:g,filterDropdownOpen:H}=e.column||{},N=H??g;return typeof N=="boolean"?N:r.value});let d=0;const p=g=>{d=window.setTimeout(()=>{o.value=g})},m=()=>{window.clearTimeout(d)};Cl(()=>{window.clearTimeout(d)});const y=g=>{const H=g&&g.length?g:null,N=a.value;if(!(H!==null||N&&N.filteredKeys)||Sl(H,N?.filteredKeys))return null;const S={column:e.column,key:s.value,filteredKeys:H};t?.changeFilter(S)},C=({selectedKeys:g})=>{n.value=g||[]},b=()=>{v(!1),y(n.value)},T=()=>{n.value=[],v(!1),y([])},k=(g={closeDropdown:!0})=>{v(!g.closeDropdown),y(n.value)},L=h(()=>{const{filterDropdown:g,slots:H={},customFilterDropdown:N}=e.column;return g||H.filterDropdown&&l[H.filterDropdown]||N&&l.customFilterDropdown}),V=h(()=>({prefixCls:e.prefixCls,setSelectedKeys:g=>C({selectedKeys:g}),selectedKeys:n.value,confirm:k,clearFilters:T,filters:e.column.filters,column:e.column.originColumn,open:f.value})),j=h(()=>{var g,H,N,S,M;return((g=e.column)==null?void 0:g.filterIcon)||((N=(H=e.column)==null?void 0:H.slots)==null?void 0:N.filterIcon)&&l[(M=(S=e.column)==null?void 0:S.slots)==null?void 0:M.filterIcon]||l.customFilterIcon}),D=h(()=>{const{column:g}=e;return{filters:g.filters,prefixCls:e.prefixCls,filteredKeys:n.value,filterMultiple:g.filterMultiple===null||g.filterMultiple===void 0||g.filterMultiple,locale:t.locale.value,onSelectKeys:C,onOpenChange:p,onMenuClick:m,openKeys:o.value}}),q=Fe(()=>{var g;return!!((g=n.value)!=null&&g.length)});return{getPopupContainer:c,triggerOpen:v,mergedOpen:f,onReset:T,onConfirm:b,onDropdownOpenChange:g=>{v(g),g||L.value||b()},doFilter:k,filterItemsProps:D,onSelectKeys:C,filteredKeys:n,dropdownPrefixCls:u,filtered:q,locale:t.locale,customFilterDropdown:L,customFilterIcon:j,custocustomFilterDropdownProps:V}}});function ps(e,t,l,n,o,u){const s=te("RenderVNode"),i=te("FilterItems"),a=te("ProButton"),c=te("FilterWrapper"),r=te("FilterFilled"),v=te("Dropdown");return I(),fe(v,{trigger:["click"],open:e.mergedOpen,"get-popup-container":e.getPopupContainer,placement:"bottomRight","overlay-class-name":`${e.prefixCls}-dropdown-root`,onOpenChange:e.onDropdownOpenChange,onClick:t[0]||(t[0]=ut(()=>{},["stop"]))},{overlay:ke(()=>[X(c,{class:_(`${e.prefixCls}-dropdown`)},{default:ke(()=>[e.customFilterDropdown?(I(),fe(s,{key:0,vnode:e.customFilterDropdown(e.custocustomFilterDropdownProps)},null,8,["vnode"])):(I(),ee(Ee,{key:1},[X(i,_e(e.filterItemsProps,{root:"","dropdown-prefix-cls":e.dropdownPrefixCls,"get-popup-container":e.getPopupContainer,"prefix-cls":e.prefixCls}),null,16,["dropdown-prefix-cls","get-popup-container","prefix-cls"]),oe("div",{class:_(`${e.prefixCls}-dropdown-btns`)},[X(a,{type:"link",size:"small",disabled:e.filteredKeys.length===0,onClick:e.onReset},{default:ke(()=>[Tt(mt(e.locale.filterReset),1)]),_:1},8,["disabled","onClick"]),X(a,{type:"primary",size:"small",onClick:e.onConfirm},{default:ke(()=>[Tt(mt(e.locale.filterConfirm),1)]),_:1},8,["onClick"])],2)],64))]),_:1},8,["class"])]),default:ke(()=>[oe("span",{class:_({[`${e.prefixCls}-trigger`]:!0,active:e.filtered})},[e.customFilterIcon?(I(),fe(s,{key:0,vnode:e.customFilterIcon({column:e.column.originColumn,filtered:e.filtered})},null,8,["vnode"])):(I(),fe(r,{key:1}))],2)]),_:1},8,["open","get-popup-container","overlay-class-name","onOpenChange"])}var ms=Be(hs,[["render",ps]]),gs=Pe({name:"TableHeaderCell",components:{Sorter:as,Tooltip:Ot,DragHandle:us,FilterDropdown:ms,MenuOutlined:mo,RenderVNode:nl,FilterItems:rn},props:{component:{type:String,default:"div"},prefixCls:String,column:{type:Object,default:()=>({})},wrapText:{type:Boolean,default:!1},level:{type:Number,default:1},additionalProps:Object},setup(e){const t=je(),l=ta(),n=Rt(),{showPopupContent:o}=mn(),u=h(()=>t.draggingColumnKey.value===e.column.columnKey),s=Je(tl,!1),i=F();e.level===1&&aa({column:h(()=>e.column),columnKey:h(()=>e.column.columnKey),disabled:h(()=>!1),domRef:i});const a=h(()=>e.column.showSorterTooltip===void 0?t.props.showSorterTooltip:e.column.showSorterTooltip),c=h(()=>typeof a.value=="boolean"?{}:a.value),r=h(()=>{const S=e.column,M=S.columnKey,A=t.sorterStates.value.find(({key:z})=>z===M),G=A?A.sortOrder:null,x=S.sortDirections||["asc","desc"],K=G?x[x.indexOf(G)+1]:x[0],{cancelSort:R,triggerAsc:O,triggerDesc:J}=t.locale.value||{};let de=R;return K===ln?de=J:K===wl&&(de=O),{columnKey:M,sorterState:A,sorterOrder:G,sortDirections:x,nextSortOrder:K,tip:de,showFilter:!!(S.filters||S.filterDropdown||S.slots&&S.slots.filterDropdown||S.customFilterDropdown)&&S.showFilter!==!1,wrapText:e.column.wrapText===void 0?e.wrapText:e.column.wrapText}}),v=h(()=>r.value.showFilter||!!n.menuPopup),f=h(()=>({[`${e.prefixCls}-has-icon-column`]:v.value,[`${e.prefixCls}-cell-box`]:!0})),d=h(()=>{const{prefixCls:S}=e;return{[`${S}-column-title`]:!0,[`${S}-cell-box`]:!v.value}}),p=h(()=>{const{columnIndex:S=t.columnKeyIndexMap.value[e.column.columnKey],colSpan:M=1}=e.column;return t.getColumnPosition(S,M)}),m=h(()=>(e.column.customHeaderCell||t.props.customHeaderCell||(()=>({})))(e.column)),y=h(()=>{const{columnIndex:S,colSpan:M=1}=e.column;return Object.assign({},m.value,{colspan:M,colstart:S,colend:M+S-1,...e.additionalProps})}),C=h(()=>{if(s)return na(y.value.colstart,y.value.colend,t.allColumns.value,t.stickyOffsets.value,t.props.direction)}),b=h(()=>{const{prefixCls:S,column:M}=e;let A={};if(C.value&&xt){const G=`${S}-cell`,{fixLeft:x,fixRight:K,firstFixLeft:R,lastFixLeft:O,firstFixRight:J,lastFixRight:de}=C.value;A={[`${G}-fix-left`]:typeof x=="number",[`${G}-fix-left-first`]:R,[`${G}-fix-left-last`]:O,[`${G}-fix-right`]:typeof K=="number",[`${G}-fix-right-first`]:J,[`${G}-fix-right-last`]:de}}return Object.assign({[`${S}-cell`]:!0,[`${S}-header-cell`]:!0,[M.class||""]:!0,[M.className||""]:!0,[`${S}-column-sort`]:r.value.sorterOrder,[`${S}-column-has-sorters`]:M.sorter,[`${S}-drag-column-dragging`]:u.value},A)}),T=h(()=>{const S={};if(C.value&&xt){const{fixLeft:M,fixRight:A}=C.value;typeof M=="number"&&(S.position="sticky",S.left=`${M}px`),typeof A=="number"&&(S.position="sticky",S.right=`${A}px`)}return s?S:{width:`${p.value.width}px`,height:`${e.column.height}px`}}),k=F([]),L=h(()=>t.filterStates.value),V=h(()=>e.column.columnKey),j=h(()=>L.value.find(({key:S})=>V.value===S)),D=S=>{const M=S?.length?S:null;if(!(M!==null||j.value&&j.value.filteredKeys)||Sl(M,j.value==null?void 0:j.value.filteredKeys))return null;const A={column:e.column,key:V.value,filteredKeys:M};t?.changeFilter(A)};he(j,()=>{var S;k.value=((S=j.value)==null?void 0:S.filteredKeys)||[]},{immediate:!0});const q=()=>{k.value=[],D([])},g=()=>{D(k.value)},H=Fe(()=>{var S;return!!((S=k.value)!=null&&S.length)}),N=h(()=>({prefixCls:e.prefixCls,setSelectedKeys:S=>{k.value=S||[]},selectedKeysRef:k,confirm:g,clearFilters:q,filters:e.column.filters}));return{tableContext:t,sorterInfo:r,handleSortClick:(S,M)=>{if(!S.sorter)return;const A={column:S,key:S.columnKey,sortOrder:M,multiplePriority:nn(S)};t.changeSorter(A)},cellClass:b,widths:p,colProps:y,RenderSlot:ll,titleClass:d,domRef:i,autoHeight:s,componentStyle:T,headerContext:l,tableSlotsContext:n,cellBoxClass:f,showPopupContent:o,FilterItems:rn,h:At,hasIcon:v,menuFilterProps:N,filtered:H,tooltipProps:c,showSorterTooltip:a}}});const ys=["data-tip"];function ws(e,t,l,n,o,u){const s=te("Sorter"),i=te("Tooltip"),a=te("FilterDropdown"),c=te("RenderVNode"),r=te("MenuOutlined"),v=te("DragHandle");return e.colProps.colspan?(I(),fe(it(e.component),_e({key:0,ref:"domRef",tabindex:"-1",role:"cell",class:e.cellClass,style:e.componentStyle},e.colProps,{onClick:t[1]||(t[1]=f=>e.handleSortClick(e.column,e.sorterInfo.nextSortOrder))}),{default:ke(()=>[(I(),fe(it(e.hasIcon?"div":e.RenderSlot),{class:_(e.cellBoxClass)},{default:ke(()=>[oe("span",{class:_(e.titleClass)},[e.column.sorter&&e.showSorterTooltip?(I(),fe(i,Nt(_e({key:0},e.tooltipProps)),{title:ke(()=>[Tt(mt(e.sorterInfo.tip),1)]),default:ke(()=>[oe("div",{class:_(`${e.prefixCls}-column-sorters`),"data-tip":e.sorterInfo.tip},[X(s,_e({column:e.column},e.sorterInfo),null,16,["column"])],10,ys)]),_:1},16)):(I(),fe(s,_e({key:1,column:e.column},e.sorterInfo),null,16,["column"]))],2),e.sorterInfo.showFilter?(I(),fe(a,{key:0,"prefix-cls":`${e.prefixCls}-filter`,column:e.column},null,8,["prefix-cls","column"])):Ce("v-if",!0),e.column.showMenu&&e.tableSlotsContext.menuPopup?(I(),ee("span",{key:1,class:_([`${e.prefixCls}-menu-popup-trigger`,e.column.showMenu==="hover"&&`${e.prefixCls}-menu-popup-trigger-hover`]),onClick:t[0]||(t[0]=ut(f=>e.showPopupContent(e.tableSlotsContext.menuPopup,f,{column:e.column.originColumn,filter:e.menuFilterProps}),["stop"]))},[e.tableSlotsContext.menuIcon?(I(),fe(c,{key:0,vnode:e.tableSlotsContext.menuIcon({column:e.column.originColumn,filtered:e.filtered})},null,8,["vnode"])):(I(),fe(r,{key:1}))],2)):Ce("v-if",!0)]),_:1},8,["class"])),e.column.resizable&&!(e.column.children&&e.column.children.length)?(I(),fe(v,{key:0,"prefix-cls":e.prefixCls,width:e.widths.width,"min-width":e.widths.minWidth,"max-width":e.widths.maxWidth,column:e.column},null,8,["prefix-cls","width","min-width","max-width","column"])):Ce("v-if",!0)]),_:1},16,["class","style"])):Ce("v-if",!0)}var sa=Be(gs,[["render",ws]]),Cs=Pe({name:"HeaderExtraCell",components:{Checkbox:_t,Dropdown:fn,AMenu:vn,MenuItem:po,DownOutlined:Ya},props:{component:{type:String,default:"div"},prefixCls:String,column:{type:Object,default:()=>({})},additionalProps:Object},setup(e){const t=Je(tl,!1),l=je(),{pageDataEnableRowKeys:n,getRecordByKey:o,mergedRowSelection:u}=l,{checkedCurrentAll:s,checkedCurrentSome:i,allDisabled:a,allDisabledAndChecked:c,allDisabledSomeChecked:r,mergedSelections:v,setSelectedKeys:f}=l.selection,d=h(()=>l.mergedRowSelection.value.type),p=h(()=>l.mergedRowSelection.value.hideSelectAll),m=h(()=>l.selection.derivedSelectedKeySet.value),y=h(()=>l.sorterStates.value.map(({column:k,sortOrder:L})=>({column:k,order:L}))),C=h(()=>{var k,L;return At(Ee,[typeof e.column.title=="function"?e.column.title({column:e.column.originColumn,sortColumns:y.value,sortColumn:(k=y.value[0])==null?void 0:k.column,sortOrder:(L=y.value[0])==null?void 0:L.order}):e.column.title])}),b=h(()=>{if(t){const k=e.additionalProps;return na(k.colstart,k.colend,l.allColumns.value,l.stickyOffsets.value,l.props.direction)}});return{cellClass:h(()=>{const{prefixCls:k}=e;let L={};if(b.value&&xt){const V=`${k}-cell`,{fixLeft:j,fixRight:D,firstFixLeft:q,lastFixLeft:g,firstFixRight:H,lastFixRight:N}=b.value;L={[`${V}-fix-left`]:typeof j=="number",[`${V}-fix-left-first`]:q,[`${V}-fix-left-last`]:g,[`${V}-fix-right`]:typeof D=="number",[`${V}-fix-right-first`]:H,[`${V}-fix-right-last`]:N}}return Object.assign({[`${k}-cell`]:!0,[`${k}-header-cell`]:!0,[`${k}-header-extra-cell`]:!0},L)}),componentStyle:h(()=>{const k={};if(b.value&&xt){const{fixLeft:L,fixRight:V}=b.value;typeof L=="number"&&(k.position="sticky",k.left=`${L}px`),typeof V=="number"&&(k.position="sticky",k.right=`${V}px`)}return t?k:{height:`${e.column.height}px`}}),getPopupContainer:h(()=>l.getPopupContainer.value),rowSelectionType:d,hideSelectAll:p,onSelectAllChange:()=>{var k,L;const V=[],j=new Set(m.value);s.value?n.value.forEach(q=>{j.delete(q),V.push(q)}):n.value.forEach(q=>{j.has(q)||(j.add(q),V.push(q))});const D=Array.from(j);(L=(k=u.value).onSelectAll)==null||L.call(k,!s,D.map(q=>o(q)),V.map(q=>o(q))),f(D)},checked:Fe(()=>a.value?c.value:!!l.flattenData.value.length&&s.value),indeterminate:Fe(()=>a.value?!c.value&&r.value:!s.value&&i.value),disabled:Fe(()=>l.flattenData.value.length===0||a.value),mergedSelections:v,onMenuClick:k=>{k?.(n.value)},autoHeight:t,title:C,h:At,Fragment:Ee}}});function bs(e,t,l,n,o,u){const s=te("Checkbox"),i=te("DownOutlined"),a=te("MenuItem"),c=te("AMenu"),r=te("Dropdown");return I(),fe(it(e.component),_e({tabindex:"-1",role:"cell",class:e.cellClass,style:e.componentStyle},e.additionalProps,{onClick:t[0]||(t[0]=ut(()=>{},["stop"]))}),{default:ke(()=>[e.column.type!=="checkbox"||e.rowSelectionType==="radio"||e.hideSelectAll?(I(),ee(Ee,{key:0},[],64)):(I(),ee("div",{key:1,class:_(`${e.prefixCls}-selection-wrap`)},[oe("div",{class:_(`${e.prefixCls}-selection`)},[e.column.title?(I(),fe(it(e.title),{key:0})):(I(),ee(Ee,{key:1},[X(s,{"prefix-cls":e.prefixCls,indeterminate:e.indeterminate,disabled:e.disabled,checked:e.checked,"aria-label":e.checked?"Press Space to toggle all row selection (checked)":"Press Space to toggle all row selection (unchecked)",onChange:e.onSelectAllChange},null,8,["prefix-cls","indeterminate","disabled","checked","aria-label","onChange"]),e.mergedSelections?(I(),ee("div",{key:0,class:_(`${e.prefixCls}-selection-extra`)},[X(r,{"get-popup-container":e.getPopupContainer},{overlay:ke(()=>[X(c,{"get-popup-container":e.getPopupContainer},{default:ke(()=>[(I(!0),ee(Ee,null,$t(e.mergedSelections,(v,f)=>(I(),ee(Ee,{key:v&&v.key||f},[v?(I(),fe(a,{key:v.key||f,onClick:d=>e.onMenuClick(v.onSelect)},{default:ke(()=>[(I(),fe(it(e.h(e.Fragment,[typeof v.text=="function"?v.text(v):v.text]))))]),_:2},1032,["onClick"])):Ce("v-if",!0)],64))),128))]),_:1},8,["get-popup-container"])]),default:ke(()=>[oe("span",null,[X(i,{class:_(`${e.prefixCls}-selection-extra-dropdown-icon`)},null,8,["class"])])]),_:1},8,["get-popup-container"])],2)):Ce("v-if",!0)],64))],2)],2))]),_:1},16,["class","style"])}var ua=Be(Cs,[["render",bs]]),Ss=Pe({name:"HeaderRow",components:{HeaderExtraCell:ua,HeaderCell:sa},props:{prefixCls:String,cells:{type:Array,default:()=>[]},wrapText:Boolean,level:Number}});function xs(e,t,l,n,o,u){const s=te("HeaderExtraCell"),i=te("HeaderCell");return I(),ee("tr",null,[(I(!0),ee(Ee,null,$t(e.cells,a=>{var c;return I(),ee(Ee,{key:a.key},[(c=a?.column)!=null&&c.__Internal__Column__?(I(),fe(s,{key:0,component:"th",column:a.column,"prefix-cls":e.prefixCls,"additional-props":{colstart:a.colStart,colend:a.colEnd,rowspan:a.rowSpan,colspan:a.colSpan}},null,8,["column","prefix-cls","additional-props"])):(I(),fe(i,{key:1,component:"th",column:a.column,"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,level:e.level,"additional-props":{colstart:a.colStart,colend:a.colEnd,rowspan:a.rowSpan,colspan:a.colSpan}},null,8,["column","prefix-cls","wrap-text","level","additional-props"]))],64)}),128))])}var $s=Be(Ss,[["render",xs]]),Rs=Pe({name:"TableHeader",components:{XScroll:xn,ColGroup:Gi,HeaderRow:$s},inheritAttrs:!1,directives:{resize:Wt},props:{prefixCls:String,wrapText:{type:Boolean,default:!1},sticky:{type:[Boolean,Object],default:!1}},emits:["scrollLeft","resizeheight"],setup(e,{emit:t}){const l=F(),n=F(),o=je(),u=F(0),s=F();lt(yn,n),lt(tl,!0);const i=h(()=>o.props.showHeaderScrollbar),{addHScrollDom:a,removeHScrollDom:c}=Rl();gt(()=>{a(n.value)}),ct(()=>{c(n.value)}),ea({dragColumnPlaceholderRef:s,headerRef:l,maxHeaderHeight:u});const r=h(()=>({[`${e.prefixCls}-header`]:!0,[`${e.prefixCls}-auto-header-height`]:!0,[`${e.prefixCls}-sticky-header`]:e.sticky,[`${e.prefixCls}-show-header-scrollbar`]:o.props.showHeaderScrollbar})),v=h(()=>({[`${e.prefixCls}-center-viewport`]:!0})),f=h(()=>({height:`calc(100% + ${o.showHorizontalScrollbar.value?o.scrollBarSize.value||15:0}px)`})),d=h(()=>{const C={height:`${u.value}px`};return e.sticky&&(C.top=`${(typeof e.sticky=="object"?e.sticky.offsetHeader:0)||0}px`),C}),p=h(()=>{const C=`${o.showVerticalScrollbar.value?o.scrollBarSize.value:0}px`;return{display:C==="0px"?"none":"block",width:C,minWidth:C,maxWidth:C,position:"sticky",right:`-${C}`}}),m=h(()=>o.rightWidth.value?void 0:{display:"none"}),y=h(()=>o.leftWidth.value?void 0:{position:"absolute",left:"0px",top:"0px",bottom:"0px"});return{headerClass:r,viewportClass:v,columnRows:Fe(()=>o.columnRowsForAutoHeaderHeight.value),viewportStyle:f,scrollbarStyle:p,headerStyle:d,headerRef:l,dragColumnPlaceholderRef:s,viewportRef:n,maxHeaderHeight:u,handleResize:C=>{u.value=C.detail.height},shadowRightStyle:m,shadowLeftStyle:y,showHeaderScrollbar:i,handleHeightResize:C=>{t("resizeheight",C)}}}});function ks(e,t,l,n,o,u){const s=te("ColGroup"),i=te("HeaderRow"),a=te("XScroll"),c=Lt("resize");return I(),ee(Ee,null,[Ze((I(),ee("div",{key:"header",class:_(e.headerClass),style:Re(e.headerStyle),onResizeheight:t[1]||(t[1]=(...r)=>e.handleHeightResize&&e.handleHeightResize(...r))},[oe("div",{ref:"viewportRef",class:_(e.viewportClass),style:Re(e.viewportStyle)},[oe("div",{ref:"headerRef",class:_(`${e.prefixCls}-header-container`)},[Ze((I(),ee("table",{key:"header",style:{"table-layout":"fixed",width:"100%","border-collapse":"separate","border-spacing":"0",position:"absolute"},onResizeheight:t[0]||(t[0]=(...r)=>e.handleResize&&e.handleResize(...r))},[X(s),oe("thead",{class:_(`${e.prefixCls}-thead`)},[(I(!0),ee(Ee,null,$t(e.columnRows,(r,v)=>(I(),fe(i,{key:r.rowIndex,level:v+1,"prefix-cls":e.prefixCls,cells:r,"wrap-text":e.wrapText},null,8,["level","prefix-cls","cells","wrap-text"]))),128))],2)],32)),[[c,void 0,"height"]]),oe("span",{ref:"dragColumnPlaceholderRef",class:_(`${e.prefixCls}-drag-column-placeholder`)},null,2)],2)],6),oe("div",{class:_(`${e.prefixCls}-header-scrollbar`),style:Re(e.scrollbarStyle)},null,6),e.shadowLeftStyle?(I(),ee("div",{key:0,class:_(`${e.prefixCls}-cell-shadow-left`),style:Re(e.shadowLeftStyle)},null,6)):Ce("v-if",!0),e.shadowRightStyle?(I(),ee("div",{key:1,class:_(`${e.prefixCls}-cell-shadow-right`),style:Re(e.shadowRightStyle)},null,6)):Ce("v-if",!0),e.showHeaderScrollbar?(I(),fe(a,{key:2,"only-auto-show":""})):Ce("v-if",!0)],38)),[[c,void 0,"height"]]),e.showHeaderScrollbar?(I(),fe(a,{key:0,"not-show-auto":""})):Ce("v-if",!0)],64)}var Ks=Be(Rs,[["render",ks]]),Ps=Pe({name:"TableHeaderCellGroup",components:{HeaderCellTitle:ra},props:{prefixCls:String,column:{type:Object,default:()=>({})},wrapText:{type:Boolean,default:!1}},setup(e){const t=F();return aa({column:h(()=>e.column),columnKey:h(()=>e.column.columnKey),disabled:h(()=>!1),domRef:t}),{domRef:t}}});function Is(e,t,l,n,o,u){const s=te("HeaderCellTitle");return I(),ee("div",{ref:"domRef",class:_({[`${e.prefixCls}-header-cell-title`]:!0,[`${e.prefixCls}-cell-group-title`]:!0,[`${e.prefixCls}-cell-box`]:!0}),style:Re(`height: ${e.column.height}px`)},[X(s,{column:e.column,"wrap-text":e.column.wrapText===void 0?e.wrapText:e.column.wrapText,"prefix-cls":e.prefixCls},null,8,["column","wrap-text","prefix-cls"])],6)}var Ts=Be(Ps,[["render",Is]]),Es=Pe({name:"TableHeaderRows",components:{HeaderGroupCell:Ts,HeaderCell:sa,HeaderExtraCell:ua},props:{type:{type:String},leftGap:{type:Number,required:!0},isRoot:Boolean,prefixCls:String,columns:{type:Array,default:()=>[]},wrapText:{type:Boolean,default:!1},level:{type:Number,default:1}},setup(e){const t=je(),l=h(()=>t.draggingColumnKey.value);return{cellClass:h(()=>({[`${e.prefixCls}-cell`]:!0,[`${e.prefixCls}-position-absolute`]:!0})),cellStyles:F({}),getLastColumn:n=>{let o=n;for(;o&&o.children;)o=o.children[o.children.length-1];return o},cellProps:n=>(n.customHeaderCell||t.props.customHeaderCell||(()=>({})))(n),draggingColumnKey:l}}});const Hs=["data-left","data-left-gap"];function Os(e,t,l,n,o,u){const s=te("HeaderExtraCell"),i=te("HeaderGroupCell"),a=te("TableHeaderRows"),c=te("HeaderCell");return I(!0),ee(Ee,null,$t(e.columns,r=>(I(),ee(Ee,{key:r.columnKey},[r.__Internal__Column__?(I(),fe(s,{key:0,column:r,"prefix-cls":e.prefixCls,style:Re(`width: ${r.finallyWidth}px;left: ${(r.left||0)-e.leftGap}px`)},null,8,["column","prefix-cls","style"])):r.children?(I(),ee("div",_e({key:1,tabindex:"-1",role:"group-cell",class:{[`${e.prefixCls}-cell`]:!0,[`${e.prefixCls}-header-cell`]:!0,[`${e.prefixCls}-cell-group`]:!0,[r.class||""]:!0,[r.className||""]:!0,[`${e.prefixCls}--drag-column-dragging`]:e.draggingColumnKey===r.columnKey},"data-left":r.left,"data-left-gap":e.leftGap,style:{width:`${r.finallyWidth}px`,left:`${r.left-e.leftGap}px`}},{ref_for:!0},e.cellProps),[X(i,{"prefix-cls":e.prefixCls,column:r,"wrap-text":e.wrapText},null,8,["prefix-cls","column","wrap-text"]),oe("div",{class:_(`${e.prefixCls}-cell-group-children`)},[X(a,{"prefix-cls":e.prefixCls,columns:r.children,"wrap-text":e.wrapText,type:e.type,"left-gap":r.left,level:e.level+1},null,8,["prefix-cls","columns","wrap-text","type","left-gap","level"])],2)],16,Hs)):(I(),fe(c,{key:2,style:Re(`left: ${r.left-e.leftGap}px`),column:r,"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,level:e.level},null,8,["style","column","prefix-cls","wrap-text","level"]))],64))),128)}var Bs=Be(Es,[["render",Os]]),Ds=Pe({name:"TableHeaderWrap",components:{HeaderRows:Bs},directives:{resize:Wt},inheritAttrs:!1,props:{prefixCls:String,wrapText:{type:Boolean,default:!1},type:String},setup(e){const t=F(),l=F(),n=F(),o=je(),u=h(()=>o.leftHeaderColumns.value),s=h(()=>o.centerHeaderColumns.value),i=h(()=>o.visibleCenterHeaderColumns.value),a=h(()=>o.rightHeaderColumns.value),c=h(()=>o.maxHeaderHeight.value);ea({dragColumnPlaceholderRef:t,headerRef:l,maxHeaderHeight:c});const r=h(()=>({[`${e.prefixCls}-fix-left`]:!0,[`${e.prefixCls}-row-wrapper`]:!0,[`${e.prefixCls}-no-columns`]:!u.value.length,[`${e.prefixCls}-last-columns`]:u.value.length&&a.value.length===0&&s.value.length===0})),v=h(()=>({[`${e.prefixCls}-fix-right`]:!0,[`${e.prefixCls}-row-wrapper`]:!0,[`${e.prefixCls}-no-columns`]:!a.value.length,[`${e.prefixCls}-last-columns`]:a.value.length})),f=h(()=>({[`${e.prefixCls}-center`]:!0,[`${e.prefixCls}-row-wrapper`]:!0,[`${e.prefixCls}-no-columns`]:!s.value.length,[`${e.prefixCls}-last-columns`]:s.value.length&&a.value.length===0})),d=h(()=>e.type==="left"?r.value:e.type==="center"?f.value:e.type==="right"?v.value:""),p=h(()=>({[`${e.prefixCls}-center-viewport`]:!0})),m=h(()=>({[`${e.prefixCls}-center-container`]:!0})),y=h(()=>({width:`${o.centerWidth.value}px`})),C=h(()=>({})),b=h(()=>{const V=`${o.leftWidth.value}px`;return{width:V,minWidth:V,maxWidth:V}}),T=h(()=>{const V=`${o.rightWidth.value}px`;return{width:V,minWidth:V,maxWidth:V}}),k=h(()=>e.type==="left"?b.value:e.type==="center"?C.value:e.type==="right"?T.value:{}),L=h(()=>o.rightWidth.value?void 0:{display:"none"});return{fixLeftClass:r,fixRightClass:v,centerClass:f,containerClass:m,viewportClass:p,rightStyle:T,centerStyle:C,leftStyle:b,containerStyle:y,centerColumns:s,headerRef:l,tableContext:o,centerContainerRef:n,leftGap:V=>V==="left"?0:V==="center"?o.leftWidth.value:o.leftWidth.value+o.centerWidth.value,visibleCenterHeaderColumns:i,leftColumns:u,rightColumns:a,dragColumnPlaceholderRef:t,shadowRightStyle:L,rootClass:d,rootStyle:k}}});function Ms(e,t,l,n,o,u){const s=te("HeaderRows");return e.type==="center"&&e.centerColumns.length||e.type!=="center"?(I(),ee("div",{key:0,ref:"headerRef",class:_(e.rootClass),style:Re(e.rootStyle)},[e.type==="left"?(I(),ee(Ee,{key:0},[X(s,{"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"left",columns:e.leftColumns,"left-gap":e.leftGap("left")},null,8,["prefix-cls","wrap-text","columns","left-gap"]),oe("div",{class:_(`${e.prefixCls}-cell-shadow-left`)},null,2),Ze(oe("span",{ref:"dragColumnPlaceholderRef",class:_(`${e.prefixCls}-drag-column-placeholder`)},null,2),[[hl,e.tableContext.leftWidth.value]])],64)):e.type==="center"?(I(),ee(Ee,{key:1},[oe("div",{ref:"centerContainerRef",class:_(e.containerClass),style:Re(e.containerStyle)},[X(s,{"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"center",columns:e.visibleCenterHeaderColumns,"left-gap":e.leftGap("center")},null,8,["prefix-cls","wrap-text","columns","left-gap"])],6),Ze(oe("span",{ref:"dragColumnPlaceholderRef",class:_(`${e.prefixCls}-drag-column-placeholder`)},null,2),[[hl,e.tableContext.centerWidth.value]])],64)):(I(),ee(Ee,{key:2},[oe("div",{class:_(`${e.prefixCls}-cell-shadow-right`),style:Re(e.shadowRightStyle)},null,6),X(s,{"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"right",columns:e.rightColumns,"left-gap":e.leftGap("right")},null,8,["prefix-cls","wrap-text","columns","left-gap"]),Ze(oe("span",{ref:"dragColumnPlaceholderRef",class:_(`${e.prefixCls}-drag-column-placeholder`)},null,2),[[hl,e.tableContext.rightWidth.value]])],64))],6)):Ce("v-if",!0)}var Fs=Be(Ds,[["render",Ms]]),As=Pe({name:"TableHeader",components:{XScroll:xn,HeaderRowsWrap:Fs},inheritAttrs:!1,directives:{resize:Wt},props:{prefixCls:String,wrapText:{type:Boolean,default:!1},sticky:{type:[Boolean,Object],default:!1}},emits:["scrollLeft","resizeheight"],setup(e,{emit:t}){const l=F(),n=F(),o=je();lt(yn,n);const u=h(()=>o.maxHeaderHeight.value),{addHScrollDom:s,removeHScrollDom:i}=Rl();gt(()=>{s(n.value)}),ct(()=>{i(n.value)});const a=h(()=>o.props.showHeaderScrollbar),c=h(()=>({[`${e.prefixCls}-header`]:!0,[`${e.prefixCls}-sticky-header`]:e.sticky,[`${e.prefixCls}-show-header-scrollbar`]:a.value})),r=h(()=>({[`${e.prefixCls}-center-viewport`]:!0})),v=h(()=>({height:`calc(100% + ${o.showHorizontalScrollbar.value?o.scrollBarSize.value||15:0}px)`})),f=h(()=>{const d={height:`${u.value}px`};return e.sticky&&(d.top=`${(typeof e.sticky=="object"?e.sticky.offsetHeader:0)||0}px`),d});return{headerClass:c,viewportClass:r,viewportStyle:v,scrollbarStyle:h(()=>{const d=`${o.showVerticalScrollbar.value?o.scrollBarSize.value:0}px`;return{display:d==="0px"?"none":"block",width:d,minWidth:d,maxWidth:d,position:"sticky",right:`-${d}`}}),headerStyle:f,headerRef:l,viewportRef:n,maxHeaderHeight:u,showHeaderScrollbar:a,handleHeightResize:d=>{t("resizeheight",d)}}}});function zs(e,t,l,n,o,u){const s=te("HeaderRowsWrap"),i=te("XScroll"),a=Lt("resize");return I(),ee(Ee,null,[Ze((I(),ee("div",{key:"header",role:"presentation",class:_(e.headerClass),style:Re(e.headerStyle),onResizeheight:t[0]||(t[0]=(...c)=>e.handleHeightResize&&e.handleHeightResize(...c))},[oe("div",{ref:"viewportRef",class:_(e.viewportClass),style:Re(e.viewportStyle)},[oe("div",{class:_(`${e.prefixCls}-header-container`)},[X(s,{key:"left","prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"left"},null,8,["prefix-cls","wrap-text"]),X(s,{key:"center","prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"center"},null,8,["prefix-cls","wrap-text"]),X(s,{key:"right","prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"right"},null,8,["prefix-cls","wrap-text"])],2)],6),oe("div",{class:_(`${e.prefixCls}-header-scrollbar`),style:Re(e.scrollbarStyle)},null,6),e.showHeaderScrollbar?(I(),fe(i,{key:0,"only-auto-show":""})):Ce("v-if",!0)],38)),[[a,void 0,"height"]]),e.showHeaderScrollbar?(I(),fe(i,{key:0,"not-show-auto":""})):Ce("v-if",!0)],64)}var Ls=Be(As,[["render",zs]]);const ca=Symbol("BodyContextProps"),Ns=e=>{lt(ca,e)},al=()=>Je(ca,{});function Ws({hoverColumnKey:e}){const t=F(!1);let l;return he(e,n=>{clearTimeout(l),clearTimeout(void 0),n!==void 0?l=setTimeout(()=>{t.value=!0},300):t.value=!1}),{open:t}}const da=Symbol("BodyRowsContextProps"),_s=e=>{lt(da,e)},Vs=()=>Je(da,{}),va=Symbol("BodyRowContextProps"),js=e=>{lt(va,e)},Us=()=>Je(va,{}),Xs=()=>{const{isCellInAnyRange:e,cellRanges:t,extendLatestRangeToCell:l,setRangeToCell:n,enableRangeSelection:o,getCellRangeCount:u,intersectLastRange:s,level:i}=gn();return{onCellMousedown:(a,c)=>{const{ctrlKey:r,metaKey:v,shiftKey:f}=a;if(!(!e(c)||a.button!==2))return;const d=!t.value.length;f&&d&&a.preventDefault(),f?l(c):n(c,r||v),a.cellInfo={cellPosition:c,cellTarget:a.currentTarget,level:i}},onCellMousemove:(a,c)=>{a.cellInfo={cellPosition:c,cellTarget:a.currentTarget,level:i}},onCellClick:(a,c)=>{const r=a.ctrlKey||a.metaKey;o.value&&r&&u(c)>1&&s(!0)}}},Ys=()=>{const{enableRangeSelection:e,navigationService:t,extendLatestRangeInDirection:l,focusCell:n,ensureCellVisible:o}=gn(),u=(r,v)=>{v.isEditing||(r.shiftKey&&e.value?i(r):t.navigateToNextCell(r,v.cellPosition),r.preventDefault())},{props:s}=je(),i=r=>{const v=l(r);v&&o(v)},a=(r,v)=>{v.isEditing&&n(v.cellPosition)},c=(r,v)=>{t.onTabKeyDown(v.cellPosition,r)};return{onCellKeydown:(r,v)=>{if(s.onCellKeydown&&s.onCellKeydown(r,{isEditing:v.isEditing,cellPosition:{column:v.cellPosition.column.originColumn,rowIndex:v.cellPosition.rowIndex}})===!1)return;const{keyCode:f}=r,d=r.target;switch(f){case Ge.RIGHT:case Ge.LEFT:d?.tagName==="INPUT"||d?.tagName==="TEXTAREA"||d?.isContentEditable||u(r,v);break;case Ge.DOWN:case Ge.UP:case Ge.ENTER:(p=>p.tagName==="TEXTAREA"||p.isContentEditable)(r.target)||u(r,v);break;case Ge.ESC:a(r,v);break;case Ge.TAB:c(r,v)}}}},jl={},Gs={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},qs=e=>{if(typeof jl[e]=="boolean")return jl[e];const t=document.createElement(Gs[e]||"div");return jl[e="on"+e]=e in t};var Zs=Pe({name:"RowDragHandler",props:{columnKey:[String,Number],disabled:Boolean,column:Object},setup(e,{slots:t}){const l=F(!1),n=F(),{prefixCls:o,dragRowsHandle:u,draggingRowKey:s,insertToRowKey:i,onRowDragEnd:a,scrollTo:c,bodyMaxWidth:r,isMyChildren:v,getRecordByKey:f,getIndexsByKey:d,childrenColumnName:p,getKeyByIndexs:m,scrollTop:y,scrollLeft:C,showVerticalScrollbar:b,showHorizontalScrollbar:T}=je(),{dragRowPlaceholderRef:k,bodyRef:L}=al(),{height:V,top:j,rowKey:D}=Us(),q=Rt();let g;const H=F(),N=F(),S=F(),M=document.createElement("div"),A=F(!0);let G=null,x={},K=0;const R=[];let O=null;const J=F(_n),de=h(()=>d(D.value));gt(()=>{var w,$;u.has(e.columnKey)?($=(w=u.get)==null?void 0:w.call(u,e.columnKey))==null||$.add(n.value):u.set(e.columnKey,new Set([n.value]))}),ct(()=>{var w,$;(w=u.get(e.columnKey))==null||w.delete(n.value),(($=u.get(e.columnKey))==null?void 0:$.size)===0&&u.delete(e.columnKey),We.cancel(g),gl(null,M)});const z=w=>{w.forEach($=>{const{target:P,type:U,listener:Z,options:re}=$;P.addEventListener(U,Z,re)}),R.push(()=>{w.forEach($=>{const{target:P,type:U,listener:Z,options:re}=$;P.removeEventListener(U,Z,re)})})},ie=ce(),me=(w,$)=>{if(ie.value=w,!l.value){if(hn(w,$,4))return;l.value=!0,S.value=w.clientY,s.value=D.value,K=n.value.parentElement.offsetWidth,se().appendChild(M),ze()}A.value=!0,N.value=w.clientX,H.value=w.clientY,(()=>{const{y:P,height:U}=x,Z=window.pageYOffset||document.documentElement.scrollTop;return H.value+10<=P?(M.style.top=P+Z-20+"px",!0):H.value>P+U&&(M.style.top=P+Z+U-pl+"px",!0)})()?(A.value=!1,E()):(B(w,!1),M.style.top=w.pageY-pl+"px"),(()=>{const{x:P,width:U}=x,Z=window.pageXOffset||document.documentElement.scrollLeft;return N.value+bt<=P?(M.style.left=P+Z-20+"px",!0):N.value+bt>=P+U&&(M.style.left=P+Z+U-20+"px",!0)})()?A.value=!1:M.style.left=w.pageX-bt+"px"};let Se,Q;const ae=w=>{var $;for(let P=0;P<w.length;P++)if((($=w[P])==null?void 0:$.identifier)===Q?.identifier)return w[P];return null},ve=w=>{l.value&&(l.value=!1,se().removeChild(M)),ie.value=w,G=null,Q=null,Se=null,E(),s.value=null,i.value=null,k.value.style.opacity="0",R.forEach($=>$()),R.length=0,We.cancel(g)},pe=w=>{w.cancelable&&w.preventDefault()},ye=w=>{const $=ae(w.touches);$&&me($,Q)},we=w=>{let $=ae(w.touches);$||($=Se),ve($)},Ke=w=>w.preventDefault(),Ie=w=>{me(w,G)},Ae=w=>{ve(w)},Ne=()=>{var w;let $=Zi;if(J.value===Vn&&($=oa),q.rowDragGhost){if("preTargetInfo"in ne)return q.rowDragGhost({record:f(D.value),preTargetInfo:ne.preTargetInfo,nextTargetInfo:ne.nextTargetInfo,column:e.column,icon:X("span",{class:`${o.value}-drag-ghost-image-icon`,innerHTML:$},null),allowed:A.value,dragging:l.value,event:ie.value})}else return[X("span",{class:`${o.value}-drag-ghost-image-icon`,innerHTML:$},null),X("span",{class:`${o.value}-drag-ghost-image-label`,style:{maxWidth:`${K}px`}},[(w=t.label)==null?void 0:w.call(t)])]},ze=()=>{O||(O=X(Ne),gl(O,M))};he([o],()=>{M.className=`${o.value}-drag-ghost-image`},{immediate:!0});const ne=bl({}),se=()=>document.fullscreenElement||document.body,Te=()=>{const{top:w}=n.value.getBoundingClientRect();return H.value-w>=0?qt:Mo},Le=()=>{const{preTargetInfo:w,nextTargetInfo:$}=ne;if(v(D.value,w?.rowKey||"")||!A.value){k.value.style.opacity="0",i.value=null;return}let P=null;const U=w?w.indexs.slice(0,-1):[];let Z=U.length?m(U.join("-")):null;if($){const{y:re,centerY:ue,record:W,rowKey:ge}=$;W[p.value]&&H.value>re+pl&&H.value<ue&&(P=ge)}if(w&&P===null)if($&&!v(w.rowKey,$.rowKey)&&$.indexs.slice(0,-1).join("-")!==w.indexs.slice(0,-1).join("-")||!$){const{centerY:re,height:ue,y:W}=w;if(H.value<re+ue/4)P=U.length?m(U.join("-")):null;else if(H.value<W+ue&&(!$||$.indexs.length<w.indexs.length)){const ge=U.slice(0,-1);P=ge.length?m(ge.join("-")):null,Z=P}else Z=null}else v(w.rowKey,$.rowKey)&&(P=w.rowKey);P===D.value&&(P=null),P!==$?.rowKey?(k.value.style.opacity="1",k.value.style.top=`${w?w.top+w.height:0}px`,k.value.style.width=`${r.value}px`,!$&&w?k.value.style.top=w.top+w.height-k.value.offsetHeight+"px":w||(k.value.style.top="0px")):k.value.style.opacity="0",ne.insertToRowKey=P??Z,i.value=ne.insertToRowKey};he([l,H,A],()=>{We.cancel(g),g=We(()=>{if(l.value&&!A.value&&(J.value=Vn),l.value&&A.value){const w=Te();J.value=w===qt?_n:Ur;const $=[];for(const ue of u.get(e.columnKey).values()){const{y:W}=ue.getBoundingClientRect(),ge=+ue.getAttribute("data-scroll-top"),xe=+ue.getAttribute("data-height"),$e=ue.getAttribute("data-row-key-type");let He=ue.getAttribute("data-row-key");He=$e==="number"?+He:He,$.push({y:W,top:ge,height:xe,rowKey:He,record:f(He),indexs:d(He),centerY:W+xe/2})}$.sort((ue,W)=>ue.centerY-W.centerY);let P=$[$.length-1]||null,U=null;const Z=H.value;for(let ue=0,W=$.length;ue<W;ue++){const ge=$[ue],{centerY:xe}=ge;if(Z<=xe){P=$[ue-1]||null,U=ge;break}}const re={record:f(D.value),top:j.value,height:V.value,dir:w,rowKey:D.value,event:ie.value,column:e.column,preTargetInfo:P,nextTargetInfo:U,fromIndexs:de.value,insertToRowKey:void 0};Object.assign(ne,re),Le()}else k.value.style.opacity="0"})});const{check:B,ensureCleared:E}=Uo({scrollContainer:L,scrollAxis:"y",getVerticalPosition:()=>y.value,setVerticalPosition:w=>{c(w)},getHorizontalPosition:()=>C.value,setHorizontalPosition:w=>c({left:w}),showVerticalScrollbar:b,showHorizontalScrollbar:T});he(l,()=>{!l.value&&A.value&&a(Object.assign({},ne,{event:ie.value}))});const le=h(()=>({[`${o.value}-drag-handle`]:!0,[`${o.value}-drag-handle-disabled`]:e.disabled,[`${o.value}-drag-dragging`]:l.value}));return{dragIcon:qi,dragging:l,className:le,spanRef:n,top:j,height:V,rowKey:D,rowKeyType:h(()=>typeof D.value),onMousedown:w=>{w.preventDefault(),!e.disabled&&(l.value=!1,G=w,x=L.value.getBoundingClientRect(),z([{target:document,type:"mousemove",listener:Ie},{target:document,type:"mouseup",listener:Ae},{target:document,type:"contextmenu",listener:Ke}]))},onTouchStart:w=>{if(e.disabled)return;l.value=!1;const $=w.touches[0];Se=$,Q=$,x=L.value.getBoundingClientRect();const P=n.value;z([{target:document,type:"touchmove",listener:pe,options:{passive:!1}},{target:P,type:"touchmove",listener:ye,options:{passive:!0}},{target:P,type:"touchend",listener:we,options:{passive:!0}},{target:P,type:"touchcancel",listener:we,options:{passive:!0}}])}}}});const Js=["aria-grabbed","data-scroll-top","data-height","data-row-key","data-row-key-type","innerHTML"];function Qs(e,t,l,n,o,u){return I(),ee("span",{ref:"spanRef",class:_(e.className),"aria-grabbed":e.dragging,"aria-hidden":!0,"data-scroll-top":e.top,"data-height":e.height,"data-row-key":e.rowKey,"data-row-key-type":e.rowKeyType,innerHTML:e.dragIcon,unselectable:"on",onMousedown:t[0]||(t[0]=ut((...s)=>e.onMousedown&&e.onMousedown(...s),["stop"])),"on:touchstartPassive":t[1]||(t[1]=(...s)=>e.onTouchStart&&e.onTouchStart(...s))},null,42,Js)}var eu=Be(Zs,[["render",Qs]]),tu=Pe({inheritAttrs:!1,props:{prefixCls:String,tooltipProps:{type:Object,default:()=>({})},getPopupContainer:Function,open:Boolean,onCellLeave:Function,align:Object,shouldOpen:{type:[Function,Boolean]},allowEnter:{type:Boolean,default:!0}},setup(e,{slots:t,emit:l}){const n=h(()=>({offset:[0,13]})),o=cn(),u=F(!1),s=a=>{const c=document.createRange();c.setStart(a,0),c.setEnd(a,a.childNodes.length);let r=c.getBoundingClientRect().width,v=c.getBoundingClientRect().height;r-Math.floor(r)<.001&&(r=Math.floor(r)),v-Math.floor(v)<.001&&(v=Math.floor(v));const{pLeft:f,pRight:d,pTop:p,pBottom:m}=(y=>{const C=window.getComputedStyle(y,null);return{pLeft:Number.parseInt(C.paddingLeft,10)||0,pRight:Number.parseInt(C.paddingRight,10)||0,pTop:Number.parseInt(C.paddingTop,10)||0,pBottom:Number.parseInt(C.paddingBottom,10)||0}})(a);return r+(f+d)>a.offsetWidth||v+(p+m)>a.offsetHeight||a.scrollWidth>a.offsetWidth};he(()=>e.open,a=>{a?typeof e.shouldOpen=="function"?el(()=>{var c;const r=(v=>{var f;let d=((f=v?.vnode)==null?void 0:f.el)||v?.$el||v;for(;d&&!d.tagName;)d=d.nextSibling;return d})(o);if(r){const v=r.childNodes[0],f=v&&s(v);u.value=(c=e.shouldOpen)==null?void 0:c.call(e,f)}}):u.value=e.shouldOpen:u.value=!1},{immediate:!0,flush:"post"});const i=()=>{l("cellLeave")};return()=>{var a;return u.value?X(Ot,_e({"get-popup-container":e.getPopupContainer,align:n.value},e.tooltipProps,{open:e.open,"overlay-style":e.allowEnter?{}:{pointerEvents:"none"},onOpenChange:i}),{...t}):(a=t.default)==null?void 0:a.call(t)}}}),lu=Pe({inheritAttrs:!1,props:{prefixCls:{type:String},recordIndexs:{type:Array},rowKey:{type:[Number,String]},column:{type:Object,default:()=>({})},record:{type:Object,default:()=>({})},value:{validator:()=>!0},customEditable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1},cellKey:{type:String},getPopupContainer:Function,onCloseEditor:Function,onKeydown:Function},emits:["closeEditor","keydown"],setup(e,{expose:t,emit:l}){var n,o,u;const s=Rt(),i=mn(),a=(u=(o=(n=e.column)==null?void 0:n.valueGetter)==null?void 0:o.call(n,{value:e.value,record:e.record,column:e.column,recordIndexs:e.recordIndexs}))!=null?u:e.value,c=F(a),r=ce(null),v=je();gt(()=>{el(()=>{var C,b,T,k;r.value&&!e.multiple&&((b=(C=r.value)==null?void 0:C.focus)==null||b.call(C),(k=(T=r.value)==null?void 0:T.select)==null||k.call(T))})}),t({value:c,inputRef:r});const f=(C,b)=>{var T,k;(k=(T=e.column).valueChange)==null||k.call(T,C,{column:e.column,record:e.record,recordIndexs:e.recordIndexs,newValue:b,oldValue:a})},d=h(()=>v.props.childrenColumnName||"children"),p=()=>{var C,b,T;const k=e.recordIndexs;let L=v.props.dataSource||[],V={};k.forEach(q=>{V=L[q],L=V[d.value]||[]});const j=(T=(b=(C=e.column).valueParser)==null?void 0:b.call(C,{column:e.column,record:V,recordIndexs:k,newValue:c.value,oldValue:a}))!=null?T:c.value,D=e.column.valueSetter;if(D){const q=D({column:e.column,record:V,recordIndexs:k,newValue:c.value,oldValue:a});if(Zt(q)){q.then(g=>{g&&l("closeEditor",[e.cellKey])}).catch(()=>{});return}q&&l("closeEditor",[e.cellKey])}else ht(e.column.dataIndex!==void 0||e.column.dataIndex!==null,"Editable","If not have column dataIndex, you should to set valueSetter for editable columns, otherwise the value cannot be modified."),Ga(V,e.column.dataIndex,j),l("closeEditor",[e.cellKey])};let m=!1;const y=C=>{l("closeEditor",C??[e.cellKey])};return{modelValue:c,inputRef:r,handleInput:C=>{var b;f(C,(b=C.target)==null?void 0:b.value)},handleKeyDown:C=>{const{which:b}=C;b===Ge.ENTER?p():(b===Ge.ESC&&(m=!0,l("closeEditor",null)),l("keydown",C))},handleBlur:()=>{m||e.multiple||p()},tableSlots:s,popup:i,save:p,closeEditor:y,getCustomEditorProps:()=>({modelValue:c,save:p,onInput:f,closeEditor:y,column:e.column.originColumn,editorRef:r,getPopupContainer:e.getPopupContainer,record:e.record,recordIndexs:e.recordIndexs})}}});const nu=["data-cell-auto"];function ou(e,t,l,n,o,u){return I(),ee("div",{class:_(`${e.prefixCls}-cell-edit-inner`),"data-cell-auto":e.autoHeight},[e.customEditable?(I(),ee(Ee,{key:0},[e.tableSlots.cellEditor?(I(),fe(it(e.tableSlots.cellEditor),Nt(_e({key:0},e.getCustomEditorProps())),null,16)):Ce("v-if",!0)],64)):Ze((I(),ee("input",{key:1,"onUpdate:modelValue":t[0]||(t[0]=s=>e.modelValue=s),ref:"inputRef",class:_(`${e.prefixCls}-cell-edit-input`),type:"text",onInput:t[1]||(t[1]=(...s)=>e.handleInput&&e.handleInput(...s)),onKeydown:t[2]||(t[2]=(...s)=>e.handleKeyDown&&e.handleKeyDown(...s)),onBlur:t[3]||(t[3]=(...s)=>e.handleBlur&&e.handleBlur(...s))},null,34)),[[Aa,e.modelValue]])],10,nu)}var au=Be(lu,[["render",ou]]);const sn={created(e,t){const{value:l={}}=t,{resizeObserver:n}=l;n?.observe(e)},unmounted(e,t){const{value:l={}}=t,{resizeObserver:n,calMaxHeight:o}=l;n?.unobserve(e),el(()=>{o?.()})}},ru={prefixCls:String,rowIndex:{type:Number,required:!0},flattenRowIndex:{type:Number,required:!0},rowKey:{type:[Number,String]},column:{type:Object,default:()=>({})},item:{type:Object,default:()=>({})},wrapText:{type:Boolean,default:!1},type:{type:String},height:Number,hasAppendNode:Boolean,resizeObserver:{type:Object},calMaxHeight:Function,tooltipOpen:Boolean,getPopupContainer:Function,onCellLeave:Function,editCellKeys:Array,onOpenEditor:Function,onCloseEditor:Function,onMousedown:Function,onMousemove:Function,onKeydown:Function,onClick:Function};let io=0;const iu={success:"#03bf64",processing:"#315efb",error:"#e8353e",warning:"#eb8903"},fa=(e,{slots:t,emit:l})=>{var n,o,u,s,i;const a=Rt(),c=je(),{onBodyCellContextmenu:r}=al(),{getRangeCellClass:v}=gn(),f=xl(),{oldValuesMap:d}=zo(),{prefixCls:p,column:m,wrapText:y,rowKey:C,item:b,rowIndex:T,hasAppendNode:k,tooltipOpen:L,editCellKeys:V}=e,j=m.columnKey,D=Ul(m?.valueEnum,e.item),q=typeof m.rowDrag=="function"?m.rowDrag({record:b,column:m.originColumn}):!!m.rowDrag,g=m.rowDrag,H=c.sorterStates.value.find(({key:w})=>w===j),S={sorterOrder:H?H.sortOrder:null},M=`${e.rowKey} ${j}`,A=m.dataIndex?m.renderText?m.renderText(Nn(b,m.dataIndex),b,T):Nn(b,m.dataIndex):void 0,G=Ul(m?.valueStatus,A,e.item),x=c.getIndexsByKey(C);let K=!1,R=V?.includes(M);if(R){const w=typeof m.editable=="function"&&m.editable({record:b,column:m.originColumn,recordIndexs:x,value:A});K=m.editable==="cellEditorSlot"||w==="cellEditorSlot",R=R&&(K&&!!a.cellEditor||m.editable===!0||!!w)}let{editableTrigger:O=["dblClick"]}=m;O=Array.isArray(O)?O:[O];const J={[`${p}-cell-inner`]:!0},de={[`${p}-cell-content`]:!0,[`${p}-cell-wrap-text`]:m.wrapText===void 0?y:m.wrapText,[`${p}-cell-text-ellipsis`]:!!m.ellipsis},z={textAlign:`${m.align}`,color:G?iu[G]||"valueStatus":void 0};Co(m.ellipsis)&&m.ellipsis.line>1&&(z["-webkit-box-orient"]="vertical",z["-webkit-line-clamp"]=m.ellipsis.line,z["white-space"]="normal",z.display="-webkit-box",z.padding="0 16px");const ie=((o=(n=c.allCellProps.value)==null?void 0:n[C])==null?void 0:o[m.columnKey])||{},me=ie.props||{},Se=me.rowSpan,Q={rowIndex:e.flattenRowIndex,rowPinned:null,column:m},ae={[`${p}-cell`]:!0,[`${p}-body-cell`]:!0,[`${p}-cell-multi`]:Se>1,[`${p}-cell-hidden`]:Se===0,[`${p}-column-sort`]:S.sorterOrder,[`${p}-with-append`]:k,[`${p}-cell-inline-edit`]:R,[v(Q)]:!0},ve=()=>{var w,$,P,U,Z,re,ue;const W=(P=($=(w=e.column)==null?void 0:w.valueGetter)==null?void 0:$.call(w,{value:A,record:b,column:m,recordIndexs:x}))!=null?P:A,ge=(Z=(U=c.props)==null?void 0:U.onBeforeOpenEditor)==null?void 0:Z.call(U,ye);Zt(ge)?ge.then(xe=>{var $e,He;xe&&(l("openEditor",M,{[M]:W}),(He=($e=c.props)==null?void 0:$e.onOpenEditor)==null||He.call($e,ye))}):ge!==!1&&(l("openEditor",M,{[M]:W}),(ue=(re=c.props)==null?void 0:re.onOpenEditor)==null||ue.call(re,ye))},pe=w=>{var $,P,U,Z;const re=(P=($=c.props)==null?void 0:$.onBeforeCloseEditor)==null?void 0:P.call($,{...ye,oldValue:d.value[M]});Zt(re)?re.then(ue=>{var W,ge;ue&&(l("closeEditor",w??M),(ge=(W=c.props)==null?void 0:W.onCloseEditor)==null||ge.call(W,{...ye,oldValue:d.value[M]}))}):re!==!1&&(l("closeEditor",w??M),(Z=(U=c.props)==null?void 0:U.onCloseEditor)==null||Z.call(U,{...ye,oldValue:d.value[M]}))},ye={record:b,column:m.originColumn,text:A,value:A,index:T,recordIndexs:c.getIndexsByKey(C),key:M,valueStatus:G,openEditor:ve,closeEditor:pe};let we=x&&((u=a.bodyCell)==null?void 0:u.call(a,ye))||[];const Ke=c.props.columnEmptyText!==!1?c.props.columnEmptyText:"";if(!pn(we)){let w;if(ie.children)w=ie.children;else if(D){const $=D[A];$&&$.text?$.status?w=X(qa,{status:$.status,text:$.text}):$.color?w=X(Za,{color:$.color,bordered:!1},()=>$.text):w=$.text||Ke:w=Ke}else w=A||Ke;we=[typeof w=="object"&&Tr(w)||typeof w!="object"?w:null]}const Ie={resizeObserver:e.resizeObserver,calMaxHeight:e.calMaxHeight},Ae=m.tooltip,Ne=e.height===void 0&&Se===1&&m?.autoHeight,ze=!m.showTitle||typeof A!="string"&&typeof A!="number"?void 0:A,ne=!!Ae&&L,se=c.props.ignoreCellKey?{}:{key:M};let Te=X("div",{class:J,style:(s=me?.style)!=null&&s.height?"":`height: ${e.height}px`,"data-cell-auto":Ne},[X("div",_e({class:de,style:z,title:ze},se),[k?(i=t.appendNode)==null?void 0:i.call(t):null,we])]);Te=Ne?Ze(Te,[[sn,Ie]]):Te;let Le=null,B=ne;if(ne){const w={...m.tooltip===!0?{}:m.tooltip};w.title?(w.title=w.title(ye),B=!(!w.title&&w.title!==0)):(w.title=A,B=!(!w.title&&w.title!==0)),Le=X(tu,{getPopupContainer:e.getPopupContainer,align:{offset:[0,13]},tooltipProps:w,open:B,allowEnter:w?.allowEnter,shouldOpen:$=>{var P;return w?.shouldOpen?(P=w?.shouldOpen)==null?void 0:P.call(w,$,ye):!0},onCellLeave:()=>{l("cellLeave")}},{default:()=>[w.allowEnter!==!1?Te:za(Te,{onMouseleave:()=>{l("cellLeave")}})],title:()=>{var $;return($=a.tooltipTitle)==null?void 0:$.call(a,ye)}})}else Le=Te;const E=()=>{O.includes("dblClick")&&ve()},le=R?X(au,{prefixCls:p,recordIndexs:x,rowKey:C,cellKey:M,column:m,record:b,onCloseEditor:pe,value:A,customEditable:K,getPopupContainer:e.getPopupContainer,multiple:V.length>1,autoHeight:Ne},null):null;return X("div",_e(me,{onMouseleave:()=>{B||l("cellLeave")},tabindex:"-1",role:"cell","data-column-key":j,class:ae,onContextmenu:w=>{(c.props.hasContextmenuPopup||c.props.rangeSelection)&&w.button===0&&w.ctrlKey?w.preventDefault():(r(w,ye,e.type),O.includes("contextmenu")&&ve())},onDblclick:E,onClick:w=>{var $,P;if((P=($=c.props)==null?void 0:$.onCellClick)==null||P.call($,w,ye),(()=>{if(!Cn()||qs("dblclick"))return!1;const U=new Date().getTime(),Z=U-io<200;return io=U,Z})()){E(),w.preventDefault();return}l("click",w,Q),O.includes("click")&&ve()},onMousedown:w=>{l("mousedown",w,Q)},onMousemove:w=>{l("mousemove",w,Q)},onKeydown:w=>{l("keydown",w,{cellPosition:Q,isEditing:R})},"data-level":f,"aria-selected":"true"}),[g?X(eu,{disabled:!q,columnKey:j,column:m.originColumn},{label:()=>we}):null,Le,Ne&&le?X("label",{class:`${p}-cell-edit-wrapper`,onMousedown:w=>w.stopPropagation()},[Ze(le,[[sn,Ie]])]):le?X("label",{class:`${p}-cell-edit-wrapper`,onMousedown:w=>w.stopPropagation()},[le]):null])};fa.props=ru;var su=Pe({name:"TableExpandedRow",directives:{cellResize:sn},components:{RenderVNode:nl},props:{prefixCls:String,rowKey:{type:[Number,String]},item:{type:Object,default:()=>({})},rowIndex:Number,resizeObserver:{type:Object},calMaxHeight:Function},setup(e){const t=F(),l=Rt(),n=je(),o=h(()=>n.rowHeights.value[e.rowKey]===void 0),u=Fe(()=>{var d;return((d=n.allCellProps.value[e.rowKey])==null?void 0:d[Qt])||{}}),{onBodyCellContextmenu:s}=al(),i=h(()=>{const{prefixCls:d}=e;return{[`${d}-cell`]:!0}}),a=h(()=>{const{prefixCls:d}=e;return{[`${d}-cell-inner`]:!0}}),c=h(()=>{var d,p;return{...u.value.props,style:{...((p=(d=u.value)==null?void 0:d.props)==null?void 0:p.style)||{},minWidth:"100%"}}}),r=h(()=>{var d,p;return(p=(d=n.props)==null?void 0:d.expandedRowRender)==null?void 0:p.call(d,{record:e.item,index:e.rowIndex,indent:1,expanded:!0})}),v=h(()=>o.value?{resizeObserver:e.resizeObserver,calMaxHeight:e.calMaxHeight}:{}),f=h(()=>({record:e.item,index:e.rowIndex,recordIndexs:n.getIndexsByKey(e.rowKey),key:e.rowKey,isExpand:!0}));return{cellClass:i,tableSlotsContext:l,mergedCellProps:c,cellInnerClass:a,cellInnerRef:t,expandContent:r,autoHeight:o,cellResizeBind:v,onBodyCellContextmenu:s,contextmenuProps:f}}});const uu=["data-cell-auto"];function cu(e,t,l,n,o,u){const s=te("RenderVNode"),i=Lt("cell-resize");return I(),ee("div",_e(e.mergedCellProps,{tabindex:"-1",role:"cell",class:e.cellClass,onContextmenu:t[0]||(t[0]=a=>e.onBodyCellContextmenu(a,e.contextmenuProps,"left"))}),[Ze((I(),ee("div",{ref:"cellInnerRef","data-cell-auto":e.autoHeight,class:_(e.cellInnerClass)},[oe("div",{class:_(`${e.prefixCls}-cell-content`)},[(I(),fe(s,{key:e.rowKey,vnode:e.expandContent},null,8,["vnode"]))],2)],10,uu)),[[i,e.cellResizeBind]])],16)}var du=Be(su,[["render",cu]]),vu=Pe({name:"ProTableExpandIcon",props:{prefixCls:String,record:Object,expanded:Boolean,expandable:Boolean,disabled:Boolean,onExpand:Function},emits:["expand"],setup(e,{emit:t}){const l=je(),n=h(()=>{const{prefixCls:o,expanded:u,expandable:s,disabled:i}=e,a=`${o}-row-expand-icon`;return{[a]:!0,[`${a}-spaced`]:!s,[`${a}-expanded`]:s&&u,[`${a}-collapsed`]:s&&!u,[`${a}-disabled`]:!!i}});return{handleClick:()=>{e.disabled||t("expand",e.record)},className:n,label:h(()=>e.expanded?l.locale.value.collapse:l.locale.value.expand),expandIcon:h(()=>l.props.expandIcon),props:e}}});const fu=["aria-label"];function hu(e,t,l,n,o,u){return e.expandIcon?(I(),ee("span",{key:0,onClick:t[0]||(t[0]=ut(()=>{},["stop"]))},[(I(),fe(it(()=>e.expandIcon(e.props))))])):(I(),ee("button",{key:1,type:"button",class:_(e.className),"aria-label":e.label,onClick:t[1]||(t[1]=ut((...s)=>e.handleClick&&e.handleClick(...s),["stop"]))},null,10,fu))}var ha=Be(vu,[["render",hu]]),pu=Pe({name:"BodyExtraCell",components:{Checkbox:_t,Radio:ol,ExpandIcon:ha,MenuOutlined:mo},props:{prefixCls:String,rowIndex:{type:Number,required:!0},type:{type:String},column:{type:Object,default:()=>({})},record:{type:Object},rowKey:{type:[Number,String]},expanded:Boolean,supportExpand:Boolean},setup(e){const t=je(),l=xl(),n=h(()=>t.mergedRowSelection.value.type),o=h(()=>t.selection.derivedSelectedKeySet.value),u=F(!1),s=F(!1),i=h(()=>t.checkboxPropsMap.value.get(e.rowKey)),{onBodyCellContextmenu:a}=al(),c=h(()=>{var f,d;return(d=(f=t.allCellProps.value[e.rowKey])==null?void 0:f[e.column.columnKey])!=null?d:{}});qe(()=>{var f,d,p;const{selection:{derivedHalfSelectedKeySet:m},expandType:y}=t;u.value=o.value.has(e.rowKey);const C=m.value.has(e.rowKey);y.value==="nest"?(s.value=C,ht(typeof((f=i.value)==null?void 0:f.indeterminate)!="boolean","Table","set `indeterminate` using `rowSelection.getCheckboxProps` is not allowed with tree structured dataSource.")):s.value=(p=(d=i.value)==null?void 0:d.indeterminate)!=null?p:C});const r=h(()=>{var f,d;const{column:p}=e;return{...c.value.props,style:{...((d=(f=c.value)==null?void 0:f.props)==null?void 0:d.style)||{},width:`${p.finallyWidth||0}px`}}}),v=h(()=>({record:e.record,column:e.column.originColumn,index:e.rowIndex,recordIndexs:t.getIndexsByKey(e.rowKey),key:e.rowKey}));return{handleRadioChange:f=>{u.value&&!t.mergedRowSelection.value.allowCancelRadio||t.selection.triggerSingleSelection(e.rowKey,!u.value,u.value?[]:[e.rowKey],f)},handleCheckboxChange:f=>{const{shiftKey:d}=f,{selection:{lastSelectedKey:p,setLastSelectedKey:m,setSelectedKeys:y,triggerSingleSelection:C,mergedRowSelection:b,derivedSelectedKeys:T,isCheckboxDisabled:k,levelEntities:L,maxLevel:V},getRecordByKey:j,pageDataEnableRowKeys:D,keyEntities:q}=t,{checkStrictly:g,onSelectMultiple:H}=b.value,N=e.rowKey;let S=-1,M=-1;const A=D.value;if(d&&g){const G=new Set([p.value,N]);A.some((x,K)=>{if(G.has(x)){if(S!==-1)return M=K,!0;S=K}return!1})}if(M!==-1&&S!==M&&g){const G=A.slice(S,M+1),x=[];u.value?G.forEach(R=>{o.value.has(R)&&(x.push(R),o.value.delete(R))}):G.forEach(R=>{o.value.has(R)||(x.push(R),o.value.add(R))});const K=Array.from(o.value);H?.(!u.value,K.map(R=>j(R)),x.map(R=>j(R))),y(K)}else{const G=T.value;if(g){let x=[];u.value?x=Or(G,N):x=Br(G,N),C(N,!u.value,x,f)}else{const{checkedKeys:x,halfCheckedKeys:K}=Gl([...G,N],!0,q.value,L.value,V.value,k);let R=x;if(u.value){const O=new Set(x);O.delete(N),R=Gl(Array.from(O),{halfCheckedKeys:K},q.value,L.value,V.value,k).checkedKeys}C(N,!u.value,R,f)}}m(N)},onInternalTriggerExpand:(f,d)=>{t.onTriggerExpand(f,e.rowKey,d)},rowSelectionType:n,keySet:o,checked:u,mergedIndeterminate:s,checkboxProps:i,mergedCellProps:r,onBodyCellContextmenu:a,contextmenuProps:v,level:l}}});const mu=["data-level"],gu={key:2,draggable:!0};function yu(e,t,l,n,o,u){const s=te("Radio"),i=te("Checkbox"),a=te("ExpandIcon"),c=te("MenuOutlined");return I(),ee("div",_e(e.mergedCellProps,{key:`${e.rowKey} ${e.column.columnKey}`,tabindex:"-1",role:"cell","data-level":e.level,class:{[`${e.prefixCls}-cell`]:!0,[`${e.prefixCls}-body-cell`]:!0,[`${e.prefixCls}-extra-cell`]:!0,[`${e.prefixCls}-row-expand-icon-cell`]:!0},onContextmenu:t[2]||(t[2]=r=>e.onBodyCellContextmenu(r,e.contextmenuProps,e.type)),onClick:t[3]||(t[3]=ut(()=>{},["stop"]))}),[e.column.type==="checkbox"?(I(),ee(Ee,{key:0},[e.rowSelectionType==="radio"?(I(),fe(s,_e({key:0,"prefix-cls":e.prefixCls},e.checkboxProps,{checked:e.checked,onClick:t[0]||(t[0]=ut(()=>{},["stop"])),onChange:e.handleRadioChange}),null,16,["prefix-cls","checked","onChange"])):(I(),fe(i,_e({key:1,"prefix-cls":e.prefixCls},e.checkboxProps,{indeterminate:e.mergedIndeterminate,checked:e.checked,onClick:t[1]||(t[1]=ut(()=>{},["stop"])),onChange:e.handleCheckboxChange}),null,16,["prefix-cls","indeterminate","checked","onChange"]))],64)):e.column.type==="expand"?(I(),fe(a,{key:1,"prefix-cls":e.prefixCls,expandable:"",expanded:e.expanded,record:e.record,disabled:!e.supportExpand,onExpand:e.onInternalTriggerExpand},null,8,["prefix-cls","expanded","record","disabled","onExpand"])):e.column.type==="draggable"?(I(),ee("div",gu,[st(e.$slots,"draggable-handle",{},()=>[X(c)])])):Ce("v-if",!0)],16,mu)}var wu=Be(pu,[["render",yu]]);let Cu=0;var bu=Pe({name:"ProTableBodyRow",components:{ExpandIcon:ha,BodyCell:fa,ExpandedRow:du,BodyExtraCell:wu,RenderSlot:ll},inheritAttrs:!1,props:{prefixCls:String,isExpandRow:Boolean,record:{type:Object},type:{type:String},rowKey:{type:[Number,String],required:!0},supportExpand:Boolean,pos:Number,rowIndex:Number,flattenRowIndex:Number,indent:Number,wrapText:{type:Boolean,default:!1},getRowClassName:{type:Function}},setup(e){const t="row_uni_id_"+Cu++,l=je(),n=cn(),{editCellKeys:o,closeEditor:u,openEditor:s}=zo();let i=!1;const a=F(),{onCellMousedown:c,onCellMousemove:r,onCellClick:v}=Xs(),{onCellKeydown:f}=Ys(),d=()=>{if(i)return;let ne=0,se=[];a.value&&(se=a.value.querySelectorAll("div[data-cell-auto=true]")),se.forEach(Te=>{const{offsetWidth:Le,offsetHeight:B}=Te;let E=Le?B:0;const le=getComputedStyle(Te.parentNode);E+=parseFloat(le.getPropertyValue("border-top-width"))+parseFloat(le.getPropertyValue("border-bottom-width")),ne=ne>E?ne:E}),se.length?l.addRowHeight(t,e.rowKey,ne):l.removeRowHeight(t)};he(()=>e.rowKey,()=>{d()},{flush:"post"});const p=new Xl(()=>{d()}),{columns:m,columnStartIndex:y}=Vs(),C=h(()=>(e.type==="center"?l.centerRowColumnsMap.value.get(e.rowKey):m.value).filter(ne=>!!ne)),{tooltipOpen:b,leftPopupContainer:T,centerPopupContainer:k,rightPopupContainer:L}=al(),{handleCellBlur:V,handleCellHover:j,hoverRowKey:D,hoverColumnKey:q,rowHover:g}=ko(),H=h(()=>e.type==="left"?T.value:e.type==="center"?k.value:e.type==="right"?L.value:null),N=Fe(()=>l.draggingRowKey.value===e.rowKey),S=Fe(()=>D.value===e.rowKey);he([S,a],()=>{a.value&&g.value&&(S.value?bn(a.value,`${e.prefixCls}-row-hover`):Sn(a.value,`${e.prefixCls}-row-hover`))},{immediate:!0,flush:"post"});const M=Fe(()=>b.value&&S.value);let A;ct(()=>{i=!0,p.disconnect(),clearTimeout(A),l.removeRowHeight(t)});const G=Fe(()=>!l.hasMultiRowSpanInfo.value[e.rowKey]),x=h(()=>{var ne,se;return(se=(ne=l.props).customRow)==null?void 0:se.call(ne,e.record,e.rowIndex)}),K=h(()=>{var ne;return(ne=l.props.rowSelection)==null?void 0:ne.type}),R=F(!1),O=h(()=>l.expandedRowKeys.value),J=Fe(()=>{var ne,se;return(se=(ne=O.value).has)==null?void 0:se.call(ne,e.rowKey)}),de=h(()=>l.expandIconColumnIndex.value||0),z=h(()=>l.indentSize.value);qe(()=>{J.value&&(R.value=!0)});const ie=h(()=>{var ne,se;return l.expandType.value==="row"&&((se=(ne=l.props).rowExpandable)==null?void 0:se.call(ne,e.record))}),me=h(()=>l.expandType.value==="nest"),Se=h(()=>{var ne;return!!(l.childrenColumnName.value&&((ne=e.record)!=null&&ne[l.childrenColumnName.value]))}),Q=h(()=>ie.value||me.value),ae=(ne,se)=>{l.onTriggerExpand(ne,e.rowKey,se)},ve=h(()=>l.mergedRowHeights.value),pe=Fe(()=>ve.value[e.rowKey]),ye=Fe(()=>l.rowHeights.value[e.rowKey]),we=h(()=>l.props.highlightSelectRow&&l.selection.derivedSelectedKeySet.value.has(e.rowKey)),Ke=h(()=>{var ne;const{prefixCls:se,record:Te,rowIndex:Le,indent:B}=e,E=Le%2==0;return Jt({[`${se}-row`]:!0,[`${se}-row-level-${B}`]:!0,[`${se}-row-hover`]:S.value&&g.value,[`${se}-row-dragging`]:N.value,[`${se}-row-dragging-insert-target`]:l.insertToRowKey.value===e.rowKey,[`${se}-row-odd`]:!E,[`${se}-row-even`]:E,[`${se}-no-height`]:!pe.value,[`${se}-row-selected`]:we.value},(ne=e.getRowClassName)==null?void 0:ne.call(e,Te,Le,B))}),Ie=h(()=>{var ne;const{prefixCls:se,record:Te,rowIndex:Le,indent:B}=e;return Jt({[`${se}-row`]:!0,[`${se}-expanded-row`]:!0,[`${se}-expanded-row-level-${B+1}`]:!0,[`${se}-no-height`]:!pe.value},(ne=e.getRowClassName)==null?void 0:ne.call(e,Te,Le,B))}),Ae=Fe(()=>{var ne,se,Te,Le;return(Le=(Te=(se=(ne=l.allCellProps.value[e.rowKey])==null?void 0:ne[Qt])==null?void 0:se.props)==null?void 0:Te.style)==null?void 0:Le.width}),Ne=h(()=>{const ne={opacity:1,[`--${e.prefixCls}-row-bg`]:`var(--${e.prefixCls}-row-bg-${e.rowKey}, var(--${e.prefixCls}-bg))`};return G.value?ne.transform=`translateY(${e.pos}px)`:ne.top=`${e.pos}px`,pe.value!==void 0?ne.height=`${pe.value}px`:ne.height=`${l.baseHeight.value}px`,e.isExpandRow&&y.value===0&&(ne.width=Ae.value,ne.minWidth="100%"),ne});he(()=>({...Ne.value}),(ne,se={})=>{l.animateRows.value&&!l.useAnimate.value&&(ne.top!==se.top||ne.height!==se.height||ne.transform!==se.transform)&&el(()=>{clearTimeout(A),n?.vnode.el&&n.vnode.el.style&&(n.vnode.el.style.transition="none",A=setTimeout(()=>{var Te,Le;(Le=(Te=n?.vnode)==null?void 0:Te.el)!=null&&Le.style&&(n.vnode.el.style.transition=null)},100))})},{immediate:!0}),js({top:h(()=>e.pos),height:h(()=>pe.value!==void 0?pe.value:l.baseHeight.value),rowKey:h(()=>e.rowKey)});const ze=h(()=>({[`${e.prefixCls}-cell`]:!0,[`${e.prefixCls}-position-absolute`]:!0}));return{rowClass:Ke,rowStyle:Ne,cellClass:ze,tableContext:l,mergedRowHeights:ve,handleCellBlur:V,handleCellHover:j,handleClick:ne=>{l.props.expandRowByClick&&Q.value&&ae(e.record,ne)},rowSelectionType:K,nestExpandable:me,hasNestChildren:Se,mergedExpandable:Q,expandIconColumnIndex:de,indentSize:z,expanded:J,onInternalTriggerExpand:ae,customRowProps:x,expandColumnKey:Qt,expandRowClass:Ie,mergedColumns:C,height:pe,cellHeight:ye,columnStartIndex:y,resizeObserver:p,calMaxHeight:d,bodyRow:a,hoverRowKey:D,hoverColumnKey:q,xVirtual:Fe(()=>l.xVirtual.value),getPopupContainer:()=>H.value,editCellKeys:o,closeEditor:u,openEditor:s,mergedTooltipOpen:M,onCellMousedown:c,onCellKeydown:f,onCellMousemove:r,onCellClick:v}}});const Su=["data-row-key"],xu=["data-row-key"];function $u(e,t,l,n,o,u){const s=te("ExpandedRow"),i=te("BodyExtraCell"),a=te("ExpandIcon"),c=te("BodyCell"),r=te("RenderSlot");return e.isExpandRow?(I(),ee(Ee,{key:0},[e.columnStartIndex===0?(I(),ee("div",{key:0,ref:"bodyRow","data-row-key":e.rowKey,class:_(e.expandRowClass),style:Re(e.rowStyle),role:"row"},[X(s,{"prefix-cls":e.prefixCls,item:e.record,"row-key":e.rowKey,"row-index":e.rowIndex,"resize-observer":e.resizeObserver,"cal-max-height":e.calMaxHeight},null,8,["prefix-cls","item","row-key","row-index","resize-observer","cal-max-height"])],14,Su)):Ce("v-if",!0)],64)):(I(),ee("div",_e({key:1},e.customRowProps,{ref:"bodyRow",class:e.rowClass,style:e.rowStyle,"data-row-key":e.rowKey,role:"row",onClick:t[0]||(t[0]=(...v)=>e.handleClick&&e.handleClick(...v))}),[X(r,null,{default:ke(()=>[(I(!0),ee(Ee,null,$t(e.mergedColumns,(v,f)=>{var d;return I(),ee(Ee,{key:v&&v.columnKey},[v&&v.__Internal__Column__?(I(),fe(i,{key:0,"prefix-cls":e.prefixCls,"row-key":e.rowKey,"row-index":e.rowIndex,type:e.type,column:(d=e.mergedColumns)==null?void 0:d[f],expanded:e.expanded,"support-expand":e.mergedExpandable,record:e.record,onMouseenter:p=>e.handleCellHover(e.rowKey,v.columnKey,e.tableContext.draggingRowKey.value),onMouseleave:e.handleCellBlur},null,8,["prefix-cls","row-key","row-index","type","column","expanded","support-expand","record","onMouseenter","onMouseleave"])):v?(I(),fe(c,{key:1,"prefix-cls":e.prefixCls,item:e.record,"row-key":e.rowKey,type:e.type,"row-index":e.rowIndex,"flatten-row-index":e.flattenRowIndex,"wrap-text":e.wrapText,column:v,"resize-observer":e.resizeObserver,"cal-max-height":e.calMaxHeight,"has-append-node":v.columnIndex===e.expandIconColumnIndex&&e.nestExpandable,height:e.cellHeight,"get-popup-container":e.getPopupContainer,"tooltip-open":e.mergedTooltipOpen&&e.hoverColumnKey===v.columnKey,"edit-cell-keys":e.editCellKeys,onCloseEditor:e.closeEditor,onOpenEditor:e.openEditor,onMouseenter:p=>e.handleCellHover(e.rowKey,v.columnKey,e.tableContext.draggingRowKey.value),onCellLeave:e.handleCellBlur,onMousedown:e.onCellMousedown,onMousemove:e.onCellMousemove,onKeydown:e.onCellKeydown,onClick:e.onCellClick},{appendNode:ke(()=>[oe("div",{class:_(`${e.prefixCls}-append-node`)},[oe("span",{style:Re(`padding-left: ${(e.indent||0)*e.indentSize}px`),class:_(`${e.prefixCls}-row-indent indent-level-${e.indent}`)},null,6),X(a,{expanded:e.expanded,"prefix-cls":e.prefixCls,expandable:e.hasNestChildren,record:e.record,disabled:!e.mergedExpandable,onExpand:e.onInternalTriggerExpand},null,8,["expanded","prefix-cls","expandable","record","disabled","onExpand"])],2)]),_:1},8,["prefix-cls","item","row-key","type","row-index","flatten-row-index","wrap-text","column","resize-observer","cal-max-height","has-append-node","height","get-popup-container","tooltip-open","edit-cell-keys","onCloseEditor","onOpenEditor","onMouseenter","onCellLeave","onMousedown","onMousemove","onKeydown","onClick"])):Ce("v-if",!0)],64)}),128))]),_:1}),e.type!=="center"?(I(),ee("div",{key:0,class:_(`${e.prefixCls}-cell-shadow-${e.type}`)},null,2)):Ce("v-if",!0)],16,xu))}var Ru=Be(bu,[["render",$u]]),ku=Pe({name:"TableBodyRows",components:{Row:Ru},inheritAttrs:!1,props:{prefixCls:String,type:{type:String},wrapText:{type:Boolean,default:!1},getRowClassName:{type:Function}},setup(e){const t=je(),l=h(()=>t.data.value),n=h(()=>t.dataRowPosition.value),o=ce([]),u=ce(0);return qe(()=>{e.type==="left"?(o.value=t.leftColumns.value,u.value=0):e.type==="right"?(o.value=t.rightColumns.value,u.value=t.leftColumns.value.length+t.centerColumns.value.length):(u.value=t.leftColumns.value.length,o.value=t.visibleCenterColumns.value)}),_s({columns:o,columnStartIndex:u}),{data:l,columns:o,rowPosition:n,transitionName:h(()=>`${e.prefixCls}-row`),virtual:Fe(()=>t.virtual.value)}}});function Ku(e,t,l,n,o,u){const s=te("Row");return I(!0),ee(Ee,null,$t(e.data,(i,a)=>(I(),ee(Ee,{key:a},[i?(I(),fe(s,{key:0,"prefix-cls":e.prefixCls,record:i.record,"row-key":i.rowKey,indent:i.indent,pos:e.rowPosition[a],"row-index":i.rowIndex,"flatten-row-index":i.flattenIndex,"wrap-text":e.wrapText,"get-row-class-name":e.getRowClassName,"is-expand-row":i.isExpandRow,type:e.type},null,8,["prefix-cls","record","row-key","indent","pos","row-index","flatten-row-index","wrap-text","get-row-class-name","is-expand-row","type"])):Ce("v-if",!0)],64))),128)}var Pu=Be(ku,[["render",Ku]]),Iu=Pe({props:{onlyAutoShow:{type:Boolean},notShowAuto:{type:Boolean}},setup:e=>{const t=je(),l=h(()=>`${t.props.prefixCls}`),n=F(),o=F(),u=F(!1),s=h(()=>{const y=`${t.scrollBarSize.value||15}px`;return{width:y,minWidth:y,maxWidth:y}}),i=la()||Cn(),a=h(()=>t.scrollBarSize.value===0&&i),c=h(()=>({[`${l.value}-vertical-scroll`]:!0,[`${l.value}-vertical-scroll-hidden`]:t.scrollBarSize.value===0,[`${l.value}-scrollbar-active`]:u.value,[`${l.value}-apple-scroll`]:i})),r=h(()=>t.showVerticalScrollbar.value&&(!e.onlyAutoShow||a.value)&&(!e.notShowAuto||!a.value)),v=h(()=>{const y=`${t.scrollBarSize.value||15}px`;return{height:`${t.viewportHeight.value||15}px`,width:y,minWidth:y,maxWidth:y}}),{addVScrollDom:f,removeVScrollDom:d}=Vo();let p=null;const m=()=>{a.value&&(clearTimeout(p),bn(o.value,`${l.value}-scrolling`),p=setTimeout(()=>{Sn(o.value,`${l.value}-scrolling`)},500))};return gt(()=>{he(n,()=>{n.value&&(d(n.value),n.value.removeEventListener("scroll",m),f(n.value,!0),n.value.addEventListener("scroll",m,{passive:!0}))},{immediate:!0})}),ct(()=>{clearTimeout(p),n.value&&(d(n.value),n.value.removeEventListener("scroll",m))}),()=>r.value?X("div",{ref:o,class:c.value,"aria-hidden":"true",style:s.value,onMousedown:()=>u.value=!0,onMouseenter:()=>u.value=!0,onMouseleave:()=>u.value=!1,onTouchend:()=>u.value=!1},[X("div",{key:"center",ref:n,class:`${l.value}-vertical-scroll-viewport`,style:s.value},[X("div",{class:`${l.value}-body-vertical-scroll-container`,style:v.value},null)])]):null}}),Tu=Pe({name:"TableBody",components:{BodyRows:Pu,Empty:yl,RenderVNode:nl,RenderSlot:ll,HorizontalScroll:xn,YScroll:Iu},directives:{resize:Wt},inheritAttrs:!1,props:{prefixCls:String,wrapText:{type:Boolean,default:!1},bodyScrollWidth:{type:Number},bodyWidth:{type:Number},bodyHeight:{type:Number},height:{type:[Number,String]},scrollX:[Number,String],summaryFixed:[Boolean,String],emptyText:Function,summary:Function},emits:["scroll","scrollLeft","scrollTop","update:bodyWidth","update:bodyHeight","update:bodyScrollWidth","keydown"],slots:{},setup(e,{emit:t,attrs:l,expose:n}){const o=je(),u=Rt(),s=F(),i=F(),a=F(),c=F(),r=F(),v=F(),f=F(),d=F(),p=F(),m=F(0),y=h(()=>o.leftColumns.value),C=h(()=>o.centerColumns.value),b=h(()=>o.rightColumns.value),T=h(()=>o.status.value.code!==4),k=F(),L=F(),V=F(),j=F(),D=F(),q=F(),{hoverColumnKey:g}=ko(),{open:H}=Ws({hoverColumnKey:g}),N=ce(),S=F(),M=F({clientX:0,clientY:0}),A=W=>{W.style.display="none",W.style.opacity="0",W.style.left="0px",W.style.top="0px",W.style.height="1px",W.style.maxWidth=e.bodyWidth-4+"px"},G=()=>{const{clientX:W,clientY:ge}=M.value,xe=S.value,$e=xe==="left"?j.value:xe==="right"?q.value:D.value;if(!xe||!$e)return;$e.style.display="block";const{left:He,top:Qe}=$e.parentElement.getBoundingClientRect(),dt=$e.children[0],et=Math.min($e.scrollHeight,dt.scrollHeight,ze.value-4);$e.style.opacity="1",$e.style.height=`${et}px`;let Xe=W-He,pt=ge-Qe;pt+et>ze.value&&(pt=ze.value-et-2),S.value==="center"?Xe+$e.offsetWidth>o.centerWidth.value&&(Xe=o.centerWidth.value-$e.offsetWidth-2):S.value==="right"?Xe+$e.offsetWidth>o.rightWidth.value&&(Xe=o.rightWidth.value-$e.offsetWidth-2):Xe+$e.offsetWidth>e.bodyWidth&&(Xe=e.bodyWidth-$e.offsetWidth-2),$e.style.left=`${Xe}px`,$e.style.top=`${pt}px`},x=h(()=>o.showVerticalScrollbar.value),K=h(()=>o.showHorizontalScrollbar.value);he([o.centerWidth,o.rightWidth,()=>e.bodyWidth],()=>{G()},{flush:"post"});let R;ml(j,()=>{S.value==="left"&&(S.value=null,A(j.value))}),ml(D,()=>{S.value==="center"&&(S.value=null,A(D.value))}),ml(q,()=>{S.value==="right"&&(S.value=null,A(q.value))}),Ns({onBodyCellContextmenu:(W,ge,xe)=>{if(o.props.hasContextmenuPopup){const{clientX:$e,clientY:He}=W;A(j.value),A(D.value),A(q.value),S.value=xe,N.value=()=>{var Qe;return(Qe=u.contextmenuPopup)==null?void 0:Qe.call(u,{event:W,...ge,hidePopup:()=>{S.value=null,A(j.value),A(D.value),A(q.value)}})},M.value={clientX:$e,clientY:He},clearTimeout(R),R=setTimeout(()=>{G()}),W.preventDefault()}},bodyRef:i,tooltipOpen:H,leftPopupContainer:k,centerPopupContainer:L,rightPopupContainer:V,dragRowPlaceholderRef:s}),n({bodyRef:i}),ct(()=>{clearTimeout(R),clearTimeout(void 0)});const{addHScrollDom:O,removeHScrollDom:J}=Rl(),{addVScrollDom:de,removeVScrollDom:z}=Vo();gt(()=>{he(f,(W,ge)=>{J(ge),O(W)},{flush:"post",immediate:!0}),he(p,(W,ge)=>{J(ge),O(W)},{flush:"post",immediate:!0}),he(d,(W,ge)=>{z(ge),de(W)},{flush:"post",immediate:!0})}),ct(()=>{J(f.value),J(p.value),z(d.value)});const ie=F(0),me=F(0),Se=h(()=>{const W=`${o.showVerticalScrollbar.value?o.scrollBarSize.value:0}px`;return{display:W==="0px"?"none":"block",width:W,minWidth:W,maxWidth:W,position:"sticky",right:`-${W}`}}),Q=h(()=>({width:`calc(100% + ${o.showVerticalScrollbar.value?o.scrollBarSize.value:0}px)`,overflowX:"hidden",overflowY:"auto",height:"100%"})),ae=h(()=>o.pageData.value.length===0),ve=h(()=>e.bodyWidth-o.rightWidth.value>o.leftWidth.value?{position:"absolute",left:`${o.leftWidth.value}px`,height:"100%"}:{display:"none"}),pe=h(()=>o.rightWidth.value?{position:"absolute",left:e.bodyWidth-o.rightWidth.value+"px",height:"100%"}:{display:"none"}),ye=h(()=>({[`${e.prefixCls}-body`]:!0,[`${e.prefixCls}-unselectable`]:o.props.rangeSelection!==!1})),we=h(()=>({[`${e.prefixCls}-fix-left`]:!0,[`${e.prefixCls}-no-columns`]:!y.value.length})),Ke=h(()=>({[`${e.prefixCls}-fix-right`]:!0,[`${e.prefixCls}-no-columns`]:!b.value.length})),Ie=h(()=>({[`${e.prefixCls}-center`]:!0,[`${e.prefixCls}-no-columns`]:!C.value.length})),Ae=h(()=>({[`${e.prefixCls}-center-viewport`]:!0})),Ne=h(()=>({[`${e.prefixCls}-center-container`]:!0})),ze=h(()=>o.viewportHeight.value+(e.summaryFixed?me.value:m.value+me.value)),ne=h(()=>({width:`${o.centerWidth.value}px`,height:`${ze.value}px`})),se=h(()=>({height:`calc(100% + ${o.scrollBarSize.value||15}px)`})),Te=h(()=>({height:`${ze.value}px`,width:`${o.bodyMaxWidth.value}px`,minWidth:"100%"})),Le=h(()=>({height:`${ze.value}px`,overflow:"hidden",minHeight:"100%",transform:"translateZ(0)"})),B=h(()=>({...l.style||{},maxHeight:typeof e.height=="number"?`${e.height}px`:e.height,overflowY:"hidden"})),E=h(()=>({height:o.showHorizontalScrollbar.value?`calc(100% + ${o.scrollBarSize.value||15}px)`:"calc(100%)",zIndex:"unset !important",overflowX:"auto",overflowY:"hidden"})),le=h(()=>({height:`${ze.value}px`})),w=h(()=>{const W=`${o.leftWidth.value}px`;return{width:W,minWidth:W,maxWidth:W,height:`${ze.value}px`}}),$=h(()=>{const W=`${o.rightWidth.value}px`;return{width:W,minWidth:W,maxWidth:W,height:`${ze.value}px`}}),P=h(()=>({[`${e.prefixCls}-summary`]:!0,[`${e.prefixCls}-position-absolute`]:!ae.value})),U=h(()=>[P.value,`${e.prefixCls}-summary-fixed`,`${e.prefixCls}-summary-fixed-${e.summaryFixed}`]),Z=h(()=>{const W={height:`${m.value}px`};return Object.assign(W,e.summaryFixed?K.value?{borderTop:"none"}:{}:{position:"absolute",bottom:0,width:`${e.bodyWidth}px`,borderTop:"none"})}),re=h(()=>{if(typeof o.props.sticky=="object"){const{offsetHeader:W=0,topSummary:ge=!1}=o.props.sticky;return ge?{...Z.value,position:"sticky",top:`${W+o.realHeaderHeight.value}px`}:Z.value}return Z.value}),ue=h(()=>({width:`${e.bodyWidth}px`}));return La(a,W=>{var ge;const xe=(ge=W[0])==null?void 0:ge.contentRect;t("update:bodyWidth",xe?.width||0),t("update:bodyHeight",xe?.height||0)}),{bodyContainerStyle:E,measureDomStyle:h(()=>({width:"100%",height:"100%!important",position:"absolute!important",fontSize:"100px!important",opacity:"0.1!important",textAlign:"center!important",top:"0px!important",left:"0px!important",pointerEvents:"none",display:"block!important",color:"#000000!important",margin:"0px!important",padding:"0px!important",transform:"unset!important",visibility:"visible!important",zIndex:"999!important"})),isEmpty:ae,emptyStyle:ue,handleEmptyHeight:W=>{me.value=W.detail.height},bodyClass:ye,fixLeftClass:we,fixRightClass:Ke,centerClass:Ie,containerClass:Ne,summaryViewportClass:Ae,summaryClass:P,rightStyle:$,centerStyle:le,leftStyle:w,summaryViewportStyle:se,containerStyle:ne,summaryStyle:Z,viewportHeight:ze,leftColumns:y,centerColumns:C,rightColumns:b,bodyInnerWidth:ie,handleBodyInnerResize:W=>{ie.value=W.detail.width},handleBodyScrollResize:W=>{t("update:bodyScrollWidth",W.detail.width)},bodyRef:i,measureDomRef:a,bodyInnerRef:c,viewportRef:v,summaryViewportRef:f,handleResize:W=>{m.value=W.detail.height},bodyStyle:B,handleBodyResize:W=>{t("update:bodyWidth",W.detail.width),t("update:bodyHeight",W.detail.height)},emptyImage:yl.PRESENTED_IMAGE_SIMPLE,scrollLayerStyle:Te,getRowClassName:(W,ge)=>{const xe=o.props.rowClassName;return typeof xe=="function"?xe(W,ge):xe},showWatermark:T,leftPopupContainer:k,centerPopupContainer:L,rightPopupContainer:V,dragRowPlaceholderRef:s,leftShadowStyle:ve,rightShadowStyle:pe,fixedSummaryClass:U,scrollLayerRef:r,scrollbarStyle:Se,topSummaryStyle:re,leftTarget:j,centerTarget:D,rightTarget:q,popupContent:N,popupContentPos:S,handleContextmenuPopupResize:()=>{G()},handleDragStart:W=>{if(W.target instanceof HTMLImageElement)return W.preventDefault(),!1},handleKeydown:W=>{t("keydown",W)},bodyViewportStyle:Q,bodyViewportRef:d,bodyContainerRef:p,rowsHeightStyle:Le,showYScrollbar:x}}});const Eu={style:{width:"100%",overflow:"hidden",position:"relative",transform:"translateZ(0)"}};function Hu(e,t,l,n,o,u){const s=te("RenderVNode"),i=te("RenderSlot"),a=te("BodyRows"),c=te("Empty"),r=te("YScroll"),v=te("HorizontalScroll"),f=Lt("resize");return I(),ee(Ee,null,[X(i,null,{default:ke(()=>[e.summary&&e.summaryFixed==="top"?(I(),ee("div",{key:"summary",class:_(e.fixedSummaryClass),style:Re(e.topSummaryStyle)},[oe("div",{class:_(e.summaryViewportClass),style:Re(e.summaryViewportStyle)},[oe("div",{ref:"summaryViewportRef",class:_(`${e.prefixCls}-summary-container`),style:{height:"calc(100% + 15px)"}},[Ze((I(),ee("div",{onResizeheight:t[0]||(t[0]=(...d)=>e.handleResize&&e.handleResize(...d))},[X(s,{vnode:e.summary},null,8,["vnode"])],32)),[[f,void 0,"height"]])],2),oe("div",{class:_(`${e.prefixCls}-cell-shadow-left`),style:Re(e.leftShadowStyle)},null,6),oe("div",{class:_(`${e.prefixCls}-cell-shadow-right`),style:Re(e.rightShadowStyle)},null,6),oe("div",{class:_(`${e.prefixCls}-summary-scrollbar`),style:Re(e.scrollbarStyle)},null,6)],6)],6)):Ce("v-if",!0)]),_:1}),oe("div",{key:"body",ref:"bodyRef",class:_(e.bodyClass),style:Re(e.bodyStyle),onDragstart:t[8]||(t[8]=(...d)=>e.handleDragStart&&e.handleDragStart(...d)),onKeydown:t[9]||(t[9]=(...d)=>e.handleKeydown&&e.handleKeydown(...d))},[oe("div",Eu,[oe("div",{ref:"bodyViewportRef",class:_(`${e.prefixCls}-body-viewport-container`),style:Re(e.bodyViewportStyle)},[oe("div",{style:Re(e.rowsHeightStyle)},[oe("div",{ref:"bodyContainerRef",class:_(`${e.prefixCls}-body-container`),style:Re(e.bodyContainerStyle)},[oe("div",{ref:"leftPopupContainer",key:"left",class:_(e.fixLeftClass),style:Re(e.leftStyle)},[e.leftColumns.length?(I(),fe(a,{key:0,"get-row-class-name":e.getRowClassName,type:"left","prefix-cls":e.prefixCls,"wrap-text":e.wrapText},null,8,["get-row-class-name","prefix-cls","wrap-text"])):(I(),ee("div",{key:1,class:_(`${e.prefixCls}-cell-shadow-left`)},null,2)),e.summary&&!e.summaryFixed?(I(),ee("div",{key:"summary",class:_(e.summaryClass),style:Re(e.summaryStyle)},[oe("div",{class:_(e.summaryViewportClass),style:Re(e.summaryViewportStyle)},[oe("div",{ref:"summaryViewportRef",class:_(`${e.prefixCls}-summary-container`)},[Ze((I(),ee("div",{onResizeheight:t[1]||(t[1]=(...d)=>e.handleResize&&e.handleResize(...d))},[X(s,{vnode:e.summary},null,8,["vnode"])],32)),[[f,void 0,"height"]])],2),oe("div",{style:Re(e.leftShadowStyle),class:_(`${e.prefixCls}-cell-shadow-left`)},null,6),oe("div",{style:Re(e.rightShadowStyle),class:_(`${e.prefixCls}-cell-shadow-right`)},null,6)],6)],6)):Ce("v-if",!0),oe("div",{ref:"leftTarget",class:_(`${e.prefixCls}-body-contextmenu-container`)},[Ze((I(),ee("div",{class:_(`${e.prefixCls}-body-contextmenu-container-inner`),onResize:t[2]||(t[2]=(...d)=>e.handleContextmenuPopupResize&&e.handleContextmenuPopupResize(...d))},[e.popupContentPos==="left"?(I(),fe(it(e.popupContent),{key:0})):Ce("v-if",!0)],34)),[[f]])],2)],6),oe("div",{key:"center",class:_(e.centerClass),style:Re(e.centerStyle)},[oe("div",{ref:"centerPopupContainer",class:_(e.containerClass),style:Re(e.containerStyle)},[e.centerColumns.length?(I(),fe(a,{key:0,"get-row-class-name":e.getRowClassName,type:"center","prefix-cls":e.prefixCls,"wrap-text":e.wrapText},null,8,["get-row-class-name","prefix-cls","wrap-text"])):Ce("v-if",!0),oe("div",{ref:"centerTarget",class:_(`${e.prefixCls}-body-contextmenu-container`)},[Ze((I(),ee("div",{class:_(`${e.prefixCls}-body-contextmenu-container-inner`),onResize:t[3]||(t[3]=(...d)=>e.handleContextmenuPopupResize&&e.handleContextmenuPopupResize(...d))},[e.popupContentPos==="center"?(I(),fe(it(e.popupContent),{key:0})):Ce("v-if",!0)],34)),[[f]])],2)],6)],6),oe("div",{key:"right",ref:"rightPopupContainer",class:_(e.fixRightClass),style:Re(e.rightStyle)},[e.rightColumns.length?(I(),fe(a,{key:0,"get-row-class-name":e.getRowClassName,type:"right","prefix-cls":e.prefixCls,"wrap-text":e.wrapText},null,8,["get-row-class-name","prefix-cls","wrap-text"])):(I(),ee("div",{key:1,class:_(`${e.prefixCls}-cell-shadow-right`)},null,2)),oe("div",{ref:"rightTarget",class:_(`${e.prefixCls}-body-contextmenu-container`)},[Ze((I(),ee("div",{class:_(`${e.prefixCls}-body-contextmenu-container-inner`),onResize:t[4]||(t[4]=(...d)=>e.handleContextmenuPopupResize&&e.handleContextmenuPopupResize(...d))},[e.popupContentPos==="right"?(I(),fe(it(e.popupContent),{key:0})):Ce("v-if",!0)],34)),[[f,!0]])],2)],6),oe("span",{ref:"dragRowPlaceholderRef",class:_(`${e.prefixCls}-drag-placeholder`)},null,2)],6)],4),e.isEmpty?(I(),ee("div",{key:"empty",class:_(`${e.prefixCls}-empty-container`)},[Ze((I(),ee("div",{style:{padding:"1px"},onResizeheight:t[5]||(t[5]=(...d)=>e.handleEmptyHeight&&e.handleEmptyHeight(...d))},[X(s,{vnode:e.emptyText},{default:ke(()=>[X(c,{image:e.emptyImage},null,8,["image"])]),_:1},8,["vnode"])],32)),[[f,void 0,"height"]])],2)):Ce("v-if",!0)],6),oe("div",{ref:"measureDomRef",style:Re(e.measureDomStyle)},null,4),Ze(oe("div",{class:_(`${e.prefixCls}-body-scroll-measure`),style:Re(`min-width: ${e.bodyInnerWidth}px`),onResizewidth:t[6]||(t[6]=(...d)=>e.handleBodyScrollResize&&e.handleBodyScrollResize(...d))},null,38),[[f,void 0,"width"]]),Ze(oe("div",{class:_(`${e.prefixCls}-body-inner-measure`),style:Re(`min-width: ${e.scrollX}px`),onResizewidth:t[7]||(t[7]=(...d)=>e.handleBodyInnerResize&&e.handleBodyInnerResize(...d))},null,38),[[f,void 0,"width"]])]),X(r,{style:Re(`height: ${e.bodyHeight}px`)},null,8,["style"])],38),X(i,null,{default:ke(()=>[e.summary&&e.summaryFixed==="bottom"?(I(),ee("div",{key:"summary",class:_(e.fixedSummaryClass),style:Re(e.summaryStyle)},[oe("div",{class:_(e.summaryViewportClass),style:Re(e.summaryViewportStyle)},[oe("div",{ref:"summaryViewportRef",class:_(`${e.prefixCls}-summary-container`),style:{height:"calc(100% + 15px)"}},[Ze((I(),ee("div",{onResizeheight:t[10]||(t[10]=(...d)=>e.handleResize&&e.handleResize(...d))},[X(s,{vnode:e.summary},null,8,["vnode"])],32)),[[f,!0,"height"]])],2),oe("div",{style:Re(e.leftShadowStyle),class:_(`${e.prefixCls}-cell-shadow-left`)},null,6),oe("div",{style:Re(e.rightShadowStyle),class:_(`${e.prefixCls}-cell-shadow-right`)},null,6),oe("div",{class:_(`${e.prefixCls}-summary-scrollbar`),style:Re(e.scrollbarStyle)},null,6)],6)],6)):Ce("v-if",!0)]),_:1}),X(v)],64)}var Ou=Be(Tu,[["render",Hu]]);const so=[];var Bu=Pe({name:"ProTable",inheritAttrs:!1,directives:{resize:Wt},components:{TableSlotsContextProvider:Li,Spin:Qa,MeasureWidth:Vi,Pagination:Ja,PopupContainer:Yi,AutoHeightHeader:Ks,ProHeader:Ls,ProBody:Ou},props:Oo(),emits:["update:pagination","scroll","update:selectedRowKeys","update:expandedRowKeys","update:columns","update:sorter","update:filters","expand","expandedRowsChange","resizeColumn","update:dataSource","cellKeydown"],slots:{},setup(e,{expose:t,emit:l,slots:n}){const o=h(()=>{var Y;return(Y=e.rowKey)!=null?Y:"id"}),u=ce(null),s=So("custom-ui"),{editCellKeys:i,openEditor:a,closeEditor:c}=Xr();Yr();const r=h(()=>e.getPopupContainer),{status:v,watermarkMsg:f}=bi(),d=new Map,p=F(null),m=F(null),y=new Map,C=F(""),b=ce(null),T=h(()=>e.summaryFixed===!0||e.summaryFixed===""?"bottom":e.summaryFixed),k=F(0);qe(()=>{ht(!(typeof o.value=="function"&&o.value.length>1),"table","`index` parameter of `rowKey` function is deprecated. There is no guarantee that it will work as expected.")});const L=Je("localeData",{antLocale:{Table:{triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"}}}),V=h(()=>{const Y=L?.antLocale||{};return{...Y.locale==="zh-cn"?{triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"}:{},...Y.Table||{},...e.locale||{}}}),j=F(0),D=F(0),q=F(),g=F(0),H=F(0),N=ce(),S=Fe(()=>{var Y,be;return(be=e.scrollX)!=null?be:(Y=e.scroll)==null?void 0:Y.x}),M=Fe(()=>{var Y,be,De;return(De=(be=(Y=e.scroll)==null?void 0:Y.y)!=null?be:e.height)!=null?De:e.maxHeight}),A=F(typeof S.value=="number"?S.value:0);he(S,()=>{A.value=typeof S.value=="number"?S.value:0});const G=Fe(()=>!(e.virtual===!1||!M.value)),x=Fe(()=>e.xVirtual||e.virtual!==!1&&e.xVirtual!==!1),K=h(()=>typeof o.value=="function"?o.value:Y=>Y?.[o.value]),R=ce([]),O=ce([]);let J,de;he(()=>e.deepWatchDataSource,()=>{J&&J(),J=he(()=>e.dataSource,()=>{R.value=wt(e.dataSource)||so,Kt(R)},{immediate:!0,deep:!!e.deepWatchDataSource})},{immediate:!0,deep:!0}),he(()=>e.deepWatchColumns,()=>{de&&de(),de=he(()=>e.columns,()=>{O.value=wt(e.columns)||so,Kt(O)},{immediate:!0,deep:!0})},{immediate:!0,deep:!!e.deepWatchColumns});const z=h(()=>e.childrenColumnName||"children"),{getRecordByKey:ie,getIndexsByKey:me,getKeyByIndexs:Se,allDataRowKeys:Q,allDataRootRowKeys:ae}=oi(R,z,K),ve=ce([]);qe(()=>{e.defaultExpandedRowKeys&&(ve.value=e.defaultExpandedRowKeys),e.defaultExpandAllRows&&(ve.value=Q.value)});const pe=h(()=>{const Y=e.rowSelection||{},{checkStrictly:be=!0}=Y;return{...Y,checkStrictly:be}}),ye=h(()=>new Set(e.expandedRowKeys||ve.value||[])),we=h(()=>typeof e.loading=="boolean"?{spinning:e.loading}:typeof e.loading=="object"?{spinning:!0,...e.loading}:{spinning:!1});uo(()=>{sl({left:0,top:0})});let Ke=()=>{};const Ie=ce(Si()),Ae=h(()=>e.size==="small"?39:e.size==="middle"?47:55),Ne=h(()=>e.expandedRowRender),ze=Fe(()=>R.value.some(Y=>Y?.[z.value])?"nest":Ne.value?"row":null),ne=Fe(()=>!!e.expandedRowRender),se=Ki({props:e,rawColumns:O,bodyScrollWidth:A,baseHeight:Ae,measureWidthRef:N,expandable:ne,expandType:ze,scrollLeft:D,bodyWidth:g,xVirtual:x,draggingColumnKey:C,latestRangeStartCell:b}),{sortedData:Te,sorterStates:Le,sorter:B,changeSorter:E}=Pi(e,R,se.allColumns,(Y,be)=>{j.value>H.value&&Xt(),Ke({sorter:Y,sorterStates:be},"sort",!1)}),{filterData:le,filterStates:w,filters:$,changeFilter:P}=Ii(e,Te,se.allColumns,(Y,be)=>{Ke({filters:Y,filterStates:be},"filter",!0)}),U=Fe(()=>le.value.length),Z=h(()=>e.pagination===!1?{}:Di(e.pagination,ue.value)),re=(Y,be)=>{const De={...Z.value,current:Y,pageSize:be};e["onUpdate:pagination"]&&l("update:pagination",co(e.pagination)?Object.assign(e.pagination||{},De):De)},{mergedPagination:ue,pos:W,refreshPagination:ge,onChange:xe,onShowSizeChange:$e,pageData:He}=Fi(U,e,le,(Y,be)=>{const De={...Z.value,current:Y,pageSize:be};re(Y,be),Xt(),Ke({pagination:De},"paginate")}),{flattenData:Qe,keyEntities:dt,pageDataRowKeys:et,pageDataEnableRowKeys:Xe,checkboxPropsMap:pt,getRowFlattenIndexByKey:kt,isMyChildren:Ct,getRowByFlattenIndex:Vt}=Oi(He,z,ye,K,ze,pe),yt=Ei(e,Qe,H,j,G,dt),{rowPosition:rl,viewportHeight:jt,startIndex:Bt,endIndex:il}=yt,{leftWidth:vt,rightWidth:Ye,centerWidth:Kl,bodyMaxWidth:Pl}=se,Rn=Cr(e,pe,R,{prefixCls:h(()=>e.prefixCls),pageData:He,getRowKey:K,getRecordByKey:ie,locale:V,keyEntities:dt,checkboxPropsMap:pt,allDataRootRowKeys:ae,pageDataRowKeys:et}),Il=F();let kn,Kn;const sl=(Y={},be="auto",De=!1)=>{De||Xt();const Me=typeof Y=="number"?{top:Y}:Y;let Oe,Ve;if("left"in Me)Oe=Me.left||0;else if("columnIndex"in Me){const Ue=se.getColumnPosition(Me.columnIndex);Ue&&(Oe=Ue.left-vt.value)}else if("columnKey"in Me){const Ue=se.getColumnPositionByKey(Me.columnKey);Ue&&(Oe=Ue.left-vt.value)}if("top"in Me)Ve=Math.min(Math.max(Me.top||0,0),Tn.value);else if("rowKey"in Me){const Ue=yt.getRowPositionByKey(Me.rowKey);Ue&&(Ve=Ue)}Oe=Math.max(Math.min(In.value,Oe||0),0),Bl.value||(Ve=0),be==="smooth"?(Oe!==void 0&&(We.cancel(kn),kn=Qn(D.value,Oe,Ue=>{D.value=Ue})),Ve!==void 0&&(We.cancel(Kn),Kn=Qn(j.value,Ve,Ue=>{j.value=Ue}))):(Oe!==void 0&&(D.value=Oe),Ve!==void 0&&(j.value=Ve))},Ut=F(!1),ul=h(()=>{var Y;return!!((Y=e.animateRows)!=null?Y:fr.value)});let Pn;he(ul,Y=>{Ut.value=Y},{immediate:!0});const Xt=()=>{Ut.value=!1,clearTimeout(Pn),Pn=setTimeout(()=>{Ut.value=ul.value},100)},In=h(()=>Pl.value-g.value),Tn=h(()=>jt.value-H.value),En=Y=>{l("scroll",Y)};Jr({scrollLeft:D,maxScrollLeft:In,onScroll:En,bodyWidth:g}),Qr({scrollTop:j,maxScrollTop:Tn,onScroll:En,updateAnimate:Xt,bodyWidth:g});const{data:Tl,pos:ma}=Ai(e,rl,Qe,Bt,il,p,Ut,kt,b),El=F(!1),Hl=F(!1),Hn=F(!1);qe(()=>{El.value=xt&&!!D.value,Hl.value=xt&&Kl.value-(g.value-vt.value-Ye.value)>D.value,Hn.value=!El.value&&!Hl.value});const ga=h(()=>Jt({[`${e.prefixCls}`]:!0,[`${e.prefixCls}-support-sticky`]:xt,[`${e.prefixCls}-stripe`]:e.stripe,[`${e.prefixCls}-bordered`]:e.bordered,[`${e.prefixCls}-${e.size}`]:!0,[`${e.prefixCls}-ping-left`]:El.value,[`${e.prefixCls}-ping-right`]:Hl.value,[`${e.prefixCls}-no-ping`]:Hn.value,[`${e.prefixCls}-has-animate`]:ul.value})),ya=h(()=>({height:typeof e.height=="number"?`${e.height}px`:e.height,maxHeight:typeof e.maxHeight=="number"?`${e.maxHeight}px`:e.maxHeight,minHeight:typeof e.minHeight=="number"?`${e.minHeight}px`:e.minHeight})),Ol=F(!1),wa=er(()=>{Ol.value=Pl.value>g.value,g.value>A.value&&(A.value=g.value)},100);he([Pl,g],()=>{wa()});const Bl=Fe(()=>!!M.value&&H.value+.9<jt.value),Ca=Fe(()=>!e.scroll||e.scroll&&e.scroll.scrollToFirstRowOnChange!==!1);Ke=(Y,be,De=!1)=>{var Me,Oe,Ve;De&&(ge(),re(1,ue.value.pageSize),e.pagination&&((Oe=(Me=e.pagination).onChange)==null||Oe.call(Me,1,ue.value.pageSize))),Ca.value&&(j.value=0),(Ve=e.onChange)==null||Ve.call(e,Y.pagination||ue.value,Y.filters||$.value,Y.sorter||B.value,{currentDataSource:Y.currentDataSource||le.value,action:be})};const ba=h(()=>Et(ue.value,["position","onChange","onShowSizeChange"])),Sa=h(()=>({[`${e.prefixCls}-pagination`]:!0,[`${e.prefixCls}-pagination-${W.value.bottom}`]:!0,[`${s}`]:!0})),On=F(0),xa=h(()=>{var Y,be;return e.paginationSticky?e.paginationSticky===!0?{position:"sticky","z-index":9,bottom:"0px"}:{position:"sticky","z-index":9,bottom:`${(be=(Y=e.paginationSticky)==null?void 0:Y.offsetBottom)!=null?be:0}px`}:{}}),$a=h(()=>typeof e.indentSize=="number"?e.indentSize:15),Dl=zi({leftColumns:se.leftColumns,rightColumns:se.rightColumns,visibleCenterColumns:se.visibleCenterColumns,allColumns:se.allColumns,data:Tl,mergedRowHeights:yt.mergedRowHeights,getColumnPosition:se.getColumnPosition,bodyWidth:g,leftWidth:vt,centerWidth:Kl,getRowHeight:yt.getRowHeight,customCell:Na(e,"customCell")});he([k,D],()=>{var Y,be;(be=(Y=u.value)==null?void 0:Y.alignPopup)==null||be.call(Y)},{flush:"post"}),ei({...yt,...se,...Dl,rootRef:q,rawData:R,getRowFlattenIndexByKey:kt,prefixCls:h(()=>e.prefixCls),draggingRowKey:p,insertToRowKey:m,status:v,useAnimate:Ut,animateRows:ul,watermarkMsg:f,onResizeColumn:(Y,be,De)=>{var Me;const Oe=be.width;((Me=e.onResizeColumn)==null?void 0:Me.call(e,Y,be,De))!==!1&&(Oe===Y&&be.width===Y||(be.width=Oe!==be.width?be.width:Y,Kt(O)),De==="end"&&l("update:columns",O.value,"resize"))},onRowDragEnd:Y=>{var be;const{insertToRowKey:De,record:Me,fromIndexs:Oe,rowKey:Ve,dir:Ue,preTargetInfo:tt,nextTargetInfo:Dt}=Y,ft=wt(Me),Ml=(be=e.onRowDragEnd)==null?void 0:be.call(e,{...Y,record:ft,fromIndexs:Oe});if(Ml===!1)return;const Fn=()=>{if(!Ct(Ve,tt?.rowKey)&&De!==Ve){if(De!==null){const An=ie(De);De===tt?.rowKey||De===Dt?.rowKey?Ue===qt?(Mt(An[z.value],[],z.value,ft),Ft(R.value,Oe,z.value)):(Ft(R.value,Oe,z.value),Mt(An[z.value],[],z.value,ft)):Ue===qt?(Mt(R.value,tt?.indexs,z.value,ft),Ft(R.value,Oe,z.value)):(Ft(R.value,Oe,z.value),Mt(R.value,tt?.indexs,z.value,ft))}else Ue===qt&&tt?(Mt(R.value,[tt.indexs[0]],z.value,ft),Ft(R.value,Oe,z.value)):Ue===Mo&&Dt&&(Ft(R.value,Oe,z.value),Mt(R.value,tt?.indexs?[tt.indexs[0]]:[],z.value,ft));Kt(R),l("update:dataSource",R.value)}};Zt(Ml)?Ml.then(()=>{Fn()}).catch(()=>{}):Fn()},virtual:G,xVirtual:x,dataRowPosition:ma,rawColumns:O,bodyHeight:H,scrollTop:j,scrollLeft:D,supportSticky:xt,childrenColumnName:z,bodyScrollWidth:A,baseHeight:Ae,startIndex:Bt,data:Tl,pageData:He,getRecordByKey:ie,getIndexsByKey:me,expandType:ze,flattenData:Qe,expandedRowKeys:ye,indentSize:$a,props:e,bodyWidth:g,scrollTo:sl,scrollBarSize:Ie,leftWidth:vt,rightWidth:Ye,centerWidth:Kl,showVerticalScrollbar:Bl,showHorizontalScrollbar:Ol,getRowKey:K,selection:Rn,updateSelectedRowKeys:Y=>{l("update:selectedRowKeys",Y)},locale:V,sorterStates:Le,changeSorter:E,changeFilter:P,filterStates:w,onTriggerExpand:(Y,be)=>{let De;const Me=ye.value.has(be);Me?(ye.value.delete(be),De=[...ye.value]):De=[...ye.value,be],ve.value=De,l("update:expandedRowKeys",De),l("expand",!Me,Y),l("expandedRowsChange",De)},keyEntities:dt,pageDataRowKeys:et,pageDataEnableRowKeys:Xe,checkboxPropsMap:pt,mergedRowSelection:pe,getPopupContainer:r,allDataRowKeys:Q,allDataRootRowKeys:ae,dragRowsHandle:d,isMyChildren:Ct,getKeyByIndexs:Se,getRowByFlattenIndex:Vt,draggingColumnKey:C,dragColumnsHandle:y,onColumnDragEnd:Y=>{var be;const{dir:De,column:Me,targetColumn:Oe}=Y,Ve=(be=e.onColumnDragEnd)==null?void 0:be.call(e,Y);if(Ve===!1)return;const Ue=()=>{if(Me===Oe||Me.key===Oe.key)return;const tt=O.value.findIndex(ft=>ft===Me||ft.key===Me.key),Dt=O.value.findIndex(ft=>ft===Oe||ft.key===Oe.key);De===jr?(O.value.splice(tt,1),O.value.splice(Dt,0,Me)):(O.value.splice(Dt+1,0,Me),O.value.splice(tt,1)),Kt(O),l("update:columns",O.value,"drag")};Zt(Ve)?Ve.then(()=>{Ue()}).catch(()=>{}):Ue()},onColumnDrag:()=>{},columnDrag:h(()=>e.columnDrag),summaryFixed:T,realHeaderHeight:k,bottomPaginationHeight:On,pos:W});const Bn=F(),Dn=F(),{navigationService:Mn,getSelectedRange:Ra,clearAllSelectedRange:ka,copySelectedRange:Ka,appendCellToSelectedRange:Pa,onBodyKeydown:Ia}=ni({allColumns:se.allColumns,flattenData:Qe,rangeSelection:h(()=>e.rangeSelection),getRowByFlattenIndex:Vt,rootRef:q,prefixCls:h(()=>e.prefixCls),allCellProps:Dl.allCellProps,tabGuardTopRef:Bn,tabGuardBottomRef:Dn,ensureCellColumnVisible:Y=>{if(!Y.column||Y.column.fixed)return;const be=D.value,De=se.getColumnPositionByKey(Y.column.columnKey);if(De){const{width:Me,left:Oe}=De,Ve=vt.value,Ue=Ye.value;Oe-Ve<be?D.value=Oe-Ve:Oe+Me>be+g.value-Ue&&(D.value=Oe+Me-g.value+Ue)}},ensureCellRowVisible:Y=>{var be;const{rowIndex:De}=Y,Me=j.value,Oe=Vt(De),Ve=yt.getRowPositionByKey(Oe.rowKey),Ue=(((be=Dl.allCellProps.value[Oe.rowKey])==null?void 0:be[Y.column.columnKey])||{}).props||{},tt=yt.getRowHeight(De,Ue.rowSpan);Ve!==void 0&&(Xt(),Ve<Me?j.value=Ve:Ve+tt>Me+H.value&&(j.value=Ve+tt-H.value))},latestRangeStartCell:b,bodyRef:h(()=>{var Y;return(Y=Il.value)==null?void 0:Y.bodyRef}),scrollLeft:D,scrollTop:j,scrollTo:sl,showVerticalScrollbar:Bl,showHorizontalScrollbar:Ol,getIndexsByKey:me,formatRangeCellText:Y=>e.formatRangeCellText?e.formatRangeCellText(Y):Y.value?Y.value:"",editCellKeys:i,copyDelimiter:h(()=>e.copyDelimiter)});return t({scrollTo:sl,scrollLeft:D,scrollTop:j,bodyRef:h(()=>{var Y;return(Y=Il.value)==null?void 0:Y.bodyRef}),getSelectedRange:Ra,clearAllSelectedRange:ka,copySelectedRange:Ka,appendCellToSelectedRange:Pa,openEditor:Y=>{a(Y.map(be=>`${be.rowKey} ${be.columnKey}`))},closeEditor:Y=>{Y?c(Y.map(be=>`${be.rowKey} ${be.columnKey}`)):c()}}),{bodyRef:Il,spinProps:we,rowPosition:rl,viewportHeight:jt,startIndex:Bt,data:Tl,watermarkMsg:f,rootStyle:ya,rootClass:ga,onBodyKeydown:Ia,watermarkStyle:h(()=>({minWidth:"100px!important",minHeight:"40px!important",position:"absolute!important",fontSize:"20px!important",opacity:"0.8!important",bottom:"40px!important",right:"40px!important",pointerEvents:"none",display:"block!important",zIndex:"999999!important",color:"#000000!important",margin:"0px!important",padding:"0px!important",transform:"unset!important"})),mergedPagination:ue,pos:W,onPaginationChange:xe,scrollBarSize:Ie,scrollTop:j,bodyScrollWidth:A,bodyWidth:g,scrollLeft:D,cal:yt,selection:Rn,locale:V,paginationProps:ba,slots:n,mergedScrollX:S,mergedScrollY:M,bodyHeight:H,measureWidthRef:N,flattenData:Qe,rootRef:q,mergedSummaryFixed:T,handleResize:Y=>{k.value=Y.detail.height},handlePaginationResize:Y=>{On.value=Y.detail.height},popupContainer:u,handleGuardTopKeydown:Y=>{Y.keyCode!==Ge.TAB||Y.shiftKey||(Mn.getFirstCellToFocus(Y.shiftKey),Y.preventDefault())},handleGuardBottomKeydown:Y=>{Y.keyCode===Ge.TAB&&Y.shiftKey&&(Mn.getLastCellToFocus(Y.shiftKey),Y.preventDefault())},tabGuardTopRef:Bn,tabGuardBottomRef:Dn,onShowSizeChange:$e,customUiCls:s,paginationClass:Sa,bottomPaginationStyle:xa}}});function Du(e,t,l,n,o,u){const s=te("Pagination"),i=te("AutoHeightHeader"),a=te("ProHeader"),c=te("ProBody"),r=te("PopupContainer"),v=te("Spin"),f=te("MeasureWidth"),d=te("TableSlotsContextProvider"),p=Lt("resize");return I(),fe(d,{value:{...e.slots}},{default:ke(()=>[X(v,Nt(dn(e.spinProps)),{default:ke(()=>[e.pos.top?(I(),fe(s,_e({key:0,class:`${e.prefixCls}-pagination ${e.prefixCls}-pagination-${e.pos.top} ${e.customUiCls}`},e.paginationProps,{onChange:e.onPaginationChange,onShowSizeChange:e.onShowSizeChange}),null,16,["class","onChange","onShowSizeChange"])):Ce("v-if",!0),oe("div",{ref:"tabGuardTopRef",role:"presentation",tabindex:"0",style:{position:"absolute",width:"0",height:"0"},onKeydown:t[0]||(t[0]=(...m)=>e.handleGuardTopKeydown&&e.handleGuardTopKeydown(...m))},null,544),oe("div",{key:"content",ref:"ref",class:_(e.rootClass),style:Re(e.rootStyle)},[e.showHeader?(I(),ee(Ee,{key:0},[e.autoHeaderHeight?(I(),fe(i,{key:0,"prefix-cls":e.prefixCls,sticky:e.sticky,onResizeheight:e.handleResize},null,8,["prefix-cls","sticky","onResizeheight"])):(I(),fe(a,{key:1,"prefix-cls":e.prefixCls,sticky:e.sticky,onResizeheight:e.handleResize},null,8,["prefix-cls","sticky","onResizeheight"]))],64)):Ce("v-if",!0),X(c,{ref:"bodyRef",bodyScrollWidth:e.bodyScrollWidth,"onUpdate:bodyScrollWidth":t[1]||(t[1]=m=>e.bodyScrollWidth=m),bodyWidth:e.bodyWidth,"onUpdate:bodyWidth":t[2]||(t[2]=m=>e.bodyWidth=m),bodyHeight:e.bodyHeight,"onUpdate:bodyHeight":t[3]||(t[3]=m=>e.bodyHeight=m),"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,"scroll-x":e.mergedScrollX,height:e.mergedScrollY,"summary-fixed":e.mergedSummaryFixed,summary:e.$slots.summary,"empty-text":e.$slots.emptyText,onKeydown:e.onBodyKeydown},null,8,["bodyScrollWidth","bodyWidth","bodyHeight","prefix-cls","wrap-text","scroll-x","height","summary-fixed","summary","empty-text","onKeydown"])],6),oe("div",{ref:"tabGuardBottomRef",role:"presentation",tabindex:"0",style:{position:"absolute",width:"0",height:"0"},onKeydown:t[4]||(t[4]=(...m)=>e.handleGuardBottomKeydown&&e.handleGuardBottomKeydown(...m))},null,544),e.$slots.footer?(I(),ee("div",{key:"footer",class:_(`${e.prefixCls}-footer`)},[st(e.$slots,"footer")],2)):Ce("v-if",!0),X(r,{ref:"popupContainer","prefix-cls":e.prefixCls},null,8,["prefix-cls"]),e.pos.bottom?Ze((I(),ee("div",{key:2,style:Re(e.bottomPaginationStyle),class:_(`${e.prefixCls}-pagination-wrap`),onResizeheight:t[5]||(t[5]=(...m)=>e.handlePaginationResize&&e.handlePaginationResize(...m))},[X(s,_e({class:e.paginationClass},e.paginationProps,{onChange:e.onPaginationChange,onShowSizeChange:e.onShowSizeChange}),null,16,["class","onChange","onShowSizeChange"])],38)),[[p,void 0,"height"]]):Ce("v-if",!0)]),_:3},16),X(f,{ref:"measureWidthRef"},null,512)]),_:3},8,["value"])}var Mu=Be(Bu,[["render",Du]]),Fu=Pe({name:"TableToolBarSearch",inheritAttrs:!1,components:{AInputSearch:tr},emits:["search"],setup(e,{emit:t,attrs:l}){var n,o;const u=F((o=(n=l.defaultValue)!=null?n:l.value)!=null?o:""),s=Ht();return{attrs:l,intl:s,searchValue:u,onSearch:a=>{t("search",a)}}}});function Au(e,t,l,n,o,u){var s;const i=te("AInputSearch");return I(),fe(i,_e({"allow-clear":"",placeholder:e.attrs.placeholder||e.intl.getMessage("form.inputPlaceholder","请输入"),style:(s=e.attrs.style)!=null?s:{width:"200px"}},e.attrs,{value:e.searchValue,"onUpdate:value":t[0]||(t[0]=a=>e.searchValue=a),onSearch:e.onSearch}),null,16,["placeholder","style","value","onSearch"])}var zu=Be(Fu,[["render",Au]]),Lu=Pe({name:"DensityIcon",inheritAttrs:!1,components:{Dropdown:fn,Tooltip:Ot,AMenu:vn,ColumnHeightOutlined:Yl},props:{prefixCls:String},setup(){const e=Ht(),t=$l(),l=h(()=>({selectedKeys:[t.tableSize.value],onClick:({key:n})=>{var o;(o=t.setTableSize)==null||o.call(t,n)},items:[{key:"default",label:e.getMessage("tableToolBar.densityLarger","宽松")},{key:"middle",label:e.getMessage("tableToolBar.densityMiddle","中等")},{key:"small",label:e.getMessage("tableToolBar.densitySmall","紧凑")}]}));return{h:At,intl:e,menuProps:l,ColumnHeightOutlined:Yl}}});function Nu(e,t,l,n,o,u){const s=te("ColumnHeightOutlined"),i=te("Tooltip"),a=te("AMenu"),c=te("Dropdown");return I(),fe(c,{trigger:"click",overlayStyle:{width:"80px"}},{overlay:ke(()=>[X(a,Nt(dn(e.menuProps)),null,16)]),default:ke(()=>[X(i,{title:e.intl.getMessage("tableToolBar.density","密度")},{default:ke(()=>[oe("div",{class:_(`${e.prefixCls}-toolbar-actions-item`)},[X(s)],2)]),_:1},8,["title"])]),_:1})}var Wu=Be(Lu,[["render",Nu]]),_u=Pe({name:"CheckboxListItem",inheritAttrs:!1,components:{Tooltip:Ot,VerticalAlignMiddleOutlined:or,VerticalAlignTopOutlined:nr,VerticalAlignBottomOutlined:lr},props:{className:String,title:String,columnKey:[String,Number],fixed:[Boolean,String],isRoot:Boolean},setup(e){const{columnsMap:t,setColumnsMap:l}=$l();return{intl:Ht(),onClick:u=>{var s,i;const a=t.value[(s=e.columnKey)!=null?s:""]||{},c={...t.value,[(i=e.columnKey)!=null?i:""]:{...a,fixed:u}};l(c)}}}});function Vu(e,t,l,n,o,u){const s=te("VerticalAlignTopOutlined"),i=te("Tooltip"),a=te("VerticalAlignMiddleOutlined"),c=te("VerticalAlignBottomOutlined");return I(),ee("span",{class:_(`${e.className}-list-item`),key:e.columnKey},[oe("div",{class:_(`${e.className}-list-item-title`)},[st(e.$slots,"default")],2),e.isRoot?(I(),ee("span",{key:0,class:_(`${e.className}-list-item-option`)},[e.fixed!=="left"?(I(),fe(i,{key:0,title:e.intl.getMessage("tableToolBar.leftPin","固定在列首")},{default:ke(()=>[oe("span",{onClick:t[0]||(t[0]=ut(r=>e.onClick("left"),["stop","prevent"]))},[X(s)])]),_:1},8,["title"])):Ce("v-if",!0),e.fixed?(I(),fe(i,{key:1,title:e.intl.getMessage("tableToolBar.noPin","不固定")},{default:ke(()=>[oe("span",{onClick:t[1]||(t[1]=ut(r=>e.onClick(),["stop","prevent"]))},[X(a)])]),_:1},8,["title"])):Ce("v-if",!0),e.fixed!=="right"?(I(),fe(i,{key:2,title:e.intl.getMessage("tableToolBar.rightPin","固定在列尾")},{default:ke(()=>[oe("span",{onClick:t[2]||(t[2]=ut(r=>e.onClick("right"),["stop","prevent"]))},[X(c)])]),_:1},8,["title"])):Ce("v-if",!0)],2)):Ce("v-if",!0)],2)}var ju=Be(_u,[["render",Vu]]),Uu=Pe({name:"CheckboxList",inheritAttrs:!1,components:{Tree:ar,CheckboxListItem:ju,RenderVNode:un},props:{className:String,title:String,checkable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},showTitle:{type:Boolean,default:!0},listHeight:{type:Number,default:void 0},list:{type:Array,default:()=>[]}},setup(e){const{columnsMap:t,setColumnsMap:l,sortKeyColumns:n,setSortKeyColumns:o}=$l(),u=ce([]),s=new Map,i=F([]),a=h(()=>e.list&&e.list.length>0),c=(f,d)=>f.map(({key:p,children:m,...y})=>{var C,b;const T=St(p,[d?.columnKey,y.index||"0"].filter(Boolean).join("-")),k=t.value[T||"null"]||{show:!0};k.show!==!1&&!m&&u.value.push(T);const L={key:T,...Et(y,["className"]),selectable:!1,disabled:k.disable===!0,disableCheckbox:typeof k.disable=="boolean"?k.disable:(C=k.disable)==null?void 0:C.checkbox,isLeaf:d?!0:void 0,isRoot:!d};return m&&(L.children=c(m,{...k,columnKey:T}),(b=L.children)!=null&&b.every(V=>{var j;return(j=u.value)==null?void 0:j.includes(V.key)})&&u.value.push(T)),s.set(p,L),L});return he([t,()=>e.list,a],()=>{u.value=[];const f=c(e.list);Kt(u),i.value=f?.map(d=>Et(d,["disabled"]))},{immediate:!0}),{show:a,treeData:i,checkedKeys:u,onCheckTree:f=>{const d={...t.value},p=m=>{var y,C,b;const T={...d[m]};T.show=f.checked,(y=s?.get(m))!=null&&y.children&&((b=(C=s.get(m))==null?void 0:C.children)==null||b.forEach(k=>p(k.key))),d[m]=T};p(f.node.key),l({...d})},move:(f,d,p)=>{const m={...t.value},y=[...n.value],C=y.findIndex(L=>L===f),b=y.findIndex(L=>L===d),T=p>C;if(C<0)return;const k=y[C];y.splice(C,1),p===0?y.unshift(k):y.splice(T?b:b+1,0,k),y.forEach((L,V)=>{m[L]={...m[L]||{},order:V}}),l(m),o(y)}}}});const Xu={style:{"max-height":"260px",overflow:"auto"}};function Yu(e,t,l,n,o,u){var s,i;const a=te("RenderVNode"),c=te("CheckboxListItem"),r=te("Tree");return e.show?(I(),ee(Ee,{key:0},[e.showTitle?(I(),ee("span",{key:0,class:_(`${e.className}-list-title`)},mt(e.title),3)):Ce("v-if",!0),oe("div",Xu,[X(r,{"block-node":"",selectable:!1,checkable:e.checkable,draggable:e.draggable&&!!((s=e.treeData)!=null&&s.length)&&((i=e.treeData)==null?void 0:i.length)>1,checkedKeys:e.checkedKeys,height:e.listHeight,treeData:e.treeData,onCheck:t[0]||(t[0]=(v,f)=>e.onCheckTree(f)),onDrop:t[1]||(t[1]=v=>{const f=v.node.key,d=v.dragNode.key,{dropPosition:p,dropToGap:m}=v,y=p===-1||!m?p+1:p;e.move(d,f,y)})},{title:ke(({title:v,key:f,fixed:d,isRoot:p})=>[v?(I(),fe(c,{key:0,className:e.className,columnKey:f,fixed:d,isRoot:p},{default:ke(()=>[X(a,{vnode:v},null,8,["vnode"])]),_:2},1032,["className","columnKey","fixed","isRoot"])):Ce("v-if",!0)]),_:1},8,["checkable","draggable","checkedKeys","height","treeData"])])],64)):Ce("v-if",!0)}var Gu=Be(Uu,[["render",Yu]]),qu=Pe({name:"GroupCheckboxList",components:{CheckboxList:Gu},inheritAttrs:!1,props:{className:String,checkable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},listsHeight:{type:Number,default:void 0},localColumns:{type:Array,default:()=>[]}},setup(e){const t=Ht(),l=F([]),n=F([]),o=F([]);he(()=>e.localColumns,()=>{const a=[],c=[],r=[];e.localColumns.forEach(v=>{if(v.hideInSetting)return;const{fixed:f}=v;if(f==="left"||f===!0){c.push(v);return}if(f==="right"){a.push(v);return}r.push(v)}),l.value=a,n.value=c,o.value=r},{immediate:!0});const u=h(()=>l.value&&l.value.length>0),s=h(()=>n.value&&n.value.length>0),i=h(()=>({[`${e.className}-list`]:!0,[`${e.className}-list-group`]:u.value||s.value}));return{intl:t,showRight:u,showLeft:s,rightList:l,leftList:n,list:o,listClass:i}}});function Zu(e,t,l,n,o,u){const s=te("CheckboxList");return I(),ee("div",{class:_(e.listClass)},[X(s,{title:e.intl.getMessage("tableToolBar.leftFixedTitle","固定在左侧"),list:e.leftList,checkable:e.checkable,draggable:e.draggable,className:e.className,listsHeight:e.listsHeight},null,8,["title","list","checkable","draggable","className","listsHeight"]),X(s,{title:e.intl.getMessage("tableToolBar.noFixedTitle","不固定"),list:e.list,checkable:e.checkable,draggable:e.draggable,className:e.className,showTitle:e.showLeft||e.showRight,listsHeight:e.listsHeight},null,8,["title","list","checkable","draggable","className","showTitle","listsHeight"]),X(s,{title:e.intl.getMessage("tableToolBar.rightFixedTitle","固定在右侧"),list:e.rightList,checkable:e.checkable,draggable:e.draggable,className:e.className,listsHeight:e.listsHeight},null,8,["title","list","checkable","draggable","className","listsHeight"])],2)}var Ju=Be(qu,[["render",Zu]]),Qu=Pe({name:"ColumnSetting",inheritAttrs:!1,props:{prefixCls:String,checkable:{type:Boolean,default:!0},checkedReset:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},listsHeight:{type:Number,default:void 0},columns:{type:Array,default:()=>[]}},components:{Popover:fo,Tooltip:Ot,Checkbox:rr,GroupCheckboxList:Ju,SettingOutlined:go},setup(e){const t=Ht(),l=F(null),n=$l(),o=h(()=>`${e.prefixCls}-column-setting`),u=h(()=>e.columns),{columnsMap:s,setColumnsMap:i,clearPersistenceStorage:a}=n;gt(()=>{var p,m;(p=n.props.columnsState)!=null&&p.value&&(l.value=JSON.parse(JSON.stringify(((m=n.props.columnsState)==null?void 0:m.value)||{})))});const c=(p=!0)=>{const m={},y=C=>{C.forEach(({key:b,fixed:T,index:k,children:L,disable:V})=>{var j,D;const q=St(b,k);q&&(m[q]={show:V?(j=s[q])==null?void 0:j.show:p,fixed:T,disable:V,order:(D=s[q])==null?void 0:D.order}),L&&y(L)})};y(u.value),i(m)},r=p=>{p.target.checked?c():c(!1)},v=()=>{var p;a?.(),i({...n.defaultColumnKeyMap.value,...((p=n.props.columnsState)==null?void 0:p.defaultValue)||l.value})},f=h(()=>Object.values(s.value).filter(p=>!p||p.show===!1)),d=h(()=>f.value.length>0&&f.value.length!==u.value.length);return{intl:t,indeterminate:d,unCheckedKeys:f,localColumns:u,clearClick:v,checkedAll:r,setAllSelectAction:c,className:o}}});const ec={key:1};function tc(e,t,l,n,o,u){const s=te("SettingOutlined"),i=te("Tooltip"),a=te("Checkbox"),c=te("GroupCheckboxList"),r=te("Popover");return I(),fe(r,{trigger:"click",placement:"bottomLeft",arrow:!1,"overlay-class-name":`${e.className}-popover`,"overlay-style":{paddingTop:"0",width:"224px"}},{title:ke(()=>[oe("div",{class:_(`${e.className}-title`)},[e.checkable?(I(),fe(a,{key:0,indeterminate:e.indeterminate,checked:e.unCheckedKeys.length===0&&e.unCheckedKeys.length!==e.localColumns.length,onChange:e.checkedAll},{default:ke(()=>[Tt(mt(e.intl.getMessage("tableToolBar.columnDisplay","列展示")),1)]),_:1},8,["indeterminate","checked","onChange"])):(I(),ee("div",ec)),e.checkedReset?(I(),ee("a",{key:2,class:_(`${e.className}-action-rest-button`),onClick:t[0]||(t[0]=(...v)=>e.clearClick&&e.clearClick(...v))},mt(e.intl.getMessage("tableToolBar.reset","重置")),3)):Ce("v-if",!0)],2)]),content:ke(()=>[X(c,{checkable:e.checkable,draggable:e.draggable,className:e.className,localColumns:e.localColumns,listsHeight:e.listsHeight},null,8,["checkable","draggable","className","localColumns","listsHeight"])]),default:ke(()=>[X(i,{title:e.intl.getMessage("tableToolBar.columnSetting","列设置")},{default:ke(()=>[oe("div",{class:_(`${e.prefixCls}-toolbar-actions-item`)},[X(s)],2)]),_:1},8,["title"])]),_:1},8,["overlay-class-name"])}var lc=Be(Qu,[["render",tc]]),nc=Pe({name:"TableToolBar",inheritAttrs:!1,components:{Space:yo,ProSearch:zu,DensityIcon:Wu,Tooltip:Ot,ColumnSetting:lc,ReloadOutlined:ir,InfoCircleOutlined:ho},props:{prefixCls:String,title:String,subTitle:String,tooltip:String,options:{type:[Object,Boolean],default:void 0},actionsRef:Object,selectedRowKeys:{type:Array,default:()=>[]},selectedRows:{type:Array,default:()=>[]},tableColumn:{type:Array,default:()=>[]},onFormSearchSubmit:{type:Function,default:void 0}},setup(e){const t=Ht(),l={reload:()=>{var a;return(a=e.actionsRef)==null?void 0:a.reload()},density:!0,setting:!0,filter:!1,search:!1},n=h(()=>e.options===!1?{}:{...l,...e.options}),o={onChange:a=>{e.actionsRef.keyword.value=a.target.value}},u=h(()=>{var a;return e.options===!1||!n.value.search?!1:n.value.search===!0?o:Et({...(a=n.value.search)!=null?a:{},...o},["name","onSearch"])}),s=async a=>{var c,r,v;if(!e.options||!e.options.search)return;const{name:f="keyword"}=e.options.search===!0?{}:e.options.search;((r=(c=e.options.search)==null?void 0:c.onSearch)==null?void 0:r.call(c,a))!==!1&&((v=e.onFormSearchSubmit)==null||v.call(e,bo({[f]:a})))},i=a=>{var c,r;n.value.reload!==!1&&typeof n.value.reload!="boolean"&&((r=(c=n.value).reload)==null||r.call(c,a,e.actionsRef))};return gt(()=>{(u.value.value||u.value.defaultValue)&&(e.actionsRef.keyword.value=u.value.value||u.value.defaultValue)}),{h:At,intl:t,mergeOptions:n,searchConfig:u,FilterOutlined:sr,SettingOutlined:go,ColumnHeightOutlined:Yl,onSearch:s,onReload:i}}});function oc(e,t,l,n,o,u){const s=te("InfoCircleOutlined"),i=te("Tooltip"),a=te("ProSearch"),c=te("Space"),r=te("ReloadOutlined"),v=te("DensityIcon"),f=te("ColumnSetting");return I(),ee("div",{class:_(`${e.prefixCls}-toolbar`)},[oe("div",{class:_(`${e.prefixCls}-toolbar-container`)},[st(e.$slots,"toolbar",{},()=>[oe("div",{class:_(`${e.prefixCls}-toolbar-left`)},[e.title||e.$slots.title?(I(),ee("div",{key:0,class:_(`${e.prefixCls}-toolbar-title`)},[st(e.$slots,"title",{},()=>[Tt(mt(e.title),1)]),oe("div",{class:_(`${e.prefixCls}-toolbar-subtitle`)},mt(e.subTitle),3),e.tooltip?(I(),fe(i,{key:0,title:e.tooltip},{default:ke(()=>[X(s,{style:{"margin-inline-start":"3px"}})]),_:1},8,["title"])):Ce("v-if",!0)],2)):Ce("v-if",!0),e.options!==!1?(I(),fe(c,{key:1,class:_(`${e.prefixCls}-toolbar-options`)},{default:ke(()=>[e.mergeOptions.search!==!1&&!(e.title||e.$slots.title)?(I(),ee(Ee,{key:0},[X(a,_e(e.searchConfig,{onSearch:e.onSearch}),null,16,["onSearch"]),st(e.$slots,"searchExtra",{setParams:e.actionsRef.setParams})],64)):Ce("v-if",!0)]),_:3},8,["class"])):Ce("v-if",!0)],2),oe("div",{class:_(`${e.prefixCls}-toolbar-right`)},[X(c,{class:_(`${e.prefixCls}-toolbar-actions`)},{default:ke(()=>[e.mergeOptions.search!==!1&&(e.title||e.$slots.title)?(I(),ee(Ee,{key:0},[X(a,_e(e.searchConfig,{onSearch:e.onSearch}),null,16,["onSearch"]),st(e.$slots,"searchExtra",{setParams:e.actionsRef.setParams})],64)):Ce("v-if",!0),st(e.$slots,"actions",{setParams:e.actionsRef.setParams}),e.options!==!1?(I(),ee(Ee,{key:1},[e.mergeOptions.reload!==!1?(I(),fe(i,{key:0,title:e.intl.getMessage("tableToolBar.reload","刷新")},{default:ke(()=>{var d;return[oe("div",{class:_(`${e.prefixCls}-toolbar-actions-item`)},[X(r,{spin:(d=e.actionsRef)==null?void 0:d.pollingLoading.value,onClick:e.onReload},null,8,["spin","onClick"])],2)]}),_:1},8,["title"])):Ce("v-if",!0),e.mergeOptions.density!==!1?(I(),fe(v,{key:1,prefixCls:e.prefixCls},null,8,["prefixCls"])):Ce("v-if",!0),e.mergeOptions.setting!==!1?(I(),fe(f,{key:2,"prefix-cls":e.prefixCls,columns:e.tableColumn},null,8,["prefix-cls","columns"])):Ce("v-if",!0)],64)):Ce("v-if",!0)]),_:3},8,["class"])],2)])],2)],2)}var ac=Be(nc,[["render",oc]]),rc=Pe({name:"ProTableAlert",props:{prefixCls:String,selectedRowKeys:{type:Array,default:()=>[]},selectedRows:{type:Array,default:()=>[]}},inheritAttrs:!1,components:{Space:yo},emits:["cleanSelected"],setup(e,{emit:t,slots:l}){return{slots:l,onCleanSelected:()=>{t("cleanSelected")}}}});function ic(e,t,l,n,o,u){const s=te("Space");return I(),ee("div",{class:_(`${e.prefixCls}-alert`)},[oe("div",{class:_(`${e.prefixCls}-alert-container`)},[oe("div",{class:_(`${e.prefixCls}-alert-info`)},[st(e.$slots,"info",{selectedRowKeys:e.selectedRowKeys,selectedRows:e.selectedRows,onCleanSelected:e.onCleanSelected},()=>[X(s,null,{default:ke(()=>[Tt(" 已选择 "+mt(e.selectedRowKeys.length)+" 项 ",1),e.slots.actions?(I(),ee("a",{class:"pro-link",onClick:t[0]||(t[0]=(...i)=>e.onCleanSelected&&e.onCleanSelected(...i)),key:"0"},"取消选择")):Ce("v-if",!0)]),_:1})])],2),oe("div",{class:_(`${e.prefixCls}-alert-actions`)},[X(s,null,{default:ke(()=>[st(e.$slots,"actions",{selectedRowKeys:e.selectedRowKeys,selectedRows:e.selectedRows,onCleanSelected:e.onCleanSelected},()=>[oe("a",{class:"pro-link",onClick:t[1]||(t[1]=(...i)=>e.onCleanSelected&&e.onCleanSelected(...i)),key:"0"},"取消选择")])]),_:3})],2)],2)],2)}var sc=Be(rc,[["render",ic]]);function uc(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}var cc=Pe({props:{prefixCls:String,items:{type:Array,default:()=>[]},search:{type:Object,default:void 0},cardBordered:{type:[Boolean,Object],default:void 0},loading:Boolean,manual:Boolean,tableShowCard:Boolean,beforeSearchSubmit:{type:Function,default:e=>e},onSubmit:{type:Function,default:void 0},onReset:{type:Function,default:void 0},onFormSearchSubmit:{type:Function,default:void 0},onSearchTabChange:{type:Function,default:void 0}},setup:e=>{var t,l,n;const o=F(((t=e.search)==null?void 0:t.cardProps)!==!1?(n=(l=e.search)==null?void 0:l.cardProps)==null?void 0:n.activeTabKey:""),u=h(()=>{var a,c;return(a=e.search)!=null&&a.cardProps?(c=e.search)==null?void 0:c.cardProps:{}}),s=async(a,c)=>{var r,v,f,d,p,m,y,C;const b=(v=(r=u.value)==null?void 0:r.tabList)!=null&&v.length?{[(d=(f=e.search)==null?void 0:f.tabName)!=null?d:"tab"]:u.value.activeTabKey||((y=(m=(p=u.value)==null?void 0:p.tabList)==null?void 0:m[0])==null?void 0:y.key)}:{},T=bo(e.beforeSearchSubmit({...a,...b}));(C=e.onFormSearchSubmit)==null||C.call(e,T),e.onSubmit&&!c&&e.onSubmit(T)},i=a=>{var c,r,v,f,d;o.value=a,(v=e.onSearchTabChange)==null||v.call(e,{[(r=(c=e.search)==null?void 0:c.tabName)!=null?r:"tab"]:a}),(d=(f=u.value)==null?void 0:f.onTabChange)==null||d.call(f,a)};return()=>{var a,c,r,v;const f=X(Ha,_e({class:`${e.prefixCls}-form`},Et(e.search||{},["cardProps","tabName"]),{items:e.items,loading:e.loading,style:{marginBlockEnd:((a=e.search)==null?void 0:a.cardProps)!==!1&&e.tableShowCard?0:"30px",...(c=e.search)==null?void 0:c.style},onReset:e.onReset,onFinish:d=>{s(d,!1)},onValuesChange:d=>{var p,m,y;((p=e.search)==null?void 0:p.submitter)===!1&&s(d,!0),(y=(m=e.search)==null?void 0:m.onValuesChange)==null||y.call(m,d)},onInit:d=>{s(d,!0)}}),null);return((r=e.search)==null?void 0:r.cardProps)!==!1&&e.tableShowCard?X(wo,_e({class:`${e.prefixCls}-search`,activeTabKey:o.value,bordered:Eo("search",e.cardBordered),style:{marginBlockEnd:"16px"}},Et((v=u.value)!=null?v:{},["onTabChange","activeTabKey"]),{onTabChange:i}),uc(f)?f:{default:()=>[f]}):f}}});function dc(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}var vc=Pe({name:"ProTable",inheritAttrs:!1,props:Mr(),slots:{},emits:["keydown"],setup(e,{expose:t,slots:l,attrs:n,emit:o}){var u;const s=F(),i=F(),a=So("table"),{hoverRowKey:c}=xr({rowHoverDelay:h(()=>e.rowHoverDelay),rowHover:h(()=>e.rowHover)}),r=h(()=>{var z;return(z=e.prefixCls)!=null?z:a});$r(),he(c,(z,ie)=>{i.value&&(i.value.style.removeProperty(`--${r.value}-row-bg-${ie}`),i.value.style.setProperty(`--${r.value}-row-bg-${z}`,"hsl(var(--pro-accent))"))},{flush:"post"});const v=z=>{z.stopPropagation(),o("keydown",z)},f=h(()=>{if(e.request)return async(z,ie,me)=>{const Se={...z||{},...e.params||{}};return await e.request(Se,ie,me)}}),d=zr(f,e),{dataSource:p,loading:m,pagination:y,pollingLoading:C,onTableChange:b,reload:T,reset:k}=d,L=h(()=>e.pagination===!1?!1:y.value),V=h(()=>typeof m.value=="boolean"?m.value:typeof m.value=="object"?m.value.spinning:void 0),j=z=>{var ie,me;if(e.options&&e.options.search){const{name:Se="keyword"}=e.options.search===!0?{}:e.options.search;if(((me=(ie=e.options.search)==null?void 0:ie.onSearch)==null?void 0:me.call(ie,d.keyword.value))!==!1){d.setFormSearch({...z,[Se]:d.keyword.value});return}}d.setFormSearch(z)},D=Lr(e),q=h(()=>Do({columns:e.columns,counter:D}).sort(Wr(D.columnsMap.value)));he(q,()=>{if(q.value&&q.value.length>0){const z=q.value.map(ie=>St(ie.key,ie.index));D.setSortKeyColumns(z)}},{immediate:!0});const g=h(()=>{const z=ie=>ie.map(me=>{const Se=St(me.key,me.index),Q=D.columnsMap.value[Se];return Q&&Q.show===!1?!1:me.children?{...me,children:z(me.children)}:me}).filter(Boolean);return z(q.value)}),H=(z,ie)=>{var me;const Se={...D.columnsMap.value},Q=z.map(ae=>St(ae.key,ae.index));if(ie==="resize"){const ae=ve=>{ve.forEach(pe=>{var ye;const we=St(pe.key,pe.index),Ke={...Se[we]};(ye=pe.children)!=null&&ye.length?ae(pe.children):(Ke.width=pe.width,Se[we]=Ke)})};ae(z)}else Q.forEach((ae,ve)=>{Se[ae]={...Se[ae]||{},order:ve}});D.setColumnsMap(Se),D.setSortKeyColumns(Q),(me=e["onUpdate:columns"])==null||me.call(e,z,ie)},N=h(()=>{var z,ie,me;return e.search===!1?[]:(ie=(z=e.search)==null?void 0:z.items)!=null&&ie.length?(me=e.search)==null?void 0:me.items:_r(e.columns).filter(Se=>!Se.hideInSearch).map(Se=>dr({...Se,width:void 0,tooltip:Se.headerTooltip,name:Se.dataIndex},["dataIndex","width"]))}),S=F(new Map),M=h(()=>typeof e.rowKey=="function"?e.rowKey:z=>z?.[e.rowKey||"id"]);he([()=>p.value,M],()=>{var z;(z=p.value)!=null&&z.length&&p.value.forEach(ie=>{const me=M.value(ie,-1);S.value.set(me,ie)}),R()});const[A,G]=Vr(e.selectedRowKeys||(e.rowSelection?((u=e.rowSelection)==null?void 0:u.defaultSelectedRowKeys)||[]:void 0),{value:h(()=>e.selectedRowKeys||(e.rowSelection?e.rowSelection.selectedRowKeys:void 0))}),x=h(()=>({selectedRowKeys:A.value,preserveSelectedRowKeys:!0,...e.rowSelection,onChange:(z,ie)=>{var me;e.rowSelection&&e.rowSelection.onChange&&e.rowSelection.onChange(z,ie),(me=e["onUpdate:selectedRowKeys"])==null||me.call(e,z,ie),G(z)}})),K=h(()=>{var z;return(z=A.value)==null?void 0:z.map(ie=>{var me;return(me=S.value)==null?void 0:me.get(ie)})}),R=()=>{var z;e.rowSelection&&e.rowSelection.onChange&&e.rowSelection.onChange([],[]),(z=e["onUpdate:selectedRowKeys"])==null||z.call(e,[],[]),G([])},O=h(()=>e.options===!1&&!e.title&&!l.title&&!l.toolbar&&!l.searchExtra&&!l.toolbarActions),J=h(()=>{var z;return(e.search===!1||!((z=N.value)!=null&&z.length))&&e.toolBar===!1}),de=h(()=>e.cardProps===!1||J.value===!0?{}:O.value?{padding:0}:e.pagination!==!1?{paddingBlockEnd:0}:{});return t({scrollTo:(z,ie)=>{var me;(me=s.value)==null||me.scrollTo(z,ie)},scrollLeft:h(()=>{var z;return Gt((z=s.value)==null?void 0:z.scrollLeft)}),scrollTop:h(()=>{var z;return Gt((z=s.value)==null?void 0:z.scrollTop)}),bodyRef:h(()=>{var z;return Gt((z=s.value)==null?void 0:z.bodyRef)}),copySelectedRange:()=>{var z;return(z=s.value)==null?void 0:z.copySelectedRange()},getSelectedRange:()=>{var z;return(z=s.value)==null?void 0:z.getSelectedRange()},clearAllSelectedRange:()=>{var z;return(z=s.value)==null?void 0:z.clearAllSelectedRange()},clearDataSource:()=>{p.value=[]},appendCellToSelectedRange:z=>{var ie;return(ie=s.value)==null?void 0:ie.appendCellToSelectedRange(z)},openEditor:z=>{var ie;return(ie=s.value)==null?void 0:ie.openEditor(z)},closeEditor:z=>{var ie;return(ie=s.value)==null?void 0:ie.closeEditor(z)},reload:T,reset:k}),()=>{var z,ie,me;const{expandIcon:Se=l.expandIcon,expandedRowRender:Q=l.expandedRowRender}=e,ae=g.value||To((z=l.default)==null?void 0:z.call(l))||[];let ve=X(Ee,null,[e.toolBar!==!1&&!O.value&&X(ac,{title:e.title,subTitle:e.subTitle,tooltip:e.tooltip,prefixCls:r.value,options:e.options,actionsRef:d,tableColumn:q.value,selectedRowKeys:A.value,selectedRows:K.value,onFormSearchSubmit:pe=>{d.setFormSearch({...d.formSearch.value,...pe})}},{toolbar:l.toolbar,title:l.title,searchExtra:l.searchExtra,actions:l.toolbarActions}),!!e.rowSelection&&((ie=e.rowSelection)==null?void 0:ie.type)!=="radio"&&e.alwaysShowAlert!==!1&&!!A.value.length&&X(sc,{prefixCls:r.value,selectedRowKeys:A.value,selectedRows:K.value,onCleanSelected:R},{info:l.alertInfo,actions:l.alertActions}),X(Mu,_e({ref:s},Et(e,["onChange","onUpdate:pagination","onUpdate:selectedRowKeys","onUpdate:columns"]),{prefixCls:r.value,columns:ae||[],size:D.tableSize.value,dataSource:p.value,loading:m.value,rowSelection:e.rowSelection?x.value:void 0,pagination:L.value,expandIcon:Se,expandedRowRender:Q,hasContextmenuPopup:!!l.contextmenuPopup,onChange:b,"onUpdate:columns":H}),{...l,footer:e.footer||l.footer})]);if(!(e.cardProps===!1||J.value)){const pe=(function(){return ve})();ve=X(wo,_e({bordered:Eo("table",e.cardBordered),bodyStyle:de.value},e.cardProps),dc(ve)?ve:{default:()=>[pe]})}return X("div",_e({ref:i},n,{class:[`${r.value}-wrapper ${e.bordered?r.value+"-wrapper-bordered":""} ${hr.value==="dark"?r.value+"-wrapper-dark":""} ${C.value?r.value+"-wrapper-polling":""}`,n.class],onKeydown:v}),[e.search!==!1&&!!((me=N.value)!=null&&me.length)&&X(cc,{prefixCls:r.value,items:N.value,cardBordered:e.cardBordered,search:e.search,tableShowCard:e.cardProps!==!1,loading:V.value,beforeSearchSubmit:e.beforeSearchSubmit,manual:e.manual||e.manualRequest,onReset:e.onReset,onSubmit:e.onSubmit,onFormSearchSubmit:j,onSearchTabChange:pe=>{d.setFormSearch({...d.formSearch.value,...pe})}},null),ve])}}}),fc=Pe({name:"ProTableColumn",slots:["title","filterIcon"]}),hc=Pe({name:"ProTableColumnGroup",slots:["title"],__S_TABLE_COLUMN_GROUP:!0});const pc=Symbol("SummaryCtx"),pa=Symbol("SummaryRowCtx"),mc=e=>{lt(pa,e)},gc=()=>Je(pa,{}),yc=()=>Je(pc,{});let wc=1;var Cc=Pe({name:"ProTableSummaryCell",props:{index:{type:Number},colSpan:{type:Number,default:1},align:{type:String},columnKey:String},setup(e){const t=yc(),l=je(),n=gc(),o="id_"+wc++,u=Fe(()=>e.columnKey?l.columnKeyIndexMap.value[e.columnKey]:e.index),s=h(()=>u.value>=0&&u.value<=l.allColumns.value.length);qe(()=>{s.value&&n.updateCell(o,u.value,e.colSpan),setTimeout(()=>{ht(s.value,"TableSummaryCell",`'index=${e.index}' or 'columnKey=${e.columnKey||""}' is not valid`)})}),Cl(()=>{n.removeCell(o)});const i=h(()=>n.cells.value[u.value]||{width:0,visible:!1,style:{}}),{allColumns:a}=l,c=h(()=>a.value[u.value]),r=h(()=>l.pageData.value),v=F();he(c,()=>{var C;v.value=(C=c.value)==null?void 0:C.dataIndex},{immediate:!0});const f=h(()=>{let C=0;const b=r.value;for(let T=0;T<b.length;T++){const k=b[T];if(C+=Number(k[v.value]),isNaN(C))break}return C}),d=h(()=>l.prefixCls.value),p=h(()=>{const{fixed:C,isLastFixedLeft:b,isFirstFixedRight:T}=i.value;return{[`${d.value}-cell`]:!0,[`${d.value}-summary-cell`]:!0,[`${d.value}-summary-cell-fixed-${C}`]:!!C,[`${d.value}-summary-cell-last-fixed-left`]:b,[`${d.value}-summary-cell-first-fixed-right`]:T}}),m=h(()=>{const C=`${i.value.width}px`;return{width:C,minWidth:C,maxWidth:C,order:u.value}}),y=h(()=>({[`${d.value}-cell-inner`]:!0}));return{prefixCls:d,column:c,summaryCtx:t,pageData:r,total:f,cellClass:p,cellConfig:i,cellStyle:m,cellInnerClass:y}}});function bc(e,t,l,n,o,u){return e.cellConfig.visible?(I(),ee("div",{key:0,tabindex:"-1",role:"cell",class:_(e.cellClass),style:Re(e.cellConfig.style)},[oe("div",{class:_(e.cellInnerClass)},[oe("div",{class:_(`${e.prefixCls}-cell-content`)},[st(e.$slots,"default",{column:e.column,total:e.total,data:e.pageData})],2)],2)],6)):Ce("v-if",!0)}var Sc=Be(Cc,[["render",bc]]),xc=Pe({name:"ProTableSummaryRow",setup(){const e=je(),t=bl({}),l=F([]),n=F([]),o=h(()=>Object.values(t).sort((d,p)=>d.index-p.index));mc({cells:l,updateCell:(d,p,m)=>{t[d]={index:p,colSpan:m}},removeCell:d=>{delete t[d]}});const u=Fe(()=>e.leftColumns.value.length-1),s=Fe(()=>e.leftColumns.value.length+e.centerColumns.value.length-1),i=Fe(()=>e.allColumns.value.length-1),a=()=>{const d=[];let p=0;const m=u.value,y=s.value,C=i.value;let b=e.rightWidth.value;for(let L=0,V=o.value.length;L<V;L++){const j=o.value[L],{index:D,colSpan:q=1}=j;if(D<=m){D-p>0&&d.push({index:p,colSpan:D-p,isPlaceholder:!0,fixed:"left"});const g={...j,colSpan:Math.min(m-D+1,q),fixed:"left"};d.push(g),p=D+g.colSpan}else if(D<=y){p<=m&&(d.push({index:p,colSpan:m-p+1,isPlaceholder:!0,fixed:"left"}),p=m+1),D-p>0&&d.push({index:p,colSpan:D-p,isPlaceholder:!0});const g={...j,colSpan:Math.min(y-D+1,q)};d.push(g),p=D+g.colSpan}else{p<=m&&(d.push({index:p,colSpan:m-p+1,isPlaceholder:!0,fixed:"left"}),p=m+1),p<=y&&(d.push({index:p,colSpan:y-p+1,isPlaceholder:!0}),p=y+1),D-p>0&&d.push({index:p,colSpan:D-p,isPlaceholder:!0,fixed:"right"});const g={...j,colSpan:Math.min(C-D+1,q),fixed:"right"};d.push(g),p=D+g.colSpan}}p<=m&&(d.push({index:p,colSpan:m-p+1,isPlaceholder:!0,fixed:"left"}),p=m+1),p<=y&&(d.push({index:p,colSpan:y-p+1,isPlaceholder:!0}),p=y+1),p<=C&&d.push({index:p,colSpan:C-p+1,isPlaceholder:!0,fixed:"right"});const T=[],k=[];d.forEach((L,V)=>{const{index:j,colSpan:D,isPlaceholder:q,fixed:g}=L,H=e.getColumnPosition(j,D),{width:N,left:S}=H;g==="right"&&(b-=N);const M={index:j,width:N,style:Object.assign({width:`${N}px`,minWidth:`${N}px`,maxWidth:`${N}px`,order:j,borderRight:q&&j===0?"none":void 0},g?{position:"sticky",[g]:g==="left"?`${S}px`:`${b}px`}:{}),fixed:g||!1,visible:!0};g!=="left"||d[V+1]&&d[V+1].fixed==="left"?g!=="right"||d[V-1]&&d[V-1].fixed==="right"||(M.isFirstFixedRight=!0):(M.isLastFixedLeft=!0,delete M.style.borderRight),q?k.push(M):T[M.index]=M}),l.value=T,n.value=k};let c;he([e.allColumns,o],()=>{c&&c(),c=Hr(a).cancel},{immediate:!0});const r=h(()=>{const{prefixCls:d}=e.props;return{[`${d}-row`]:!0,[`${d}-summary-row`]:!0}}),v=h(()=>{const{prefixCls:d}=e.props;return{[`${d}-cell`]:!0,[`${d}-summary-cell`]:!0}}),f=h(()=>({width:`${e.bodyMaxWidth.value}px`}));return{prefixCls:h(()=>e.props.prefixCls),rowClass:r,placeholderCell:n,cellClass:v,rowStyle:f}}});function $c(e,t,l,n,o,u){return I(),ee("div",{role:"row",class:_(e.rowClass),style:Re(e.rowStyle)},[st(e.$slots,"default"),(I(!0),ee(Ee,null,$t(e.placeholderCell,s=>(I(),ee("div",{key:s.index,tabindex:"-1",role:"cell",class:_([e.cellClass,{[`${e.prefixCls}-summary-cell-fixed-${s.fixed}`]:!!s.fixed,[`${e.prefixCls}-summary-cell-last-fixed-left`]:s.isLastFixedLeft,[`${e.prefixCls}-summary-cell-first-fixed-right`]:s.isFirstFixedRight}]),style:Re(s.style)},"   ",6))),128))],6)}var Rc=Be(xc,[["render",$c]]),kc=Pe({name:"ProTableSummary",props:{fixed:Boolean},setup(){ht(!1,"s-table-summary","you do not need s-table-summary, you can use summaryFixed prop at s-table")}});function Kc(e,t,l,n,o,u){return st(e.$slots,"default")}var Pc=Be(kc,[["render",Kc]]);const $n=vr(vc,{Column:fc,ColumnGroup:hc,Summary:Pc,SummaryRow:Rc,SummaryCell:Sc});$n.SELECTION_ALL=ql;$n.SELECTION_INVERT=Zl;$n.SELECTION_NONE=Jl;export{$n as P,Rc as a,Sc as b};
