import{u as Pt,f as Oa,r as jl,R as un,g as Ba,d as Da}from"./index.CKqY5PVn.js";import{s as ce,e as h,f as F,w as fe,h as qe,c as Ze,p as lt,aS as Ma,F as Be,i as zt,C as Fa,aT as Ln,aL as Aa,o as mt,P as fo,b as wl,aU as za,aV as ho,J as yt,u as Gt,j as ct,t as kt,r as Cl,d as Pe,R as te,Q as T,q as Lt,n as Je,A as fl,S as oe,a1 as _,X as de,ag as it,k as X,y as Qt,x as ml,l as Ft,$ as ut,Z as ee,a2 as ge,aQ as La,Y as Re,aW as Nt,a0 as We,ai as $e,g as cn,B as st,af as xt,U as wt,aX as dn,G as At,aY as Na,v as Wa,aZ as _a,z as Va}from"./framework.zHIi5jet.js";import{u as Et}from"./useIntl.DCKvkjl3.js";import{i as bl,f as ja,d as po,e as Nn,g as Ul,h as Ht,P as mo,j as go,E as Ua,C as Xa,k as Ya,M as yo,l as Ga,m as vn,n as gl,o as fn,p as qa,q as wo,r as Ja,s as Za,t as Wn,u as Qa,v as er,w as tr,x as lr,y as nr,z as or,A as Xl,V as ar,G as rr,H as ir,J as sr,K as Co,L as ur,N as cr,S as bo,O as dr,Q as So}from"./theme.D_rUSwjX.js";import{a as xo,b as vr,c as Yl}from"./validate.CC0GjpC9.js";import{P as fr,o as It,a as $o}from"./index.CA1S9pui.js";import{u as Ro}from"./index.RPAEOQf9.js";import{w as hr}from"./install.BalIz2Dd.js";const pr=ce(!0),mr=ce("light");ce("#1677ff");let _n={};function ko(e,t){console.error(`Warning: ${t}`)}function gr(e,t,l){!t&&!_n[l]&&(e(!1,l),_n[l]=!0)}function yr(e,t){gr(ko,e,t)}function Ko(e,t){const l=new Set;return e.forEach(n=>{t.has(n)||l.add(n)}),l}function wr(e){const{disabled:t,disableCheckbox:l,checkable:n}=e||{};return!!(t||l)||n===!1}function Cr(e,t,l,n){const o=new Set(e),u=new Set;for(let i=0;i<=l;i+=1)(t.get(i)||new Set).forEach(c=>{const{rowKey:r,record:v,children:f=[]}=c;o.has(r)&&!n(v)&&f.filter(d=>!n(d.record)).forEach(d=>{o.add(d.rowKey)})});const s=new Set;for(let i=l;i>=0;i-=1)(t.get(i)||new Set).forEach(c=>{const{parent:r,record:v}=c;if(n(v)||!c.parent||s.has(c.parent.rowKey))return;if(n(c.parent.record)){s.add(r?.rowKey);return}let f=!0,d=!1;(r?.children||[]).filter(p=>!n(p.record)).forEach(({rowKey:p})=>{const m=o.has(p);f&&!m&&(f=!1),!d&&(m||u.has(p))&&(d=!0)}),f&&o.add(r?.rowKey),d&&u.add(r?.rowKey),s.add(r?.rowKey)});return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(Ko(u,o))}}function br(e,t,l,n,o){const u=new Set(e);let s=new Set(t);for(let a=0;a<=n;a+=1)(l.get(a)||new Set).forEach(r=>{const{rowKey:v,record:f,children:d=[]}=r;!u.has(v)&&!s.has(v)&&!o(f)&&d.filter(p=>!o(p.record)).forEach(p=>{u.delete(p.rowKey)})});s=new Set;const i=new Set;for(let a=n;a>=0;a-=1)(l.get(a)||new Set).forEach(r=>{const{parent:v,record:f}=r;if(o(f)||!r.parent||i.has(r.parent.rowKey))return;if(o(r.parent.record)){i.add(v?.rowKey);return}let d=!0,p=!1;(v?.children||[]).filter(m=>!o(m.record)).forEach(({rowKey:m})=>{const y=u.has(m);d&&!y&&(d=!1),!p&&(y||s.has(m))&&(p=!0)}),d||u.delete(v?.rowKey),p&&s.add(v?.rowKey),i.add(v?.rowKey)});return{checkedKeys:Array.from(u),halfCheckedKeys:Array.from(Ko(s,u))}}function Gl(e,t,l,n,o,u){const s=[],i=new Set(e.filter(r=>{const v=!!l[r];return v||s.push(r),v}));ko(!s.length,`Tree missing follow keys: ${s.slice(0,100).map(r=>`'${r}'`).join(", ")}`);let a;u?a=u:a=wr;let c;return t===!0?c=Cr(i,n,o,a):c=br(i,t.halfCheckedKeys,n,o,a),c}var ht=(e,t,l)=>{yr(e,`[table: ${t}] ${l}`)};const ql="SELECT_ALL",Jl="SELECT_INVERT",Zl="SELECT_NONE";function Sr(e,t,l,n){var o,u;const s=ce(new Map),[i,a]=Pt(e.selectedRowKeys||((o=t.value)==null?void 0:o.selectedRowKeys)||((u=t.value)==null?void 0:u.defaultSelectedRowKeys)||[],{value:h(()=>{var g;return e.selectedRowKeys||((g=t.value)==null?void 0:g.selectedRowKeys)})}),c=g=>{var E;return!!((E=n.checkboxPropsMap.value.get(g.rowKey))!=null&&E.disabled)},r=F(!0),v=F(!1),f=F(!0),d=F(!0),p=F(!1),m=ce(new Map),y=F(0),b=ce([]),C=ce([]),I=h(()=>{var g;const E=((g=t.value)==null?void 0:g.type)==="radio"?b.value.slice(0,1):b.value;return new Set(E)}),k=h(()=>{var g;return((g=t.value)==null?void 0:g.type)==="radio"?new Set:new Set(C.value)});fe(l,()=>{m.value=new Map}),qe(()=>{const g=n.keyEntities.value,E=I.value;let L=!0,S=!1,H=!0,z=!0,q=!1;n.pageDataRowKeys.value.forEach(x=>{const K=g[x],{level:R}=K;c(K)?E.has(x)?S=!0:H=!1:(L=!1,E.has(x)?q=!0:z=!1);let B=m.value.get(R);B||(B=new Set),m.value.set(R,B),B.add(K),r.value=L,f.value=H,v.value=S,d.value=z,p.value=q,y.value=Math.max(y.value,R)})}),qe(()=>{var g;if((g=t.value)!=null&&g.checkStrictly)b.value=i.value||[],C.value=[];else{const{checkedKeys:E,halfCheckedKeys:L}=Gl(i.value,!0,n.keyEntities.value,m.value,y.value,c);b.value=E||[],C.value=L}});const[N,V]=Oa("");fe(()=>e.rowSelection,()=>{e.rowSelection||a([])},{immediate:!0});const j=g=>{var E;let L,S;const{preserveSelectedRowKeys:H,onChange:z}=t.value,{getRecordByKey:q}=n;if(H){const x=new Map;L=g,S=g.map(K=>{let R=q(K);return!R&&s.value.has(K)&&(R=s.value.get(K)),x.set(K,R),R}),s.value=x}else L=[],S=[],g.forEach(x=>{const K=q(x);K!==void 0&&(L.push(x),S.push(K))});a(L),(E=e["onUpdate:selectedRowKeys"])==null||E.call(e,L,S),z?.(L,S)},M=h(()=>{const{onSelectInvert:g,onSelectNone:E,selections:L,hideSelectAll:S}=t.value,{pageData:H,getRowKey:z,locale:q}=n;return!L||S?null:(L===!0?[ql,Jl,Zl]:L).map(K=>K===ql?{key:"all",text:q.value.selectionAll,onSelect(){j(n.allDataRootRowKeys.value)}}:K===Jl?{key:"invert",text:q.value.selectInvert,onSelect(){const R=new Set(I.value);H.value.forEach((Q,A)=>{const Y=z.value(Q,A);R.has(Y)?R.delete(Y):R.add(Y)});const B=Array.from(R);g&&(ht(!1,"Table","`onSelectInvert` will be removed in future. Please use `onChange` instead."),g(B)),j(B)}}:K===Zl?{key:"none",text:q.value.selectNone,onSelect(){E?.(),j([])}}:K)});return{derivedSelectedKeySet:I,derivedSelectedKeys:b,derivedHalfSelectedKeySet:k,setSelectedKeys:j,triggerSingleSelection:(g,E,L,S)=>{const{onSelect:H}=t.value,{getRecordByKey:z}=n||{};if(H){const q=L.map(x=>z(x));H(z(g),E,q,S)}j(L)},mergedSelections:M,lastSelectedKey:N,setLastSelectedKey:V,mergedRowSelection:t,isCheckboxDisabled:c,maxLevel:y,levelEntities:m,allDisabled:r,allDisabledAndChecked:f,allDisabledSomeChecked:v,checkedCurrentAll:d,checkedCurrentSome:p}}const xr=F(""),$r=()=>xr.value,Po=Symbol("HoverContextKey"),Rr=e=>{const t=F(),l=F();let n,o;const i={hoverColumnKey:t,hoverRowKey:l,handleCellHover:(a,c,r)=>{clearTimeout(n),clearTimeout(o),r||(o=setTimeout(()=>{l.value=a,t.value=c},e.rowHoverDelay.value))},handleCellBlur:()=>{n=setTimeout(()=>{l.value=void 0,t.value=void 0},e.rowHoverDelay.value+50)}};return lt(Po,i),i},Io=()=>Ze(Po,{hoverRowKey:F(),hoverColumnKey:F(),handleCellHover:()=>{},handleCellBlur:()=>{}}),To=Symbol("Level"),Sl=()=>Ze(To,void 0),kr=()=>{const e=Sl();lt(To,e===void 0?0:e+1)};function hn(e,t){return toString.call(e)===`[object ${t}]`}function Vn(e){return typeof e=="function"}function Ql(e){return e&&Array.isArray(e)}function Kr(e){return hn(e,"String")}function Eo(e){return e!==null&&hn(e,"Object")}const Tt=(e,t)=>e?Array.isArray(e)?e.join("-"):e.toString():`${t}`;function Pr(e,t){return t?`${t}-${e}`:`${e}`}function Ir(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&delete e[t]}function Tr(e){return e==null?[]:Array.isArray(e)?e:[e]}function Ho(e,t){if(!t&&typeof t!="number")return e;const l=Tr(t);let n=e;for(let o=0;o<l.length;o+=1){if(!n)return null;const u=l[o];n=n[u]}return n}function Er(e){return Array.isArray(e)&&e.length===1&&(e=e[0]),e&&zt(e)&&typeof e.type!="symbol"}const Hr=(e,t)=>{const l={},n=/;(?![^(]*\))/g,o=/:(.+)/;return typeof e=="object"?e:(e.split(n).forEach(function(u){if(u){const s=u.split(o);if(s.length>1){const i=s[0].trim();l[i]=s[1].trim()}}}),l)};function Or(e){let t,l=!1;return{promise:new Promise((n,o)=>{t=o,Promise.resolve().then(()=>{n("")})}).then(()=>{l||e()}).catch(()=>{}),cancel:()=>{l=!0,t&&t()}}}function Br(e,t){if(!e)return[];const l=e.slice(),n=l.indexOf(t);return n>=0&&l.splice(n,1),l}function Dr(e,t){const l=(e||[]).slice();return l.indexOf(t)===-1&&l.push(t),l}const Mr=e=>e!=null&&e!=="",en=(e,t=!0)=>{const l=Ql(e)?e:[e],n=[];return l.forEach(o=>{Ql(o)?n.push(...en(o,t)):o&&o.type===Be?n.push(...en(o.children,t)):o&&zt(o)?t&&!isEmptyElement(o)?n.push(o):t||n.push(o):Mr(o)&&n.push(o)}),n};function Oo(e=[]){const t=en(e),l=[];return t.forEach(n=>{var o,u,s,i;if(!n)return;const a=n.key,c=((o=n.props)==null?void 0:o.style)||{},r=((u=n.props)==null?void 0:u.class)||"",v=n.props||{};for(const[m,y]of Object.entries(v))v[Ma(m)]=y;const{default:f,...d}=n.children||{},p={...d,...v,style:c,class:r};if(a&&(p.key=a),(s=n.type)!=null&&s.__S_TABLE_COLUMN_GROUP)p.children=Oo(typeof f=="function"?f():f);else{const m=(i=n.children)==null?void 0:i.default;p.customRender=p.customRender||m}l.push(p)}),l}const pn=(e,t,l)=>Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))<=l;function Dt(e,t,l,n){let o,u=e,s=[];const i=t.length;if(i===0)return e.splice(0,0,n),e;for(let a=0;a<i;a++)o=u[t[a]],a===i-1&&(s=u),u=o?.[l]||[];return s.splice(t[i-1]+1,0,n),s}function Mt(e,t,l){let n,o=e,u=[];const s=t.length;for(let i=0;i<s;i++)n=o[t[i]],i===s-1&&(u=o),o=n?.[l]||[];return u.splice(t[s-1],1),u}function jn(e){return hn(e,"Promise")&&Eo(e)&&Vn(e.then)&&Vn(e.catch)}function mn(e){return e.some(t=>!zt(t)||t.type!==Fa&&!(t.type===Be&&!mn(t.children)))?e:null}const Bo=(e,t)=>t===void 0?!1:typeof t=="boolean"?t:t[e],Do=()=>({prefixCls:String,disabled:Boolean,tabindex:[String,Number],name:String,id:String,style:{type:Object,default:()=>({})},class:String,checked:Boolean,indeterminate:Boolean,ariaLabel:String}),Mo=()=>({ignoreCellKey:Boolean,showHeaderScrollbar:Boolean,deepWatchDataSource:Boolean,deepWatchColumns:Boolean,prefixCls:String,columnDrag:{type:Boolean,default:!1},animateRows:{type:Boolean,default:void 0},dropdownPrefixCls:{type:String},columns:{type:Array,default:()=>[]},dataSource:{type:Array,default:()=>[]},virtual:{type:Boolean,default:!1},xVirtual:{type:Boolean,default:void 0},rowHeight:{type:[Number,Function],default:void 0},autoHeaderHeight:{type:Boolean,default:!1},headerHeight:{type:[Number,Array]},height:{type:[Number,String]},maxHeight:{type:[Number,String]},minHeight:{type:[Number,String]},size:{type:String},bordered:{type:Boolean,default:!1},wrapText:{type:Boolean,default:!1},loading:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:()=>({})},direction:{type:String,default:void 0},stripe:{type:Boolean,default:!1},rowClassName:{type:[String,Function],default:void 0},sticky:{type:[Boolean,Object],default:!0},selectedRowKeys:{type:Array,default:void 0},expandFixed:{type:[Boolean,String],default:void 0},expandColumnWidth:{type:Number,default:void 0},expandedRowKeys:{type:Array,default:void 0},defaultExpandedRowKeys:{type:Array,default:void 0},expandedRowRender:{type:Function,default:void 0},expandRowByClick:{type:Boolean,default:void 0},expandIcon:{type:Function,default:void 0},onExpand:{type:Function,default:void 0},onExpandedRowsChange:{type:Function,default:void 0},defaultExpandAllRows:{type:Boolean,default:void 0},indentSize:Number,expandIconColumnIndex:Number,childrenColumnName:{type:String,default:void 0},rowExpandable:{type:Function,default:()=>!0},rowSelection:{type:Object,default:void 0},rowHoverDelay:{type:Number,default:59},rowKey:{type:[Function,String]},customRow:{type:Function,default:()=>({})},customCell:{type:Function,default:()=>({})},customHeaderCell:{type:Function,default:()=>({})},customSummaryCellProps:{type:Function,default:()=>({})},showHeader:{type:Boolean,default:!0},showSorterTooltip:{type:[Boolean,Object],default:!0},getPopupContainer:{type:Function},locale:{type:Object,default:void 0},scrollX:{type:[Number,String]},scroll:{type:Object,default:void 0},rangeSelection:{type:[String,Boolean],default:!1},copyDelimiter:{type:String,default:""},rowDrag:{type:[Boolean]},onChange:{type:Function},summaryFixed:{type:[Boolean,String],default:!1},hasContextmenuPopup:Boolean,formatRangeCellText:{type:Function},"onUpdate:selectedRowKeys":{type:Function},onScroll:{type:Function},"onUpdate:expandedRowKeys":{type:Function},onResizeColumn:{type:Function,default:void 0},onRowDragEnd:{type:Function,default:void 0},onColumnDragEnd:{type:Function,default:void 0},onCellKeydown:{type:Function,default:void 0},onCellClick:{type:Function,default:void 0},onBeforeOpenEditor:{type:Function,default:void 0},onOpenEditor:{type:Function,default:void 0},onBeforeCloseEditor:{type:Function,default:void 0},onCloseEditor:{type:Function,default:void 0},"onUpdate:pagination":{type:Function},"onUpdate:dataSource":{type:Function},columnEmptyText:{type:[String,Boolean],default:"-"},toolBar:{type:Boolean,default:void 0},options:{type:[Object,Boolean],default:void 0},alwaysShowAlert:{type:Boolean,default:void 0},request:Function,params:Object,defaultData:Array,manual:Boolean,polling:[Number,Function],debounceTime:Number,onLoad:{type:Function,default:void 0},onLoadingChange:{type:Function,default:void 0},onRequestError:{type:Function,default:void 0},onSizeChange:{type:Function,default:void 0},onSubmit:{type:Function,default:void 0},onReset:{type:Function,default:void 0},columnsState:{type:Object,default:void 0},highlightSelectRow:{type:Boolean,default:!1},paginationSticky:{type:[Boolean,Object],default:!0},horizontalScrollSticky:{type:[Boolean,Object],default:!0}}),Fr=()=>({...Mo(),title:String,subTitle:String,footer:Function,tooltip:String,cardProps:{type:[Object,Boolean],default:void 0},search:{type:[Object,Boolean],default:void 0},beforeSearchSubmit:{type:Function,default:void 0},cardBordered:{type:[Boolean,Object],default:void 0}}),Ar=({pagination:e},t)=>{if(e){const{current:l,pageSize:n,total:o,showTotal:u,showSizeChanger:s}=e;return{current:l||1,total:o||0,pageSize:n||10,showSizeChanger:s??!0,showTotal:u||((i,a)=>`${t.getMessage("pagination.total.range","第")} ${a[0]}-${a[1]} ${t.getMessage("pagination.total.total","条/总共")} ${i} ${t.getMessage("pagination.total.item","条")}`)}}return{current:1,total:0,pageSize:10,showSizeChanger:!0,showTotal:(l,n)=>`${t.getMessage("pagination.total.range","第")} ${n[0]}-${n[1]} ${t.getMessage("pagination.total.total","条/总共")} ${l} ${t.getMessage("pagination.total.item","条")}`}},zr=e=>{if(!e)return;let t;if(Array.isArray(e)?t=[...e]:t=[{...e}],t=t.filter(l=>!!l.order),!!t.length)return t.length>1&&(t=t.sort((l,n)=>{var o,u,s,i;return(((u=(o=n.column)==null?void 0:o.sorter)==null?void 0:u.multiple)||0)-(((i=(s=l.column)==null?void 0:s.sorter)==null?void 0:i.multiple)||0)})),t.map(l=>{var n;return{field:l.field,order:(n=l.order)==null?void 0:n.toUpperCase()}})},Lr=(e,t)=>{var l;const n=F(!1),o=F(null),u=F(!!t.manual),s=F(),i=F(!1),a=F(""),c=Et(),r=F({}),v=F(),f=F(),d=h(()=>{if(t.options!==!1&&t.options.search!==!1)return t.options.search===!0||!t.options.search.name?void 0:t.options.search.name}),[p,m]=Pt(!1,{value:h(()=>typeof t.loading=="object"?t.loading.spinning:t.loading),onChange:t.onLoadingChange}),[y,b]=Pt((l=t.defaultData)!=null?l:[],{value:h(()=>t.request?void 0:t.dataSource)}),[C,I]=Pt(()=>Ar(t,c),{onChange(S){var H,z,q;t.pagination!==!1&&((H=t["onUpdate:pagination"])==null||H.call(t,ho(t.pagination)?Object.assign(t.pagination||{},S):S),(q=(z=t.pagination)==null?void 0:z.onChange)==null||q.call(z,S.current,S?.pageSize))}}),[k,N]=Pt(()=>{if(!(u.value||t.search!==!1))return{}}),V=Ln(h(()=>{var S;return(S=C.value)==null?void 0:S.current})),j=Ln(h(()=>{var S;return(S=C.value)==null?void 0:S.pageSize})),M=()=>{m(!1),i.value=!1},J=async S=>{var H,z,q,x;if(u.value){u.value=!1;return}S?i.value=!0:m(!0);const{current:K,pageSize:R}=C.value,B={...r.value,...k.value};t?.pagination!==!1&&(B.current=K,B.pageSize=R),a.value&&(B[(H=d.value)!=null?H:"keyword"]=a.value);try{const{data:Q=[],success:A,total:Y=0,...pe}=await((z=e.value)==null?void 0:z.call(e,B,yt(v.value),yt(f.value)))||{};return A===!1?[]:(b(Q),((q=C.value)==null?void 0:q.total)!==Y&&(C.value.total=Y||Q.length),(x=t.onLoad)==null||x.call(t,Q,pe),Q)}catch(Q){if(t.onRequestError===void 0)throw new Error(Q);y.value===void 0&&b([]),t.onRequestError(Q)}finally{M()}},g=Aa(async S=>{if(s.value&&clearTimeout(s.value),!e)return;const H=new AbortController;o.value=H;try{const z=await Promise.race([J(S),new Promise((x,K)=>{var R;(R=o.value)==null||R.signal.addEventListener("abort",()=>{K("aborted"),M()})})]);if(H.signal.aborted)return;const q=jl(t.polling,z);q&&!n.value&&(s.value=setTimeout(()=>{g(q)},Math.max(q,2e3)))}catch(z){if(z==="aborted")return;throw z}},t.debounceTime||30),E=()=>{var S;(S=o.value)==null||S.abort(),M()};fe(()=>t.polling,(S,H)=>{S||clearTimeout(s.value),!H&&S&&g(!0)}),fe(()=>t.manual,()=>{E(),g(!1),t.manual||(u.value=!1)}),fe(()=>C.value.current,()=>{var S;const{current:H,pageSize:z}=C.value||{};(!V||V.value===H)&&(!j||j.value===z)||t.pagination&&y.value&&((S=y.value)==null?void 0:S.length)>z||H!==void 0&&y.value&&y.value.length<=z&&(E(),g(!1))}),fe(()=>C.value.pageSize,()=>{j.value&&(E(),g(!1))}),fe(v,()=>{I({...C.value,current:1}),E(),g(!1)}),fe(f,()=>{I({...C.value,current:1}),E(),g(!1)}),fe(()=>t.params,()=>{I({...C.value,current:1}),E(),g(!1)},{deep:!0}),fe(r,()=>{I({...C.value,current:1}),E(),g(!1)},{deep:!0}),fe(k,()=>{I({...C.value,current:1}),E(),g(!1)},{immediate:!0});const L=(S,H,z,q)=>{var x;q.action==="paginate"&&I({...C.value,...S}),q.action==="sort"&&(v.value=zr(z)),q.action==="filter"&&(f.value=H),(x=t.onChange)==null||x.call(t,S,H,z,q)};return mt(()=>{n.value=!1,t.search===!1&&g(!1)}),fo(()=>{t.polling&&g(!0)}),wl(()=>{n.value=!0,E(),clearTimeout(s.value)}),za(()=>{clearTimeout(s.value)}),{keyword:a,formSearch:k,dataSource:y,loading:h(()=>typeof t?.loading=="object"?{...t?.loading,spinning:p.value}:p.value),setParams:(S,H)=>{r.value[S]=H},reload:async S=>(S&&I({...C.value,current:1}),E(),g(!1)),pollingLoading:i,pagination:C,reset:async()=>{const{pagination:S}=t||{},{current:H=1,pageSize:z=10}=S||{};I({current:H,total:0,pageSize:z})},setPagination:I,setFormSearch:N,onTableChange:L}},Fo=Symbol("ContainerContextKey"),Nr=e=>{var t;const l=F([]),[n,o]=Pt(()=>e.size||"middle",{value:h(()=>e.size),onChange:e.onSizeChange}),u=h(()=>{var r,v,f;if((r=e?.columnsState)!=null&&r.defaultValue){const p={};return(v=e.columns)==null||v.forEach(({key:m,dataIndex:y,fixed:b,disable:C},I)=>{const k=Tt(m??y,I);k&&(b||C)&&(p[k]={fixed:b,disable:C,show:!0})}),{...p,...e.columnsState.defaultValue}}const d={};return(f=e.columns)==null||f.forEach(({key:p,dataIndex:m,fixed:y,disable:b},C)=>{const I=Tt(p??m,C);I&&(d[I]={show:!0,fixed:y,disable:b})}),d}),[s,i]=Pt(()=>{var r,v;const{persistenceType:f,persistenceKey:d}=e.columnsState||{};if(d&&f&&typeof window<"u"){const p=window[f];try{const m=p?.getItem(d);if(m)return JSON.parse(m)}catch(m){console.warn(m)}}return((r=e.columnsState)==null?void 0:r.value)||((v=e.columnsState)==null?void 0:v.defaultValue)||u.value},{value:h(()=>{var r;return(r=e.columnsState)==null?void 0:r.value}),onChange:(t=e.columnsState)==null?void 0:t.onChange});fe([()=>{var r;return(r=e.columnsState)==null?void 0:r.persistenceKey},u,()=>{var r;return(r=e.columnsState)==null?void 0:r.persistenceType}],()=>{const{persistenceType:r,persistenceKey:v}=e.columnsState||{};if(v&&r&&typeof window<"u"){const f=window[r];try{const d=f?.getItem(v);i(d?JSON.parse(d):u.value)}catch(d){console.warn(d)}}},{immediate:!0});const a=()=>{const{persistenceType:r,persistenceKey:v}=e.columnsState||{};if(!v||!r||typeof window>"u")return;const f=window[r];try{f?.removeItem(v)}catch(d){console.warn(d)}};fe([()=>{var r;return(r=e.columnsState)==null?void 0:r.persistenceKey},s,()=>{var r;return(r=e.columnsState)==null?void 0:r.persistenceType}],()=>{var r,v;if(!((r=e.columnsState)!=null&&r.persistenceKey)||!((v=e.columnsState)!=null&&v.persistenceType)||typeof window>"u")return;const{persistenceType:f,persistenceKey:d}=e.columnsState,p=window[f];try{p?.setItem(d,JSON.stringify(s.value))}catch(m){console.warn(m),a()}});const c={props:e,tableSize:n,setTableSize:o,sortKeyColumns:l,setSortKeyColumns:r=>{l.value=r},columnsMap:s,setColumnsMap:i,clearPersistenceStorage:a,defaultColumnKeyMap:u};return lt(Fo,c),c},xl=()=>Ze(Fo,{}),Wr=e=>{const t={};return Object.keys(e||{}).forEach(l=>{var n;Array.isArray(e[l])&&((n=e[l])==null?void 0:n.length)===0||e[l]!==void 0&&(t[l]=e[l])}),t};function Ao(e,t){var l;const{columns:n,counter:o}=e;return(l=n?.map((u,s)=>{var i,a;const{key:c,dataIndex:r,disable:v,valueEnum:f}=u,d=Tt(c||r?.toString(),[t?.key,s].filter(Boolean).join("-")),p=o.columnsMap.value[d]||{fixed:u.fixed},m={index:s,key:d,...u,valueEnum:f,fixed:p.fixed,disable:(i=p.disable)!=null?i:v,children:u.children?Ao({...e,columns:(a=u?.children)!=null?a:[]},{...u,key:d}):void 0};return Wr(m)}))==null?void 0:l.filter(u=>!u.hideInTable)}const _r=e=>(t,l)=>{var n,o,u,s;const{fixed:i,index:a}=t,{fixed:c,index:r}=l;if(i==="left"&&c!=="left"||c==="right"&&i!=="right")return-2;if(c==="left"&&i!=="left"||i==="right"&&c!=="right")return 2;const v=t.key||`${a}`,f=l.key||`${r}`;return(n=e[v])!=null&&n.order||(o=e[f])!=null&&o.order?(((u=e[v])==null?void 0:u.order)||0)-(((s=e[f])==null?void 0:s.order)||0):(t.index||0)-(l.index||0)},Vr=e=>{const t=[],l=n=>{n.forEach(o=>{var u;(u=o?.children)!=null&&u.length?l(o?.children):t.push(o)})};return l(e),t};function jr(e,t){const{defaultValue:l,value:n=F()}=t||{};let o=typeof e=="function"?e():e;n.value!==void 0&&(o=Gt(n)),l!==void 0&&(o=typeof l=="function"?l():l);const u=F(o),s=F(o);qe(()=>{let a=n.value!==void 0?n.value:u.value;t?.postState&&(a=t.postState(a)),s.value=a});function i(a){const c=s.value;u.value=a,yt(s.value)!==a&&t?.onChange&&t?.onChange(a,c)}return fe(n,()=>{u.value=n.value}),[s,i]}const qt="down",zo="up",Ur="left",bt=10,hl=10,Lo=4,Xr="ICON_TYPE_UP",Un="ICON_TYPE_DOWN",Xn="ICON_TYPE_FORBID",No=Symbol("edit"),Yr=()=>{const e=ce([]),t=ce({}),l=(o,u)=>{o&&(Array.isArray(o)?e.value=o:e.value.includes(o)||(e.value=[o]),Object.assign(t.value,u||{}))},n=o=>{if(typeof o>"u"){e.value=[],t.value={};return}const u=Array.isArray(o)?o:[o];e.value=e.value.filter(s=>!u.includes(s)),u.forEach(s=>{delete t.value[s]})};return lt(No,{editCellKeys:e,openEditor:l,closeEditor:n,oldValuesMap:t}),{editCellKeys:e,openEditor:l,closeEditor:n}},Wo=()=>Ze(No,{editCellKeys:F([]),openEditor:()=>{},closeEditor:()=>{},oldValuesMap:ce({})}),_o=Symbol("PopupContextProps"),Gr=()=>{const e=ce(()=>{}),t=ce(()=>{}),l=ce(!1),n=ce(()=>null);lt(_o,{showPopupContent:e,hidePopupContent:t,visible:l,getPopupContainer:n,registerPopupContext:o=>{e.value=o.showPopupContent||(()=>{}),t.value=o.hidePopupContent||(()=>{}),n.value=o.getPopupContainer||(()=>null)}})},gn=()=>Ze(_o,{}),Vo=["moz","ms","webkit"];function qr(){let e=0;return function(t){const l=new Date().getTime(),n=Math.max(0,16-(l-e)),o=window.setTimeout(function(){t(l+n)},n);return e=l+n,o}}function Jr(){if(typeof window>"u")return()=>{};if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);const e=Vo.filter(t=>`${t}RequestAnimationFrame`in window)[0];return e?window[`${e}RequestAnimationFrame`]:qr()}function Zr(e){if(typeof window>"u")return null;if(window.cancelAnimationFrame)return window.cancelAnimationFrame(e);const t=Vo.filter(l=>`${l}CancelAnimationFrame`in window||`${l}CancelRequestAnimationFrame`in window)[0];return t?(window[`${t}CancelAnimationFrame`]||window[`${t}CancelRequestAnimationFrame`])(e):clearTimeout(e)}const Yn=Jr();function Ne(e,t=1){let l=t;const n={id:Yn(function o(){l-=1,l<=0?e():n.id=Yn(o)})};return n}Ne.cancel=e=>{e&&Zr(e.id)};const jo=Symbol("HScrollSymbolKey"),Qr=({scrollLeft:e,maxScrollLeft:t,onScroll:l,bodyWidth:n})=>{const o=new Set,u=r=>{const v=Math.max(0,Math.min(r,t.value));o.forEach(f=>{f.scrollLeft=v})};let s;const i=r=>{var v;const f=(v=r.target)==null?void 0:v.scrollLeft;f!==e.value&&(u(f),e.value=f,l(r))},a=r=>{var v;const f=(v=r.target)==null?void 0:v.scrollLeft;f!==e.value&&(Ne.cancel(s),s=Ne(()=>{e.value=f,l(r)}))};fe(e,()=>{u(e.value)},{immediate:!0}),fe(n,(r,v)=>{v===0&&u(e.value)}),ct(()=>{o.forEach(r=>{r.removeEventListener("scroll",i),r.removeEventListener("scroll",a)}),o.clear()}),lt(jo,{addHScrollDom:(r,v)=>{r&&(o.add(r),r.scrollLeft=e.value,r.addEventListener("scroll",v?a:i,{passive:!0}))},removeHScrollDom:r=>{r&&(o.delete(r),r.removeEventListener("scroll",i),r.removeEventListener("scroll",a))}})},$l=()=>Ze(jo,{}),Uo=Symbol("VScrollSymbolKey"),ei=({scrollTop:e,maxScrollTop:t,onScroll:l,updateAnimate:n,bodyWidth:o})=>{const u=new Set,s=v=>{const f=Math.max(0,Math.min(v,t.value));u.forEach(d=>{d.scrollTop=f})};let i;const a=v=>{var f;const d=(f=v.target)==null?void 0:f.scrollTop;d!==e.value&&(n(),s(d),e.value=d,l(v))};fe(e,()=>{s(e.value)},{immediate:!0}),fe(o,(v,f)=>{f===0&&s(e.value)});const c=v=>{var f;const d=(f=v.target)==null?void 0:f.scrollTop;d!==e.value&&(Ne.cancel(i),n(),i=Ne(()=>{e.value=d,l(v)}))};ct(()=>{u.forEach(v=>{v.removeEventListener("scroll",a),v.removeEventListener("scroll",c)}),u.clear()}),lt(Uo,{addVScrollDom:(v,f)=>{v&&(u.add(v),v.scrollTop=e.value,v.addEventListener("scroll",f?c:a,{passive:!0}))},removeVScrollDom:v=>{v&&(u.delete(v),v.removeEventListener("scroll",a),v.removeEventListener("scroll",c))}})},Xo=()=>Ze(Uo,{}),Yo=Symbol("TableContextProps"),ti=e=>{lt(Yo,e)},Ve=()=>Ze(Yo,{}),Ge={TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,A:65,C:67},li=e=>{const{getDisplayedColBefore:t,getDisplayedColAfter:l,allDisplayedColumns:n,setRangeToCell:o,focusCell:u,flattenData:s,getRowByFlattenIndex:i,allCellProps:a,tabGuardTopRef:c,tabGuardBottomRef:r}=e,v=h(()=>{var x;return(x=s.value[s.value.length-1])==null?void 0:x.flattenIndex}),f=h(()=>{var x;return(x=s.value[0])==null?void 0:x.flattenIndex}),d=(x,K,R=!1)=>R?p(x,K):m(x,K),p=(x,K)=>{const R=x===Ge.UP,B=x===Ge.DOWN,Q=x===Ge.LEFT;let A,Y;return R||B?(Y=R?f.value:v.value,A=K.column):(Y=K.rowIndex,A=Q!==!1?n.value[0]:n.value[n.value.length-1]),{rowIndex:Y,rowPinned:null,column:A}},m=(x,K)=>{let R=K,B=!1;for(;!B;){switch(x){case Ge.UP:R=j(R);break;case Ge.DOWN:case Ge.ENTER:R=I(R);break;case Ge.RIGHT:R=C(R);break;case Ge.LEFT:R=b(R);break;default:R=null,console.warn("Table: unknown key for navigation "+x)}B=!R||y(R)}return R},y=x=>{let K;switch(x.rowPinned){case"top":case"bottom":break;default:K=i(x.rowIndex)}return!!K},b=x=>{if(!x)return null;const K=t(x.column);return K?{rowIndex:x.rowIndex,column:K,rowPinned:x.rowPinned}:null},C=x=>{if(!x)return null;const K=l(x.column);return K?{rowIndex:x.rowIndex,column:K,rowPinned:x.rowPinned}:null},I=x=>{if(!x)return null;const K=k(x);return K?{rowIndex:K.rowIndex,column:x.column,rowPinned:K.rowPinned}:null},k=x=>{const K=x.rowIndex,R=x.rowPinned;return N(x)?null:{rowIndex:K+1,rowPinned:R}},N=x=>{const K=x.rowIndex;return v.value<=K},V=x=>{const K=x.rowIndex,R=x.rowPinned;return(R?K===0:K===f.value)?null:{rowIndex:K-1,rowPinned:R}},j=x=>{if(!x)return null;const K=V({rowIndex:x.rowIndex,rowPinned:x.rowPinned});return K?{rowIndex:K.rowIndex,column:x.column,rowPinned:K.rowPinned}:null},M=x=>x.rowIndex>=f.value&&x.rowIndex<=v.value,J=(x,K)=>K?E(x):g(x),g=x=>{const K=n.value;let R=x.rowIndex,B=x.rowPinned,Q=l(x.column);if(!Q){Q=K[0];const A=k(x);if(!A||!A.rowPinned&&!M(A))return null;R=A?A.rowIndex:null,B=A?A.rowPinned:null}return{rowIndex:R,column:Q,rowPinned:B}},E=x=>{const K=n.value;let R=x.rowIndex,B=x.rowPinned,Q=t(x.column);if(!Q){Q=K[K.length-1];const A=V({rowIndex:x.rowIndex,rowPinned:x.rowPinned});if(!A||!A.rowPinned&&!M(A))return null;R=A?A.rowIndex:null,B=A?A.rowPinned:null}return{rowIndex:R,column:Q,rowPinned:B}},L=x=>{const K=(R=>{let B,Q;const A=(B=i(R.rowIndex))===null||B===void 0?void 0:B.rowKey,Y=((((Q=a.value[A])===null||Q===void 0?void 0:Q[R.column.columnKey])||{}).props||{}).colSpan,pe=[];if(Y>1){const ke=n.value.findIndex(Te=>Te.columnKey===R.column.columnKey);for(let Te=0;Te<Y;Te++)pe.push(n.value[ke+Te])}else pe.push(R.column);return pe.filter(ke=>!!ke)})(x);return K.length===1?x:{rowIndex:x.rowIndex,column:K[K.length-1],rowPinned:x.rowPinned}},S=x=>{let K;const R=i(x.rowIndex),B=R?.rowKey,Q=((((K=a.value[B])===null||K===void 0?void 0:K[x.column.columnKey])||{}).props||{}).rowSpan;return!!R&&Q!==0&&!R.isExpandRow},H=(x,K)=>z(x,K),z=(x,K)=>{const R=q(x,K);return R&&u(R),!!R},q=(x,K)=>{let R=x;for(;R&&(R===x||!S(R));)K||(R=L(R)),R=J(R,K);return R?R.rowIndex<0?null:(e.ensureCellVisible(R),o(R),R):null};return{getNextCellToFocus:d,getNextTabbedCell:J,getLastBodyCell:()=>({rowIndex:v.value,rowPinned:null}),navigateToNextCell:(x,K)=>{const R=x.keyCode;let B=K,Q=!1;for(;B&&(B===K||!S(B));)R===Ge.RIGHT&&(B=L(B)),B=d(R,B),Q=!B;Q&&x&&R===Ge.UP&&(B={rowIndex:-1,rowPinned:null,column:K.column}),B&&(B.rowIndex<0||(e.ensureCellVisible(B),o(B)))},onTabKeyDown:(x,K)=>{let R,B;const Q=K.shiftKey;H(x,Q)||(Q?(R=c.value)===null||R===void 0||R.focus():(B=r.value)===null||B===void 0||B.focus()),K.preventDefault()},tabToNextCellCommon:H,getFirstCellToFocus:x=>{const K=(()=>{const R=i(f.value),B=n.value[0];return R&&B?{rowIndex:R.rowIndex,rowPinned:null,column:B}:null})();S(K)?(e.ensureCellVisible(K),o(K)):K&&H(K,x)},getLastCellToFocus:x=>{const K=(()=>{const R=i(v.value),B=n.value[n.value.length-1];return R&&B?{rowIndex:R.rowIndex,rowPinned:null,column:B}:null})();S(K)?(e.ensureCellVisible(K),o(K)):K&&H(K,x)},getRowAbove:V,getCellAbove:j,getRowBelow:k}},Go=e=>{const{scrollContainer:t,scrollAxis:l,onScrollCallback:n=()=>{},showVerticalScrollbar:o,showHorizontalScrollbar:u}=e;let s=null,i=0,a=!1,c=!1,r=!1,v=!1;const f=l.indexOf("x")!==-1,d=l.indexOf("y")!==-1,p=h(()=>{var C,I;return(I=(C=e.scrollByTick)==null?void 0:C.value)!=null?I:20}),m=()=>{s===null&&(s=window.setInterval(y,100),i=0)},y=()=>{i++;const C=i>20?200:i>10?80:40;if(d){const I=e.getVerticalPosition();r&&e.setVerticalPosition(I-C),v&&e.setVerticalPosition(I+C)}if(f){const I=e.getHorizontalPosition();a&&e.setHorizontalPosition(I-C),c&&e.setHorizontalPosition(I+C)}n()},b=()=>{s&&(window.clearInterval(s),s=null)};return{check:(C,I=!1)=>{const k=I||!o.value;if(k&&!u.value)return;const N=t.value.getBoundingClientRect(),V=p.value;return a=C.clientX<N.left+V,c=C.clientX>N.right-V,r=C.clientY<N.top+V&&!k,v=C.clientY>N.bottom-V&&!k,a||c||r||v?m():b()},ensureCleared:b}},qo=e=>{var t,l;const n=(l=(t=e.target)==null?void 0:t.tagName)==null?void 0:l.toLocaleLowerCase();return!!n?.match("^a$|textarea|input|select|button")},ni=e=>{let t=!1,l=null,n=null,o;const u=[],s=y=>{y.forEach(b=>{const{target:C,type:I,listener:k,options:N}=b;C.addEventListener(I,k,N)}),u.push(()=>{y.forEach(b=>{const{target:C,type:I,listener:k,options:N}=b;C.removeEventListener(I,k,N)})})},i=y=>{for(let b=0;b<y.length;b++)if(y[b].identifier===o?.identifier)return y[b];return null},a=(y,b)=>{if(!t){if(pn(y,b,Lo))return;t=!0,e.onDragStart(b)}},c=()=>{t&&(t=!1),l=null,n=null,o=null,u.forEach(y=>y()),u.length=0},r=y=>!qo(y),v=y=>{r(y)&&y.preventDefault(),a(y,l)},f=y=>{i(y.touches)&&a(y,l)},d=y=>{i(y.changedTouches)&&c()},p=y=>{var b,C;e.level===((b=y.cellInfo)==null?void 0:b.level)&&(r(y)&&y.preventDefault(),t=!1,l=y,n=(C=y.cellInfo)==null?void 0:C.cellTarget,e.bodyElementRef.value,s([{target:document,type:"mousemove",listener:I=>v(I)},{target:document,type:"mouseup",listener:()=>{c()}},{target:document,type:"contextmenu",listener:I=>I.preventDefault()}]),v(y))};let m;return fe([()=>e.bodyElementRef.value,e.enableRangeSelection],([y],[b])=>{b&&(b.removeEventListener("mousedown",p),m&&(b.removeEventListener("touchstart",m),m=null,u.forEach(C=>C()),u.length=0)),y&&e.enableRangeSelection.value&&(y.addEventListener("mousedown",p),m=C=>{C.cancelable&&(C.preventDefault(),C.stopPropagation())})}),{onBodyMousedown:p,onBodyTouchstart:y=>{t=!1,o=y.touches[0],e.bodyElementRef.value;const C=N=>d(N),I=y.target,k=document.body;s([{target:k,type:"touchmove",listener:N=>{N.cancelable&&N.preventDefault()},options:{passive:!1}},{target:I,type:"touchmove",listener:N=>f(N),options:{passive:!0}},{target:I,type:"touchend",listener:C,options:{passive:!0}},{target:I,type:"touchcancel",listener:C,options:{passive:!0}}])},getStartTarget:()=>n}};function Jt(...e){const t=[];for(let l=0;l<e.length;l++){const n=e[l];if(n){if(Kr(n))t.push(n);else if(Ql(n))for(let o=0;o<n.length;o++){const u=Jt(n[o]);u&&t.push(u)}else if(Eo(n))for(const o in n)n[o]&&t.push(o)}}return t.join(" ")}const Jo=Symbol("rangeSymbolKey"),oi=e=>{const{allColumns:t,flattenData:l,prefixCls:n,rangeSelection:o,getRowByFlattenIndex:u,rootRef:s,bodyRef:i,latestRangeStartCell:a,scrollLeft:c,scrollTop:r,scrollTo:v,showVerticalScrollbar:f,showHorizontalScrollbar:d,getIndexsByKey:p,formatRangeCellText:m,copyDelimiter:y}=e,b=Sl();Go({scrollContainer:i,scrollAxis:"xy",getVerticalPosition:()=>r.value,setVerticalPosition:D=>{v(D)},getHorizontalPosition:()=>c.value,setHorizontalPosition:D=>v({left:D}),showVerticalScrollbar:f,showHorizontalScrollbar:d});const C=h(()=>!!o.value),I=h(()=>o.value==="single"),k=h(()=>`${n.value}-body-cell-range-selected`),N=h(()=>`${n.value}-body-cell-range-single-cell`),V=h(()=>`${n.value}-body-cell-range-top`),j=h(()=>`${n.value}-body-cell-range-right`),M=h(()=>`${n.value}-body-cell-range-bottom`),J=h(()=>`${n.value}-body-cell-range-left`),g=ce([]),E=h(()=>t.value.filter(D=>!D.__Internal__Column__));fe(E,D=>{g.value.forEach(O=>{O.columns=O.columns.filter(le=>D.find(w=>w.columnKey===le.columnKey))}),g.value=g.value.filter(O=>O.columns.length>0)}),fe(l,()=>{const D=l.value.length-1;g.value.forEach(O=>{const{startRow:le,endRow:w}=O;le.rowIndex>D&&(O.startRow=null),w.rowIndex>D&&(O.endRow=null)}),g.value=g.value.filter(O=>O.startRow&&O.endRow)});const L=D=>{var O;if((O=D.cellInfo)==null||O.level,!C.value)return;const{ctrlKey:le,metaKey:w,shiftKey:$}=D,P=le||w,U=!I.value&&P,Z=g.value.length,re=$&&Z>0;U||re||Ie(),D.cellInfo.cellPosition},S=D=>{},H=()=>{},z=h(()=>g.value.length===0),q=h(()=>{const D=g.value.length;if(D===0)return!1;if(D>1)return!0;const O=g.value[0],le=Te(O),w=ne(O);return le.rowPinned!==w.rowPinned||le.rowIndex!==w.rowIndex||O?.columns.length!==1});ni({onDragStart:L,onDragging:S,onDragStop:H,rootElementRef:s,bodyElementRef:i,level:b,enableRangeSelection:C});const x=(D,O)=>{switch(D.rowPinned){case"top":if(O.rowPinned!=="top")return!0;break;case"bottom":if(O.rowPinned!=="bottom")return!1;break;default:if(O.rowPinned)return O.rowPinned!=="top"}return D.rowIndex<O.rowIndex},K=D=>{let O;return D.forEach(le=>{(O===void 0||x(O,le))&&(O=le)}),O},R=D=>{let O;return D.forEach(le=>{(O===void 0||x(le,O))&&(O=le)}),O},B=(D,O)=>!D&&!O||!(D&&!O||!D&&O)&&D.rowIndex===O.rowIndex&&D.rowPinned==O.rowPinned,Q=(D,O)=>{let le,w;const $=D===O||D.columnKey===O.columnKey,P=E.value.findIndex(W=>W.columnKey===D.columnKey);if(P<0)return void console.warn(`Table: column ${(le=D.originColumn.key)!==null&&le!==void 0?le:D.originColumn.dataIndex} is not valid`);const U=$?P:E.value.findIndex(W=>W.columnKey===O.columnKey);if(U<0)return void console.warn(`Table: column ${(w=O.originColumn.key)!==null&&w!==void 0?w:O.originColumn.dataIndex} is not valid`);if($)return[D];const Z=Math.min(P,U),re=Z===P?U:P,ue=[];for(let W=Z;W<=re;W++)ue.push(E.value[W]);return ue},A=(D,O=!1)=>{if(!C.value)return;const le=Q(D.column,D.column);if(!le||a.value===D)return;!I.value&&O||(g.value=[]);const w={rowIndex:D.rowIndex,rowPinned:D.rowPinned},$={startRow:w,endRow:w,columns:le,startColumn:D.column};g.value.push($),a.value=D,kt(g)},Y=(D,O)=>{const le=O.column,w=Q(D.startColumn,le);w&&!pe(D,O)&&(D.columns=w,D.endRow={rowIndex:O.rowIndex,rowPinned:O.rowPinned},kt(g))},pe=(D,O)=>{const{startRow:le,endRow:w}=D,$=x(le,w)?w:le,P=O.rowIndex===$.rowIndex&&O.rowPinned===$.rowPinned,U=D.columns[0],Z=D.columns[D.columns.length-1],re=D.startColumn===U?Z:U;return O.column===re&&P},ke=(D,O)=>{const le=O.columns!==null&&O.columns.find($=>$.columnKey===D.column.columnKey),w=ie(D.rowIndex,D.rowPinned,O);return le&&w},Te=D=>{var O;return D.startRow&&D.endRow?x(D.startRow,D.endRow)?D.startRow:D.endRow:{rowIndex:(O=l.value[0])==null?void 0:O.rowIndex,rowPinned:null}},ne=D=>{var O;return D.startRow&&D.endRow?x(D.startRow,D.endRow)?D.endRow:D.startRow:{rowIndex:(O=l.value[l.value.length-1])==null?void 0:O.rowIndex,rowPinned:null}},ie=(D,O,le)=>{const w=Te(le),$=ne(le),P={rowIndex:D,rowPinned:O},U=P.rowIndex===w.rowIndex&&P.rowPinned==w.rowPinned,Z=P.rowIndex===$.rowIndex&&P.rowPinned==$.rowPinned;if(U||Z)return!0;const re=!x(P,w),ue=x(P,$);return re&&ue},se=D=>z.value?0:g.value.filter(O=>ke(D,O)).length,Se=D=>{const O=E.value,le=O.findIndex(w=>w.columnKey===D.columnKey);return le>0?O[le-1]:null},me=D=>{const O=E.value,le=O.findIndex(w=>w.columnKey===D.columnKey);return le<O.length-1?O[le+1]:null},ye=D=>{if(D==null)return null;const O=E.value.find(le=>le.columnKey===D);return O||console.warn("Table: could not find column "+D),O},Ke=()=>g.value,Ie=()=>{g.value=[]},Me=D=>{if(!C.value)return;const O=(le=>{let w,$=!1;if(le.columnsKey)w=le.columnsKey.map(P=>ye(P)).filter(P=>P);else{const P=ye(le.columnStartKey),U=ye(le.columnEndKey);if(!P||!U)return;w=Q(P,U),w&&w.length&&($=w[0]!==P)}if(w)return{startRow:le.rowStartIndex!=null?{rowIndex:le.rowStartIndex,rowPinned:null}:void 0,endRow:le.rowEndIndex!=null?{rowIndex:le.rowEndIndex,rowPinned:null}:void 0,columns:w,startColumn:$?w[w.length-1]:w[0]}})(D);O&&(O.startRow&&(a.value={rowIndex:O.startRow.rowIndex,rowPinned:O.startRow.rowPinned,column:O.startColumn}),g.value.push(O))},Le=D=>{C.value&&(Ie(),Me(D))},ae=D=>{let O,le;const w=(O=u(D.rowIndex))===null||O===void 0?void 0:O.rowKey,$=(le=D.column)===null||le===void 0?void 0:le.columnKey;if(w!==void 0&&$!==void 0&&s.value){const P=s.value.querySelector(`[data-row-key="${w}"] [data-column-key="${$}"][data-level="${b}"]`);if(P){const U=P.getElementsByTagName("input")[0];P.focus(),U&&U.focus()}}},ve=(D=!1)=>{if(I.value||z.value)return;const O=g.value[g.value.length-1],le=Te(O),w=ne(O),$=[];g.value.slice(0,-1).forEach(P=>{const U=Te(P),Z=ne(P),re=P.columns,ue=re.filter(W=>O?.columns.indexOf(W)===-1);if(ue.length!==re.length)if(x(w,U)||x(Z,le))$.push(P);else{if(x(U,le)){const W={columns:[...re],startColumn:O?.startColumn,startRow:Object.assign({},U),endRow:Ee.getRowAbove(le)};$.push(W)}if(ue.length>0){const W={columns:ue,startColumn:ue.find(he=>he.columnKey===O?.startColumn.columnKey)?O?.startColumn:ue[0],startRow:K([Object.assign({},le),Object.assign({},U)]),endRow:R([Object.assign({},w),Object.assign({},Z)])};$.push(W)}x(w,Z)&&$.push({columns:[...re],startColumn:O?.startColumn,startRow:Ee.getRowBelow(w),endRow:Object.assign({},Z)})}else $.push(P)}),g.value=$};fe(a,()=>{a.value&&ae(a.value)});const xe=D=>{e.ensureCellRowVisible(D),e.ensureCellColumnVisible(D)},Ee=li({getDisplayedColBefore:Se,getDisplayedColAfter:me,allDisplayedColumns:E,setRangeToCell:A,focusCell:ae,ensureCellVisible:xe,...e});lt(Jo,{cellRanges:g,extendLatestRangeToCell:D=>{if(z.value||!a.value)return;const O=g.value[g.value.length-1];Y(O,D)},setRangeToCell:A,onDragStart:L,onDragging:S,isCellInAnyRange:D=>se(D)>0,getRangeCellClass:D=>{const O=se(D),le=(re=>{let ue=!1,W=!1,he=!1,Ce=!1;const be=re.column;let He,Qe;He=Se(be),Qe=me(be);const dt=g.value.filter(et=>ke(re,et));He||(Ce=!0),Qe||(W=!0);for(let et=0;et<dt.length&&!(ue&&W&&he&&Ce);et++){const Xe=dt[et],pt=Te(Xe),Rt=ne(Xe);!ue&&B(pt,re)&&(ue=!0),!he&&B(Rt,re)&&(he=!0),!Ce&&He&&Xe.columns.findIndex(Ct=>Ct.columnKey===He.columnKey)<0&&(Ce=!0),!W&&Qe&&Xe.columns.findIndex(Ct=>Ct.columnKey===Qe.columnKey)<0&&(W=!0)}return{top:ue,right:W,bottom:he,left:Ce}})(D),w=O===1&&!q.value,$=!w&&le.top,P=!w&&le.right,U=!w&&le.bottom,Z=!w&&le.left;return Jt({[k.value]:O!==0,[`${k.value}-1`]:O===1,[`${k.value}-2`]:O===2,[`${k.value}-3`]:O===3,[`${k.value}-4`]:O>=4,[N.value]:w,[V.value]:$,[j.value]:P,[M.value]:U,[J.value]:Z})},enableRangeSelection:C,singleRangeSelection:I,getDisplayedColBefore:Se,getDisplayedColAfter:me,navigationService:Ee,extendLatestRangeInDirection:D=>{if(z.value||!a.value)return;const O=D.keyCode,le=D.ctrlKey||D.metaKey,w=g.value[g.value.length-1],$=a.value,P=w.columns[0],U=w.columns[w.columns.length-1],Z=w.endRow.rowIndex,re=w.endRow.rowPinned,ue={column:$.column===P?U:P,rowIndex:Z,rowPinned:re},W=Ee.getNextCellToFocus(O,ue,le);return W?(Le({rowStartIndex:$.rowIndex,rowEndIndex:W.rowIndex,columnStartKey:$.column.columnKey,columnEndKey:W.column.columnKey}),W):void 0},allDisplayedColumns:E,focusCell:ae,ensureCellVisible:xe,getCellRangeCount:se,intersectLastRange:ve,level:b});const je=()=>{const D=Ke(),O=[];let le="";D.forEach(w=>{const{startRow:$,endRow:P,columns:U}=w,[Z,re]=[$.rowIndex,P.rowIndex].sort((Ce,be)=>Ce-be);let ue=E.value.findIndex(Ce=>{var be;return Ce.columnKey===((be=U[0])==null?void 0:be.columnKey)}),W=E.value.findIndex(Ce=>{var be;return Ce.columnKey===((be=U[U.length-1])==null?void 0:be.columnKey)});[ue,W]=[ue,W].sort((Ce,be)=>Ce-be);const he=[];for(let Ce=Z;Ce<=re;Ce++){const be=l.value[Ce];if(be&&!be.isExpandRow){const He=be.rowKey,Qe=[],dt=p(He);for(let et=ue;et<=W;et++){const Xe=E.value[et].originColumn,pt=Xe.dataIndex?Ho(be.record,Xe.dataIndex):void 0;if(Xe){const Rt={record:be.record,column:Xe,index:Ce,recordIndexs:dt,key:He,value:pt};Qe.push(m(Rt))}}he.push(Qe.join(y.value))}}O.push(he)}),le=O.map(w=>w.join(`prefixCls
`)).join(`prefixCls
`),(w=>{let $,P;const U=document.activeElement,Z=document.createElement("textarea");Z.style.position="absolute",Z.style.opacity="0",Z.style.width="1px",Z.style.height="1px",Z.value=w||" ",document.body.appendChild(Z),Z.select(),Z.focus({preventScroll:!0}),document.execCommand("copy")||console.warn("Table: copy failed, Browser did not allow document.execCommand('copy')"),document.body.removeChild(Z),U!==null&&((P=($=U).focus)===null||P===void 0||P.call($,{preventScroll:!0}))})(le)};return{getSelectedRange:()=>{const D=Ke(),O=[];return D.forEach(le=>{const{startColumn:w,startRow:$,endRow:P,columns:U}=le,Z=l.value[$.rowIndex],re=l.value[P.rowIndex],ue={startColumn:w.originColumn,startRow:{rowIndex:Z.rowIndex,recordIndexs:p(Z.rowKey)},endRow:{rowIndex:re.rowIndex,recordIndexs:p(re.rowKey)},columns:U.map(W=>W.originColumn),flattenData:l.value};O.push(ue)}),O},appendCellToSelectedRange:Me,clearAllSelectedRange:Ie,setCellRanges:D=>{C.value&&(g.value=D)},getCellRangeCount:se,navigationService:Ee,copySelectedRange:je,onBodyKeydown:D=>{if(!(!D.ctrlKey&&!D.metaKey||!C.value)&&!qo(D)){switch(D.keyCode){case Ge.C:je();break;case Ge.A:(()=>{if(!C.value)return;const O=E.value;O.length!==0&&Le({rowStartIndex:0,rowEndIndex:l.value.length-1,columnStartKey:O[0].columnKey,columnEndKey:O[O.length-1].columnKey})})()}D.preventDefault()}}}},yn=()=>Ze(Jo,{});function ai(e,t,l){const n=ce({}),o=ce([]),u=ce([]);return fe([e,t,l],()=>{const s=new Map,i=new Map,a=new Map,c=[],r=[],v=l.value,f=t.value;function d(p,m=[],y=0){p.forEach((b,C)=>{const I=v(b,C);ht(!s.get(I),"Table",`You set slots duplicate key ${I}, it will cause rendering errors. Please check carefully.`),s.set(I,b);const k=m.concat([C]);i.set(I,k),a.set(k.join("-"),I),c.push(I),y===0&&r.push(I),b&&typeof b=="object"&&f in b&&d(b[f]||[],k,y+1)})}d(e.value),o.value=c,u.value=r,n.value={kvMap:s,kIndexMap:i,indexsKeyMap:a}},{immediate:!0}),{getRecordByKey:s=>{var i,a;return yt((a=(i=n.value)==null?void 0:i.kvMap)==null?void 0:a.get(s))},getIndexsByKey:s=>{var i,a;return(a=(i=n.value)==null?void 0:i.kIndexMap)==null?void 0:a.get(s)},allDataRowKeys:o,allDataRootRowKeys:u,getKeyByIndexs:s=>n.value.indexsKeyMap.get(s)}}function Kt(e,t){const l=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(l>>16)<<16|l&65535}function ri(e,t){return e<<t|e>>>32-t}function Rl(e,t,l,n,o,u){return Kt(ri(Kt(Kt(t,e),Kt(n,u)),o),l)}function nt(e,t,l,n,o,u,s){return Rl(t&l|~t&n,e,t,o,u,s)}function ot(e,t,l,n,o,u,s){return Rl(t&n|l&~n,e,t,o,u,s)}function at(e,t,l,n,o,u,s){return Rl(t^l^n,e,t,o,u,s)}function rt(e,t,l,n,o,u,s){return Rl(l^(t|~n),e,t,o,u,s)}function ii(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;let l,n,o,u,s,i=1732584193,a=-271733879,c=-1732584194,r=271733878;for(l=0;l<e.length;l+=16)n=i,o=a,u=c,s=r,i=nt(i,a,c,r,e[l],7,-680876936),r=nt(r,i,a,c,e[l+1],12,-389564586),c=nt(c,r,i,a,e[l+2],17,606105819),a=nt(a,c,r,i,e[l+3],22,-1044525330),i=nt(i,a,c,r,e[l+4],7,-176418897),r=nt(r,i,a,c,e[l+5],12,1200080426),c=nt(c,r,i,a,e[l+6],17,-1473231341),a=nt(a,c,r,i,e[l+7],22,-45705983),i=nt(i,a,c,r,e[l+8],7,1770035416),r=nt(r,i,a,c,e[l+9],12,-1958414417),c=nt(c,r,i,a,e[l+10],17,-42063),a=nt(a,c,r,i,e[l+11],22,-1990404162),i=nt(i,a,c,r,e[l+12],7,1804603682),r=nt(r,i,a,c,e[l+13],12,-40341101),c=nt(c,r,i,a,e[l+14],17,-1502002290),a=nt(a,c,r,i,e[l+15],22,1236535329),i=ot(i,a,c,r,e[l+1],5,-165796510),r=ot(r,i,a,c,e[l+6],9,-1069501632),c=ot(c,r,i,a,e[l+11],14,643717713),a=ot(a,c,r,i,e[l],20,-373897302),i=ot(i,a,c,r,e[l+5],5,-701558691),r=ot(r,i,a,c,e[l+10],9,38016083),c=ot(c,r,i,a,e[l+15],14,-660478335),a=ot(a,c,r,i,e[l+4],20,-405537848),i=ot(i,a,c,r,e[l+9],5,568446438),r=ot(r,i,a,c,e[l+14],9,-1019803690),c=ot(c,r,i,a,e[l+3],14,-187363961),a=ot(a,c,r,i,e[l+8],20,1163531501),i=ot(i,a,c,r,e[l+13],5,-1444681467),r=ot(r,i,a,c,e[l+2],9,-51403784),c=ot(c,r,i,a,e[l+7],14,1735328473),a=ot(a,c,r,i,e[l+12],20,-1926607734),i=at(i,a,c,r,e[l+5],4,-378558),r=at(r,i,a,c,e[l+8],11,-2022574463),c=at(c,r,i,a,e[l+11],16,1839030562),a=at(a,c,r,i,e[l+14],23,-35309556),i=at(i,a,c,r,e[l+1],4,-1530992060),r=at(r,i,a,c,e[l+4],11,1272893353),c=at(c,r,i,a,e[l+7],16,-155497632),a=at(a,c,r,i,e[l+10],23,-1094730640),i=at(i,a,c,r,e[l+13],4,681279174),r=at(r,i,a,c,e[l],11,-358537222),c=at(c,r,i,a,e[l+3],16,-722521979),a=at(a,c,r,i,e[l+6],23,76029189),i=at(i,a,c,r,e[l+9],4,-640364487),r=at(r,i,a,c,e[l+12],11,-421815835),c=at(c,r,i,a,e[l+15],16,530742520),a=at(a,c,r,i,e[l+2],23,-995338651),i=rt(i,a,c,r,e[l],6,-198630844),r=rt(r,i,a,c,e[l+7],10,1126891415),c=rt(c,r,i,a,e[l+14],15,-1416354905),a=rt(a,c,r,i,e[l+5],21,-57434055),i=rt(i,a,c,r,e[l+12],6,1700485571),r=rt(r,i,a,c,e[l+3],10,-1894986606),c=rt(c,r,i,a,e[l+10],15,-1051523),a=rt(a,c,r,i,e[l+1],21,-2054922799),i=rt(i,a,c,r,e[l+8],6,1873313359),r=rt(r,i,a,c,e[l+15],10,-30611744),c=rt(c,r,i,a,e[l+6],15,-1560198380),a=rt(a,c,r,i,e[l+13],21,1309151649),i=rt(i,a,c,r,e[l+4],6,-145523070),r=rt(r,i,a,c,e[l+11],10,-1120210379),c=rt(c,r,i,a,e[l+2],15,718787259),a=rt(a,c,r,i,e[l+9],21,-343485551),i=Kt(i,n),a=Kt(a,o),c=Kt(c,u),r=Kt(r,s);return[i,a,c,r]}function si(e){let t,l="";const n=e.length*32;for(t=0;t<n;t+=8)l+=String.fromCharCode(e[t>>5]>>>t%32&255);return l}function ui(e){let t;const l=[];for(l[(e.length>>2)-1]=void 0,t=0;t<l.length;t+=1)l[t]=0;const n=e.length*8;for(t=0;t<n;t+=8)l[t>>5]|=(e.charCodeAt(t/8)&255)<<t%32;return l}function ci(e){return si(ii(ui(e),e.length*8))}function di(e){const t="0123456789abcdef";let l="",n,o;for(o=0;o<e.length;o+=1)n=e.charCodeAt(o),l+=t.charAt(n>>>4&15)+t.charAt(n&15);return l}function vi(e){return unescape(encodeURIComponent(e))}function fi(e){return ci(vi(e))}function hi(e){return di(fi(e))}function pi(e,t,l){return hi(e)}const ul="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Zo=e=>{let t="",l,n,o,u,s,i,a,c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)u=ul.indexOf(e.charAt(c++)),s=ul.indexOf(e.charAt(c++)),i=ul.indexOf(e.charAt(c++)),a=ul.indexOf(e.charAt(c++)),l=u<<2|s>>4,n=(s&15)<<4|i>>2,o=(i&3)<<6|a,t=t+String.fromCharCode(l),i!=64&&(t=t+String.fromCharCode(n)),a!=64&&(t=t+String.fromCharCode(o));return t=mi(t),t};function mi(e){let t="",l=0,n=0,o=0;for(;l<e.length;)if(n=e.charCodeAt(l),n<128)t+=String.fromCharCode(n),l++;else if(n>191&&n<224)o=e.charCodeAt(l+1),t+=String.fromCharCode((n&31)<<6|o&63),l+=2;else{o=e.charCodeAt(l+1);const u=e.charCodeAt(l+2);t+=String.fromCharCode((n&15)<<12|(o&63)<<6|u&63),l+=3}return t}const Yt=1,Gn=2,gi=3,yi=4;function wi(e){return pi(unescape(encodeURIComponent(e)))}const Ci=()=>new Date(parseInt(Zo("MTY3MjQxNjAwMDAwMA=="),10));function bi(e){if(!e)return{code:gi};const t=e.substring(0,32),l=e.substring(32);if(t!==wi(l))return{code:Yt};const n=Zo(l)||"",o={};n.split(",").forEach(r=>{const[v,f]=r.split("=");o[v]=f});const u=o.DOMAIN,s=Number(o.ULTIMATE||0),i="EXPERIENCE"in o;if(i){const r=parseInt(o.EXPIRY,10),v=new Date(r);if(v<new Date)return{code:Gn,expiredTime:v,isTrial:i}}if(!s&&window?.location){if(!u)return{code:Yt};const r=window.location.hostname,v=u.split("."),f=r.split("."),d=f[f.length-1];if(d&&r!=="localhost"&&r!=="127.0.0.1"&&isNaN(+d))for(let p=v.length-1;p>=0;p--){const m=v[p],y=f[f.length-(v.length-p)];if(y&&m!==y)return{code:Yt}}}let a=0;try{if(a=parseInt(o.EXPIRY,10),!a||Number.isNaN(a))return{code:Yt}}catch{return{code:Yt}}const c=new Date(a+6048e5);return c<Ci()?{code:Gn,expiredTime:c}:{code:yi,isTrial:i,expiredTime:c}}function Si(){const e=F(""),t=h(()=>$r());return{status:h(()=>bi(t.value)),watermarkMsg:e}}function Ae(e,t){var l;const n=ce();return qe(()=>{n.value=e()},{flush:(l=void 0)!=null?l:"sync"}),n}let Ml;function xi(e){if(typeof document>"u")return 0;if(Ml===void 0){const t=document.createElement("div");t.style.width="100%",t.style.height="200px";const l=document.createElement("div"),n=l.style;n.position="absolute",n.top="0",n.left="0",n.pointerEvents="none",n.visibility="hidden",n.width="200px",n.height="150px",n.overflow="hidden",l.appendChild(t),document.body.appendChild(l);const o=t.offsetWidth;l.style.overflow="scroll";let u=t.offsetWidth;o===u&&(u=l.clientWidth),document.body.removeChild(l),Ml=o-u}return Ml}const cl=20,Fl=50,Al=100,wn=Symbol("viewportRef"),el=Symbol("autoHeaderHeight");function $i(){const e={};return(t,l,n)=>{var o;if(n===void 0||t===void 0)return 0;const u=t.$el||t;if(typeof n=="number")return n;if((o=e[l])!=null&&o[n])return e[l][n];const s=n.match(/^(.*)px$/);let i=Number(s===null?void 0:s[1]);if(e[l]=e[l]||{},Number.isNaN(i)){const a=document.createElement("div");a.style.width=n,a.style.height="0px",u.style.width=`${l}px`,u.appendChild(a),i=Math.floor(a.offsetWidth),u.removeChild(a)}return e[l][n]=i,e[l][n]}}let tn=!1;if(typeof window<"u"&&window.getComputedStyle){const e=document.createElement("div");tn=["","-webkit-","-moz-","-ms-"].some(t=>{try{e.style.position=t+"sticky"}catch{}return e.style.position!=""})}else tn=!0;var St=tn;const Ri=(e,t)=>{let l=0,n=e.length-1,o=e.length;for(;l<=n;){const u=(n-l>>1)+l;e[u].left>=t?(n=u-1,o=u):l=u+1}return o},zl=(e,t,l)=>{const n=e.length,o=[],u=Math.max(Ri(e,t)-1,0);for(let s=u;s<n;s++){const i=e[s];if(!(i.left<=l))break;o.push(i)}return o},ki="__Internal__Checkbox__Columnkey",Zt="__Internal__Expand__Columnkey",qn=50;function Ll(e){return e?.fixed===!0?"left":e?.fixed}const Ki=e=>{var t;const l=[],n=(u,s,i=0)=>{l[i]=l[i]||[];let a=s;return u.filter(Boolean).map(c=>{var r;const v={key:c.columnKey,column:c,colStart:a};let f=1;const d=c.children;return d&&d.length>0&&(f=n(d,a,i+1).reduce((p,m)=>p+m,0),v.hasSubColumns=!0),"rowSpan"in c&&(v.rowSpan=c.rowSpan),v.colSpan=f,v.colEnd=v.colStart+f-1,(r=l[i])==null||r.push(v),a+=f,f})};n(e,0);const o=l.length;for(let u=0;u<o;u+=1)(t=l[u])==null||t.forEach(s=>{"rowSpan"in s||s.hasSubColumns||(s.rowSpan=o-u)});return l};function Pi({props:e,rawColumns:t,bodyScrollWidth:l,baseHeight:n,measureWidthRef:o,expandType:u,expandable:s,scrollLeft:i,bodyWidth:a,xVirtual:c,draggingColumnKey:r,latestRangeStartCell:v}){const f=ce([]),d=ce([]),p=ce([]),m=ce([]),y=ce([]),b=ce([]),C=ce([]),I=ce(1),k=ce([]),N=ce(new Map),V=ce(0);qe(()=>{V.value=k.value.reduce((ne,ie)=>ne+ie,0)});const j=$i(),M=ce([]),J=h(()=>{const ne=e.rowSelection||{},{checkStrictly:ie=!0,fixed:se}=ne;return{...ne,checkStrictly:ie,fixed:se===!0?"left":se}}),g=Ae(()=>u.value==="nest"&&e.expandIconColumnIndex===void 0?e.rowSelection?1:0:e.expandIconColumnIndex>0&&e.rowSelection?e.expandIconColumnIndex-1:e.expandIconColumnIndex);qe(()=>{let ne=t.value.slice();if(s.value){const ie=g.value||0,se=t.value[ie],Se=e.expandColumnWidth||48,me=e.expandFixed===!0?"left":e.expandFixed;let ye;me!=="left"||g.value?me==="right"&&g.value===t.value.length?ye="right":ye=Ll(se):ye="left";const Ke={title:"",fixed:ye,width:Se,minWidth:Se,maxWidth:Se,columnKey:Zt,type:"expand",finallyWidth:Se,__Internal__Column__:!0};ie>=0&&ne.splice(ie,0,Ke)}if(e.rowSelection){const{columnWidth:ie=48,fixed:se,columnTitle:Se}=J.value,me={width:ie,minWidth:ie,maxWidth:ie,finallyWidth:ie,title:Se,type:"checkbox",columnKey:ki,__Internal__Column__:!0};if(u.value==="row"&&ne.length&&!g.value){const[ye,...Ke]=ne,Ie=se||Ll(Ke[0]);Ie&&(ye.fixed=Ie),ne=[ye,{...me,fixed:Ie},...Ke]}else ne=[{...me,fixed:se||Ll(ne[0])},...ne]}ne.length||(ne=[{customRender:()=>null}]),M.value=ne}),fe([M,n,l,o],()=>{var ne,ie,se,Se;const me=M.value;let ye=1;const Ke=[],Ie=[],Me=[],Le=[],ae=[],ve=[],xe=[];if(N.value=new Map,!o.value)return;const Ee=[];let je=0;const D=(P,U,Z,re,ue,W,he)=>{for(let Ce=0,be=P.length;Ce<be;Ce++){const He=P[Ce];if(!He)continue;const{width:Qe,fixed:dt=he,children:et,ellipsis:Xe=!1,tooltip:pt,minWidth:Rt,maxWidth:Ct}=He,Vt=j(o.value,l.value,Qe),gt=j(o.value,l.value,Rt),al=Ct?j(o.value,l.value,Ct):1/0,jt=Math.min(Math.max(Vt,gt),al),Ot=Pr(Ce,W),rl=He.columnKey||He.key||Ot,vt=dt===!0?"left":dt,Ye=Object.assign({},He,{finallyWidth:jt,columnKey:rl,originColumn:He,showTitle:!pt&&(Xe===!0||typeof Xe=="object"&&Xe?.showTitle!==!1),fixed:vt,hidden:He.hidden===!0});if(N.value.set(rl,Ye),Ye.hidden)break;et&&et.length?(Ye.children=[],vt==="left"?U.push(Ye):vt==="right"?re.push(Ye):Z.push(Ye),ye=Math.max(ye,ue+1),D(et,Ye.children,Ye.children,Ye.children,ue+1,Ot,vt)):(Ye.width===void 0&&Ee.push(Ye),je+=Ye.finallyWidth,vt==="left"?(Ke.push(Ye),U.push(Ye)):vt==="right"?(Ie.push(Ye),re.push(Ye)):(Me.push(Ye),Ye.autoHeight&&Le.push(Ye),Z.push(Ye)))}};D(me,ae,xe,ve,1,"__S_TABLE_COLUMN_Key__");let O=l.value-je;const le=Ee.length?Ee:Ke.concat(Me,Ie).filter(P=>!P.resizable||!P.__Internal__Column__),w=Math.floor(O/le.length);if(O>0)for(let P=0,U=le.length;P<U;P++){const Z=le[P];let re=0;P==U-1&&O>w?re=Z.finallyWidth+O:re=Math.max(Math.min(Z.finallyWidth+w,(ne=Z.maxWidth)!=null?ne:1/0),(ie=Z.minWidth)!=null?ie:50),O-=re-Z.finallyWidth,Z.finallyWidth=re}else for(let P=0,U=Ee.length;P<U;P++){const Z=Ee[P];Z.finallyWidth=Math.min((se=Z.minWidth)!=null?se:50,(Se=Z.maxWidth)!=null?Se:1/0)}e.headerHeight!==void 0?Array.isArray(e.headerHeight)?k.value=e.headerHeight.concat(new Array(ye).fill(n.value)).slice(0,ye):k.value=new Array(ye).fill(e.headerHeight):k.value=new Array(ye).fill(n.value);const $=(P,U,Z,re)=>{let ue=0,W=U;return P.forEach(he=>{he.left=W,he.top=Z,he.children?(he.rowSpan=1,he.height=k.value[ye-re],he.finallyWidth=$(he.children,W,he.height,re-1)):(he.rowSpan=re,he.height=k.value.slice(ye-re).reduce((Ce,be)=>Ce+be,0)),W+=he.finallyWidth,ue+=he.finallyWidth}),ue};$(ae.concat(xe,ve),0,0,ye),f.value=Ke,d.value=Ie,p.value=Me,m.value=Le,y.value=ae,b.value=ve,C.value=xe,I.value=ye},{immediate:!0});const E=ce([]);let L={};const S=ce({});qe(()=>{L={};const ne={};E.value=[].concat(f.value,p.value,d.value).map((ie,se)=>(ie.columnIndex=se,ne[ie.columnKey]=se,ie)),S.value=ne});const H=ce([]),z=ce({});qe(()=>{var ne,ie,se,Se;if(e.autoHeaderHeight){H.value=Ki([].concat(y.value,C.value,b.value));const me=[],ye=[];let Ke=0,Ie=0;const Me=E.value,Le=Me.length,ae=e.direction;for(let ve=0;ve<Le;ve+=1)if(ae==="rtl"){ye[ve]=Ie,Ie+=((ne=Me[ve])==null?void 0:ne.finallyWidth)||0;const xe=Le-ve-1;me[xe]=Ke,Ke+=((ie=Me[xe])==null?void 0:ie.finallyWidth)||0}else{me[ve]=Ke,Ke+=((se=Me[ve])==null?void 0:se.finallyWidth)||0;const xe=Le-ve-1;ye[xe]=Ie,Ie+=((Se=Me[xe])==null?void 0:Se.finallyWidth)||0}z.value={left:me,right:ye}}else H.value=[]});const q=F(0),x=F(0),K=F(0),R=Ae(()=>q.value+x.value+K.value);qe(()=>{q.value=f.value.reduce((ne,ie)=>ne+(ie.finallyWidth||0),0),x.value=p.value.reduce((ne,ie)=>ne+(ie.finallyWidth||0),0),K.value=d.value.reduce((ne,ie)=>ne+(ie.finallyWidth||0),0)});const B=(ne,ie=1)=>{if(`${ne}-${ie}`in L)return L[`${ne}-${ie}`];const se=E.value;let Se=0,me=0,ye=0;if(se[ne]){const Ke=se[ne].left;for(let Ie=ne,Me=ne+ie;Ie<Me;Ie++){const Le=se[Ie];Se+=Le.finallyWidth||0,me+=Le.minWidth,ye+=Le.maxWidth}L[`${ne}-${ie}`]={width:Se,left:Ke,minWidth:me,maxWidth:ye}}return L[`${ne}-${ie}`]||{width:Se,left:0,minWidth:me,maxWidth:ye}},Q=ce([]),A=ce([]),Y=F(!1),pe=Ae(()=>a.value-(St?K.value:0)),ke=ne=>ne.length>2e3?ne.slice(0,2e3):ne;fe([i,pe,p,c],([ne,ie,se])=>{var Se,me;if(!c.value){Q.value=ke(se),Y.value=!Y.value;return}const ye=zl(se,ne-cl,ie+ne+cl),Ke=m.value.filter(Ie=>!ye.find(Me=>Ie===Me));if(Q.value=ke([].concat(Ke,ye)),(Se=v.value)!=null&&Se.column){const Ie=N.value.get((me=v.value)==null?void 0:me.column.columnKey);Ie&&!Ie.fixed&&!Q.value.find(Me=>Me.columnKey===Ie.columnKey)&&Q.value.splice(0,0,Ie)}Y.value=!Y.value});const Te=(ne,ie,se)=>zl(ne,ie,se).map(Se=>Object.assign({},Se,Se.children?{children:Te(Se.children,ie,se)}:{}));return fe(Y,()=>{if(!c.value){A.value=ke(C.value);return}const ne=i.value-cl,ie=pe.value+i.value+cl,se=zl(C.value,ne,ie),Se=se[0],me=se.length-1,ye=se[me];if(Se?.children&&(se[0]=Object.assign({},se[0],{children:Te(Se.children,ne,ie)})),ye&&ye!==Se&&ye.children&&(se[me]=Object.assign({},se[me],{children:Te(ye.children,ne,ie)})),A.value=ke(se),r.value&&!A.value.find(Ke=>Ke.columnKey===r.value)){const Ke=N.value.get(r.value);A.value.push(Ke.children?Object.assign({},Ke,{children:[]}):Ke)}}),{leftColumns:f,rightColumns:d,centerColumns:p,leftHeaderColumns:y,rightHeaderColumns:b,centerHeaderColumns:C,leftWidth:q,rightWidth:K,centerWidth:x,bodyMaxWidth:R,maxRowSpan:I,headerHeight:k,maxHeaderHeight:V,allColumns:E,getColumnPosition:B,getColumnPositionByKey:ne=>{const ie=S.value[ne];if(!ie){ht(!1,"scrollTo",`\`columnKey = ${ne}\` is Invalid`);return}return B(ie)},columnKeyIndexMap:S,expandIconColumnIndex:g,visibleCenterColumns:Q,visibleCenterHeaderColumns:A,columnRowsForAutoHeaderHeight:H,stickyOffsets:z}}const yl="asc",ln="desc";function nn(e){return typeof e.sorter=="object"&&typeof e.sorter.multiple=="number"?e.sorter.multiple:!1}function on(e,t){let l=[];function n(o){l.push({column:o,key:o.columnKey,multiplePriority:nn(o),sortOrder:o.sortOrder})}return e.forEach(o=>{o.children?("sortOrder"in o&&n(o),l=[...l,...on(o.children||[],t)]):o.sorter&&("sortOrder"in o?n(o):t&&o.defaultSortOrder&&l.push({column:o,key:o.columnKey,multiplePriority:nn(o),sortOrder:o.defaultSortOrder}))}),l}function Jn(e){return typeof e=="function"?e:e&&typeof e=="object"&&e.compare?e.compare:!1}function Qo(e,t,l){const n=t.slice().sort((s,i)=>i.multiplePriority-s.multiplePriority),o=e.slice(),u=n.filter(({column:{sorter:s},sortOrder:i})=>Jn(s)&&i);return u.length?o.sort((s,i)=>{for(let a=0;a<u.length;a+=1){const c=u[a],{column:{sorter:r},sortOrder:v}=c,f=Jn(r);if(f&&v){const d=f(s,i,v);if(d!==0)return v===yl?d:-d}}return 0}).map(s=>{const i=s[l];return i?{...s,[l]:Qo(i,t,l)}:s}):o}function Zn(e){const{column:t,sortOrder:l}=e;return{column:t.originColumn,order:l,field:t.dataIndex,columnKey:t.columnKey}}function Nl(e){const t=e.filter(({sortOrder:l})=>l).map(Zn);return t.length===0&&e.length?{...Zn(e[e.length-1]),column:void 0}:t.length<=1?t[0]||{}:t}function Ii(e,t,l,n){const o=ce(on(l.value||[],!0)),u=ce([]);qe(()=>{let a=!0;const c=on(l.value,!1);let r=[];const v=f=>{a?r.push(f):r.push({...f,sortOrder:null})};if(c.length){let f=null;c.forEach(d=>{f===null?(v(d),d.sortOrder&&(d.multiplePriority===!1?a=!1:f=!0)):(f&&d.multiplePriority!==!1||(a=!1),v(d))})}else r=o.value;u.value===r||bl(u.value,r)||(u.value=r)});const s=h(()=>Qo(t.value,u.value,"children")),i=h(()=>Nl(u.value));return{sortedData:s,sorterStates:u,sorter:i,getSorters:a=>Nl(a),changeSorter:function(a){var c;let r;a.multiplePriority!==!1&&u.value.length&&((c=u.value[0])==null?void 0:c.multiplePriority)!==!1?r=[...u.value.filter(({key:v})=>v!==a.key),a]:r=[a],o.value=r,n(Nl(r),r)}}}function Cn(e){let t=[];return(e||[]).forEach(({value:l,children:n})=>{t.push(l),n&&(t=[...t,...Cn(n)])}),t}function Qn(e){const t={};return e.forEach(({key:l,filteredKeys:n,column:o})=>{var u;const s=o.filterDropdown||((u=o?.slots)==null?void 0:u.filterDropdown)||o.customFilterDropdown,{filters:i}=o;if(s)t[l]=n||null;else if(Array.isArray(n)){const a=Cn(i);t[l]=a.filter(c=>n.includes(String(c)))}else t[l]=null}),t}function eo(e,t){return t.reduce((l,n)=>{const{column:{onFilter:o,filters:u},filteredKeys:s}=n;return o&&s&&s.length?l.filter(i=>s.some(a=>{const c=Cn(u),r=c.findIndex(f=>String(f)===String(a)),v=r!==-1?c[r]:a;return o(v,i)})):l},e)}function an(e,t){let l=[];return(e||[]).forEach(n=>{var o,u;const s=n.filterDropdown||((o=n?.slots)==null?void 0:o.filterDropdown)||n.customFilterDropdown;if(n.filters||s||"onFilter"in n)if("filteredValue"in n){let i=n.filteredValue;s||(i=(u=i?.map(String))!=null?u:i),l.push({column:n,key:n.columnKey,filteredKeys:i,forceFiltered:n.filtered})}else l.push({column:n,key:n.columnKey,filteredKeys:t&&n.defaultFilteredValue?n.defaultFilteredValue:void 0,forceFiltered:n.filtered});"children"in n&&(l=[...l,...an(n.children||[],t)])}),l}function Ti(e,t,l,n){const o=F(an(l.value,!0)),u=F([]);qe(()=>{const a=an(l.value,!1);let c=[];const r=a.every(({filteredKeys:v})=>v===void 0);if(r)c=o.value;else{const v=a.every(({filteredKeys:f})=>f!==void 0);ht(r||v,"Table","`FilteredKeys` should all be controlled or not controlled.")}u.value===c||bl(u.value,c)||(u.value=c)});const s=h(()=>Qn(u.value)),i=h(()=>eo(t.value,u.value));return{filterStates:u,filters:s,filterData:i,getFilters:a=>eo(t.value,a),changeFilter:a=>{const c=u.value.filter(({key:r})=>r!==a.key);c.push(a),o.value=c,n(Qn(c),c)}}}function Ei(e,t){let l=0,n=e.length-1;for(;l<n;){const o=l+Math.floor((n-l)/2);t(e[o])?n=o:l=o+1}return l}function Hi(e,t,l,n,o,u){const s=ce([]),i=ce({}),a=ce({}),c=F(0),r=h(()=>e.size==="small"?39:e.size==="middle"?47:55),v=h(()=>e.size==="small"?e.rowHeight||39:e.size==="middle"?e.rowHeight||47:e.rowHeight||55);let f;const d=F(0),p=F(-1),m=F(0);qe(()=>{const g=ja(s.value,E=>E<c.value-l.value-Fl);m.value=g<0?0:g});const y=F(0);fe(n,()=>{y.value=n.value},{immediate:!0}),qe(()=>{if(t.value.length===s.value.length)if(o.value)if(l.value){let g=Ei(s.value,L=>L>=y.value-Fl)-1;g=g<0?0:g,d.value=g>m.value?m.value:g;let E=po(s.value,L=>L>=y.value+l.value+Fl,d.value);E=E>=0?E:s.value.length-1,p.value=E>s.value.length-1?s.value.length-1:E}else d.value=0,p.value=-1;else d.value=0,p.value=t.value.length-1});const b=ce({}),C=F(!1);setTimeout(()=>{C.value=!0});const I=F(!0),k=F(!1),N=ce({});let V;const j=()=>{Ne.cancel(V),V=Ne(()=>{const g=b.value,E={};let L=!1;Object.values(N.value).forEach(({rowKey:S,height:H})=>{E[S]=E[S]||0,H>E[S]&&(E[S]=H)});for(const[S,H]of Object.entries(E))g[S]!==H&&(g[S]=H,L=!0);L&&(b.value=g,k.value=!k.value)})};let M;fe([d,p,C],([g,E],[L,S])=>{C.value?I.value=g===L&&E===S:I.value=!0}),fe([k,i],()=>{Ne.cancel(M),M=Ne(()=>{const g=r.value,E=b.value,L=i.value,S=a.value,H=t.value,z=H.length,q={};let x=0;const K=[];for(let R=0;R<z;R++){const{rowKey:B}=H[R],Q=L[B]!==void 0?L[B]:E[B]===void 0?S[B]:E[B];q[B]=Q,K.push(x),x+=Q===void 0?g:Q}a.value=q,c.value=x,s.value=K},I.value?0:1)}),ct(()=>{Ne.cancel(V),Ne.cancel(M)});const J=g=>{var E,L;const S={},H=r.value,z={},q=b.value,x=g.length;if(typeof e.rowHeight=="function")for(let K=0;K<x;K++){const{record:R,rowKey:B,isExpandRow:Q=!1}=g[K];let A=e.rowHeight(R,Q,H);A=Nn(A)?A:void 0,S[B]=A,z[B]=(E=A??q[B])!=null?E:0}else{let K=e.rowHeight;if(Nn(K))for(let R=0;R<x;R++){const{rowKey:B,isExpandRow:Q=!1}=g[R];Q&&(K=void 0),S[B]=K,z[B]=(L=K??q[B])!=null?L:0}else for(let R=0;R<x;R++){const{rowKey:B}=g[R];S[B]=void 0,z[B]=q[B]}}i.value=S,b.value=z};return fe([t,v],([g])=>{J(g||[]),C.value=!1,setTimeout(()=>{C.value=!0})},{immediate:!0}),{rowPosition:s,rowHeights:i,viewportHeight:c,addHeight:(g,E,L,S)=>{Ne.cancel(f)},mergedRowHeights:a,startIndex:d,endIndex:p,getRowHeight:(g,E=1)=>{const L=t.value,S=Math.min(L.length-1,g+E-1);let H=0;const z=a.value;for(let q=g;q<=S;q++){const{rowKey:x}=L[q];H+=z[x]===void 0?r.value:z[x]}return H},addRowHeight:(g,E,L)=>{const S=N.value[g]||{};(S.rowKey!==E||S.height!==L)&&(N.value[g]={rowKey:E,height:L},j())},removeRowHeight:g=>{N.value[g]&&(delete N.value[g],j())},getRowPositionByKey:g=>{var E;const L=(E=u.value[g])==null?void 0:E.flattenIndex;if(L===void 0){ht(!1,"scrollTo",`\`rowKey = ${g}\` is Invalid`);return}return s.value[L]}}}function Oi(e,t){return`${e}-${t}`}const to=()=>({});function Bi(e,t,l,n,o,u){const s=ce([]),i=ce({}),a=ce([]),c=ce([]),r=ce(new Map),v=ce(to);return qe(()=>{var f;v.value=((f=u.value)==null?void 0:f.getCheckboxProps)||to}),fe([e,t,n,l],()=>{const f=n.value,d=l.value,p=t.value,m=o.value,y={},b=[],C=[],I=new Map;let k=0;const N=(V,j,M,J=0,g=null)=>{const E=[],L=v.value;return V.forEach((S,H)=>{const z=f(S,H),q=L?.(S),x=Oi(g?g.pos:"0",H),K=M&&d?.has(z),R={record:S,indent:j,rowKey:z,rowIndex:H,pos:x,level:J,flattenIndex:k},B=Object.assign({parent:g},R);if(y[z]=B,b.push(z),I.set(z,q),q?.disabled||C.push(z),B.parent&&(B.parent.children=B.parent.children||[],B.parent.children.push(B)),M&&(E.push(R),k+=1),M&&j===0&&m==="row"){const Q=`__Internal__Expand__Key_${z}`;K&&(E.push({record:S,indent:j,rowKey:Q,isExpandRow:!0,rowIndex:H,pos:x,level:J,flattenIndex:k}),k+=1)}S&&typeof S=="object"&&p in S&&E.push(...N(S[p]||[],j+1,K,J+1,B))}),E};s.value=N(e.value,0,!0),i.value=y,a.value=b,c.value=C,r.value=I},{immediate:!0}),{flattenData:s,keyEntities:i,pageDataRowKeys:a,pageDataEnableRowKeys:c,checkboxPropsMap:r,getRowFlattenIndexByKey:f=>{var d;return(d=i.value[f])==null?void 0:d.flattenIndex},isMyChildren:(f,d)=>{var p,m;if(f===d||d===void 0)return!1;let y=i.value[d],b=!1;for(;y&&!b;){if(((p=y.parent)==null?void 0:p.rowKey)===f){b=!0;break}y=i.value[(m=y.parent)==null?void 0:m.rowKey]}return b},getRowByFlattenIndex:f=>s.value[f]}}const dl=10;function Di(e,t){const l={current:t.current,pageSize:t.pageSize};return Object.keys(e&&typeof e=="object"?e:{}).forEach(o=>{const u=t[o];typeof u!="function"&&(l[o]=u)}),l}function Mi(...e){const t={};return e.forEach(l=>{l&&Object.keys(l).forEach(n=>{const o=l[n];o!==void 0&&(t[n]=o)})}),t}function Fi(e,t,l,n){const o=Cl({current:1,pageSize:dl}),u=h(()=>t.size),s=h(()=>{const{pagination:f}=t;if(t.pagination===!1)return{};const{total:d=0,...p}=f&&typeof f=="object"?f:{},m=Mi(o,p,{total:d>0?d:e.value}),y=Math.ceil((d||e.value)/m.pageSize);m.current>y&&(m.current=y||1);const b=u.value==="small"||u.value==="middle"?"small":void 0;return m.size=m.size||b,m}),i=(f=1,d)=>{o.current=f,o.pageSize=d||s.value.pageSize||dl};let a;const c=(f,d)=>{clearTimeout(a),a=setTimeout(()=>{var p,m,y,b,C;f===s.value.current&&(d||((p=s.value)==null?void 0:p.pageSize))===((m=s.value)==null?void 0:m.pageSize)||(t.pagination&&((b=(y=t.pagination).onChange)==null||b.call(y,f,d)),i(f,d),n?.(f,d||((C=s.value)==null?void 0:C.pageSize)||dl))},0)};ct(()=>{clearTimeout(a)});const r=h(()=>{const f=t.direction==="rtl"?"left":"right",{position:d}=s.value,p={};if(t.pagination===!1)return{};if(d!==null&&Array.isArray(d)){const m=d.find(C=>C.indexOf("top")!==-1),y=d.find(C=>C.indexOf("bottom")!==-1),b=d.every(C=>`${C}`=="none");m||y||b||(p.bottom=f),m&&(p.top=m.toLowerCase().replace("top","")),y&&(p.bottom=y.toLowerCase().replace("bottom",""))}else p.bottom=f;return p}),v=h(()=>{const f=l.value;if(t.pagination===!1||!s.value.pageSize)return f;const{current:d=1,total:p=0,pageSize:m=dl}=s.value;return f.length<p?f.length>m?(ht(!1,"Table","`dataSource` length is less than `pagination.total` but large than `pagination.pageSize`. Please make sure your config correct data with async mode."),f.slice((d-1)*m,d*m)):f:f.slice((d-1)*m,d*m)});return{mergedPagination:s,onChange:c,onShowSizeChange:(f,d)=>{var p,m;c(f,d),t.pagination!==!1&&((m=(p=t.pagination)==null?void 0:p.onShowSizeChange)==null||m.call(p,f,d))},pos:r,refreshPagination:i,pageData:v}}const lo=(e,t,l,n=4)=>{if(e==t)return Ne(()=>({}));const o=()=>(e+=(t-e)/n,Math.abs(e-t)<1?(l(t,!0),Ne(()=>({}))):(l(e,!1),Ne(o)));return o()};function Ai(e,t,l,n,o,u,s,i,a){const c=ce([]),r=ce([]);let v={},f=!0;return fe([t,n,o],()=>{var d;if(l.value.length!==t.value.length)return;const p=[],m=[],y=[],b={},C=Math.min(n.value+2e3,o.value+1),I=((d=l.value)==null?void 0:d.slice(n.value,C))||[],k=t.value.slice(n.value,C)||[],N=i(u.value);if(l.value[N]&&(N<n.value||N>=C)&&(I.push(l.value[N]),k.push(t.value[N])),a.value){const M=a.value.rowIndex;l.value[M]&&(M<n.value||M>=C)&&(I.push(l.value[M]),k.push(t.value[M]))}I.forEach((M,J)=>{const g=v[M.rowKey];g!==void 0?(p[g]=M,m[g]=k[J],b[M.rowKey]=g):y.push([M,k[J]])});const V=y[0];u.value!==void 0&&s.value&&V&&(f&&(y.shift(),y.push(V)),f=!f);let j=0;y.forEach(([M,J])=>{const g=po(p,E=>!E,j);g!==-1?(j=g,p[g]=M,m[g]=J,b[M.rowKey]=g):(b[M.rowKey]=p.length,p.push(M),m.push(J))}),v=b,c.value=p,r.value=m},{immediate:!0}),{data:c,pos:r}}const zi=({leftColumns:e,rightColumns:t,visibleCenterColumns:l,allColumns:n,data:o,mergedRowHeights:u,getColumnPosition:s,bodyWidth:i,leftWidth:a,centerWidth:c,getRowHeight:r,customCell:v})=>{const f=ce({}),d=ce({}),p=ce(new Map),m=(y,b,C,I,k)=>{var N,V,j,M;const{customRender:J,originColumn:g,dataIndex:E,columnIndex:L,left:S,customCell:H}=b,z={},q=(V=(N=H||v.value)==null?void 0:N({record:I,rowIndex:C,column:b}))!=null?V:{},x=Object.assign({overflow:k},Hr(q.style||{})),K=Object.assign({},q);if(J){const B=Ho(I,E),Q=J({text:B,value:B,record:I,index:C,column:g});Q&&xo(Q)&&!vr(Q)&&!zt(Q)?(Object.assign(K,Q.props||{}),z.children=Q.children):z.children=Q}K.colSpan=(j=K.colSpan)!=null?j:1,K.rowSpan=(M=K.rowSpan)!=null?M:1;const{width:R}=s(L,K.colSpan);return Object.assign(x,{width:`${R}px`,left:S-y+"px"}),R===0&&(x.display="none"),K.colSpan>1&&(x.zIndex=1),K.rowSpan>1&&(x.height=`${r(C,K.rowSpan)-1}px`),z.props=Object.assign({},K,{style:x}),z};return qe(()=>{const y={},b={},C=(N,V,j,M,J,g,E,L)=>{var S,H,z,q;const x=j.length;let K=null,R=0;for(let B=0;B<x;B++){const{columnIndex:Q,columnKey:A}=j[B],Y=m(V,j[B],J,g,E);y[M][A]=Y,(S=Y.props)!=null&&S.rowSpan&&(b[M]=!0),B===0&&((H=Y.props)==null?void 0:H.colSpan)===0&&(R=Q)}if(R!==0)for(let B=R-1;B>0;B--){const Q=n.value[B];if(Q.fixed)break;const A=m(V,Q,J,g,E);if(((z=A.props)==null?void 0:z.colSpan)!==0){K=Q,y[M][Q.columnKey]=A,(q=A.props)!=null&&q.rowSpan&&(b[M]=!0);break}}if(K){const B=j.slice();B.push(K),L?.set(M,B)}else L?.set(M,j)},I=new Map,k=o.value.length;for(let N=0;N<k;N++){if(!o.value[N])continue;const{record:V,isExpandRow:j,rowKey:M,rowIndex:J}=o.value[N];y[M]={};const g=u.value[M]?"hidden":"initial";j?y[M][Zt]={props:{style:{left:"0px",width:`${i.value}px`,zIndex:1}}}:(C(0,0,e.value,M,J,V,g),C(0,a.value,l.value,M,J,V,g,I),C(0,a.value+c.value,t.value,M,J,V,g))}f.value=y,d.value=b,p.value=I}),{allCellProps:f,hasMultiRowSpanInfo:d,centerRowColumnsMap:p}},ea=Symbol("TableSlotsContext"),$t=()=>Ze(ea,{});var Li=Pe({name:"TableSlotsContextProvider",inheritAttrs:!1,props:{value:Object},setup(e,{slots:t}){const l=Cl({});return fe(()=>e.value,()=>{Ir(l),Object.assign(l,e.value)},{immediate:!0}),lt(ea,l),()=>{var n;return(n=t.default)==null?void 0:n.call(t)}}}),Ni=Pe({name:"MeasureWidth",inheritAttrs:!1}),De=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};const Wi={style:{position:"absolute",top:"0",left:"0","z-index":"-999",width:"1px",height:"0",padding:"0",margin:"0",overflow:"hidden","pointer-events":"none"}};function _i(e,t,l,n,o,u){return T(),te("div",Wi)}var Vi=De(Ni,[["render",_i]]);const ji=typeof window<"u"?window:void 0;function vl(e){var t;const l=Gt(e);return(t=l?.$el)!=null?t:l}function pl(e,t,l={}){const{window:n=ji,ignore:o,capture:u=!0,detectIframe:s=!1}=l;if(!n)return;const i=F(!0);let a;const c=m=>{n.clearTimeout(a);const y=vl(e);!y||y===m.target||m.composedPath().includes(y)||!i.value||t(m)},r=m=>o&&o.some(y=>{const b=vl(y);return b&&(m.target===b||m.composedPath().includes(b))}),v=m=>{const y=vl(e);i.value=!!y&&!m.composedPath().includes(y)&&!r(m)},f=m=>{if(m.button===0){const y=m.composedPath();m.composedPath=()=>y,a=n.setTimeout(()=>c(m),50)}},d=m=>{var y;const b=vl(e);((y=document.activeElement)==null?void 0:y.tagName)==="IFRAME"&&!b?.contains(document.activeElement)&&t(m)};n.addEventListener("click",c,{passive:!0,capture:u}),n.addEventListener("pointerdown",v,{passive:!0}),n.addEventListener("pointerup",f,{passive:!0}),s&&n.addEventListener("blur",d);const p=()=>{n.removeEventListener("click",c),n.removeEventListener("pointerdown",v),n.removeEventListener("pointerup",f),n.removeEventListener("blur",d)};return ct(()=>{p()}),p}function ta(e,t,l,n){const{width:o,height:u}=l,{width:s,height:i}=n,a=Math.floor(o),c=Math.floor(u);t==="width"?a!==s&&e.dispatchEvent(new CustomEvent("resizewidth",{detail:{width:a}})):t==="height"?c!==i&&e.dispatchEvent(new CustomEvent("resizeheight",{detail:{height:c}})):(a!==s||c!==i)&&e.dispatchEvent(new CustomEvent("resize",{detail:{width:a,height:c}})),e.__resizeObserver__rect={width:a,height:c}}function no(e){e.__resizeObserver__listeners&&(e.__resizeObserver__listeners.unobserve(e),e.__resizeObserver__listeners.disconnect(),e.__resizeObserver__listeners=null)}function oo(e){return function(t){const l=t[0].target;ta(l,e,l.getBoundingClientRect(),l.__resizeObserver__rect||{})}}const Wt={created(e,t){const{arg:l,value:n=!0}=t;if(n){const o=new Ul(oo(l));o.observe(e),e.__resizeObserver__listeners=o}},updated(e,t){const{arg:l,value:n=!0}=t;if(n&&!e.__resizeObserver__listeners){const o=new Ul(oo(l));o.observe(e),e.__resizeObserver__listeners=o}else n||no(e)},beforeUnmount(e,t){const{arg:l,value:n=!0}=t;n&&(ta(e,l,{width:0,height:0},e.__resizeObserver__rect||{}),no(e))}};var Ui=Pe({name:"PopupContainer",directives:{resize:Wt},props:{prefixCls:{type:String}},setup(e,{expose:t}){const l=ce(),n=ce(),{registerPopupContext:o,visible:u}=gn();let s=null;const i=v=>{s=null,u.value=!1,v.style.opacity="0",a.value=null},a=ce();let c;const r=()=>{const v=l.value;if(!v||!u.value||!n.value){u.value=!1;return}if(!s||!document.contains(s))return;const{x:f,y:d}=s.getBoundingClientRect(),{left:p,top:m,width:y}=n.value.getBoundingClientRect(),b=v.offsetWidth,C=v.children[0],I=Math.min(v.scrollHeight,C.scrollHeight);v.style.opacity="1",v.style.height=`${I}px`;let k=f-p;const N=d-m;k+b>y&&(k=y-b),v.style.left=`${k}px`,v.style.top=`${N}px`};return pl(l,()=>{i(l.value)}),t({alignPopup:r}),o({showPopupContent:(v,f,d)=>{u.value=!0,a.value=()=>v?v({event:f,...d,popupContaniner:l.value,hidePopup:()=>{i(l.value)}}):null,s=f.currentTarget,clearTimeout(c),c=setTimeout(()=>{r()}),f.preventDefault()},hidePopupContent:i,getPopupContainer:()=>l.value}),{hidePopup:i,alignPopup:r,handlePopupResize:()=>{r()},handleRootResize:()=>{r()},targetRef:l,rootRef:n,popupContent:a,visible:u}}});function Xi(e,t,l,n,o,u){const s=Lt("resize");return T(),te("div",{ref:"rootRef",class:_(`${e.prefixCls}-popup`),style:{position:"absolute",top:"0",left:"0",right:"0"},onResize:t[1]||(t[1]=(...i)=>e.handleRootResize&&e.handleRootResize(...i))},[Je(oe("div",{ref:"targetRef",class:_(`${e.prefixCls}-popup-container`)},[Je((T(),te("div",{class:_(`${e.prefixCls}-popup-container-inner`),onResize:t[0]||(t[0]=(...i)=>e.handlePopupResize&&e.handlePopupResize(...i))},[(T(),de(it(e.popupContent)))],34)),[[s]])],2),[[fl,e.visible]])],34)}var Yi=De(Ui,[["render",Xi]]);const la=Symbol("HeaderContextProps"),na=e=>{lt(la,e)},oa=()=>Ze(la,{});let Wl;function aa(){return Wl||(Wl=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Wl}let _l;function bn(){return _l||(_l=(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream),_l}const ao=/Chrome\/(\d+)/.exec(navigator.userAgent);ao&&+ao[1];function Sn(e,t){if(e?.classList&&t){const l=Array.isArray(t)?t:t.split(" ");e.classList.add(...l)}}function xn(e,t){if(e?.classList&&t){const l=Array.isArray(t)?t:t.split(" ");e.classList.remove(...l)}}var $n=Pe({props:{onlyAutoShow:{type:Boolean},notShowAuto:{type:Boolean}},setup:e=>{const t=Ve(),l=h(()=>`${t.props.prefixCls}`),n=F(),o=F(),u=F(!1),s=h(()=>{const I=`${t.scrollBarSize.value||15}px`;return{height:I,minHeight:I,maxHeight:I,width:"100%"}}),i=h(()=>{const I=`-${t.scrollBarSize.value||15}px`,k=t.props.horizontalScrollSticky,N=t.props.paginationSticky;if(k===!0){let V=0;return t.pos.value.bottom&&N&&(V+=N===!0?t.bottomPaginationHeight.value:(N.offsetBottom||0)+t.bottomPaginationHeight.value),{position:"sticky","z-index":8,bottom:`${V}px`,marginTop:I}}return{}}),a=aa()||bn(),c=h(()=>t.scrollBarSize.value===0&&a),r=h(()=>({[`${l.value}-horizontal-scroll`]:!0,[`${l.value}-horizontal-scroll-hidden`]:t.scrollBarSize.value===0,[`${l.value}-scrollbar-active`]:u.value,[`${l.value}-apple-scroll`]:a})),v=h(()=>t.showHorizontalScrollbar.value&&(!e.onlyAutoShow||c.value)&&(!e.notShowAuto||!c.value)),f=h(()=>t.showVerticalScrollbar.value),d=h(()=>{const I=`${t.bodyMaxWidth.value}px`;return{...s.value,width:I,minWidth:I,maxWidth:I}}),p=h(()=>({width:`${t.scrollBarSize.value}px`,height:"100%",overflowX:"hidden"})),{addHScrollDom:m,removeHScrollDom:y}=$l();let b=null;const C=()=>{c.value&&(clearTimeout(b),Sn(o.value,`${l.value}-scrolling`),b=setTimeout(()=>{xn(o.value,`${l.value}-scrolling`)},500))};return mt(()=>{fe(n,()=>{n.value&&(y(n.value),n.value.removeEventListener("scroll",C),m(n.value,!0),n.value.addEventListener("scroll",C,{passive:!0}))},{immediate:!0})}),ct(()=>{clearTimeout(b),n.value&&(y(n.value),n.value.removeEventListener("scroll",C))}),()=>v.value?X("div",{ref:o,class:r.value,"aria-hidden":"true",style:{...s.value,...i.value},onMousedown:()=>u.value=!0,onMouseenter:()=>u.value=!0,onMouseleave:()=>u.value=!1,onTouchend:()=>u.value=!1},[X("div",{key:"center",ref:n,class:`${l.value}-horizontal-scroll-viewport`,style:s.value},[X("div",{class:`${l.value}-body-horizontal-scroll-container`,style:d.value},null)]),f.value&&X("div",{style:p.value},null)]):null}});const Gi=()=>{const e=Ve().allColumns.value;return X("colgroup",null,[e.map(t=>{const{finallyWidth:l}=t;return X("col",{style:{width:`${l}px`}},null)})])},tl=(e,{slots:t})=>{var l;return(l=t.default)==null?void 0:l.call(t)};tl.displayName="RenderSlot";tl.inheritAttrs=!1;const ll=(e,{slots:t})=>{var l,n,o;return typeof e.vnode=="function"?((l=e.vnode)==null?void 0:l.call(e,e.props||{}))||((n=t.default)==null?void 0:n.call(t)):e.vnode||((o=t.default)==null?void 0:o.call(t))};ll.props=["vnode","props"];ll.inheritAttrs=!1;function ra(e,t,l,n,o="ltr"){const u=l[e]||{},s=l[t]||{};let i,a;u.fixed==="left"?i=n.left[e]:s.fixed==="right"&&(a=n.right[t]);let c=!1,r=!1,v=!1,f=!1;const d=l[t+1],p=l[e-1];return o==="rtl"?i!==void 0?f=!(p&&p.fixed==="left"):a!==void 0&&(v=!(d&&d.fixed==="right")):i!==void 0?c=!(d&&d.fixed==="left"):a!==void 0&&(r=!(p&&p.fixed==="right")),{fixLeft:i,fixRight:a,lastFixLeft:c,firstFixRight:r,lastFixRight:v,firstFixLeft:f,isSticky:n.isSticky}}const qi=`
<svg viewBox="64 64 896 896" focusable="false" data-icon="holder" width="1em" height="1em" fill="currentColor" aria-hidden="true">
  <path d="M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"></path>
</svg>
`,ia='<svg viewBox="64 64 896 896" focusable="false" data-icon="stop" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"></path></svg>',Ji='<svg viewBox="0 0 512 512" focusable="false" data-icon="stop" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M464 208L352 96L240 208"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M352 113.13V416"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M48 304l112 112l112-112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M160 398V96"></path></svg>',Zi='<svg viewBox="0 0 512 512" focusable="false" data-icon="stop" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M304 48l112 112l-112 112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M398.87 160H96"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M208 464L96 352l112-112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M114 352h302"></path></svg>',Qi="ICON_TYPE_DOWN",ro="ICON_TYPE_FORBID",io=()=>document.fullscreenElement||document.body,sa=({columnKey:e,disabled:t,column:l,domRef:n})=>{const o=F(!1),u=Ze(wn),{prefixCls:s,draggingColumnKey:i,onColumnDragEnd:a,scrollTo:c,leftWidth:r,rightWidth:v,centerWidth:f,bodyWidth:d,leftHeaderColumns:p,visibleCenterHeaderColumns:m,rightHeaderColumns:y,columnDrag:b}=Ve(),C=Ze(el,!1),I=F(0),k=F();qe(()=>{l.value.fixed==="right"?(I.value=r.value+f.value,k.value="right"):l.value.fixed?(I.value=0,k.value="left"):(I.value=r.value,k.value="center"),C&&(I.value=0)});const{dragColumnPlaceholderRef:N,headerRef:V}=oa(),j=$t();let M;const J=F(),g=F(),E=F(),L=F(),S=document.createElement("div");let H,z;const q=F(0),x=F(!0);let K=null,R={},B=0;const Q=[];let A=null;const Y=F(Qi),pe=h(()=>{switch(k.value){case"left":return p.value;case"center":return m.value;case"right":return y.value;default:return[]}}),ke=h(()=>{let $=()=>!1;return C&&k.value!=="center"?$=()=>{var P,U;const{x:Z}=R,re=k.value==="left"?((P=u?.value)==null?void 0:P.scrollLeft)+Z:((U=u?.value)==null?void 0:U.scrollLeft)+Z+d.value-v.value,ue=k.value==="left"?re+r.value:re+v.value,W=window.pageXOffset||document.documentElement.scrollLeft;return g.value+bt<=re?(S.style.left=re+W-20+"px",!0):g.value+bt>=ue?(S.style.left=ue+W-20+"px",!0):!1}:k.value!=="center"?$=()=>{const{x:P,width:U}=R,Z=window.pageXOffset||document.documentElement.scrollLeft;return g.value+bt<=P?(S.style.left=P+Z-20+"px",!0):g.value+bt>=P+U?(S.style.left=P+Z+U-20+"px",!0):!1}:$=()=>{const{x:P,width:U}=u.value.getBoundingClientRect(),Z=window.pageXOffset||document.documentElement.scrollLeft;return g.value+bt<=P+r.value?(S.style.left=P+Z+r.value-20+"px",!0):g.value+bt>=P+U-v.value?(S.style.left=P+Z+U-v.value-20+"px",!0):!1},$}),Te=()=>{const{y:$,height:P}=R,U=window.pageYOffset||document.documentElement.scrollTop;return J.value+hl<=$?(S.style.top=$+U-20+"px",!0):J.value>$+P?(S.style.top=$+U+P-10+"px",!0):!1},ne=$=>{$.forEach(P=>{const{target:U,type:Z,listener:re,options:ue}=P;U.addEventListener(Z,re,ue)}),Q.push(()=>{$.forEach(P=>{const{target:U,type:Z,listener:re,options:ue}=P;U.removeEventListener(Z,re,ue)})})},ie=ce(),se=($,P)=>{var U;if(ie.value=$,!o.value){if(pn($,P,Lo))return;o.value=!0,E.value=$.clientX,i.value=e.value,B=((U=n.value)==null?void 0:U.offsetWidth)||0,io().appendChild(S),le()}x.value=!0,g.value=$.clientX,J.value=$.clientY,Te()?(x.value=!1,clearInterval(z)):S.style.top=$.pageY-10+"px",ke.value()?x.value=!1:S.style.left=$.pageX-10+"px"};let Se,me;const ye=$=>{var P;for(let U=0;U<$.length;U++)if(((P=$[U])==null?void 0:P.identifier)===me?.identifier)return $[U];return null},Ke=$=>{o.value&&(o.value=!1,io().removeChild(S)),ie.value=$,K=null,me=null,Se=null,clearInterval(z),i.value="",N.value.style.opacity="0",Q.forEach(P=>P()),Q.length=0,Ne.cancel(M)},Ie=$=>{$.cancelable&&$.preventDefault()},Me=$=>{if(L.value=null,t.value)return;o.value=!1;const P=$.touches[0];Se=P,me=P,R=V.value.getBoundingClientRect();const U=n.value;ne([{target:document,type:"touchmove",listener:Ie,options:{passive:!1}},{target:U,type:"touchmove",listener:Le,options:{passive:!0}},{target:U,type:"touchend",listener:ae,options:{passive:!0}},{target:U,type:"touchcancel",listener:ae,options:{passive:!0}}])},Le=$=>{const P=ye($.touches);P&&se(P,me)},ae=$=>{let P=ye($.touches);P||(P=Se),Ke(P)},ve=$=>{if($.preventDefault(),L.value=null,t.value)return;o.value=!1,K=$,R=V.value.getBoundingClientRect();const P=document;ne([{target:P,type:"mousemove",listener:Ee},{target:P,type:"mouseup",listener:je},{target:P,type:"contextmenu",listener:xe}])},xe=$=>$.preventDefault(),Ee=$=>{se($,K)},je=$=>{Ke($)},D=h(()=>l.value.drag||l.value.drag===void 0&&b.value);mt(()=>{Qt(()=>{fe([n,D],([$],[P])=>{P&&(P.removeEventListener("mousedown",ve),P.removeEventListener("touchstart",Me)),$&&D.value&&($.addEventListener("mousedown",ve),$.addEventListener("touchstart",Me,{passive:!0}))},{flush:"post",immediate:!0})})}),ct(()=>{n.value&&(n.value.removeEventListener("mousedown",ve),n.value.removeEventListener("touchstart",Me)),Ne.cancel(M),ml(null,S)});const O=()=>{let $=Zi;return Y.value===ro&&($=ia),j.columnDragGhost?j.columnDragGhost({targetColumn:yt(L.value),column:l.value,icon:X("span",{class:`${s.value}-drag-ghost-image-icon`,innerHTML:$},null),allowed:x.value,dragging:o.value,event:ie.value}):[X("span",{class:`${s.value}-drag-ghost-image-icon`,innerHTML:$},null),X("span",{class:`${s.value}-drag-ghost-image-label`,style:{maxWidth:`${B}px`}},[l.value.title])]},le=()=>{A||(A=X(O),ml(A,S))};fe([s],()=>{S.className=`${s.value}-drag-ghost-image`},{immediate:!0}),fe([g,k],()=>{clearInterval(z),k.value==="center"&&x.value&&(z=setInterval(()=>{const{x:$,width:P}=u.value.getBoundingClientRect();if(g.value+30>$+P-v.value)c({left:u.value.scrollLeft+Al},"auto",!0),clearTimeout(H),H=setTimeout(()=>{q.value=u.value.scrollLeft+Al});else if(g.value<$+r.value){const U=Math.max(u.value.scrollLeft-Al,0);c({left:U},"auto",!0),clearTimeout(H),H=setTimeout(()=>{q.value=U})}},30))});const w=()=>{const $=g.value,{x:P}=V.value.getBoundingClientRect(),U=yt(pe.value),Z=I.value-P;let re=0,ue=0;C&&k.value!=="center"&&(ue=u.value.scrollLeft,re=k.value==="left"?ue:ue+d.value-v.value-r.value-f.value);for(let W=0,he=U.length;W<he;W++){const{left:Ce,finallyWidth:be}=U[W],He=Ce-Z+re;!U[W].__Internal__Column__&&$>He&&$<He+be&&(L.value=U[W])}L.value&&L.value.left!==l.value.left?(N.value.style.opacity="1",N.value.style.zIndex=l.value.fixed?"3":"unset",L.value.left>l.value.left?N.value.style.left=`${L.value.left-I.value+L.value.finallyWidth+re-1}px`:N.value.style.left=`${L.value.left-I.value+re-1}px`):N.value.style.opacity="0"};fe([o,g,x,q],()=>{Ne.cancel(M),M=Ne(()=>{o.value&&!x.value&&(Y.value=ro),o.value&&x.value?(Y.value="",w()):N.value.style.opacity="0"})}),fe(o,()=>{!o.value&&x.value&&L.value&&(Ne.cancel(M),a({column:l.value.originColumn,targetColumn:yt(L.value.originColumn),event:ie.value,dir:l.value.left<=L.value.left?"right":"left"}))})};var es=Pe({name:"HeaderCellTitle",components:{ExclamationCircleOutlined:Ua,InfoCircleOutlined:go,Popover:mo,Tooltip:Ht,RenderVNode:un},props:{column:{type:Object,default:()=>({})},prefixCls:String,wrapText:Boolean},setup(e){const t=$t(),l=Ve(),n=Ze(el,!1),o=h(()=>l.sorterStates.value.map(({column:c,sortOrder:r})=>({column:c,order:r}))),u=h(()=>Ft(Be,[ut(t,"headerCell",{title:e.column.title,column:e.column.originColumn},()=>{var c,r;return[typeof e.column.title=="function"?e.column.title({sortColumns:o.value,sortColumn:(c=o.value[0])==null?void 0:c.column,sortOrder:(r=o.value[0])==null?void 0:r.order}):e.column.title]})])),s=h(()=>{var c,r;return!!mn((r=(c=t.headerCellPopover)==null?void 0:c.call(t,{title:e.column.title,column:e.column.originColumn}))!=null?r:[])}),i=h(()=>e.column.showCellPopover===void 0?s.value:e.column.showCellPopover),a=h(()=>typeof i.value=="boolean"?{}:i.value);return{isShowPopover:s,tableSlotsContext:t,title:u,autoHeight:n,popoverProps:a,showCellPopover:i,altTitle:h(()=>e.column.showTitle&&typeof e.column.title=="string"?e.column.title:"")}}});const ts=["title"];function ls(e,t,l,n,o,u){var s;const i=ee("RenderVNode"),a=ee("ExclamationCircleOutlined"),c=ee("Popover"),r=ee("InfoCircleOutlined"),v=ee("Tooltip");return T(),te("span",{key:String("headerCell"in e.tableSlotsContext),class:_({[`${e.prefixCls}-header-cell-title-inner`]:!0}),title:e.altTitle,style:$e(`justify-content: ${e.column.align}`)},[oe("span",{class:_({[`${e.prefixCls}-cell-wrap-text`]:e.wrapText,[`${e.prefixCls}-cell-text-ellipsis`]:e.column.ellipsis!==!1&&!e.autoHeight})},[(T(),de(it(e.title)))],2),e.showCellPopover?(T(),de(c,Nt(We({key:0},e.popoverProps)),La({content:Re(()=>[e.tableSlotsContext.headerCellPopover?(T(),de(i,{key:0,vnode:e.tableSlotsContext.headerCellPopover({title:e.column.title,column:e.column.originColumn})},null,8,["vnode"])):ge("v-if",!0)]),default:Re(()=>[X(a,{style:{"margin-inline-start":"3px","font-size":"12px"}})]),_:2},[(s=e.popoverProps)!=null&&s.title?void 0:{name:"title",fn:Re(()=>[(T(),de(it(e.title)))]),key:"0"}]),1040)):ge("v-if",!0),e.column.headerTooltip?(T(),de(v,{key:1,title:e.column.headerTooltip},{default:Re(()=>[X(r,{style:{"margin-inline-start":"3px","font-size":"12px"}})]),_:1},8,["title"])):ge("v-if",!0)],14,ts)}var ua=De(es,[["render",ls]]),ns=Pe({name:"TableHeaderSorter",components:{CaretDownOutlined:Ya,CaretUpOutlined:Xa,HeaderCellTitle:ua},inheritAttrs:!1,props:{column:{type:Object,default:()=>({})},columnKey:{type:[Number,String]},sorterState:Object,sorterOrder:[String,Boolean],sortDirections:Array,nextSortOrder:String,wrapText:Boolean,showFilter:Boolean},setup(e){const t=Ve(),l=h(()=>{var a;return(a=e.sortDirections)==null?void 0:a.includes(yl)}),n=h(()=>{var a;return(a=e.sortDirections)==null?void 0:a.includes(ln)}),o=h(()=>t.props.prefixCls),u=h(()=>({[`${o.value}-column-sorter`]:!0,[`${o.value}-column-sorter-full`]:l.value&&n.value})),s=h(()=>({[`${o.value}-column-sorter-up`]:!0,active:e.sorterOrder===yl})),i=h(()=>({[`${o.value}-column-sorter-down`]:!0,active:e.sorterOrder===ln}));return{showUpNode:l,showDownNode:n,className:u,prefixCls:o,upClass:s,downClass:i,tableContext:t}}});function os(e,t,l,n,o,u){const s=ee("HeaderCellTitle"),i=ee("CaretUpOutlined"),a=ee("CaretDownOutlined");return T(),te("div",{class:_({[`${e.prefixCls}-header-cell-title`]:!0,[`${e.prefixCls}-header-cell-filter-title`]:e.showFilter})},[X(s,{column:e.column,"wrap-text":e.wrapText,"prefix-cls":e.prefixCls},null,8,["column","wrap-text","prefix-cls"]),e.column.sorter?(T(),te("span",{key:0,class:_(e.className)},[oe("span",{class:_(`${e.prefixCls}-column-sorter-inner`)},[e.showUpNode?(T(),de(i,{key:0,class:_(e.upClass)},null,8,["class"])):ge("v-if",!0),e.showDownNode?(T(),de(a,{key:1,class:_(e.downClass)},null,8,["class"])):ge("v-if",!0)],2)],2)):ge("v-if",!0)],2)}var as=De(ns,[["render",os]]);let ca=!1;try{const e=Object.defineProperty({},"passive",{get(){ca=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}var rs=ca;function so(e,t,l,n){if(e&&e.addEventListener){let o=n;o===void 0&&rs&&(t==="touchstart"||t==="touchmove"||t==="wheel")&&(o={passive:!1}),e.addEventListener(t,l,o)}return{remove:()=>{e&&e.removeEventListener&&e.removeEventListener(t,l)}}}const uo={mouse:{move:"mousemove",stop:"mouseup"},touch:{move:"touchmove",stop:"touchend"}};var is=Pe({name:"DragHandle",props:{prefixCls:String,minWidth:{type:Number,default:qn},maxWidth:{type:Number,default:1/0},column:{type:Object,default:void 0}},setup(e){let t=0,l={remove:()=>{}},n={remove:()=>{}};const o=Ve(),u=()=>{l.remove(),n.remove()};wl(()=>{u()});const s=h(()=>typeof e.minWidth!="number"||isNaN(e.minWidth)?qn:e.minWidth),i=h(()=>typeof e.maxWidth!="number"||isNaN(e.maxWidth)?1/0:e.maxWidth);let a,c=0;const r=F(!1),v=(C,I)=>{let k=0;C.touches?C.touches.length?k=C.touches[0].pageX:k=C.changedTouches[0].pageX:k=C.pageX;const N=t-k;let V=Math.max(c-N,s.value);V=Math.min(V,i.value),Ne.cancel(a),a=Ne(()=>{var j;(j=o.onResizeColumn)==null||j.call(o,V,e.column.originColumn,I)})},f=C=>{v(C,"move")},d=C=>{r.value=!1,v(C,"end"),u()},p=cn(),m=(C,I)=>{var k;r.value=!0,u(),c=p?.vnode.el.parentNode.offsetWidth,!(C instanceof MouseEvent&&C.which!==1)&&((k=o.onResizeColumn)==null||k.call(o,c,e.column.originColumn,"start"),C.stopPropagation&&C.stopPropagation(),t=C.touches?C.touches[0].pageX:C.pageX,l=so(document.documentElement,I.move,f),n=so(document.documentElement,I.stop,d))};return{handleDown:C=>{m(C,uo.mouse)},handleTouchDown:C=>{m(C,uo.touch)},dragging:r}}});function ss(e,t,l,n,o,u){return T(),te("div",{class:_(`${e.prefixCls}-resize-handle ${e.dragging?"dragging":""}`),onMousedown:t[0]||(t[0]=st((...s)=>e.handleDown&&e.handleDown(...s),["stop","prevent"])),"on:touchstartPassive":t[1]||(t[1]=st((...s)=>e.handleTouchDown&&e.handleTouchDown(...s),["stop"])),onClick:t[2]||(t[2]=st(()=>{},["stop","prevent"]))},[ut(e.$slots,"default",{},()=>[oe("div",{class:_(`${e.prefixCls}-resize-handle-line`)},null,2)])],34)}var us=De(is,[["render",ss]]);const cs=(e,{slots:t})=>{var l;return X("div",{onClick:n=>n.stopPropagation()},[(l=t.default)==null?void 0:l.call(t)])},_t=(e,{emit:t})=>{const{prefixCls:l,disabled:n,tabindex:o,id:u,style:s,class:i,checked:a,indeterminate:c,name:r,ariaLabel:v}=e;return X("label",{class:{[i||""]:!!i,[`${l}-checkbox`]:!0,[`${l}-checkbox-checked`]:a,[`${l}-checkbox-disabled`]:n,[`${l}-checkbox-indeterminate`]:c},style:s,tabindex:o,id:u},[X("input",{class:`${l}-checkbox-input`,checked:a,disabled:n,type:"checkbox",onClick:f=>{f.target.checked=a,t("change",f)},name:r,"aria-label":v===void 0?n?"This row is disabled selection":`Press Space to toggle row selection (${a?"checked":"unchecked"})`:v},null),X("span",{class:`${l}-checkbox-inner`},null)])};_t.displayName="Checkbox";_t.props=Do();_t.emits=["change"];const nl=(e,{emit:t})=>{const{prefixCls:l,disabled:n,tabindex:o,id:u,style:s,class:i,checked:a,indeterminate:c,name:r,ariaLabel:v}=e;return X("span",{class:{[i||""]:!!i,[`${l}-radio`]:!0,[`${l}-radio-checked`]:a,[`${l}-radio-disabled`]:n,[`${l}-radio-indeterminate`]:c},style:s,tabindex:o,id:u},[X("input",{class:`${l}-radio-input`,checked:a,disabled:n,type:"radio",onClick:f=>{f.target.checked=a,t("change",f)},name:r,"aria-label":v===void 0?n?"This row is disabled selection":`Press Space to toggle row selection (${a?"checked":"unchecked"})`:v},null),X("span",{class:`${l}-radio-inner`},null)])};nl.displayName="Radio";nl.props=Do();nl.emits=["change"];var ds=Pe({name:"FilterItems",inheritAttrs:!1,components:{Checkbox:_t,Empty:gl,Radio:nl,AMenu:vn,SubMenu:Ga,MenuItem:yo,RenderSlot:Ba},props:{filters:Array,prefixCls:String,dropdownPrefixCls:String,filteredKeys:Array,filterMultiple:Boolean,locale:{type:Object,default:void 0},root:Boolean,getPopupContainer:Function,onSelectKeys:Function,onOpenChange:Function,onMenuClick:Function,openKeys:Array},setup(e){const{prefixCls:t}=Ve(),l=h(()=>e.root?{multiple:e.filterMultiple,getPopupContainer:e.getPopupContainer,onSelect:e.onSelectKeys,onDeselect:e.onSelectKeys,selectedKeys:e.filteredKeys,onOpenChange:e.onOpenChange,onClick:e.onMenuClick,openKeys:e.openKeys,class:`${e.prefixCls}-dropdown-menu`}:{});return{emptyImage:gl.PRESENTED_IMAGE_SIMPLE,menuProps:l,rootPrefixCls:t,props:e}}});const vs={key:1,style:{margin:"16px 0"}};function fs(e,t,l,n,o,u){const s=ee("FilterItems",!0),i=ee("SubMenu"),a=ee("MenuItem"),c=ee("Empty");return T(),de(it(e.root?"AMenu":"RenderSlot"),Nt(dn(e.menuProps)),{default:Re(()=>[e.filters&&e.filters.length?(T(!0),te(Be,{key:0},xt(e.filters,(r,v)=>(T(),te(Be,{key:r.value===void 0?v:r.value},[r.children?(T(),de(i,{title:r.text,"popup-class-name":`${e.prefixCls}-dropdown-submenu`,key:r.value===void 0?v:String(r.value)},{default:Re(()=>[(T(!0),te(Be,null,xt(r.children,(f,d)=>(T(),de(s,We({ref_for:!0},e.props,{key:f.value===void 0?d:String(f.value),filters:[f],root:!1}),null,16,["filters"]))),128))]),_:2},1032,["title","popup-class-name"])):(T(),de(a,{key:r.value===void 0?v:String(r.value)},{default:Re(()=>{var f;return[(T(),de(it(e.filterMultiple?"Checkbox":"Radio"),{"prefix-cls":e.rootPrefixCls,checked:(f=e.filteredKeys)==null?void 0:f.includes(r.value===void 0?v:String(r.value))},null,8,["prefix-cls","checked"])),oe("span",null,wt(r.text),1)]}),_:2},1024))],64))),128)):(T(),te("div",vs,[X(c,{image:e.emptyImage,description:e.locale&&e.locale.filterEmptyText,"image-style":{height:24}},null,8,["image","description"])]))]),_:1},16)}var rn=De(ds,[["render",fs]]),hs=Pe({name:"FilterDropdown",components:{FilterFilled:qa,Dropdown:fn,FilterItems:rn,ProButton:fr,RenderVNode:un,FilterWrapper:cs},inheritAttrs:!1,props:{prefixCls:{type:String,default:""},column:{type:Object,required:!0}},setup(e){const t=Ve(),l=$t(),n=F([]),o=F([]),u=h(()=>t.props.dropdownPrefixCls||"ant-dropdown"),s=h(()=>e.column.columnKey),i=h(()=>t.filterStates.value),a=h(()=>i.value.find(({key:g})=>s.value===g));fe(a,()=>{var g;n.value=((g=a.value)==null?void 0:g.filteredKeys)||[]},{immediate:!0});const c=h(()=>{var g,E;return(E=(g=e.column)==null?void 0:g.getPopupContainer)!=null?E:t.props.getPopupContainer}),r=F(!1);ht(!("onFilterDropdownVisibleChange"in e.column),"@table","column.onFilterDropdownVisibleChange is deprecated. Please use column.onFilterDropdownOpenChange instead."),ht(!("filterDropdownVisible"in e.column),"@table","column.filterDropdownVisible is deprecated. Please use column.filterDropdownOpen instead.");const v=g=>{r.value=g;const{onFilterDropdownOpenChange:E,onFilterDropdownVisibleChange:L}=e.column||{},S=E||L;S?.(g)},f=Ae(()=>{const{filterDropdownVisible:g,filterDropdownOpen:E}=e.column||{},L=E??g;return typeof L=="boolean"?L:r.value});let d=0;const p=g=>{d=window.setTimeout(()=>{o.value=g})},m=()=>{window.clearTimeout(d)};wl(()=>{window.clearTimeout(d)});const y=g=>{const E=g&&g.length?g:null,L=a.value;if(!(E!==null||L&&L.filteredKeys)||bl(E,L?.filteredKeys))return null;const S={column:e.column,key:s.value,filteredKeys:E};t?.changeFilter(S)},b=({selectedKeys:g})=>{n.value=g||[]},C=()=>{v(!1),y(n.value)},I=()=>{n.value=[],v(!1),y([])},k=(g={closeDropdown:!0})=>{v(!g.closeDropdown),y(n.value)},N=h(()=>{const{filterDropdown:g,slots:E={},customFilterDropdown:L}=e.column;return g||E.filterDropdown&&l[E.filterDropdown]||L&&l.customFilterDropdown}),V=h(()=>({prefixCls:e.prefixCls,setSelectedKeys:g=>b({selectedKeys:g}),selectedKeys:n.value,confirm:k,clearFilters:I,filters:e.column.filters,column:e.column.originColumn,open:f.value})),j=h(()=>{var g,E,L,S,H;return((g=e.column)==null?void 0:g.filterIcon)||((L=(E=e.column)==null?void 0:E.slots)==null?void 0:L.filterIcon)&&l[(H=(S=e.column)==null?void 0:S.slots)==null?void 0:H.filterIcon]||l.customFilterIcon}),M=h(()=>{const{column:g}=e;return{filters:g.filters,prefixCls:e.prefixCls,filteredKeys:n.value,filterMultiple:g.filterMultiple===null||g.filterMultiple===void 0||g.filterMultiple,locale:t.locale.value,onSelectKeys:b,onOpenChange:p,onMenuClick:m,openKeys:o.value}}),J=Ae(()=>{var g;return!!((g=n.value)!=null&&g.length)});return{getPopupContainer:c,triggerOpen:v,mergedOpen:f,onReset:I,onConfirm:C,onDropdownOpenChange:g=>{v(g),g||N.value||C()},doFilter:k,filterItemsProps:M,onSelectKeys:b,filteredKeys:n,dropdownPrefixCls:u,filtered:J,locale:t.locale,customFilterDropdown:N,customFilterIcon:j,custocustomFilterDropdownProps:V}}});function ps(e,t,l,n,o,u){const s=ee("RenderVNode"),i=ee("FilterItems"),a=ee("ProButton"),c=ee("FilterWrapper"),r=ee("FilterFilled"),v=ee("Dropdown");return T(),de(v,{trigger:["click"],open:e.mergedOpen,"get-popup-container":e.getPopupContainer,placement:"bottomRight","overlay-class-name":`${e.prefixCls}-dropdown-root`,onOpenChange:e.onDropdownOpenChange,onClick:t[0]||(t[0]=st(()=>{},["stop"]))},{overlay:Re(()=>[X(c,{class:_(`${e.prefixCls}-dropdown`)},{default:Re(()=>[e.customFilterDropdown?(T(),de(s,{key:0,vnode:e.customFilterDropdown(e.custocustomFilterDropdownProps)},null,8,["vnode"])):(T(),te(Be,{key:1},[X(i,We(e.filterItemsProps,{root:"","dropdown-prefix-cls":e.dropdownPrefixCls,"get-popup-container":e.getPopupContainer,"prefix-cls":e.prefixCls}),null,16,["dropdown-prefix-cls","get-popup-container","prefix-cls"]),oe("div",{class:_(`${e.prefixCls}-dropdown-btns`)},[X(a,{type:"link",size:"small",disabled:e.filteredKeys.length===0,onClick:e.onReset},{default:Re(()=>[At(wt(e.locale.filterReset),1)]),_:1},8,["disabled","onClick"]),X(a,{type:"primary",size:"small",onClick:e.onConfirm},{default:Re(()=>[At(wt(e.locale.filterConfirm),1)]),_:1},8,["onClick"])],2)],64))]),_:1},8,["class"])]),default:Re(()=>[oe("span",{class:_({[`${e.prefixCls}-trigger`]:!0,active:e.filtered})},[e.customFilterIcon?(T(),de(s,{key:0,vnode:e.customFilterIcon({column:e.column.originColumn,filtered:e.filtered})},null,8,["vnode"])):(T(),de(r,{key:1}))],2)]),_:1},8,["open","get-popup-container","overlay-class-name","onOpenChange"])}var ms=De(hs,[["render",ps]]),gs=Pe({name:"TableHeaderCell",components:{Sorter:as,Tooltip:Ht,DragHandle:us,FilterDropdown:ms,MenuOutlined:wo,RenderVNode:ll,FilterItems:rn},props:{component:{type:String,default:"div"},prefixCls:String,column:{type:Object,default:()=>({})},wrapText:{type:Boolean,default:!1},level:{type:Number,default:1},additionalProps:Object},setup(e){const t=Ve(),l=oa(),n=$t(),{showPopupContent:o}=gn(),u=h(()=>t.draggingColumnKey.value===e.column.columnKey),s=Ze(el,!1),i=F();e.level===1&&sa({column:h(()=>e.column),columnKey:h(()=>e.column.columnKey),disabled:h(()=>!1),domRef:i});const a=h(()=>e.column.showSorterTooltip===void 0?t.props.showSorterTooltip:e.column.showSorterTooltip),c=h(()=>typeof a.value=="boolean"?{}:a.value),r=h(()=>{const S=e.column,H=S.columnKey,z=t.sorterStates.value.find(({key:Y})=>Y===H),q=z?z.sortOrder:null,x=S.sortDirections||["asc","desc"],K=q?x[x.indexOf(q)+1]:x[0],{cancelSort:R,triggerAsc:B,triggerDesc:Q}=t.locale.value||{};let A=R;return K===ln?A=Q:K===yl&&(A=B),{columnKey:H,sorterState:z,sorterOrder:q,sortDirections:x,nextSortOrder:K,tip:A,showFilter:!!(S.filters||S.filterDropdown||S.slots&&S.slots.filterDropdown||S.customFilterDropdown)&&S.showFilter!==!1,wrapText:e.column.wrapText===void 0?e.wrapText:e.column.wrapText}}),v=h(()=>r.value.showFilter||!!n.menuPopup),f=h(()=>({[`${e.prefixCls}-has-icon-column`]:v.value,[`${e.prefixCls}-cell-box`]:!0})),d=h(()=>{const{prefixCls:S}=e;return{[`${S}-column-title`]:!0,[`${S}-cell-box`]:!v.value}}),p=h(()=>{const{columnIndex:S=t.columnKeyIndexMap.value[e.column.columnKey],colSpan:H=1}=e.column;return t.getColumnPosition(S,H)}),m=h(()=>(e.column.customHeaderCell||t.props.customHeaderCell||(()=>({})))(e.column)),y=h(()=>{const{columnIndex:S,colSpan:H=1}=e.column;return Object.assign({},m.value,{colspan:H,colstart:S,colend:H+S-1,...e.additionalProps})}),b=h(()=>{if(s)return ra(y.value.colstart,y.value.colend,t.allColumns.value,t.stickyOffsets.value,t.props.direction)}),C=h(()=>{const{prefixCls:S,column:H}=e;let z={};if(b.value&&St){const q=`${S}-cell`,{fixLeft:x,fixRight:K,firstFixLeft:R,lastFixLeft:B,firstFixRight:Q,lastFixRight:A}=b.value;z={[`${q}-fix-left`]:typeof x=="number",[`${q}-fix-left-first`]:R,[`${q}-fix-left-last`]:B,[`${q}-fix-right`]:typeof K=="number",[`${q}-fix-right-first`]:Q,[`${q}-fix-right-last`]:A}}return Object.assign({[`${S}-cell`]:!0,[`${S}-header-cell`]:!0,[H.class||""]:!0,[H.className||""]:!0,[`${S}-column-sort`]:r.value.sorterOrder,[`${S}-column-has-sorters`]:H.sorter,[`${S}-drag-column-dragging`]:u.value},z)}),I=h(()=>{const S={};if(b.value&&St){const{fixLeft:H,fixRight:z}=b.value;typeof H=="number"&&(S.position="sticky",S.left=`${H}px`),typeof z=="number"&&(S.position="sticky",S.right=`${z}px`)}return s?S:{width:`${p.value.width}px`,height:`${e.column.height}px`}}),k=F([]),N=h(()=>t.filterStates.value),V=h(()=>e.column.columnKey),j=h(()=>N.value.find(({key:S})=>V.value===S)),M=S=>{const H=S?.length?S:null;if(!(H!==null||j.value&&j.value.filteredKeys)||bl(H,j.value==null?void 0:j.value.filteredKeys))return null;const z={column:e.column,key:V.value,filteredKeys:H};t?.changeFilter(z)};fe(j,()=>{var S;k.value=((S=j.value)==null?void 0:S.filteredKeys)||[]},{immediate:!0});const J=()=>{k.value=[],M([])},g=()=>{M(k.value)},E=Ae(()=>{var S;return!!((S=k.value)!=null&&S.length)}),L=h(()=>({prefixCls:e.prefixCls,setSelectedKeys:S=>{k.value=S||[]},selectedKeysRef:k,confirm:g,clearFilters:J,filters:e.column.filters}));return{tableContext:t,sorterInfo:r,handleSortClick:(S,H)=>{if(!S.sorter)return;const z={column:S,key:S.columnKey,sortOrder:H,multiplePriority:nn(S)};t.changeSorter(z)},cellClass:C,widths:p,colProps:y,RenderSlot:tl,titleClass:d,domRef:i,autoHeight:s,componentStyle:I,headerContext:l,tableSlotsContext:n,cellBoxClass:f,showPopupContent:o,FilterItems:rn,h:Ft,hasIcon:v,menuFilterProps:L,filtered:E,tooltipProps:c,showSorterTooltip:a}}});const ys=["data-tip"];function ws(e,t,l,n,o,u){const s=ee("Sorter"),i=ee("Tooltip"),a=ee("FilterDropdown"),c=ee("RenderVNode"),r=ee("MenuOutlined"),v=ee("DragHandle");return e.colProps.colspan?(T(),de(it(e.component),We({key:0,ref:"domRef",tabindex:"-1",role:"cell",class:e.cellClass,style:e.componentStyle},e.colProps,{onClick:t[1]||(t[1]=f=>e.handleSortClick(e.column,e.sorterInfo.nextSortOrder))}),{default:Re(()=>[(T(),de(it(e.hasIcon?"div":e.RenderSlot),{class:_(e.cellBoxClass)},{default:Re(()=>[oe("span",{class:_(e.titleClass)},[e.column.sorter&&e.showSorterTooltip?(T(),de(i,Nt(We({key:0},e.tooltipProps)),{title:Re(()=>[At(wt(e.sorterInfo.tip),1)]),default:Re(()=>[oe("div",{class:_(`${e.prefixCls}-column-sorters`),"data-tip":e.sorterInfo.tip},[X(s,We({column:e.column},e.sorterInfo),null,16,["column"])],10,ys)]),_:1},16)):(T(),de(s,We({key:1,column:e.column},e.sorterInfo),null,16,["column"]))],2),e.sorterInfo.showFilter?(T(),de(a,{key:0,"prefix-cls":`${e.prefixCls}-filter`,column:e.column},null,8,["prefix-cls","column"])):ge("v-if",!0),e.column.showMenu&&e.tableSlotsContext.menuPopup?(T(),te("span",{key:1,class:_([`${e.prefixCls}-menu-popup-trigger`,e.column.showMenu==="hover"&&`${e.prefixCls}-menu-popup-trigger-hover`]),onClick:t[0]||(t[0]=st(f=>e.showPopupContent(e.tableSlotsContext.menuPopup,f,{column:e.column.originColumn,filter:e.menuFilterProps}),["stop"]))},[e.tableSlotsContext.menuIcon?(T(),de(c,{key:0,vnode:e.tableSlotsContext.menuIcon({column:e.column.originColumn,filtered:e.filtered})},null,8,["vnode"])):(T(),de(r,{key:1}))],2)):ge("v-if",!0)]),_:1},8,["class"])),e.column.resizable&&!(e.column.children&&e.column.children.length)?(T(),de(v,{key:0,"prefix-cls":e.prefixCls,width:e.widths.width,"min-width":e.widths.minWidth,"max-width":e.widths.maxWidth,column:e.column},null,8,["prefix-cls","width","min-width","max-width","column"])):ge("v-if",!0)]),_:1},16,["class","style"])):ge("v-if",!0)}var da=De(gs,[["render",ws]]),Cs=Pe({name:"HeaderExtraCell",components:{Checkbox:_t,Dropdown:fn,AMenu:vn,MenuItem:yo,DownOutlined:Ja},props:{component:{type:String,default:"div"},prefixCls:String,column:{type:Object,default:()=>({})},additionalProps:Object},setup(e){const t=Ze(el,!1),l=Ve(),{pageDataEnableRowKeys:n,getRecordByKey:o,mergedRowSelection:u}=l,{checkedCurrentAll:s,checkedCurrentSome:i,allDisabled:a,allDisabledAndChecked:c,allDisabledSomeChecked:r,mergedSelections:v,setSelectedKeys:f}=l.selection,d=h(()=>l.mergedRowSelection.value.type),p=h(()=>l.mergedRowSelection.value.hideSelectAll),m=h(()=>l.selection.derivedSelectedKeySet.value),y=h(()=>l.sorterStates.value.map(({column:k,sortOrder:N})=>({column:k,order:N}))),b=h(()=>{var k,N;return Ft(Be,[typeof e.column.title=="function"?e.column.title({sortColumns:y.value,sortColumn:(k=y.value[0])==null?void 0:k.column,sortOrder:(N=y.value[0])==null?void 0:N.order}):e.column.title])}),C=h(()=>{if(t){const k=e.additionalProps;return ra(k.colstart,k.colend,l.allColumns.value,l.stickyOffsets.value,l.props.direction)}});return{cellClass:h(()=>{const{prefixCls:k}=e;let N={};if(C.value&&St){const V=`${k}-cell`,{fixLeft:j,fixRight:M,firstFixLeft:J,lastFixLeft:g,firstFixRight:E,lastFixRight:L}=C.value;N={[`${V}-fix-left`]:typeof j=="number",[`${V}-fix-left-first`]:J,[`${V}-fix-left-last`]:g,[`${V}-fix-right`]:typeof M=="number",[`${V}-fix-right-first`]:E,[`${V}-fix-right-last`]:L}}return Object.assign({[`${k}-cell`]:!0,[`${k}-header-cell`]:!0,[`${k}-header-extra-cell`]:!0},N)}),componentStyle:h(()=>{const k={};if(C.value&&St){const{fixLeft:N,fixRight:V}=C.value;typeof N=="number"&&(k.position="sticky",k.left=`${N}px`),typeof V=="number"&&(k.position="sticky",k.right=`${V}px`)}return t?k:{height:`${e.column.height}px`}}),getPopupContainer:h(()=>l.getPopupContainer.value),rowSelectionType:d,hideSelectAll:p,onSelectAllChange:()=>{var k,N;const V=[],j=new Set(m.value);s.value?n.value.forEach(J=>{j.delete(J),V.push(J)}):n.value.forEach(J=>{j.has(J)||(j.add(J),V.push(J))});const M=Array.from(j);(N=(k=u.value).onSelectAll)==null||N.call(k,!s,M.map(J=>o(J)),V.map(J=>o(J))),f(M)},checked:Ae(()=>a.value?c.value:!!l.flattenData.value.length&&s.value),indeterminate:Ae(()=>a.value?!c.value&&r.value:!s.value&&i.value),disabled:Ae(()=>l.flattenData.value.length===0||a.value),mergedSelections:v,onMenuClick:k=>{k?.(n.value)},autoHeight:t,title:b,h:Ft,Fragment:Be}}});function bs(e,t,l,n,o,u){const s=ee("Checkbox"),i=ee("DownOutlined"),a=ee("MenuItem"),c=ee("AMenu"),r=ee("Dropdown");return T(),de(it(e.component),We({tabindex:"-1",role:"cell",class:e.cellClass,style:e.componentStyle},e.additionalProps,{onClick:t[0]||(t[0]=st(()=>{},["stop"]))}),{default:Re(()=>[e.column.type!=="checkbox"||e.rowSelectionType==="radio"||e.hideSelectAll?(T(),te(Be,{key:0},[],64)):(T(),te("div",{key:1,class:_(`${e.prefixCls}-selection-wrap`)},[oe("div",{class:_(`${e.prefixCls}-selection`)},[e.column.title?(T(),de(it(e.title),{key:0})):(T(),te(Be,{key:1},[X(s,{"prefix-cls":e.prefixCls,indeterminate:e.indeterminate,disabled:e.disabled,checked:e.checked,"aria-label":e.checked?"Press Space to toggle all row selection (checked)":"Press Space to toggle all row selection (unchecked)",onChange:e.onSelectAllChange},null,8,["prefix-cls","indeterminate","disabled","checked","aria-label","onChange"]),e.mergedSelections?(T(),te("div",{key:0,class:_(`${e.prefixCls}-selection-extra`)},[X(r,{"get-popup-container":e.getPopupContainer},{overlay:Re(()=>[X(c,{"get-popup-container":e.getPopupContainer},{default:Re(()=>[(T(!0),te(Be,null,xt(e.mergedSelections,(v,f)=>(T(),te(Be,{key:v&&v.key||f},[v?(T(),de(a,{key:v.key||f,onClick:d=>e.onMenuClick(v.onSelect)},{default:Re(()=>[(T(),de(it(e.h(e.Fragment,[typeof v.text=="function"?v.text(v):v.text]))))]),_:2},1032,["onClick"])):ge("v-if",!0)],64))),128))]),_:1},8,["get-popup-container"])]),default:Re(()=>[oe("span",null,[X(i,{class:_(`${e.prefixCls}-selection-extra-dropdown-icon`)},null,8,["class"])])]),_:1},8,["get-popup-container"])],2)):ge("v-if",!0)],64))],2)],2))]),_:1},16,["class","style"])}var va=De(Cs,[["render",bs]]),Ss=Pe({name:"HeaderRow",components:{HeaderExtraCell:va,HeaderCell:da},props:{prefixCls:String,cells:{type:Array,default:()=>[]},wrapText:Boolean,level:Number}});function xs(e,t,l,n,o,u){const s=ee("HeaderExtraCell"),i=ee("HeaderCell");return T(),te("tr",null,[(T(!0),te(Be,null,xt(e.cells,a=>{var c;return T(),te(Be,{key:a.key},[(c=a?.column)!=null&&c.__Internal__Column__?(T(),de(s,{key:0,component:"th",column:a.column,"prefix-cls":e.prefixCls,"additional-props":{colstart:a.colStart,colend:a.colEnd,rowspan:a.rowSpan,colspan:a.colSpan}},null,8,["column","prefix-cls","additional-props"])):(T(),de(i,{key:1,component:"th",column:a.column,"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,level:e.level,"additional-props":{colstart:a.colStart,colend:a.colEnd,rowspan:a.rowSpan,colspan:a.colSpan}},null,8,["column","prefix-cls","wrap-text","level","additional-props"]))],64)}),128))])}var $s=De(Ss,[["render",xs]]),Rs=Pe({name:"TableHeader",components:{XScroll:$n,ColGroup:Gi,HeaderRow:$s},inheritAttrs:!1,directives:{resize:Wt},props:{prefixCls:String,wrapText:{type:Boolean,default:!1},sticky:{type:[Boolean,Object],default:!1}},emits:["scrollLeft","resizeheight"],setup(e,{emit:t}){const l=F(),n=F(),o=Ve(),u=F(0),s=F();lt(wn,n),lt(el,!0);const i=h(()=>o.props.showHeaderScrollbar),{addHScrollDom:a,removeHScrollDom:c}=$l();mt(()=>{a(n.value)}),ct(()=>{c(n.value)}),na({dragColumnPlaceholderRef:s,headerRef:l,maxHeaderHeight:u});const r=h(()=>({[`${e.prefixCls}-header`]:!0,[`${e.prefixCls}-auto-header-height`]:!0,[`${e.prefixCls}-sticky-header`]:e.sticky,[`${e.prefixCls}-show-header-scrollbar`]:o.props.showHeaderScrollbar})),v=h(()=>({[`${e.prefixCls}-center-viewport`]:!0})),f=h(()=>({height:`calc(100% + ${o.showHorizontalScrollbar.value?o.scrollBarSize.value||15:0}px)`})),d=h(()=>{const b={height:`${u.value}px`};return e.sticky&&(b.top=`${(typeof e.sticky=="object"?e.sticky.offsetHeader:0)||0}px`),b}),p=h(()=>{const b=`${o.showVerticalScrollbar.value?o.scrollBarSize.value:0}px`;return{display:b==="0px"?"none":"block",width:b,minWidth:b,maxWidth:b,position:"sticky",right:`-${b}`}}),m=h(()=>o.rightWidth.value?void 0:{display:"none"}),y=h(()=>o.leftWidth.value?void 0:{position:"absolute",left:"0px",top:"0px",bottom:"0px"});return{headerClass:r,viewportClass:v,columnRows:Ae(()=>o.columnRowsForAutoHeaderHeight.value),viewportStyle:f,scrollbarStyle:p,headerStyle:d,headerRef:l,dragColumnPlaceholderRef:s,viewportRef:n,maxHeaderHeight:u,handleResize:b=>{u.value=b.detail.height},shadowRightStyle:m,shadowLeftStyle:y,showHeaderScrollbar:i,handleHeightResize:b=>{t("resizeheight",b)}}}});function ks(e,t,l,n,o,u){const s=ee("ColGroup"),i=ee("HeaderRow"),a=ee("XScroll"),c=Lt("resize");return T(),te(Be,null,[Je((T(),te("div",{key:"header",class:_(e.headerClass),style:$e(e.headerStyle),onResizeheight:t[1]||(t[1]=(...r)=>e.handleHeightResize&&e.handleHeightResize(...r))},[oe("div",{ref:"viewportRef",class:_(e.viewportClass),style:$e(e.viewportStyle)},[oe("div",{ref:"headerRef",class:_(`${e.prefixCls}-header-container`)},[Je((T(),te("table",{key:"header",style:{"table-layout":"fixed",width:"100%","border-collapse":"separate","border-spacing":"0",position:"absolute"},onResizeheight:t[0]||(t[0]=(...r)=>e.handleResize&&e.handleResize(...r))},[X(s),oe("thead",{class:_(`${e.prefixCls}-thead`)},[(T(!0),te(Be,null,xt(e.columnRows,(r,v)=>(T(),de(i,{key:r.rowIndex,level:v+1,"prefix-cls":e.prefixCls,cells:r,"wrap-text":e.wrapText},null,8,["level","prefix-cls","cells","wrap-text"]))),128))],2)],32)),[[c,void 0,"height"]]),oe("span",{ref:"dragColumnPlaceholderRef",class:_(`${e.prefixCls}-drag-column-placeholder`)},null,2)],2)],6),oe("div",{class:_(`${e.prefixCls}-header-scrollbar`),style:$e(e.scrollbarStyle)},null,6),e.shadowLeftStyle?(T(),te("div",{key:0,class:_(`${e.prefixCls}-cell-shadow-left`),style:$e(e.shadowLeftStyle)},null,6)):ge("v-if",!0),e.shadowRightStyle?(T(),te("div",{key:1,class:_(`${e.prefixCls}-cell-shadow-right`),style:$e(e.shadowRightStyle)},null,6)):ge("v-if",!0),e.showHeaderScrollbar?(T(),de(a,{key:2,"only-auto-show":""})):ge("v-if",!0)],38)),[[c,void 0,"height"]]),e.showHeaderScrollbar?(T(),de(a,{key:0,"not-show-auto":""})):ge("v-if",!0)],64)}var Ks=De(Rs,[["render",ks]]),Ps=Pe({name:"TableHeaderCellGroup",components:{HeaderCellTitle:ua},props:{prefixCls:String,column:{type:Object,default:()=>({})},wrapText:{type:Boolean,default:!1}},setup(e){const t=F();return sa({column:h(()=>e.column),columnKey:h(()=>e.column.columnKey),disabled:h(()=>!1),domRef:t}),{domRef:t}}});function Is(e,t,l,n,o,u){const s=ee("HeaderCellTitle");return T(),te("div",{ref:"domRef",class:_({[`${e.prefixCls}-header-cell-title`]:!0,[`${e.prefixCls}-cell-group-title`]:!0,[`${e.prefixCls}-cell-box`]:!0}),style:$e(`height: ${e.column.height}px`)},[X(s,{column:e.column,"wrap-text":e.column.wrapText===void 0?e.wrapText:e.column.wrapText,"prefix-cls":e.prefixCls},null,8,["column","wrap-text","prefix-cls"])],6)}var Ts=De(Ps,[["render",Is]]),Es=Pe({name:"TableHeaderRows",components:{HeaderGroupCell:Ts,HeaderCell:da,HeaderExtraCell:va},props:{type:{type:String},leftGap:{type:Number,required:!0},isRoot:Boolean,prefixCls:String,columns:{type:Array,default:()=>[]},wrapText:{type:Boolean,default:!1},level:{type:Number,default:1}},setup(e){const t=Ve(),l=h(()=>t.draggingColumnKey.value);return{cellClass:h(()=>({[`${e.prefixCls}-cell`]:!0,[`${e.prefixCls}-position-absolute`]:!0})),cellStyles:F({}),getLastColumn:n=>{let o=n;for(;o&&o.children;)o=o.children[o.children.length-1];return o},cellProps:n=>(n.customHeaderCell||t.props.customHeaderCell||(()=>({})))(n),draggingColumnKey:l}}});const Hs=["data-left","data-left-gap"];function Os(e,t,l,n,o,u){const s=ee("HeaderExtraCell"),i=ee("HeaderGroupCell"),a=ee("TableHeaderRows"),c=ee("HeaderCell");return T(!0),te(Be,null,xt(e.columns,r=>(T(),te(Be,{key:r.columnKey},[r.__Internal__Column__?(T(),de(s,{key:0,column:r,"prefix-cls":e.prefixCls,style:$e(`width: ${r.finallyWidth}px;left: ${(r.left||0)-e.leftGap}px`)},null,8,["column","prefix-cls","style"])):r.children?(T(),te("div",We({key:1,tabindex:"-1",role:"group-cell",class:{[`${e.prefixCls}-cell`]:!0,[`${e.prefixCls}-header-cell`]:!0,[`${e.prefixCls}-cell-group`]:!0,[r.class||""]:!0,[r.className||""]:!0,[`${e.prefixCls}--drag-column-dragging`]:e.draggingColumnKey===r.columnKey},"data-left":r.left,"data-left-gap":e.leftGap,style:{width:`${r.finallyWidth}px`,left:`${r.left-e.leftGap}px`}},{ref_for:!0},e.cellProps),[X(i,{"prefix-cls":e.prefixCls,column:r,"wrap-text":e.wrapText},null,8,["prefix-cls","column","wrap-text"]),oe("div",{class:_(`${e.prefixCls}-cell-group-children`)},[X(a,{"prefix-cls":e.prefixCls,columns:r.children,"wrap-text":e.wrapText,type:e.type,"left-gap":r.left,level:e.level+1},null,8,["prefix-cls","columns","wrap-text","type","left-gap","level"])],2)],16,Hs)):(T(),de(c,{key:2,style:$e(`left: ${r.left-e.leftGap}px`),column:r,"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,level:e.level},null,8,["style","column","prefix-cls","wrap-text","level"]))],64))),128)}var Bs=De(Es,[["render",Os]]),Ds=Pe({name:"TableHeaderWrap",components:{HeaderRows:Bs},directives:{resize:Wt},inheritAttrs:!1,props:{prefixCls:String,wrapText:{type:Boolean,default:!1},type:String},setup(e){const t=F(),l=F(),n=F(),o=Ve(),u=h(()=>o.leftHeaderColumns.value),s=h(()=>o.centerHeaderColumns.value),i=h(()=>o.visibleCenterHeaderColumns.value),a=h(()=>o.rightHeaderColumns.value),c=h(()=>o.maxHeaderHeight.value);na({dragColumnPlaceholderRef:t,headerRef:l,maxHeaderHeight:c});const r=h(()=>({[`${e.prefixCls}-fix-left`]:!0,[`${e.prefixCls}-row-wrapper`]:!0,[`${e.prefixCls}-no-columns`]:!u.value.length,[`${e.prefixCls}-last-columns`]:u.value.length&&a.value.length===0&&s.value.length===0})),v=h(()=>({[`${e.prefixCls}-fix-right`]:!0,[`${e.prefixCls}-row-wrapper`]:!0,[`${e.prefixCls}-no-columns`]:!a.value.length,[`${e.prefixCls}-last-columns`]:a.value.length})),f=h(()=>({[`${e.prefixCls}-center`]:!0,[`${e.prefixCls}-row-wrapper`]:!0,[`${e.prefixCls}-no-columns`]:!s.value.length,[`${e.prefixCls}-last-columns`]:s.value.length&&a.value.length===0})),d=h(()=>e.type==="left"?r.value:e.type==="center"?f.value:e.type==="right"?v.value:""),p=h(()=>({[`${e.prefixCls}-center-viewport`]:!0})),m=h(()=>({[`${e.prefixCls}-center-container`]:!0})),y=h(()=>({width:`${o.centerWidth.value}px`})),b=h(()=>({})),C=h(()=>{const V=`${o.leftWidth.value}px`;return{width:V,minWidth:V,maxWidth:V}}),I=h(()=>{const V=`${o.rightWidth.value}px`;return{width:V,minWidth:V,maxWidth:V}}),k=h(()=>e.type==="left"?C.value:e.type==="center"?b.value:e.type==="right"?I.value:{}),N=h(()=>o.rightWidth.value?void 0:{display:"none"});return{fixLeftClass:r,fixRightClass:v,centerClass:f,containerClass:m,viewportClass:p,rightStyle:I,centerStyle:b,leftStyle:C,containerStyle:y,centerColumns:s,headerRef:l,tableContext:o,centerContainerRef:n,leftGap:V=>V==="left"?0:V==="center"?o.leftWidth.value:o.leftWidth.value+o.centerWidth.value,visibleCenterHeaderColumns:i,leftColumns:u,rightColumns:a,dragColumnPlaceholderRef:t,shadowRightStyle:N,rootClass:d,rootStyle:k}}});function Ms(e,t,l,n,o,u){const s=ee("HeaderRows");return e.type==="center"&&e.centerColumns.length||e.type!=="center"?(T(),te("div",{key:0,ref:"headerRef",class:_(e.rootClass),style:$e(e.rootStyle)},[e.type==="left"?(T(),te(Be,{key:0},[X(s,{"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"left",columns:e.leftColumns,"left-gap":e.leftGap("left")},null,8,["prefix-cls","wrap-text","columns","left-gap"]),oe("div",{class:_(`${e.prefixCls}-cell-shadow-left`)},null,2),Je(oe("span",{ref:"dragColumnPlaceholderRef",class:_(`${e.prefixCls}-drag-column-placeholder`)},null,2),[[fl,e.tableContext.leftWidth.value]])],64)):e.type==="center"?(T(),te(Be,{key:1},[oe("div",{ref:"centerContainerRef",class:_(e.containerClass),style:$e(e.containerStyle)},[X(s,{"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"center",columns:e.visibleCenterHeaderColumns,"left-gap":e.leftGap("center")},null,8,["prefix-cls","wrap-text","columns","left-gap"])],6),Je(oe("span",{ref:"dragColumnPlaceholderRef",class:_(`${e.prefixCls}-drag-column-placeholder`)},null,2),[[fl,e.tableContext.centerWidth.value]])],64)):(T(),te(Be,{key:2},[oe("div",{class:_(`${e.prefixCls}-cell-shadow-right`),style:$e(e.shadowRightStyle)},null,6),X(s,{"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"right",columns:e.rightColumns,"left-gap":e.leftGap("right")},null,8,["prefix-cls","wrap-text","columns","left-gap"]),Je(oe("span",{ref:"dragColumnPlaceholderRef",class:_(`${e.prefixCls}-drag-column-placeholder`)},null,2),[[fl,e.tableContext.rightWidth.value]])],64))],6)):ge("v-if",!0)}var Fs=De(Ds,[["render",Ms]]),As=Pe({name:"TableHeader",components:{XScroll:$n,HeaderRowsWrap:Fs},inheritAttrs:!1,directives:{resize:Wt},props:{prefixCls:String,wrapText:{type:Boolean,default:!1},sticky:{type:[Boolean,Object],default:!1}},emits:["scrollLeft","resizeheight"],setup(e,{emit:t}){const l=F(),n=F(),o=Ve();lt(wn,n);const u=h(()=>o.maxHeaderHeight.value),{addHScrollDom:s,removeHScrollDom:i}=$l();mt(()=>{s(n.value)}),ct(()=>{i(n.value)});const a=h(()=>o.props.showHeaderScrollbar),c=h(()=>({[`${e.prefixCls}-header`]:!0,[`${e.prefixCls}-sticky-header`]:e.sticky,[`${e.prefixCls}-show-header-scrollbar`]:a.value})),r=h(()=>({[`${e.prefixCls}-center-viewport`]:!0})),v=h(()=>({height:`calc(100% + ${o.showHorizontalScrollbar.value?o.scrollBarSize.value||15:0}px)`})),f=h(()=>{const d={height:`${u.value}px`};return e.sticky&&(d.top=`${(typeof e.sticky=="object"?e.sticky.offsetHeader:0)||0}px`),d});return{headerClass:c,viewportClass:r,viewportStyle:v,scrollbarStyle:h(()=>{const d=`${o.showVerticalScrollbar.value?o.scrollBarSize.value:0}px`;return{display:d==="0px"?"none":"block",width:d,minWidth:d,maxWidth:d,position:"sticky",right:`-${d}`}}),headerStyle:f,headerRef:l,viewportRef:n,maxHeaderHeight:u,showHeaderScrollbar:a,handleHeightResize:d=>{t("resizeheight",d)}}}});function zs(e,t,l,n,o,u){const s=ee("HeaderRowsWrap"),i=ee("XScroll"),a=Lt("resize");return T(),te(Be,null,[Je((T(),te("div",{key:"header",role:"presentation",class:_(e.headerClass),style:$e(e.headerStyle),onResizeheight:t[0]||(t[0]=(...c)=>e.handleHeightResize&&e.handleHeightResize(...c))},[oe("div",{ref:"viewportRef",class:_(e.viewportClass),style:$e(e.viewportStyle)},[oe("div",{class:_(`${e.prefixCls}-header-container`)},[X(s,{key:"left","prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"left"},null,8,["prefix-cls","wrap-text"]),X(s,{key:"center","prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"center"},null,8,["prefix-cls","wrap-text"]),X(s,{key:"right","prefix-cls":e.prefixCls,"wrap-text":e.wrapText,type:"right"},null,8,["prefix-cls","wrap-text"])],2)],6),oe("div",{class:_(`${e.prefixCls}-header-scrollbar`),style:$e(e.scrollbarStyle)},null,6),e.showHeaderScrollbar?(T(),de(i,{key:0,"only-auto-show":""})):ge("v-if",!0)],38)),[[a,void 0,"height"]]),e.showHeaderScrollbar?(T(),de(i,{key:0,"not-show-auto":""})):ge("v-if",!0)],64)}var Ls=De(As,[["render",zs]]);const fa=Symbol("BodyContextProps"),Ns=e=>{lt(fa,e)},ol=()=>Ze(fa,{});function Ws({hoverColumnKey:e}){const t=F(!1);let l;return fe(e,n=>{clearTimeout(l),clearTimeout(void 0),n!==void 0?l=setTimeout(()=>{t.value=!0},300):t.value=!1}),{open:t}}const ha=Symbol("BodyRowsContextProps"),_s=e=>{lt(ha,e)},Vs=()=>Ze(ha,{}),pa=Symbol("BodyRowContextProps"),js=e=>{lt(pa,e)},Us=()=>Ze(pa,{}),Xs=()=>{const{isCellInAnyRange:e,cellRanges:t,extendLatestRangeToCell:l,setRangeToCell:n,enableRangeSelection:o,getCellRangeCount:u,intersectLastRange:s,level:i}=yn();return{onCellMousedown:(a,c)=>{const{ctrlKey:r,metaKey:v,shiftKey:f}=a;if(!(!e(c)||a.button!==2))return;const d=!t.value.length;f&&d&&a.preventDefault(),f?l(c):n(c,r||v),a.cellInfo={cellPosition:c,cellTarget:a.currentTarget,level:i}},onCellMousemove:(a,c)=>{a.cellInfo={cellPosition:c,cellTarget:a.currentTarget,level:i}},onCellClick:(a,c)=>{const r=a.ctrlKey||a.metaKey;o.value&&r&&u(c)>1&&s(!0)}}},Ys=()=>{const{enableRangeSelection:e,navigationService:t,extendLatestRangeInDirection:l,focusCell:n,ensureCellVisible:o}=yn(),u=(r,v)=>{v.isEditing||(r.shiftKey&&e.value?i(r):t.navigateToNextCell(r,v.cellPosition),r.preventDefault())},{props:s}=Ve(),i=r=>{const v=l(r);v&&o(v)},a=(r,v)=>{v.isEditing&&n(v.cellPosition)},c=(r,v)=>{t.onTabKeyDown(v.cellPosition,r)};return{onCellKeydown:(r,v)=>{if(s.onCellKeydown&&s.onCellKeydown(r,{isEditing:v.isEditing,cellPosition:{column:v.cellPosition.column.originColumn,rowIndex:v.cellPosition.rowIndex}})===!1)return;const{keyCode:f}=r,d=r.target;switch(f){case Ge.RIGHT:case Ge.LEFT:d?.tagName==="INPUT"||d?.tagName==="TEXTAREA"||d?.isContentEditable||u(r,v);break;case Ge.DOWN:case Ge.UP:case Ge.ENTER:(p=>p.tagName==="TEXTAREA"||p.isContentEditable)(r.target)||u(r,v);break;case Ge.ESC:a(r,v);break;case Ge.TAB:c(r,v)}}}},Vl={},Gs={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},qs=e=>{if(typeof Vl[e]=="boolean")return Vl[e];const t=document.createElement(Gs[e]||"div");return Vl[e="on"+e]=e in t};var Js=Pe({name:"RowDragHandler",props:{columnKey:[String,Number],disabled:Boolean,column:Object},setup(e,{slots:t}){const l=F(!1),n=F(),{prefixCls:o,dragRowsHandle:u,draggingRowKey:s,insertToRowKey:i,onRowDragEnd:a,scrollTo:c,bodyMaxWidth:r,isMyChildren:v,getRecordByKey:f,getIndexsByKey:d,childrenColumnName:p,getKeyByIndexs:m,scrollTop:y,scrollLeft:b,showVerticalScrollbar:C,showHorizontalScrollbar:I}=Ve(),{dragRowPlaceholderRef:k,bodyRef:N}=ol(),{height:V,top:j,rowKey:M}=Us(),J=$t();let g;const E=F(),L=F(),S=F(),H=document.createElement("div"),z=F(!0);let q=null,x={},K=0;const R=[];let B=null;const Q=F(Un),A=h(()=>d(M.value));mt(()=>{var w,$;u.has(e.columnKey)?($=(w=u.get)==null?void 0:w.call(u,e.columnKey))==null||$.add(n.value):u.set(e.columnKey,new Set([n.value]))}),ct(()=>{var w,$;(w=u.get(e.columnKey))==null||w.delete(n.value),(($=u.get(e.columnKey))==null?void 0:$.size)===0&&u.delete(e.columnKey),Ne.cancel(g),ml(null,H)});const Y=w=>{w.forEach($=>{const{target:P,type:U,listener:Z,options:re}=$;P.addEventListener(U,Z,re)}),R.push(()=>{w.forEach($=>{const{target:P,type:U,listener:Z,options:re}=$;P.removeEventListener(U,Z,re)})})},pe=ce(),ke=(w,$)=>{if(pe.value=w,!l.value){if(pn(w,$,4))return;l.value=!0,S.value=w.clientY,s.value=M.value,K=n.value.parentElement.offsetWidth,xe().appendChild(H),ae()}z.value=!0,L.value=w.clientX,E.value=w.clientY,(()=>{const{y:P,height:U}=x,Z=window.pageYOffset||document.documentElement.scrollTop;return E.value+10<=P?(H.style.top=P+Z-20+"px",!0):E.value>P+U&&(H.style.top=P+Z+U-hl+"px",!0)})()?(z.value=!1,O()):(D(w,!1),H.style.top=w.pageY-hl+"px"),(()=>{const{x:P,width:U}=x,Z=window.pageXOffset||document.documentElement.scrollLeft;return L.value+bt<=P?(H.style.left=P+Z-20+"px",!0):L.value+bt>=P+U&&(H.style.left=P+Z+U-20+"px",!0)})()?z.value=!1:H.style.left=w.pageX-bt+"px"};let Te,ne;const ie=w=>{var $;for(let P=0;P<w.length;P++)if((($=w[P])==null?void 0:$.identifier)===ne?.identifier)return w[P];return null},se=w=>{l.value&&(l.value=!1,xe().removeChild(H)),pe.value=w,q=null,ne=null,Te=null,O(),s.value=null,i.value=null,k.value.style.opacity="0",R.forEach($=>$()),R.length=0,Ne.cancel(g)},Se=w=>{w.cancelable&&w.preventDefault()},me=w=>{const $=ie(w.touches);$&&ke($,ne)},ye=w=>{let $=ie(w.touches);$||($=Te),se($)},Ke=w=>w.preventDefault(),Ie=w=>{ke(w,q)},Me=w=>{se(w)},Le=()=>{var w;let $=Ji;return Q.value===Xn&&($=ia),J.rowDragGhost&&"preTargetInfo"in ve?J.rowDragGhost({record:f(M.value),preTargetInfo:ve.preTargetInfo,nextTargetInfo:ve.nextTargetInfo,column:e.column,icon:X("span",{class:`${o.value}-drag-ghost-image-icon`,innerHTML:$},null),allowed:z.value,dragging:l.value,event:pe.value}):[X("span",{class:`${o.value}-drag-ghost-image-icon`,innerHTML:$},null),X("span",{class:`${o.value}-drag-ghost-image-label`,style:{maxWidth:`${K}px`}},[(w=t.label)==null?void 0:w.call(t)])]},ae=()=>{B||(B=X(Le)),ml(B,H)};fe([o],()=>{H.className=`${o.value}-drag-ghost-image`},{immediate:!0});const ve=Cl({}),xe=()=>document.fullscreenElement||document.body,Ee=()=>{const{top:w}=n.value.getBoundingClientRect();return E.value-w>=0?qt:zo},je=()=>{const{preTargetInfo:w,nextTargetInfo:$}=ve;if(v(M.value,w?.rowKey||"")||!z.value){k.value.style.opacity="0",i.value=null;return}let P=null;const U=w?w.indexs.slice(0,-1):[];let Z=U.length?m(U.join("-")):null;if($){const{y:re,centerY:ue,record:W,rowKey:he}=$;W[p.value]&&E.value>re+hl&&E.value<ue&&(P=he)}if(w&&P===null)if($&&!v(w.rowKey,$.rowKey)&&$.indexs.slice(0,-1).join("-")!==w.indexs.slice(0,-1).join("-")||!$){const{centerY:re,height:ue,y:W}=w;if(E.value<re+ue/4)P=U.length?m(U.join("-")):null;else if(E.value<W+ue&&(!$||$.indexs.length<w.indexs.length)){const he=U.slice(0,-1);P=he.length?m(he.join("-")):null,Z=P}else Z=null}else v(w.rowKey,$.rowKey)&&(P=w.rowKey);P===M.value&&(P=null),P!==$?.rowKey?(k.value.style.opacity="1",k.value.style.top=`${w?w.top+w.height:0}px`,k.value.style.width=`${r.value}px`,!$&&w?k.value.style.top=w.top+w.height-k.value.offsetHeight+"px":w||(k.value.style.top="0px")):k.value.style.opacity="0",ve.insertToRowKey=P??Z,i.value=ve.insertToRowKey};fe([l,E,z],()=>{Ne.cancel(g),g=Ne(()=>{if(l.value&&!z.value&&(Q.value=Xn),l.value&&z.value){const w=Ee();Q.value=w===qt?Un:Xr;const $=[];for(const ue of u.get(e.columnKey).values()){const{y:W}=ue.getBoundingClientRect(),he=+ue.getAttribute("data-scroll-top"),Ce=+ue.getAttribute("data-height"),be=ue.getAttribute("data-row-key-type");let He=ue.getAttribute("data-row-key");He=be==="number"?+He:He,$.push({y:W,top:he,height:Ce,rowKey:He,record:f(He),indexs:d(He),centerY:W+Ce/2})}$.sort((ue,W)=>ue.centerY-W.centerY);let P=$[$.length-1]||null,U=null;const Z=E.value;for(let ue=0,W=$.length;ue<W;ue++){const he=$[ue],{centerY:Ce}=he;if(Z<=Ce){P=$[ue-1]||null,U=he;break}}const re={record:f(M.value),top:j.value,height:V.value,dir:w,rowKey:M.value,event:pe.value,column:e.column,preTargetInfo:P,nextTargetInfo:U,fromIndexs:A.value,insertToRowKey:void 0};Object.assign(ve,re),je()}else k.value.style.opacity="0"})});const{check:D,ensureCleared:O}=Go({scrollContainer:N,scrollAxis:"y",getVerticalPosition:()=>y.value,setVerticalPosition:w=>{c(w)},getHorizontalPosition:()=>b.value,setHorizontalPosition:w=>c({left:w}),showVerticalScrollbar:C,showHorizontalScrollbar:I});fe(l,()=>{!l.value&&z.value&&a(Object.assign({},ve,{event:pe.value}))});const le=h(()=>({[`${o.value}-drag-handle`]:!0,[`${o.value}-drag-handle-disabled`]:e.disabled,[`${o.value}-drag-dragging`]:l.value}));return{dragIcon:qi,dragging:l,className:le,spanRef:n,top:j,height:V,rowKey:M,rowKeyType:h(()=>typeof M.value),onMousedown:w=>{w.preventDefault(),!e.disabled&&(l.value=!1,q=w,x=N.value.getBoundingClientRect(),Y([{target:document,type:"mousemove",listener:Ie},{target:document,type:"mouseup",listener:Me},{target:document,type:"contextmenu",listener:Ke}]))},onTouchStart:w=>{if(e.disabled)return;l.value=!1;const $=w.touches[0];Te=$,ne=$,x=N.value.getBoundingClientRect();const P=n.value;Y([{target:document,type:"touchmove",listener:Se,options:{passive:!1}},{target:P,type:"touchmove",listener:me,options:{passive:!0}},{target:P,type:"touchend",listener:ye,options:{passive:!0}},{target:P,type:"touchcancel",listener:ye,options:{passive:!0}}])}}}});const Zs=["aria-grabbed","data-scroll-top","data-height","data-row-key","data-row-key-type","innerHTML"];function Qs(e,t,l,n,o,u){return T(),te("span",{ref:"spanRef",class:_(e.className),"aria-grabbed":e.dragging,"aria-hidden":!0,"data-scroll-top":e.top,"data-height":e.height,"data-row-key":e.rowKey,"data-row-key-type":e.rowKeyType,innerHTML:e.dragIcon,unselectable:"on",onMousedown:t[0]||(t[0]=st((...s)=>e.onMousedown&&e.onMousedown(...s),["stop"])),"on:touchstartPassive":t[1]||(t[1]=(...s)=>e.onTouchStart&&e.onTouchStart(...s))},null,42,Zs)}var eu=De(Js,[["render",Qs]]),tu=Pe({inheritAttrs:!1,props:{prefixCls:String,tooltipProps:{type:Object,default:()=>({})},getPopupContainer:Function,open:Boolean,onCellLeave:Function,align:Object,shouldOpen:{type:[Function,Boolean]},allowEnter:{type:Boolean,default:!0}},setup(e,{slots:t,emit:l}){const n=h(()=>({offset:[0,13]})),o=cn(),u=F(!1),s=a=>{const c=document.createRange();c.setStart(a,0),c.setEnd(a,a.childNodes.length);let r=c.getBoundingClientRect().width,v=c.getBoundingClientRect().height;r-Math.floor(r)<.001&&(r=Math.floor(r)),v-Math.floor(v)<.001&&(v=Math.floor(v));const{pLeft:f,pRight:d,pTop:p,pBottom:m}=(y=>{const b=window.getComputedStyle(y,null);return{pLeft:Number.parseInt(b.paddingLeft,10)||0,pRight:Number.parseInt(b.paddingRight,10)||0,pTop:Number.parseInt(b.paddingTop,10)||0,pBottom:Number.parseInt(b.paddingBottom,10)||0}})(a);return r+(f+d)>a.offsetWidth||v+(p+m)>a.offsetHeight||a.scrollWidth>a.offsetWidth};fe(()=>e.open,a=>{a?typeof e.shouldOpen=="function"?Qt(()=>{var c;const r=(v=>{var f;let d=((f=v?.vnode)==null?void 0:f.el)||v?.$el||v;for(;d&&!d.tagName;)d=d.nextSibling;return d})(o);if(r){const v=r.childNodes[0],f=v&&s(v);u.value=(c=e.shouldOpen)==null?void 0:c.call(e,f)}}):u.value=e.shouldOpen:u.value=!1},{immediate:!0,flush:"post"});const i=()=>{l("cellLeave")};return()=>{var a;return u.value?X(Ht,We({"get-popup-container":e.getPopupContainer,align:n.value},e.tooltipProps,{open:e.open,"overlay-style":e.allowEnter?{}:{pointerEvents:"none"},onOpenChange:i}),{...t}):(a=t.default)==null?void 0:a.call(t)}}}),lu=Pe({inheritAttrs:!1,props:{prefixCls:{type:String},recordIndexs:{type:Array},rowKey:{type:[Number,String]},column:{type:Object,default:()=>({})},record:{type:Object,default:()=>({})},value:{validator:()=>!0},customEditable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1},cellKey:{type:String},getPopupContainer:Function,onCloseEditor:Function,onKeydown:Function},emits:["closeEditor","keydown"],setup(e,{expose:t,emit:l}){var n,o,u;const s=$t(),i=gn(),a=(u=(o=(n=e.column)==null?void 0:n.valueGetter)==null?void 0:o.call(n,{value:e.value,record:e.record,column:e.column,recordIndexs:e.recordIndexs}))!=null?u:e.value,c=F(a),r=ce(null),v=Ve();mt(()=>{Qt(()=>{var b,C,I,k;r.value&&!e.multiple&&((C=(b=r.value)==null?void 0:b.focus)==null||C.call(b),(k=(I=r.value)==null?void 0:I.select)==null||k.call(I))})}),t({value:c,inputRef:r});const f=(b,C)=>{var I,k;(k=(I=e.column).valueChange)==null||k.call(I,b,{column:e.column,record:e.record,recordIndexs:e.recordIndexs,newValue:C,oldValue:a})},d=h(()=>v.props.childrenColumnName||"children"),p=()=>{var b,C,I;const k=e.recordIndexs;let N=v.props.dataSource||[],V={};k.forEach(J=>{V=N[J],N=V[d.value]||[]});const j=(I=(C=(b=e.column).valueParser)==null?void 0:C.call(b,{column:e.column,record:V,recordIndexs:k,newValue:c.value,oldValue:a}))!=null?I:c.value,M=e.column.valueSetter;if(M){const J=M({column:e.column,record:V,recordIndexs:k,newValue:c.value,oldValue:a});if(Yl(J)){J.then(g=>{g&&l("closeEditor",[e.cellKey])}).catch(()=>{});return}J&&l("closeEditor",[e.cellKey])}else ht(e.column.dataIndex!==void 0||e.column.dataIndex!==null,"Editable","If not have column dataIndex, you should to set valueSetter for editable columns, otherwise the value cannot be modified."),Za(V,e.column.dataIndex,j),l("closeEditor",[e.cellKey])};let m=!1;const y=b=>{l("closeEditor",b??[e.cellKey])};return{modelValue:c,inputRef:r,handleInput:b=>{var C;f(b,(C=b.target)==null?void 0:C.value)},handleKeyDown:b=>{const{which:C}=b;C===Ge.ENTER?p():(C===Ge.ESC&&(m=!0,l("closeEditor",null)),l("keydown",b))},handleBlur:()=>{m||e.multiple||p()},tableSlots:s,popup:i,save:p,closeEditor:y,getCustomEditorProps:()=>({modelValue:c,save:p,onInput:f,closeEditor:y,column:e.column.originColumn,editorRef:r,getPopupContainer:e.getPopupContainer,record:e.record,recordIndexs:e.recordIndexs})}}});const nu=["data-cell-auto"];function ou(e,t,l,n,o,u){return T(),te("div",{class:_(`${e.prefixCls}-cell-edit-inner`),"data-cell-auto":e.autoHeight},[e.customEditable?(T(),te(Be,{key:0},[e.tableSlots.cellEditor?(T(),de(it(e.tableSlots.cellEditor),Nt(We({key:0},e.getCustomEditorProps())),null,16)):ge("v-if",!0)],64)):Je((T(),te("input",{key:1,"onUpdate:modelValue":t[0]||(t[0]=s=>e.modelValue=s),ref:"inputRef",class:_(`${e.prefixCls}-cell-edit-input`),type:"text",onInput:t[1]||(t[1]=(...s)=>e.handleInput&&e.handleInput(...s)),onKeydown:t[2]||(t[2]=(...s)=>e.handleKeyDown&&e.handleKeyDown(...s)),onBlur:t[3]||(t[3]=(...s)=>e.handleBlur&&e.handleBlur(...s))},null,34)),[[Na,e.modelValue]])],10,nu)}var au=De(lu,[["render",ou]]);const sn={created(e,t){const{value:l={}}=t,{resizeObserver:n}=l;n?.observe(e)},unmounted(e,t){const{value:l={}}=t,{resizeObserver:n,calMaxHeight:o}=l;n?.unobserve(e),Qt(()=>{o?.()})}},ru={prefixCls:String,rowIndex:{type:Number,required:!0},flattenRowIndex:{type:Number,required:!0},rowKey:{type:[Number,String]},column:{type:Object,default:()=>({})},item:{type:Object,default:()=>({})},wrapText:{type:Boolean,default:!1},type:{type:String},height:Number,hasAppendNode:Boolean,resizeObserver:{type:Object},calMaxHeight:Function,tooltipOpen:Boolean,getPopupContainer:Function,onCellLeave:Function,editCellKeys:Array,onOpenEditor:Function,onCloseEditor:Function,onMousedown:Function,onMousemove:Function,onKeydown:Function,onClick:Function};let co=0;const iu={success:"#03bf64",processing:"#315efb",error:"#e8353e",warning:"#eb8903"},ma=(e,{slots:t,emit:l})=>{var n,o,u,s,i;const a=$t(),c=Ve(),{onBodyCellContextmenu:r}=ol(),{getRangeCellClass:v}=yn(),f=Sl(),{oldValuesMap:d}=Wo(),{prefixCls:p,column:m,wrapText:y,rowKey:b,item:C,rowIndex:I,hasAppendNode:k,tooltipOpen:N,editCellKeys:V}=e,j=m.columnKey,M=jl(m?.valueEnum,e.item),J=typeof m.rowDrag=="function"?m.rowDrag({record:C,column:m.originColumn}):!!m.rowDrag,g=m.rowDrag,E=c.sorterStates.value.find(({key:w})=>w===j),S={sorterOrder:E?E.sortOrder:null},H=`${e.rowKey} ${j}`,z=m.dataIndex?m.renderText?m.renderText(Wn(C,m.dataIndex),C,I):Wn(C,m.dataIndex):void 0,q=jl(m?.valueStatus,z,e.item),x=c.getIndexsByKey(b);let K=!1,R=V?.includes(H);if(R){const w=typeof m.editable=="function"&&m.editable({record:C,column:m.originColumn,recordIndexs:x,value:z});K=m.editable==="cellEditorSlot"||w==="cellEditorSlot",R=R&&(K&&!!a.cellEditor||m.editable===!0||!!w)}let{editableTrigger:B=["dblClick"]}=m;B=Array.isArray(B)?B:[B];const Q={[`${p}-cell-inner`]:!0},A={[`${p}-cell-content`]:!0,[`${p}-cell-wrap-text`]:m.wrapText===void 0?y:m.wrapText,[`${p}-cell-text-ellipsis`]:!!m.ellipsis},Y={textAlign:`${m.align}`,color:q?iu[q]||"valueStatus":void 0};xo(m.ellipsis)&&m.ellipsis.line>1&&(Y["-webkit-box-orient"]="vertical",Y["-webkit-line-clamp"]=m.ellipsis.line,Y["white-space"]="normal",Y.display="-webkit-box",Y.padding="0 16px");const pe=((o=(n=c.allCellProps.value)==null?void 0:n[b])==null?void 0:o[m.columnKey])||{},ke=pe.props||{},Te=ke.rowSpan,ne={rowIndex:e.flattenRowIndex,rowPinned:null,column:m},ie={[`${p}-cell`]:!0,[`${p}-body-cell`]:!0,[`${p}-cell-multi`]:Te>1,[`${p}-cell-hidden`]:Te===0,[`${p}-column-sort`]:S.sorterOrder,[`${p}-with-append`]:k,[`${p}-cell-inline-edit`]:R,[v(ne)]:!0},se=()=>{var w,$,P,U,Z,re,ue;const W=(P=($=(w=e.column)==null?void 0:w.valueGetter)==null?void 0:$.call(w,{value:z,record:C,column:m,recordIndexs:x}))!=null?P:z,he=(Z=(U=c.props)==null?void 0:U.onBeforeOpenEditor)==null?void 0:Z.call(U,me);Yl(he)?he.then(Ce=>{var be,He;Ce&&(l("openEditor",H,{[H]:W}),(He=(be=c.props)==null?void 0:be.onOpenEditor)==null||He.call(be,me))}):he!==!1&&(l("openEditor",H,{[H]:W}),(ue=(re=c.props)==null?void 0:re.onOpenEditor)==null||ue.call(re,me))},Se=w=>{var $,P,U,Z;const re=(P=($=c.props)==null?void 0:$.onBeforeCloseEditor)==null?void 0:P.call($,{...me,oldValue:d.value[H]});Yl(re)?re.then(ue=>{var W,he;ue&&(l("closeEditor",w??H),(he=(W=c.props)==null?void 0:W.onCloseEditor)==null||he.call(W,{...me,oldValue:d.value[H]}))}):re!==!1&&(l("closeEditor",w??H),(Z=(U=c.props)==null?void 0:U.onCloseEditor)==null||Z.call(U,{...me,oldValue:d.value[H]}))},me={record:C,column:m.originColumn,text:z,value:z,index:I,recordIndexs:c.getIndexsByKey(b),key:H,valueStatus:q,openEditor:se,closeEditor:Se};let ye=x&&((u=a.bodyCell)==null?void 0:u.call(a,me))||[];const Ke=c.props.columnEmptyText!==!1?c.props.columnEmptyText:"";if(!mn(ye)){let w;if(pe.children)w=pe.children;else if(M){const $=M[z];$&&$.text?$.status?w=X(Qa,{status:$.status,text:$.text}):$.color?w=X(er,{color:$.color,bordered:!1},()=>$.text):w=$.text||Ke:w=Ke}else w=z||Ke;ye=[typeof w=="object"&&Er(w)||typeof w!="object"?w:null]}const Ie={resizeObserver:e.resizeObserver,calMaxHeight:e.calMaxHeight},Me=m.tooltip,Le=e.height===void 0&&Te===1&&m?.autoHeight,ae=!m.showTitle||typeof z!="string"&&typeof z!="number"?void 0:z,ve=!!Me&&N,xe=c.props.ignoreCellKey?{}:{key:H};let Ee=X("div",{class:Q,style:(s=ke?.style)!=null&&s.height?"":`height: ${e.height}px`,"data-cell-auto":Le},[X("div",We({class:A,style:Y,title:ae},xe),[k?(i=t.appendNode)==null?void 0:i.call(t):null,ye])]);Ee=Le?Je(Ee,[[sn,Ie]]):Ee;let je=null,D=ve;if(ve){const w={...m.tooltip===!0?{}:m.tooltip};w.title?(w.title=w.title(me),D=!(!w.title&&w.title!==0)):(w.title=z,D=!(!w.title&&w.title!==0)),je=X(tu,{getPopupContainer:e.getPopupContainer,align:{offset:[0,13]},tooltipProps:w,open:D,allowEnter:w?.allowEnter,shouldOpen:$=>{var P;return w?.shouldOpen?(P=w?.shouldOpen)==null?void 0:P.call(w,$,me):$},onCellLeave:()=>{l("cellLeave")}},{default:()=>[w.allowEnter!==!1?Ee:Wa(Ee,{onMouseleave:()=>{l("cellLeave")}})],title:()=>{var $;return($=a.tooltipTitle)==null?void 0:$.call(a,me)}})}else je=Ee;const O=()=>{B.includes("dblClick")&&se()},le=R?X(au,{prefixCls:p,recordIndexs:x,rowKey:b,cellKey:H,column:m,record:C,onCloseEditor:Se,value:z,customEditable:K,getPopupContainer:e.getPopupContainer,multiple:V.length>1,autoHeight:Le},null):null;return X("div",We(ke,{onMouseleave:()=>{D||l("cellLeave")},tabindex:"-1",role:"cell","data-column-key":j,class:ie,onContextmenu:w=>{(c.props.hasContextmenuPopup||c.props.rangeSelection)&&w.button===0&&w.ctrlKey?w.preventDefault():(r(w,me,e.type),B.includes("contextmenu")&&se())},onDblclick:O,onClick:w=>{var $,P;if((P=($=c.props)==null?void 0:$.onCellClick)==null||P.call($,w,me),(()=>{if(!bn()||qs("dblclick"))return!1;const U=new Date().getTime(),Z=U-co<200;return co=U,Z})()){O(),w.preventDefault();return}l("click",w,ne),B.includes("click")&&se()},onMousedown:w=>{l("mousedown",w,ne)},onMousemove:w=>{l("mousemove",w,ne)},onKeydown:w=>{l("keydown",w,{cellPosition:ne,isEditing:R})},"data-level":f,"aria-selected":"true"}),[g?X(eu,{disabled:!J,columnKey:j,column:m.originColumn},{label:()=>ye}):null,je,Le&&le?X("label",{class:`${p}-cell-edit-wrapper`,onMousedown:w=>w.stopPropagation()},[Je(le,[[sn,Ie]])]):le?X("label",{class:`${p}-cell-edit-wrapper`,onMousedown:w=>w.stopPropagation()},[le]):null])};ma.props=ru;var su=Pe({name:"TableExpandedRow",directives:{cellResize:sn},components:{RenderVNode:ll},props:{prefixCls:String,rowKey:{type:[Number,String]},item:{type:Object,default:()=>({})},rowIndex:Number,resizeObserver:{type:Object},calMaxHeight:Function},setup(e){const t=F(),l=$t(),n=Ve(),o=h(()=>n.rowHeights.value[e.rowKey]===void 0),u=Ae(()=>{var d;return((d=n.allCellProps.value[e.rowKey])==null?void 0:d[Zt])||{}}),{onBodyCellContextmenu:s}=ol(),i=h(()=>{const{prefixCls:d}=e;return{[`${d}-cell`]:!0}}),a=h(()=>{const{prefixCls:d}=e;return{[`${d}-cell-inner`]:!0}}),c=h(()=>{var d,p;return{...u.value.props,style:{...((p=(d=u.value)==null?void 0:d.props)==null?void 0:p.style)||{},minWidth:"100%"}}}),r=h(()=>{var d,p;return(p=(d=n.props)==null?void 0:d.expandedRowRender)==null?void 0:p.call(d,{record:e.item,index:e.rowIndex,indent:1,expanded:!0})}),v=h(()=>o.value?{resizeObserver:e.resizeObserver,calMaxHeight:e.calMaxHeight}:{}),f=h(()=>({record:e.item,index:e.rowIndex,recordIndexs:n.getIndexsByKey(e.rowKey),key:e.rowKey,isExpand:!0}));return{cellClass:i,tableSlotsContext:l,mergedCellProps:c,cellInnerClass:a,cellInnerRef:t,expandContent:r,autoHeight:o,cellResizeBind:v,onBodyCellContextmenu:s,contextmenuProps:f}}});const uu=["data-cell-auto"];function cu(e,t,l,n,o,u){const s=ee("RenderVNode"),i=Lt("cell-resize");return T(),te("div",We(e.mergedCellProps,{tabindex:"-1",role:"cell",class:e.cellClass,onContextmenu:t[0]||(t[0]=a=>e.onBodyCellContextmenu(a,e.contextmenuProps,"left"))}),[Je((T(),te("div",{ref:"cellInnerRef","data-cell-auto":e.autoHeight,class:_(e.cellInnerClass)},[oe("div",{class:_(`${e.prefixCls}-cell-content`)},[(T(),de(s,{key:e.rowKey,vnode:e.expandContent},null,8,["vnode"]))],2)],10,uu)),[[i,e.cellResizeBind]])],16)}var du=De(su,[["render",cu]]),vu=Pe({name:"ProTableExpandIcon",props:{prefixCls:String,record:Object,expanded:Boolean,expandable:Boolean,disabled:Boolean,onExpand:Function},emits:["expand"],setup(e,{emit:t}){const l=Ve(),n=h(()=>{const{prefixCls:o,expanded:u,expandable:s,disabled:i}=e,a=`${o}-row-expand-icon`;return{[a]:!0,[`${a}-spaced`]:!s,[`${a}-expanded`]:s&&u,[`${a}-collapsed`]:s&&!u,[`${a}-disabled`]:!!i}});return{handleClick:()=>{e.disabled||t("expand",e.record)},className:n,label:h(()=>e.expanded?l.locale.value.collapse:l.locale.value.expand),expandIcon:h(()=>l.props.expandIcon),props:e}}});const fu=["aria-label"];function hu(e,t,l,n,o,u){return e.expandIcon?(T(),te("span",{key:0,onClick:t[0]||(t[0]=st(()=>{},["stop"]))},[(T(),de(it(()=>e.expandIcon(e.props))))])):(T(),te("button",{key:1,type:"button",class:_(e.className),"aria-label":e.label,onClick:t[1]||(t[1]=st((...s)=>e.handleClick&&e.handleClick(...s),["stop"]))},null,10,fu))}var ga=De(vu,[["render",hu]]),pu=Pe({name:"BodyExtraCell",components:{Checkbox:_t,Radio:nl,ExpandIcon:ga,MenuOutlined:wo},props:{prefixCls:String,rowIndex:{type:Number,required:!0},type:{type:String},column:{type:Object,default:()=>({})},record:{type:Object},rowKey:{type:[Number,String]},expanded:Boolean,supportExpand:Boolean},setup(e){const t=Ve(),l=Sl(),n=h(()=>t.mergedRowSelection.value.type),o=h(()=>t.selection.derivedSelectedKeySet.value),u=F(!1),s=F(!1),i=h(()=>t.checkboxPropsMap.value.get(e.rowKey)),{onBodyCellContextmenu:a}=ol(),c=h(()=>{var f,d;return(d=(f=t.allCellProps.value[e.rowKey])==null?void 0:f[e.column.columnKey])!=null?d:{}});qe(()=>{var f,d,p;const{selection:{derivedHalfSelectedKeySet:m},expandType:y}=t;u.value=o.value.has(e.rowKey);const b=m.value.has(e.rowKey);y.value==="nest"?(s.value=b,ht(typeof((f=i.value)==null?void 0:f.indeterminate)!="boolean","Table","set `indeterminate` using `rowSelection.getCheckboxProps` is not allowed with tree structured dataSource.")):s.value=(p=(d=i.value)==null?void 0:d.indeterminate)!=null?p:b});const r=h(()=>{var f,d;const{column:p}=e;return{...c.value.props,style:{...((d=(f=c.value)==null?void 0:f.props)==null?void 0:d.style)||{},width:`${p.finallyWidth||0}px`}}}),v=h(()=>({record:e.record,column:e.column.originColumn,index:e.rowIndex,recordIndexs:t.getIndexsByKey(e.rowKey),key:e.rowKey}));return{handleRadioChange:f=>{u.value&&!t.mergedRowSelection.value.allowCancelRadio||t.selection.triggerSingleSelection(e.rowKey,!u.value,u.value?[]:[e.rowKey],f)},handleCheckboxChange:f=>{const{shiftKey:d}=f,{selection:{lastSelectedKey:p,setLastSelectedKey:m,setSelectedKeys:y,triggerSingleSelection:b,mergedRowSelection:C,derivedSelectedKeys:I,isCheckboxDisabled:k,levelEntities:N,maxLevel:V},getRecordByKey:j,pageDataEnableRowKeys:M,keyEntities:J}=t,{checkStrictly:g,onSelectMultiple:E}=C.value,L=e.rowKey;let S=-1,H=-1;const z=M.value;if(d&&g){const q=new Set([p.value,L]);z.some((x,K)=>{if(q.has(x)){if(S!==-1)return H=K,!0;S=K}return!1})}if(H!==-1&&S!==H&&g){const q=z.slice(S,H+1),x=[];u.value?q.forEach(R=>{o.value.has(R)&&(x.push(R),o.value.delete(R))}):q.forEach(R=>{o.value.has(R)||(x.push(R),o.value.add(R))});const K=Array.from(o.value);E?.(!u.value,K.map(R=>j(R)),x.map(R=>j(R))),y(K)}else{const q=I.value;if(g){let x=[];u.value?x=Br(q,L):x=Dr(q,L),b(L,!u.value,x,f)}else{const{checkedKeys:x,halfCheckedKeys:K}=Gl([...q,L],!0,J.value,N.value,V.value,k);let R=x;if(u.value){const B=new Set(x);B.delete(L),R=Gl(Array.from(B),{halfCheckedKeys:K},J.value,N.value,V.value,k).checkedKeys}b(L,!u.value,R,f)}}m(L)},onInternalTriggerExpand:(f,d)=>{t.onTriggerExpand(f,e.rowKey,d)},rowSelectionType:n,keySet:o,checked:u,mergedIndeterminate:s,checkboxProps:i,mergedCellProps:r,onBodyCellContextmenu:a,contextmenuProps:v,level:l}}});const mu=["data-level"],gu={key:2,draggable:!0};function yu(e,t,l,n,o,u){const s=ee("Radio"),i=ee("Checkbox"),a=ee("ExpandIcon"),c=ee("MenuOutlined");return T(),te("div",We(e.mergedCellProps,{key:`${e.rowKey} ${e.column.columnKey}`,tabindex:"-1",role:"cell","data-level":e.level,class:{[`${e.prefixCls}-cell`]:!0,[`${e.prefixCls}-body-cell`]:!0,[`${e.prefixCls}-extra-cell`]:!0,[`${e.prefixCls}-row-expand-icon-cell`]:!0},onContextmenu:t[2]||(t[2]=r=>e.onBodyCellContextmenu(r,e.contextmenuProps,e.type)),onClick:t[3]||(t[3]=st(()=>{},["stop"]))}),[e.column.type==="checkbox"?(T(),te(Be,{key:0},[e.rowSelectionType==="radio"?(T(),de(s,We({key:0,"prefix-cls":e.prefixCls},e.checkboxProps,{checked:e.checked,onClick:t[0]||(t[0]=st(()=>{},["stop"])),onChange:e.handleRadioChange}),null,16,["prefix-cls","checked","onChange"])):(T(),de(i,We({key:1,"prefix-cls":e.prefixCls},e.checkboxProps,{indeterminate:e.mergedIndeterminate,checked:e.checked,onClick:t[1]||(t[1]=st(()=>{},["stop"])),onChange:e.handleCheckboxChange}),null,16,["prefix-cls","indeterminate","checked","onChange"]))],64)):e.column.type==="expand"?(T(),de(a,{key:1,"prefix-cls":e.prefixCls,expandable:"",expanded:e.expanded,record:e.record,disabled:!e.supportExpand,onExpand:e.onInternalTriggerExpand},null,8,["prefix-cls","expanded","record","disabled","onExpand"])):e.column.type==="draggable"?(T(),te("div",gu,[ut(e.$slots,"draggable-handle",{},()=>[X(c)])])):ge("v-if",!0)],16,mu)}var wu=De(pu,[["render",yu]]);let Cu=0;var bu=Pe({name:"ProTableBodyRow",components:{ExpandIcon:ga,BodyCell:ma,ExpandedRow:du,BodyExtraCell:wu,RenderSlot:tl},inheritAttrs:!1,props:{prefixCls:String,isExpandRow:Boolean,record:{type:Object},type:{type:String},rowKey:{type:[Number,String],required:!0},supportExpand:Boolean,pos:Number,rowIndex:Number,flattenRowIndex:Number,indent:Number,wrapText:{type:Boolean,default:!1},getRowClassName:{type:Function}},setup(e){const t="row_uni_id_"+Cu++,l=Ve(),n=cn(),{editCellKeys:o,closeEditor:u,openEditor:s}=Wo();let i=!1;const a=F(),{onCellMousedown:c,onCellMousemove:r,onCellClick:v}=Xs(),{onCellKeydown:f}=Ys(),d=()=>{if(i)return;let ae=0,ve=[];a.value&&(ve=a.value.querySelectorAll("div[data-cell-auto=true]")),ve.forEach(xe=>{const{offsetWidth:Ee,offsetHeight:je}=xe;let D=Ee?je:0;const O=getComputedStyle(xe.parentNode);D+=parseFloat(O.getPropertyValue("border-top-width"))+parseFloat(O.getPropertyValue("border-bottom-width")),ae=ae>D?ae:D}),ve.length?l.addRowHeight(t,e.rowKey,ae):l.removeRowHeight(t)};fe(()=>e.rowKey,()=>{d()},{flush:"post"});const p=new Ul(()=>{d()}),{columns:m,columnStartIndex:y}=Vs(),b=h(()=>(e.type==="center"?l.centerRowColumnsMap.value.get(e.rowKey):m.value).filter(ae=>!!ae)),{tooltipOpen:C,leftPopupContainer:I,centerPopupContainer:k,rightPopupContainer:N}=ol(),{handleCellBlur:V,handleCellHover:j,hoverRowKey:M,hoverColumnKey:J}=Io(),g=h(()=>e.type==="left"?I.value:e.type==="center"?k.value:e.type==="right"?N.value:null),E=Ae(()=>l.draggingRowKey.value===e.rowKey),L=Ae(()=>M.value===e.rowKey);fe([L,a],()=>{a.value&&(L.value?Sn(a.value,`${e.prefixCls}-row-hover`):xn(a.value,`${e.prefixCls}-row-hover`))},{immediate:!0,flush:"post"});const S=Ae(()=>C.value&&L.value);let H;ct(()=>{i=!0,p.disconnect(),clearTimeout(H),l.removeRowHeight(t)});const z=Ae(()=>!l.hasMultiRowSpanInfo.value[e.rowKey]),q=h(()=>{var ae,ve;return(ve=(ae=l.props).customRow)==null?void 0:ve.call(ae,e.record,e.rowIndex)}),x=h(()=>{var ae;return(ae=l.props.rowSelection)==null?void 0:ae.type}),K=F(!1),R=h(()=>l.expandedRowKeys.value),B=Ae(()=>{var ae,ve;return(ve=(ae=R.value).has)==null?void 0:ve.call(ae,e.rowKey)}),Q=h(()=>l.expandIconColumnIndex.value||0),A=h(()=>l.indentSize.value);qe(()=>{B.value&&(K.value=!0)});const Y=h(()=>{var ae,ve;return l.expandType.value==="row"&&((ve=(ae=l.props).rowExpandable)==null?void 0:ve.call(ae,e.record))}),pe=h(()=>l.expandType.value==="nest"),ke=h(()=>{var ae;return!!(l.childrenColumnName.value&&((ae=e.record)!=null&&ae[l.childrenColumnName.value]))}),Te=h(()=>Y.value||pe.value),ne=(ae,ve)=>{l.onTriggerExpand(ae,e.rowKey,ve)},ie=h(()=>l.mergedRowHeights.value),se=Ae(()=>ie.value[e.rowKey]),Se=Ae(()=>l.rowHeights.value[e.rowKey]),me=h(()=>l.props.highlightSelectRow&&l.selection.derivedSelectedKeySet.value.has(e.rowKey)),ye=h(()=>{var ae;const{prefixCls:ve,record:xe,rowIndex:Ee,indent:je}=e,D=Ee%2==0;return Jt({[`${ve}-row`]:!0,[`${ve}-row-level-${je}`]:!0,[`${ve}-row-hover`]:L.value,[`${ve}-row-dragging`]:E.value,[`${ve}-row-dragging-insert-target`]:l.insertToRowKey.value===e.rowKey,[`${ve}-row-odd`]:!D,[`${ve}-row-even`]:D,[`${ve}-no-height`]:!se.value,[`${ve}-row-selected`]:me.value},(ae=e.getRowClassName)==null?void 0:ae.call(e,xe,Ee,je))}),Ke=h(()=>{var ae;const{prefixCls:ve,record:xe,rowIndex:Ee,indent:je}=e;return Jt({[`${ve}-row`]:!0,[`${ve}-expanded-row`]:!0,[`${ve}-expanded-row-level-${je+1}`]:!0,[`${ve}-no-height`]:!se.value},(ae=e.getRowClassName)==null?void 0:ae.call(e,xe,Ee,je))}),Ie=Ae(()=>{var ae,ve,xe,Ee;return(Ee=(xe=(ve=(ae=l.allCellProps.value[e.rowKey])==null?void 0:ae[Zt])==null?void 0:ve.props)==null?void 0:xe.style)==null?void 0:Ee.width}),Me=h(()=>{const ae={opacity:1,[`--${e.prefixCls}-row-bg`]:`var(--${e.prefixCls}-row-bg-${e.rowKey}, var(--${e.prefixCls}-bg))`};return z.value?ae.transform=`translateY(${e.pos}px)`:ae.top=`${e.pos}px`,se.value!==void 0?ae.height=`${se.value}px`:ae.height=`${l.baseHeight.value}px`,e.isExpandRow&&y.value===0&&(ae.width=Ie.value,ae.minWidth="100%"),ae});fe(()=>({...Me.value}),(ae,ve={})=>{l.animateRows.value&&!l.useAnimate.value&&(ae.top!==ve.top||ae.height!==ve.height||ae.transform!==ve.transform)&&Qt(()=>{clearTimeout(H),n?.vnode.el&&n.vnode.el.style&&(n.vnode.el.style.transition="none",H=setTimeout(()=>{var xe,Ee;(Ee=(xe=n?.vnode)==null?void 0:xe.el)!=null&&Ee.style&&(n.vnode.el.style.transition=null)},100))})},{immediate:!0}),js({top:h(()=>e.pos),height:h(()=>se.value!==void 0?se.value:l.baseHeight.value),rowKey:h(()=>e.rowKey)});const Le=h(()=>({[`${e.prefixCls}-cell`]:!0,[`${e.prefixCls}-position-absolute`]:!0}));return{rowClass:ye,rowStyle:Me,cellClass:Le,tableContext:l,mergedRowHeights:ie,handleCellBlur:V,handleCellHover:j,handleClick:ae=>{l.props.expandRowByClick&&Te.value&&ne(e.record,ae)},rowSelectionType:x,nestExpandable:pe,hasNestChildren:ke,mergedExpandable:Te,expandIconColumnIndex:Q,indentSize:A,expanded:B,onInternalTriggerExpand:ne,customRowProps:q,expandColumnKey:Zt,expandRowClass:Ke,mergedColumns:b,height:se,cellHeight:Se,columnStartIndex:y,resizeObserver:p,calMaxHeight:d,bodyRow:a,hoverRowKey:M,hoverColumnKey:J,xVirtual:Ae(()=>l.xVirtual.value),getPopupContainer:()=>g.value,editCellKeys:o,closeEditor:u,openEditor:s,mergedTooltipOpen:S,onCellMousedown:c,onCellKeydown:f,onCellMousemove:r,onCellClick:v}}});const Su=["data-row-key"],xu=["data-row-key"];function $u(e,t,l,n,o,u){const s=ee("ExpandedRow"),i=ee("BodyExtraCell"),a=ee("ExpandIcon"),c=ee("BodyCell"),r=ee("RenderSlot");return e.isExpandRow?(T(),te(Be,{key:0},[e.columnStartIndex===0?(T(),te("div",{key:0,ref:"bodyRow","data-row-key":e.rowKey,class:_(e.expandRowClass),style:$e(e.rowStyle),role:"row"},[X(s,{"prefix-cls":e.prefixCls,item:e.record,"row-key":e.rowKey,"row-index":e.rowIndex,"resize-observer":e.resizeObserver,"cal-max-height":e.calMaxHeight},null,8,["prefix-cls","item","row-key","row-index","resize-observer","cal-max-height"])],14,Su)):ge("v-if",!0)],64)):(T(),te("div",We({key:1},e.customRowProps,{ref:"bodyRow",class:e.rowClass,style:e.rowStyle,"data-row-key":e.rowKey,role:"row",onClick:t[0]||(t[0]=(...v)=>e.handleClick&&e.handleClick(...v))}),[X(r,null,{default:Re(()=>[(T(!0),te(Be,null,xt(e.mergedColumns,(v,f)=>{var d;return T(),te(Be,{key:v&&v.columnKey},[v&&v.__Internal__Column__?(T(),de(i,{key:0,"prefix-cls":e.prefixCls,"row-key":e.rowKey,"row-index":e.rowIndex,type:e.type,column:(d=e.mergedColumns)==null?void 0:d[f],expanded:e.expanded,"support-expand":e.mergedExpandable,record:e.record,onMouseenter:p=>e.handleCellHover(e.rowKey,v.columnKey,e.tableContext.draggingRowKey.value),onMouseleave:e.handleCellBlur},null,8,["prefix-cls","row-key","row-index","type","column","expanded","support-expand","record","onMouseenter","onMouseleave"])):v?(T(),de(c,{key:1,"prefix-cls":e.prefixCls,item:e.record,"row-key":e.rowKey,type:e.type,"row-index":e.rowIndex,"flatten-row-index":e.flattenRowIndex,"wrap-text":e.wrapText,column:v,"resize-observer":e.resizeObserver,"cal-max-height":e.calMaxHeight,"has-append-node":v.columnIndex===e.expandIconColumnIndex&&e.nestExpandable,height:e.cellHeight,"get-popup-container":e.getPopupContainer,"tooltip-open":e.mergedTooltipOpen&&e.hoverColumnKey===v.columnKey,"edit-cell-keys":e.editCellKeys,onCloseEditor:e.closeEditor,onOpenEditor:e.openEditor,onMouseenter:p=>e.handleCellHover(e.rowKey,v.columnKey,e.tableContext.draggingRowKey.value),onCellLeave:e.handleCellBlur,onMousedown:e.onCellMousedown,onMousemove:e.onCellMousemove,onKeydown:e.onCellKeydown,onClick:e.onCellClick},{appendNode:Re(()=>[oe("div",{class:_(`${e.prefixCls}-append-node`)},[oe("span",{style:$e(`padding-left: ${(e.indent||0)*e.indentSize}px`),class:_(`${e.prefixCls}-row-indent indent-level-${e.indent}`)},null,6),X(a,{expanded:e.expanded,"prefix-cls":e.prefixCls,expandable:e.hasNestChildren,record:e.record,disabled:!e.mergedExpandable,onExpand:e.onInternalTriggerExpand},null,8,["expanded","prefix-cls","expandable","record","disabled","onExpand"])],2)]),_:1},8,["prefix-cls","item","row-key","type","row-index","flatten-row-index","wrap-text","column","resize-observer","cal-max-height","has-append-node","height","get-popup-container","tooltip-open","edit-cell-keys","onCloseEditor","onOpenEditor","onMouseenter","onCellLeave","onMousedown","onMousemove","onKeydown","onClick"])):ge("v-if",!0)],64)}),128))]),_:1}),e.type!=="center"?(T(),te("div",{key:0,class:_(`${e.prefixCls}-cell-shadow-${e.type}`)},null,2)):ge("v-if",!0)],16,xu))}var Ru=De(bu,[["render",$u]]),ku=Pe({name:"TableBodyRows",components:{Row:Ru},inheritAttrs:!1,props:{prefixCls:String,type:{type:String},wrapText:{type:Boolean,default:!1},getRowClassName:{type:Function}},setup(e){const t=Ve(),l=h(()=>t.data.value),n=h(()=>t.dataRowPosition.value),o=ce([]),u=ce(0);return qe(()=>{e.type==="left"?(o.value=t.leftColumns.value,u.value=0):e.type==="right"?(o.value=t.rightColumns.value,u.value=t.leftColumns.value.length+t.centerColumns.value.length):(u.value=t.leftColumns.value.length,o.value=t.visibleCenterColumns.value)}),_s({columns:o,columnStartIndex:u}),{data:l,columns:o,rowPosition:n,transitionName:h(()=>`${e.prefixCls}-row`),virtual:Ae(()=>t.virtual.value)}}});function Ku(e,t,l,n,o,u){const s=ee("Row");return T(!0),te(Be,null,xt(e.data,(i,a)=>(T(),te(Be,{key:a},[i?(T(),de(s,{key:0,"prefix-cls":e.prefixCls,record:i.record,"row-key":i.rowKey,indent:i.indent,pos:e.rowPosition[a],"row-index":i.rowIndex,"flatten-row-index":i.flattenIndex,"wrap-text":e.wrapText,"get-row-class-name":e.getRowClassName,"is-expand-row":i.isExpandRow,type:e.type},null,8,["prefix-cls","record","row-key","indent","pos","row-index","flatten-row-index","wrap-text","get-row-class-name","is-expand-row","type"])):ge("v-if",!0)],64))),128)}var Pu=De(ku,[["render",Ku]]),Iu=Pe({props:{onlyAutoShow:{type:Boolean},notShowAuto:{type:Boolean}},setup:e=>{const t=Ve(),l=h(()=>`${t.props.prefixCls}`),n=F(),o=F(),u=F(!1),s=h(()=>{const y=`${t.scrollBarSize.value||15}px`;return{width:y,minWidth:y,maxWidth:y}}),i=aa()||bn(),a=h(()=>t.scrollBarSize.value===0&&i),c=h(()=>({[`${l.value}-vertical-scroll`]:!0,[`${l.value}-vertical-scroll-hidden`]:t.scrollBarSize.value===0,[`${l.value}-scrollbar-active`]:u.value,[`${l.value}-apple-scroll`]:i})),r=h(()=>t.showVerticalScrollbar.value&&(!e.onlyAutoShow||a.value)&&(!e.notShowAuto||!a.value)),v=h(()=>{const y=`${t.scrollBarSize.value||15}px`;return{height:`${t.viewportHeight.value||15}px`,width:y,minWidth:y,maxWidth:y}}),{addVScrollDom:f,removeVScrollDom:d}=Xo();let p=null;const m=()=>{a.value&&(clearTimeout(p),Sn(o.value,`${l.value}-scrolling`),p=setTimeout(()=>{xn(o.value,`${l.value}-scrolling`)},500))};return mt(()=>{fe(n,()=>{n.value&&(d(n.value),n.value.removeEventListener("scroll",m),f(n.value,!0),n.value.addEventListener("scroll",m,{passive:!0}))},{immediate:!0})}),ct(()=>{clearTimeout(p),n.value&&(d(n.value),n.value.removeEventListener("scroll",m))}),()=>r.value?X("div",{ref:o,class:c.value,"aria-hidden":"true",style:s.value,onMousedown:()=>u.value=!0,onMouseenter:()=>u.value=!0,onMouseleave:()=>u.value=!1,onTouchend:()=>u.value=!1},[X("div",{key:"center",ref:n,class:`${l.value}-vertical-scroll-viewport`,style:s.value},[X("div",{class:`${l.value}-body-vertical-scroll-container`,style:v.value},null)])]):null}}),Tu=Pe({name:"TableBody",components:{BodyRows:Pu,Empty:gl,RenderVNode:ll,RenderSlot:tl,HorizontalScroll:$n,YScroll:Iu},directives:{resize:Wt},inheritAttrs:!1,props:{prefixCls:String,wrapText:{type:Boolean,default:!1},bodyScrollWidth:{type:Number},bodyWidth:{type:Number},bodyHeight:{type:Number},height:{type:[Number,String]},scrollX:[Number,String],summaryFixed:[Boolean,String],emptyText:Function,summary:Function},emits:["scroll","scrollLeft","scrollTop","update:bodyWidth","update:bodyHeight","update:bodyScrollWidth","keydown"],slots:{},setup(e,{emit:t,attrs:l,expose:n}){const o=Ve(),u=$t(),s=F(),i=F(),a=F(),c=F(),r=F(),v=F(),f=F(),d=F(),p=F(),m=F(0),y=h(()=>o.leftColumns.value),b=h(()=>o.centerColumns.value),C=h(()=>o.rightColumns.value),I=h(()=>o.status.value.code!==4),k=F(),N=F(),V=F(),j=F(),M=F(),J=F(),{hoverColumnKey:g}=Io(),{open:E}=Ws({hoverColumnKey:g}),L=ce(),S=F(),H=F({clientX:0,clientY:0}),z=W=>{W.style.display="none",W.style.opacity="0",W.style.left="0px",W.style.top="0px",W.style.height="1px",W.style.maxWidth=e.bodyWidth-4+"px"},q=()=>{const{clientX:W,clientY:he}=H.value,Ce=S.value,be=Ce==="left"?j.value:Ce==="right"?J.value:M.value;if(!Ce||!be)return;be.style.display="block";const{left:He,top:Qe}=be.parentElement.getBoundingClientRect(),dt=be.children[0],et=Math.min(be.scrollHeight,dt.scrollHeight,ae.value-4);be.style.opacity="1",be.style.height=`${et}px`;let Xe=W-He,pt=he-Qe;pt+et>ae.value&&(pt=ae.value-et-2),S.value==="center"?Xe+be.offsetWidth>o.centerWidth.value&&(Xe=o.centerWidth.value-be.offsetWidth-2):S.value==="right"?Xe+be.offsetWidth>o.rightWidth.value&&(Xe=o.rightWidth.value-be.offsetWidth-2):Xe+be.offsetWidth>e.bodyWidth&&(Xe=e.bodyWidth-be.offsetWidth-2),be.style.left=`${Xe}px`,be.style.top=`${pt}px`},x=h(()=>o.showVerticalScrollbar.value),K=h(()=>o.showHorizontalScrollbar.value);fe([o.centerWidth,o.rightWidth,()=>e.bodyWidth],()=>{q()},{flush:"post"});let R;pl(j,()=>{S.value==="left"&&(S.value=null,z(j.value))}),pl(M,()=>{S.value==="center"&&(S.value=null,z(M.value))}),pl(J,()=>{S.value==="right"&&(S.value=null,z(J.value))}),Ns({onBodyCellContextmenu:(W,he,Ce)=>{if(o.props.hasContextmenuPopup){const{clientX:be,clientY:He}=W;z(j.value),z(M.value),z(J.value),S.value=Ce,L.value=()=>{var Qe;return(Qe=u.contextmenuPopup)==null?void 0:Qe.call(u,{event:W,...he,hidePopup:()=>{S.value=null,z(j.value),z(M.value),z(J.value)}})},H.value={clientX:be,clientY:He},clearTimeout(R),R=setTimeout(()=>{q()}),W.preventDefault()}},bodyRef:i,tooltipOpen:E,leftPopupContainer:k,centerPopupContainer:N,rightPopupContainer:V,dragRowPlaceholderRef:s}),n({bodyRef:i}),ct(()=>{clearTimeout(R),clearTimeout(void 0)});const{addHScrollDom:B,removeHScrollDom:Q}=$l(),{addVScrollDom:A,removeVScrollDom:Y}=Xo();mt(()=>{fe(f,(W,he)=>{Q(he),B(W)},{flush:"post",immediate:!0}),fe(p,(W,he)=>{Q(he),B(W)},{flush:"post",immediate:!0}),fe(d,(W,he)=>{Y(he),A(W)},{flush:"post",immediate:!0})}),ct(()=>{Q(f.value),Q(p.value),Y(d.value)});const pe=F(0),ke=F(0),Te=h(()=>{const W=`${o.showVerticalScrollbar.value?o.scrollBarSize.value:0}px`;return{display:W==="0px"?"none":"block",width:W,minWidth:W,maxWidth:W,position:"sticky",right:`-${W}`}}),ne=h(()=>({width:`calc(100% + ${o.showVerticalScrollbar.value?o.scrollBarSize.value||15:0}px)`,overflowX:"hidden",overflowY:"auto",height:"100%"})),ie=h(()=>o.pageData.value.length===0),se=h(()=>e.bodyWidth-o.rightWidth.value>o.leftWidth.value?{position:"absolute",left:`${o.leftWidth.value}px`,height:"100%"}:{display:"none"}),Se=h(()=>o.rightWidth.value?{position:"absolute",left:e.bodyWidth-o.rightWidth.value+"px",height:"100%"}:{display:"none"}),me=h(()=>({[`${e.prefixCls}-body`]:!0,[`${e.prefixCls}-unselectable`]:o.props.rangeSelection!==!1})),ye=h(()=>({[`${e.prefixCls}-fix-left`]:!0,[`${e.prefixCls}-no-columns`]:!y.value.length})),Ke=h(()=>({[`${e.prefixCls}-fix-right`]:!0,[`${e.prefixCls}-no-columns`]:!C.value.length})),Ie=h(()=>({[`${e.prefixCls}-center`]:!0,[`${e.prefixCls}-no-columns`]:!b.value.length})),Me=h(()=>({[`${e.prefixCls}-center-viewport`]:!0})),Le=h(()=>({[`${e.prefixCls}-center-container`]:!0})),ae=h(()=>o.viewportHeight.value+(e.summaryFixed?ke.value:m.value+ke.value)),ve=h(()=>({width:`${o.centerWidth.value}px`,height:`${ae.value}px`})),xe=h(()=>({height:`calc(100% + ${o.scrollBarSize.value||15}px)`})),Ee=h(()=>({height:`${ae.value}px`,width:`${o.bodyMaxWidth.value}px`,minWidth:"100%"})),je=h(()=>({height:`${ae.value}px`,overflow:"hidden",minHeight:"100%",transform:"translateZ(0)"})),D=h(()=>({...l.style||{},maxHeight:typeof e.height=="number"?`${e.height}px`:e.height,overflowY:"hidden"})),O=h(()=>({height:o.showHorizontalScrollbar.value?`calc(100% + ${o.scrollBarSize.value||15}px)`:"calc(100%)",zIndex:"unset !important",overflowX:"auto",overflowY:"hidden"})),le=h(()=>({height:`${ae.value}px`})),w=h(()=>{const W=`${o.leftWidth.value}px`;return{width:W,minWidth:W,maxWidth:W,height:`${ae.value}px`}}),$=h(()=>{const W=`${o.rightWidth.value}px`;return{width:W,minWidth:W,maxWidth:W,height:`${ae.value}px`}}),P=h(()=>({[`${e.prefixCls}-summary`]:!0,[`${e.prefixCls}-position-absolute`]:!ie.value})),U=h(()=>[P.value,`${e.prefixCls}-summary-fixed`,`${e.prefixCls}-summary-fixed-${e.summaryFixed}`]),Z=h(()=>{const W={height:`${m.value}px`};return Object.assign(W,e.summaryFixed?K.value?{borderTop:"none"}:{}:{position:"absolute",bottom:0,width:`${e.bodyWidth}px`,borderTop:"none"})}),re=h(()=>{if(typeof o.props.sticky=="object"){const{offsetHeader:W=0,topSummary:he=!1}=o.props.sticky;return he?{...Z.value,position:"sticky",top:`${W+o.realHeaderHeight.value}px`}:Z.value}return Z.value}),ue=h(()=>({width:`${e.bodyWidth}px`}));return _a(a,W=>{var he;const Ce=(he=W[0])==null?void 0:he.contentRect;t("update:bodyWidth",Ce?.width||0),t("update:bodyHeight",Ce?.height||0)}),{bodyContainerStyle:O,measureDomStyle:h(()=>({width:"100%",height:"100%!important",position:"absolute!important",fontSize:"100px!important",opacity:"0.1!important",textAlign:"center!important",top:"0px!important",left:"0px!important",pointerEvents:"none",display:"block!important",color:"#000000!important",margin:"0px!important",padding:"0px!important",transform:"unset!important",visibility:"visible!important",zIndex:"999!important"})),isEmpty:ie,emptyStyle:ue,handleEmptyHeight:W=>{ke.value=W.detail.height},bodyClass:me,fixLeftClass:ye,fixRightClass:Ke,centerClass:Ie,containerClass:Le,summaryViewportClass:Me,summaryClass:P,rightStyle:$,centerStyle:le,leftStyle:w,summaryViewportStyle:xe,containerStyle:ve,summaryStyle:Z,viewportHeight:ae,leftColumns:y,centerColumns:b,rightColumns:C,bodyInnerWidth:pe,handleBodyInnerResize:W=>{pe.value=W.detail.width},handleBodyScrollResize:W=>{t("update:bodyScrollWidth",W.detail.width)},bodyRef:i,measureDomRef:a,bodyInnerRef:c,viewportRef:v,summaryViewportRef:f,handleResize:W=>{m.value=W.detail.height},bodyStyle:D,handleBodyResize:W=>{t("update:bodyWidth",W.detail.width),t("update:bodyHeight",W.detail.height)},emptyImage:gl.PRESENTED_IMAGE_SIMPLE,scrollLayerStyle:Ee,getRowClassName:(W,he)=>{const Ce=o.props.rowClassName;return typeof Ce=="function"?Ce(W,he):Ce},showWatermark:I,leftPopupContainer:k,centerPopupContainer:N,rightPopupContainer:V,dragRowPlaceholderRef:s,leftShadowStyle:se,rightShadowStyle:Se,fixedSummaryClass:U,scrollLayerRef:r,scrollbarStyle:Te,topSummaryStyle:re,leftTarget:j,centerTarget:M,rightTarget:J,popupContent:L,popupContentPos:S,handleContextmenuPopupResize:()=>{q()},handleDragStart:W=>{if(W.target instanceof HTMLImageElement)return W.preventDefault(),!1},handleKeydown:W=>{t("keydown",W)},bodyViewportStyle:ne,bodyViewportRef:d,bodyContainerRef:p,rowsHeightStyle:je,showYScrollbar:x}}});const Eu={style:{width:"100%",overflow:"hidden",position:"relative",transform:"translateZ(0)"}};function Hu(e,t,l,n,o,u){const s=ee("RenderVNode"),i=ee("RenderSlot"),a=ee("BodyRows"),c=ee("Empty"),r=ee("YScroll"),v=ee("HorizontalScroll"),f=Lt("resize");return T(),te(Be,null,[X(i,null,{default:Re(()=>[e.summary&&e.summaryFixed==="top"?(T(),te("div",{key:"summary",class:_(e.fixedSummaryClass),style:$e(e.topSummaryStyle)},[oe("div",{class:_(e.summaryViewportClass),style:$e(e.summaryViewportStyle)},[oe("div",{ref:"summaryViewportRef",class:_(`${e.prefixCls}-summary-container`),style:{height:"calc(100% + 15px)"}},[Je((T(),te("div",{onResizeheight:t[0]||(t[0]=(...d)=>e.handleResize&&e.handleResize(...d))},[X(s,{vnode:e.summary},null,8,["vnode"])],32)),[[f,void 0,"height"]])],2),oe("div",{class:_(`${e.prefixCls}-cell-shadow-left`),style:$e(e.leftShadowStyle)},null,6),oe("div",{class:_(`${e.prefixCls}-cell-shadow-right`),style:$e(e.rightShadowStyle)},null,6),oe("div",{class:_(`${e.prefixCls}-summary-scrollbar`),style:$e(e.scrollbarStyle)},null,6)],6)],6)):ge("v-if",!0)]),_:1}),oe("div",{key:"body",ref:"bodyRef",class:_(e.bodyClass),style:$e(e.bodyStyle),onDragstart:t[8]||(t[8]=(...d)=>e.handleDragStart&&e.handleDragStart(...d)),onKeydown:t[9]||(t[9]=(...d)=>e.handleKeydown&&e.handleKeydown(...d))},[oe("div",Eu,[oe("div",{ref:"bodyViewportRef",class:_(`${e.prefixCls}-body-viewport-container`),style:$e(e.bodyViewportStyle)},[oe("div",{style:$e(e.rowsHeightStyle)},[oe("div",{ref:"bodyContainerRef",class:_(`${e.prefixCls}-body-container`),style:$e(e.bodyContainerStyle)},[oe("div",{ref:"leftPopupContainer",key:"left",class:_(e.fixLeftClass),style:$e(e.leftStyle)},[e.leftColumns.length?(T(),de(a,{key:0,"get-row-class-name":e.getRowClassName,type:"left","prefix-cls":e.prefixCls,"wrap-text":e.wrapText},null,8,["get-row-class-name","prefix-cls","wrap-text"])):(T(),te("div",{key:1,class:_(`${e.prefixCls}-cell-shadow-left`)},null,2)),e.summary&&!e.summaryFixed?(T(),te("div",{key:"summary",class:_(e.summaryClass),style:$e(e.summaryStyle)},[oe("div",{class:_(e.summaryViewportClass),style:$e(e.summaryViewportStyle)},[oe("div",{ref:"summaryViewportRef",class:_(`${e.prefixCls}-summary-container`)},[Je((T(),te("div",{onResizeheight:t[1]||(t[1]=(...d)=>e.handleResize&&e.handleResize(...d))},[X(s,{vnode:e.summary},null,8,["vnode"])],32)),[[f,void 0,"height"]])],2),oe("div",{style:$e(e.leftShadowStyle),class:_(`${e.prefixCls}-cell-shadow-left`)},null,6),oe("div",{style:$e(e.rightShadowStyle),class:_(`${e.prefixCls}-cell-shadow-right`)},null,6)],6)],6)):ge("v-if",!0),oe("div",{ref:"leftTarget",class:_(`${e.prefixCls}-body-contextmenu-container`)},[Je((T(),te("div",{class:_(`${e.prefixCls}-body-contextmenu-container-inner`),onResize:t[2]||(t[2]=(...d)=>e.handleContextmenuPopupResize&&e.handleContextmenuPopupResize(...d))},[e.popupContentPos==="left"?(T(),de(it(e.popupContent),{key:0})):ge("v-if",!0)],34)),[[f]])],2)],6),oe("div",{key:"center",class:_(e.centerClass),style:$e(e.centerStyle)},[oe("div",{ref:"centerPopupContainer",class:_(e.containerClass),style:$e(e.containerStyle)},[e.centerColumns.length?(T(),de(a,{key:0,"get-row-class-name":e.getRowClassName,type:"center","prefix-cls":e.prefixCls,"wrap-text":e.wrapText},null,8,["get-row-class-name","prefix-cls","wrap-text"])):ge("v-if",!0),oe("div",{ref:"centerTarget",class:_(`${e.prefixCls}-body-contextmenu-container`)},[Je((T(),te("div",{class:_(`${e.prefixCls}-body-contextmenu-container-inner`),onResize:t[3]||(t[3]=(...d)=>e.handleContextmenuPopupResize&&e.handleContextmenuPopupResize(...d))},[e.popupContentPos==="center"?(T(),de(it(e.popupContent),{key:0})):ge("v-if",!0)],34)),[[f]])],2)],6)],6),oe("div",{key:"right",ref:"rightPopupContainer",class:_(e.fixRightClass),style:$e(e.rightStyle)},[e.rightColumns.length?(T(),de(a,{key:0,"get-row-class-name":e.getRowClassName,type:"right","prefix-cls":e.prefixCls,"wrap-text":e.wrapText},null,8,["get-row-class-name","prefix-cls","wrap-text"])):(T(),te("div",{key:1,class:_(`${e.prefixCls}-cell-shadow-right`)},null,2)),oe("div",{ref:"rightTarget",class:_(`${e.prefixCls}-body-contextmenu-container`)},[Je((T(),te("div",{class:_(`${e.prefixCls}-body-contextmenu-container-inner`),onResize:t[4]||(t[4]=(...d)=>e.handleContextmenuPopupResize&&e.handleContextmenuPopupResize(...d))},[e.popupContentPos==="right"?(T(),de(it(e.popupContent),{key:0})):ge("v-if",!0)],34)),[[f,!0]])],2)],6),oe("span",{ref:"dragRowPlaceholderRef",class:_(`${e.prefixCls}-drag-placeholder`)},null,2)],6)],4),e.isEmpty?(T(),te("div",{key:"empty",class:_(`${e.prefixCls}-empty-container`)},[Je((T(),te("div",{style:{padding:"1px"},onResizeheight:t[5]||(t[5]=(...d)=>e.handleEmptyHeight&&e.handleEmptyHeight(...d))},[X(s,{vnode:e.emptyText},{default:Re(()=>[X(c,{image:e.emptyImage},null,8,["image"])]),_:1},8,["vnode"])],32)),[[f,void 0,"height"]])],2)):ge("v-if",!0)],6),oe("div",{ref:"measureDomRef",style:$e(e.measureDomStyle)},null,4),Je(oe("div",{class:_(`${e.prefixCls}-body-scroll-measure`),style:$e(`min-width: ${e.bodyInnerWidth}px`),onResizewidth:t[6]||(t[6]=(...d)=>e.handleBodyScrollResize&&e.handleBodyScrollResize(...d))},null,38),[[f,void 0,"width"]]),Je(oe("div",{class:_(`${e.prefixCls}-body-inner-measure`),style:$e(`min-width: ${e.scrollX}px`),onResizewidth:t[7]||(t[7]=(...d)=>e.handleBodyInnerResize&&e.handleBodyInnerResize(...d))},null,38),[[f,void 0,"width"]])]),X(r,{style:$e(`height: ${e.bodyHeight}px`)},null,8,["style"])],38),X(i,null,{default:Re(()=>[e.summary&&e.summaryFixed==="bottom"?(T(),te("div",{key:"summary",class:_(e.fixedSummaryClass),style:$e(e.summaryStyle)},[oe("div",{class:_(e.summaryViewportClass),style:$e(e.summaryViewportStyle)},[oe("div",{ref:"summaryViewportRef",class:_(`${e.prefixCls}-summary-container`),style:{height:"calc(100% + 15px)"}},[Je((T(),te("div",{onResizeheight:t[10]||(t[10]=(...d)=>e.handleResize&&e.handleResize(...d))},[X(s,{vnode:e.summary},null,8,["vnode"])],32)),[[f,!0,"height"]])],2),oe("div",{style:$e(e.leftShadowStyle),class:_(`${e.prefixCls}-cell-shadow-left`)},null,6),oe("div",{style:$e(e.rightShadowStyle),class:_(`${e.prefixCls}-cell-shadow-right`)},null,6),oe("div",{class:_(`${e.prefixCls}-summary-scrollbar`),style:$e(e.scrollbarStyle)},null,6)],6)],6)):ge("v-if",!0)]),_:1}),X(v)],64)}var Ou=De(Tu,[["render",Hu]]);const vo=[];var Bu=Pe({name:"ProTable",inheritAttrs:!1,directives:{resize:Wt},components:{TableSlotsContextProvider:Li,Spin:lr,MeasureWidth:Vi,Pagination:tr,PopupContainer:Yi,AutoHeightHeader:Ks,ProHeader:Ls,ProBody:Ou},props:Mo(),emits:["update:pagination","scroll","update:selectedRowKeys","update:expandedRowKeys","update:columns","update:sorter","update:filters","expand","expandedRowsChange","resizeColumn","update:dataSource","cellKeydown"],slots:{},setup(e,{expose:t,emit:l,slots:n}){const o=h(()=>{var G;return(G=e.rowKey)!=null?G:"id"}),u=ce(null),s=Ro("custom-ui"),{editCellKeys:i,openEditor:a,closeEditor:c}=Yr();Gr();const r=h(()=>e.getPopupContainer),{status:v,watermarkMsg:f}=Si(),d=new Map,p=F(null),m=F(null),y=new Map,b=F(""),C=ce(null),I=h(()=>e.summaryFixed===!0||e.summaryFixed===""?"bottom":e.summaryFixed),k=F(0);qe(()=>{ht(!(typeof o.value=="function"&&o.value.length>1),"table","`index` parameter of `rowKey` function is deprecated. There is no guarantee that it will work as expected.")});const N=Ze("localeData",{antLocale:{Table:{triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"}}}),V=h(()=>{const G=N?.antLocale||{};return{...G.locale==="zh-cn"?{triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"}:{},...G.Table||{},...e.locale||{}}}),j=F(0),M=F(0),J=F(),g=F(0),E=F(0),L=ce(),S=Ae(()=>{var G,we;return(we=e.scrollX)!=null?we:(G=e.scroll)==null?void 0:G.x}),H=Ae(()=>{var G,we,ze;return(ze=(we=(G=e.scroll)==null?void 0:G.y)!=null?we:e.height)!=null?ze:e.maxHeight}),z=F(typeof S.value=="number"?S.value:0);fe(S,()=>{z.value=typeof S.value=="number"?S.value:0});const q=Ae(()=>!(e.virtual===!1||!H.value)),x=Ae(()=>e.xVirtual||e.virtual!==!1&&e.xVirtual!==!1),K=h(()=>typeof o.value=="function"?o.value:G=>G?.[o.value]),R=ce([]),B=ce([]);let Q,A;fe(()=>e.deepWatchDataSource,()=>{Q&&Q(),Q=fe(()=>e.dataSource,()=>{R.value=yt(e.dataSource)||vo,kt(R)},{immediate:!0,deep:!!e.deepWatchDataSource})},{immediate:!0,deep:!0}),fe(()=>e.deepWatchColumns,()=>{A&&A(),A=fe(()=>e.columns,()=>{B.value=yt(e.columns)||vo,kt(B)},{immediate:!0,deep:!0})},{immediate:!0,deep:!!e.deepWatchColumns});const Y=h(()=>e.childrenColumnName||"children"),{getRecordByKey:pe,getIndexsByKey:ke,getKeyByIndexs:Te,allDataRowKeys:ne,allDataRootRowKeys:ie}=ai(R,Y,K),se=ce([]);qe(()=>{e.defaultExpandedRowKeys&&(se.value=e.defaultExpandedRowKeys),e.defaultExpandAllRows&&(se.value=ne.value)});const Se=h(()=>{const G=e.rowSelection||{},{checkStrictly:we=!0}=G;return{...G,checkStrictly:we}}),me=h(()=>new Set(e.expandedRowKeys||se.value||[])),ye=h(()=>typeof e.loading=="boolean"?{spinning:e.loading}:typeof e.loading=="object"?{spinning:!0,...e.loading}:{spinning:!1});fo(()=>{il({left:0,top:0})});let Ke=()=>{};const Ie=ce(xi()),Me=h(()=>e.size==="small"?39:e.size==="middle"?47:55),Le=h(()=>e.expandedRowRender),ae=Ae(()=>R.value.some(G=>G?.[Y.value])?"nest":Le.value?"row":null),ve=Ae(()=>!!e.expandedRowRender),xe=Pi({props:e,rawColumns:B,bodyScrollWidth:z,baseHeight:Me,measureWidthRef:L,expandable:ve,expandType:ae,scrollLeft:M,bodyWidth:g,xVirtual:x,draggingColumnKey:b,latestRangeStartCell:C}),{sortedData:Ee,sorterStates:je,sorter:D,changeSorter:O}=Ii(e,R,xe.allColumns,(G,we)=>{j.value>E.value&&Xt(),Ke({sorter:G,sorterStates:we},"sort",!1)}),{filterData:le,filterStates:w,filters:$,changeFilter:P}=Ti(e,Ee,xe.allColumns,(G,we)=>{Ke({filters:G,filterStates:we},"filter",!0)}),U=Ae(()=>le.value.length),Z=h(()=>e.pagination===!1?{}:Di(e.pagination,ue.value)),re=(G,we)=>{const ze={...Z.value,current:G,pageSize:we};e["onUpdate:pagination"]&&l("update:pagination",ho(e.pagination)?Object.assign(e.pagination||{},ze):ze)},{mergedPagination:ue,pos:W,refreshPagination:he,onChange:Ce,onShowSizeChange:be,pageData:He}=Fi(U,e,le,(G,we)=>{const ze={...Z.value,current:G,pageSize:we};re(G,we),Xt(),Ke({pagination:ze},"paginate")}),{flattenData:Qe,keyEntities:dt,pageDataRowKeys:et,pageDataEnableRowKeys:Xe,checkboxPropsMap:pt,getRowFlattenIndexByKey:Rt,isMyChildren:Ct,getRowByFlattenIndex:Vt}=Bi(He,Y,me,K,ae,Se),gt=Hi(e,Qe,E,j,q,dt),{rowPosition:al,viewportHeight:jt,startIndex:Ot,endIndex:rl}=gt,{leftWidth:vt,rightWidth:Ye,centerWidth:kl,bodyMaxWidth:Kl}=xe,kn=Sr(e,Se,R,{prefixCls:h(()=>e.prefixCls),pageData:He,getRowKey:K,getRecordByKey:pe,locale:V,keyEntities:dt,checkboxPropsMap:pt,allDataRootRowKeys:ie,pageDataRowKeys:et}),Pl=F();let Kn,Pn;const il=(G={},we="auto",ze=!1)=>{ze||Xt();const Fe=typeof G=="number"?{top:G}:G;let Oe,_e;if("left"in Fe)Oe=Fe.left||0;else if("columnIndex"in Fe){const Ue=xe.getColumnPosition(Fe.columnIndex);Ue&&(Oe=Ue.left-vt.value)}else if("columnKey"in Fe){const Ue=xe.getColumnPositionByKey(Fe.columnKey);Ue&&(Oe=Ue.left-vt.value)}if("top"in Fe)_e=Math.min(Math.max(Fe.top||0,0),En.value);else if("rowKey"in Fe){const Ue=gt.getRowPositionByKey(Fe.rowKey);Ue&&(_e=Ue)}Oe=Math.max(Math.min(Tn.value,Oe||0),0),Ol.value||(_e=0),we==="smooth"?(Oe!==void 0&&(Ne.cancel(Kn),Kn=lo(M.value,Oe,Ue=>{M.value=Ue})),_e!==void 0&&(Ne.cancel(Pn),Pn=lo(j.value,_e,Ue=>{j.value=Ue}))):(Oe!==void 0&&(M.value=Oe),_e!==void 0&&(j.value=_e))},Ut=F(!1),sl=h(()=>{var G;return!!((G=e.animateRows)!=null?G:pr.value)});let In;fe(sl,G=>{Ut.value=G},{immediate:!0});const Xt=()=>{Ut.value=!1,clearTimeout(In),In=setTimeout(()=>{Ut.value=sl.value},100)},Tn=h(()=>Kl.value-g.value),En=h(()=>jt.value-E.value),Hn=G=>{l("scroll",G)};Qr({scrollLeft:M,maxScrollLeft:Tn,onScroll:Hn,bodyWidth:g}),ei({scrollTop:j,maxScrollTop:En,onScroll:Hn,updateAnimate:Xt,bodyWidth:g});const{data:Il,pos:wa}=Ai(e,al,Qe,Ot,rl,p,Ut,Rt,C),Tl=F(!1),El=F(!1),On=F(!1);qe(()=>{Tl.value=St&&!!M.value,El.value=St&&kl.value-(g.value-vt.value-Ye.value)>M.value,On.value=!Tl.value&&!El.value});const Ca=h(()=>Jt({[`${e.prefixCls}`]:!0,[`${e.prefixCls}-support-sticky`]:St,[`${e.prefixCls}-stripe`]:e.stripe,[`${e.prefixCls}-bordered`]:e.bordered,[`${e.prefixCls}-${e.size}`]:!0,[`${e.prefixCls}-ping-left`]:Tl.value,[`${e.prefixCls}-ping-right`]:El.value,[`${e.prefixCls}-no-ping`]:On.value,[`${e.prefixCls}-has-animate`]:sl.value})),ba=h(()=>({height:typeof e.height=="number"?`${e.height}px`:e.height,maxHeight:typeof e.maxHeight=="number"?`${e.maxHeight}px`:e.maxHeight,minHeight:typeof e.minHeight=="number"?`${e.minHeight}px`:e.minHeight})),Hl=F(!1),Sa=nr(()=>{Hl.value=Kl.value>g.value,g.value>z.value&&(z.value=g.value)},100);fe([Kl,g],()=>{Sa()});const Ol=Ae(()=>!!H.value&&E.value+.9<jt.value),xa=Ae(()=>!e.scroll||e.scroll&&e.scroll.scrollToFirstRowOnChange!==!1);Ke=(G,we,ze=!1)=>{var Fe,Oe,_e;ze&&(he(),re(1,ue.value.pageSize),e.pagination&&((Oe=(Fe=e.pagination).onChange)==null||Oe.call(Fe,1,ue.value.pageSize))),xa.value&&(j.value=0),(_e=e.onChange)==null||_e.call(e,G.pagination||ue.value,G.filters||$.value,G.sorter||D.value,{currentDataSource:G.currentDataSource||le.value,action:we})};const $a=h(()=>It(ue.value,["position","onChange","onShowSizeChange"])),Ra=h(()=>({[`${e.prefixCls}-pagination`]:!0,[`${e.prefixCls}-pagination-${W.value.bottom}`]:!0,[`${s}`]:!0})),Bn=F(0),ka=h(()=>{var G,we;return e.paginationSticky?e.paginationSticky===!0?{position:"sticky","z-index":9,bottom:"0px"}:{position:"sticky","z-index":9,bottom:`${(we=(G=e.paginationSticky)==null?void 0:G.offsetBottom)!=null?we:0}px`}:{}}),Ka=h(()=>typeof e.indentSize=="number"?e.indentSize:15),Bl=zi({leftColumns:xe.leftColumns,rightColumns:xe.rightColumns,visibleCenterColumns:xe.visibleCenterColumns,allColumns:xe.allColumns,data:Il,mergedRowHeights:gt.mergedRowHeights,getColumnPosition:xe.getColumnPosition,bodyWidth:g,leftWidth:vt,centerWidth:kl,getRowHeight:gt.getRowHeight,customCell:Va(e,"customCell")});fe([k,M],()=>{var G,we;(we=(G=u.value)==null?void 0:G.alignPopup)==null||we.call(G)},{flush:"post"}),ti({...gt,...xe,...Bl,rootRef:J,rawData:R,getRowFlattenIndexByKey:Rt,prefixCls:h(()=>e.prefixCls),draggingRowKey:p,insertToRowKey:m,status:v,useAnimate:Ut,animateRows:sl,watermarkMsg:f,onResizeColumn:(G,we,ze)=>{var Fe;const Oe=we.width;((Fe=e.onResizeColumn)==null?void 0:Fe.call(e,G,we,ze))!==!1&&!(Oe===G&&we.width===G)&&(we.width=Oe!==we.width?we.width:G,kt(B))},onRowDragEnd:G=>{var we;const{insertToRowKey:ze,record:Fe,fromIndexs:Oe,rowKey:_e,dir:Ue,preTargetInfo:tt,nextTargetInfo:Bt}=G,ft=yt(Fe),Dl=(we=e.onRowDragEnd)==null?void 0:we.call(e,{...G,record:ft,fromIndexs:Oe});if(Dl===!1)return;const An=()=>{if(!Ct(_e,tt?.rowKey)&&ze!==_e){if(ze!==null){const zn=pe(ze);ze===tt?.rowKey||ze===Bt?.rowKey?Ue===qt?(Dt(zn[Y.value],[],Y.value,ft),Mt(R.value,Oe,Y.value)):(Mt(R.value,Oe,Y.value),Dt(zn[Y.value],[],Y.value,ft)):Ue===qt?(Dt(R.value,tt?.indexs,Y.value,ft),Mt(R.value,Oe,Y.value)):(Mt(R.value,Oe,Y.value),Dt(R.value,tt?.indexs,Y.value,ft))}else Ue===qt&&tt?(Dt(R.value,[tt.indexs[0]],Y.value,ft),Mt(R.value,Oe,Y.value)):Ue===zo&&Bt&&(Mt(R.value,Oe,Y.value),Dt(R.value,tt?.indexs?[tt.indexs[0]]:[],Y.value,ft));kt(R),l("update:dataSource",R.value)}};jn(Dl)?Dl.then(()=>{An()}).catch(()=>{}):An()},virtual:q,xVirtual:x,dataRowPosition:wa,rawColumns:B,bodyHeight:E,scrollTop:j,scrollLeft:M,supportSticky:St,childrenColumnName:Y,bodyScrollWidth:z,baseHeight:Me,startIndex:Ot,data:Il,pageData:He,getRecordByKey:pe,getIndexsByKey:ke,expandType:ae,flattenData:Qe,expandedRowKeys:me,indentSize:Ka,props:e,bodyWidth:g,scrollTo:il,scrollBarSize:Ie,leftWidth:vt,rightWidth:Ye,centerWidth:kl,showVerticalScrollbar:Ol,showHorizontalScrollbar:Hl,getRowKey:K,selection:kn,updateSelectedRowKeys:G=>{l("update:selectedRowKeys",G)},locale:V,sorterStates:je,changeSorter:O,changeFilter:P,filterStates:w,onTriggerExpand:(G,we)=>{let ze;const Fe=me.value.has(we);Fe?(me.value.delete(we),ze=[...me.value]):ze=[...me.value,we],se.value=ze,l("update:expandedRowKeys",ze),l("expand",!Fe,G),l("expandedRowsChange",ze)},keyEntities:dt,pageDataRowKeys:et,pageDataEnableRowKeys:Xe,checkboxPropsMap:pt,mergedRowSelection:Se,getPopupContainer:r,allDataRowKeys:ne,allDataRootRowKeys:ie,dragRowsHandle:d,isMyChildren:Ct,getKeyByIndexs:Te,getRowByFlattenIndex:Vt,draggingColumnKey:b,dragColumnsHandle:y,onColumnDragEnd:G=>{var we;const{dir:ze,column:Fe,targetColumn:Oe}=G,_e=(we=e.onColumnDragEnd)==null?void 0:we.call(e,G);if(_e===!1)return;const Ue=()=>{if(Fe===Oe||Fe.key===Oe.key)return;const tt=B.value.findIndex(ft=>ft===Fe||ft.key===Fe.key),Bt=B.value.findIndex(ft=>ft===Oe||ft.key===Oe.key);ze===Ur?(B.value.splice(tt,1),B.value.splice(Bt,0,Fe)):(B.value.splice(Bt+1,0,Fe),B.value.splice(tt,1)),kt(B),l("update:columns",B.value)};jn(_e)?_e.then(()=>{Ue()}).catch(()=>{}):Ue()},onColumnDrag:()=>{},columnDrag:h(()=>e.columnDrag),summaryFixed:I,realHeaderHeight:k,bottomPaginationHeight:Bn,pos:W});const Dn=F(),Mn=F(),{navigationService:Fn,getSelectedRange:Pa,clearAllSelectedRange:Ia,copySelectedRange:Ta,appendCellToSelectedRange:Ea,onBodyKeydown:Ha}=oi({allColumns:xe.allColumns,flattenData:Qe,rangeSelection:h(()=>e.rangeSelection),getRowByFlattenIndex:Vt,rootRef:J,prefixCls:h(()=>e.prefixCls),allCellProps:Bl.allCellProps,tabGuardTopRef:Dn,tabGuardBottomRef:Mn,ensureCellColumnVisible:G=>{if(!G.column||G.column.fixed)return;const we=M.value,ze=xe.getColumnPositionByKey(G.column.columnKey);if(ze){const{width:Fe,left:Oe}=ze,_e=vt.value,Ue=Ye.value;Oe-_e<we?M.value=Oe-_e:Oe+Fe>we+g.value-Ue&&(M.value=Oe+Fe-g.value+Ue)}},ensureCellRowVisible:G=>{var we;const{rowIndex:ze}=G,Fe=j.value,Oe=Vt(ze),_e=gt.getRowPositionByKey(Oe.rowKey),Ue=(((we=Bl.allCellProps.value[Oe.rowKey])==null?void 0:we[G.column.columnKey])||{}).props||{},tt=gt.getRowHeight(ze,Ue.rowSpan);_e!==void 0&&(Xt(),_e<Fe?j.value=_e:_e+tt>Fe+E.value&&(j.value=_e+tt-E.value))},latestRangeStartCell:C,bodyRef:h(()=>{var G;return(G=Pl.value)==null?void 0:G.bodyRef}),scrollLeft:M,scrollTop:j,scrollTo:il,showVerticalScrollbar:Ol,showHorizontalScrollbar:Hl,getIndexsByKey:ke,formatRangeCellText:G=>e.formatRangeCellText?e.formatRangeCellText(G):G.value?G.value:"",editCellKeys:i,copyDelimiter:h(()=>e.copyDelimiter)});return t({scrollTo:il,scrollLeft:M,scrollTop:j,bodyRef:h(()=>{var G;return(G=Pl.value)==null?void 0:G.bodyRef}),getSelectedRange:Pa,clearAllSelectedRange:Ia,copySelectedRange:Ta,appendCellToSelectedRange:Ea,openEditor:G=>{a(G.map(we=>`${we.rowKey} ${we.columnKey}`))},closeEditor:G=>{G?c(G.map(we=>`${we.rowKey} ${we.columnKey}`)):c()}}),{bodyRef:Pl,spinProps:ye,rowPosition:al,viewportHeight:jt,startIndex:Ot,data:Il,watermarkMsg:f,rootStyle:ba,rootClass:Ca,onBodyKeydown:Ha,watermarkStyle:h(()=>({minWidth:"100px!important",minHeight:"40px!important",position:"absolute!important",fontSize:"20px!important",opacity:"0.8!important",bottom:"40px!important",right:"40px!important",pointerEvents:"none",display:"block!important",zIndex:"999999!important",color:"#000000!important",margin:"0px!important",padding:"0px!important",transform:"unset!important"})),mergedPagination:ue,pos:W,onPaginationChange:Ce,scrollBarSize:Ie,scrollTop:j,bodyScrollWidth:z,bodyWidth:g,scrollLeft:M,cal:gt,selection:kn,locale:V,paginationProps:$a,slots:n,mergedScrollX:S,mergedScrollY:H,bodyHeight:E,measureWidthRef:L,flattenData:Qe,rootRef:J,mergedSummaryFixed:I,handleResize:G=>{k.value=G.detail.height},handlePaginationResize:G=>{Bn.value=G.detail.height},popupContainer:u,handleGuardTopKeydown:G=>{G.keyCode!==Ge.TAB||G.shiftKey||(Fn.getFirstCellToFocus(G.shiftKey),G.preventDefault())},handleGuardBottomKeydown:G=>{G.keyCode===Ge.TAB&&G.shiftKey&&(Fn.getLastCellToFocus(G.shiftKey),G.preventDefault())},tabGuardTopRef:Dn,tabGuardBottomRef:Mn,onShowSizeChange:be,customUiCls:s,paginationClass:Ra,bottomPaginationStyle:ka}}});function Du(e,t,l,n,o,u){const s=ee("Pagination"),i=ee("AutoHeightHeader"),a=ee("ProHeader"),c=ee("ProBody"),r=ee("PopupContainer"),v=ee("Spin"),f=ee("MeasureWidth"),d=ee("TableSlotsContextProvider"),p=Lt("resize");return T(),de(d,{value:{...e.slots}},{default:Re(()=>[X(v,Nt(dn(e.spinProps)),{default:Re(()=>[e.pos.top?(T(),de(s,We({key:0,class:`${e.prefixCls}-pagination ${e.prefixCls}-pagination-${e.pos.top} ${e.customUiCls}`},e.paginationProps,{onChange:e.onPaginationChange,onShowSizeChange:e.onShowSizeChange}),null,16,["class","onChange","onShowSizeChange"])):ge("v-if",!0),oe("div",{ref:"tabGuardTopRef",role:"presentation",tabindex:"0",style:{position:"absolute",width:"0",height:"0"},onKeydown:t[0]||(t[0]=(...m)=>e.handleGuardTopKeydown&&e.handleGuardTopKeydown(...m))},null,544),oe("div",{key:"content",ref:"ref",class:_(e.rootClass),style:$e(e.rootStyle)},[e.showHeader?(T(),te(Be,{key:0},[e.autoHeaderHeight?(T(),de(i,{key:0,"prefix-cls":e.prefixCls,sticky:e.sticky,onResizeheight:e.handleResize},null,8,["prefix-cls","sticky","onResizeheight"])):(T(),de(a,{key:1,"prefix-cls":e.prefixCls,sticky:e.sticky,onResizeheight:e.handleResize},null,8,["prefix-cls","sticky","onResizeheight"]))],64)):ge("v-if",!0),X(c,{ref:"bodyRef",bodyScrollWidth:e.bodyScrollWidth,"onUpdate:bodyScrollWidth":t[1]||(t[1]=m=>e.bodyScrollWidth=m),bodyWidth:e.bodyWidth,"onUpdate:bodyWidth":t[2]||(t[2]=m=>e.bodyWidth=m),bodyHeight:e.bodyHeight,"onUpdate:bodyHeight":t[3]||(t[3]=m=>e.bodyHeight=m),"prefix-cls":e.prefixCls,"wrap-text":e.wrapText,"scroll-x":e.mergedScrollX,height:e.mergedScrollY,"summary-fixed":e.mergedSummaryFixed,summary:e.$slots.summary,"empty-text":e.$slots.emptyText,onKeydown:e.onBodyKeydown},null,8,["bodyScrollWidth","bodyWidth","bodyHeight","prefix-cls","wrap-text","scroll-x","height","summary-fixed","summary","empty-text","onKeydown"])],6),oe("div",{ref:"tabGuardBottomRef",role:"presentation",tabindex:"0",style:{position:"absolute",width:"0",height:"0"},onKeydown:t[4]||(t[4]=(...m)=>e.handleGuardBottomKeydown&&e.handleGuardBottomKeydown(...m))},null,544),e.$slots.footer?(T(),te("div",{key:"footer",class:_(`${e.prefixCls}-footer`)},[ut(e.$slots,"footer")],2)):ge("v-if",!0),X(r,{ref:"popupContainer","prefix-cls":e.prefixCls},null,8,["prefix-cls"]),e.pos.bottom?Je((T(),te("div",{key:2,style:$e(e.bottomPaginationStyle),class:_(`${e.prefixCls}-pagination-wrap`),onResizeheight:t[5]||(t[5]=(...m)=>e.handlePaginationResize&&e.handlePaginationResize(...m))},[X(s,We({class:e.paginationClass},e.paginationProps,{onChange:e.onPaginationChange,onShowSizeChange:e.onShowSizeChange}),null,16,["class","onChange","onShowSizeChange"])],38)),[[p,void 0,"height"]]):ge("v-if",!0)]),_:3},16),X(f,{ref:"measureWidthRef"},null,512)]),_:3},8,["value"])}var Mu=De(Bu,[["render",Du]]),Fu=Pe({name:"TableToolBarSearch",inheritAttrs:!1,components:{AInputSearch:or},emits:["search"],setup(e,{emit:t,attrs:l}){var n,o;const u=F((o=(n=l.defaultValue)!=null?n:l.value)!=null?o:""),s=Et();return{attrs:l,intl:s,searchValue:u,onSearch:a=>{t("search",a)}}}});function Au(e,t,l,n,o,u){var s;const i=ee("AInputSearch");return T(),de(i,We({"allow-clear":"",placeholder:e.attrs.placeholder||e.intl.getMessage("form.inputPlaceholder","请输入"),style:(s=e.attrs.style)!=null?s:{width:"200px"}},e.attrs,{value:e.searchValue,"onUpdate:value":t[0]||(t[0]=a=>e.searchValue=a),onSearch:e.onSearch}),null,16,["placeholder","style","value","onSearch"])}var zu=De(Fu,[["render",Au]]),Lu=Pe({name:"DensityIcon",inheritAttrs:!1,components:{Dropdown:fn,Tooltip:Ht,AMenu:vn,ColumnHeightOutlined:Xl},props:{prefixCls:String},setup(){const e=Et(),t=xl(),l=h(()=>({selectedKeys:[t.tableSize.value],onClick:({key:n})=>{var o;(o=t.setTableSize)==null||o.call(t,n)},items:[{key:"default",label:e.getMessage("tableToolBar.densityLarger","宽松")},{key:"middle",label:e.getMessage("tableToolBar.densityMiddle","中等")},{key:"small",label:e.getMessage("tableToolBar.densitySmall","紧凑")}]}));return{h:Ft,intl:e,menuProps:l,ColumnHeightOutlined:Xl}}});function Nu(e,t,l,n,o,u){const s=ee("ColumnHeightOutlined"),i=ee("Tooltip"),a=ee("AMenu"),c=ee("Dropdown");return T(),de(c,{trigger:"click",overlayStyle:{width:"80px"}},{overlay:Re(()=>[X(a,Nt(dn(e.menuProps)),null,16)]),default:Re(()=>[X(i,{title:e.intl.getMessage("tableToolBar.density","密度")},{default:Re(()=>[oe("div",{class:_(`${e.prefixCls}-toolbar-actions-item`)},[X(s)],2)]),_:1},8,["title"])]),_:1})}var Wu=De(Lu,[["render",Nu]]),_u=Pe({name:"CheckboxListItem",inheritAttrs:!1,components:{Tooltip:Ht,VerticalAlignMiddleOutlined:ir,VerticalAlignTopOutlined:rr,VerticalAlignBottomOutlined:ar},props:{className:String,title:String,columnKey:[String,Number],fixed:[Boolean,String],isRoot:Boolean},setup(e){const{columnsMap:t,setColumnsMap:l}=xl();return{intl:Et(),onClick:u=>{var s,i;const a=t.value[(s=e.columnKey)!=null?s:""]||{},c={...t.value,[(i=e.columnKey)!=null?i:""]:{...a,fixed:u}};l(c)}}}});function Vu(e,t,l,n,o,u){const s=ee("VerticalAlignTopOutlined"),i=ee("Tooltip"),a=ee("VerticalAlignMiddleOutlined"),c=ee("VerticalAlignBottomOutlined");return T(),te("span",{class:_(`${e.className}-list-item`),key:e.columnKey},[oe("div",{class:_(`${e.className}-list-item-title`)},[ut(e.$slots,"default")],2),e.isRoot?(T(),te("span",{key:0,class:_(`${e.className}-list-item-option`)},[e.fixed!=="left"?(T(),de(i,{key:0,title:e.intl.getMessage("tableToolBar.leftPin","固定在列首")},{default:Re(()=>[oe("span",{onClick:t[0]||(t[0]=st(r=>e.onClick("left"),["stop","prevent"]))},[X(s)])]),_:1},8,["title"])):ge("v-if",!0),e.fixed?(T(),de(i,{key:1,title:e.intl.getMessage("tableToolBar.noPin","不固定")},{default:Re(()=>[oe("span",{onClick:t[1]||(t[1]=st(r=>e.onClick(),["stop","prevent"]))},[X(a)])]),_:1},8,["title"])):ge("v-if",!0),e.fixed!=="right"?(T(),de(i,{key:2,title:e.intl.getMessage("tableToolBar.rightPin","固定在列尾")},{default:Re(()=>[oe("span",{onClick:t[2]||(t[2]=st(r=>e.onClick("right"),["stop","prevent"]))},[X(c)])]),_:1},8,["title"])):ge("v-if",!0)],2)):ge("v-if",!0)],2)}var ju=De(_u,[["render",Vu]]),Uu=Pe({name:"CheckboxList",inheritAttrs:!1,components:{Tree:sr,CheckboxListItem:ju,RenderVNode:un},props:{className:String,title:String,checkable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},showTitle:{type:Boolean,default:!0},listHeight:{type:Number,default:void 0},list:{type:Array,default:()=>[]}},setup(e){const{columnsMap:t,setColumnsMap:l,sortKeyColumns:n,setSortKeyColumns:o}=xl(),u=ce([]),s=new Map,i=F([]),a=h(()=>e.list&&e.list.length>0),c=(f,d)=>f.map(({key:p,children:m,...y})=>{var b,C;const I=Tt(p,[d?.columnKey,y.index||"0"].filter(Boolean).join("-")),k=t.value[I||"null"]||{show:!0};k.show!==!1&&!m&&u.value.push(I);const N={key:I,...It(y,["className"]),selectable:!1,disabled:k.disable===!0,disableCheckbox:typeof k.disable=="boolean"?k.disable:(b=k.disable)==null?void 0:b.checkbox,isLeaf:d?!0:void 0,isRoot:!d};return m&&(N.children=c(m,{...k,columnKey:I}),(C=N.children)!=null&&C.every(V=>{var j;return(j=u.value)==null?void 0:j.includes(V.key)})&&u.value.push(I)),s.set(p,N),N});return fe([t,()=>e.list,a],()=>{u.value=[];const f=c(e.list);kt(u),i.value=f?.map(d=>It(d,["disabled"]))},{immediate:!0}),{show:a,treeData:i,checkedKeys:u,onCheckTree:f=>{const d={...t.value},p=m=>{var y,b,C;const I={...d[m]};I.show=f.checked,(y=s?.get(m))!=null&&y.children&&((C=(b=s.get(m))==null?void 0:b.children)==null||C.forEach(k=>p(k.key))),d[m]=I};p(f.node.key),l({...d})},move:(f,d,p)=>{const m={...t.value},y=[...n.value],b=y.findIndex(N=>N===f),C=y.findIndex(N=>N===d),I=p>b;if(b<0)return;const k=y[b];y.splice(b,1),p===0?y.unshift(k):y.splice(I?C:C+1,0,k),y.forEach((N,V)=>{m[N]={...m[N]||{},order:V}}),l(m),o(y)}}}});const Xu={style:{"max-height":"260px",overflow:"auto"}};function Yu(e,t,l,n,o,u){var s,i;const a=ee("RenderVNode"),c=ee("CheckboxListItem"),r=ee("Tree");return e.show?(T(),te(Be,{key:0},[e.showTitle?(T(),te("span",{key:0,class:_(`${e.className}-list-title`)},wt(e.title),3)):ge("v-if",!0),oe("div",Xu,[X(r,{"block-node":"",selectable:!1,checkable:e.checkable,draggable:e.draggable&&!!((s=e.treeData)!=null&&s.length)&&((i=e.treeData)==null?void 0:i.length)>1,checkedKeys:e.checkedKeys,height:e.listHeight,treeData:e.treeData,onCheck:t[0]||(t[0]=(v,f)=>e.onCheckTree(f)),onDrop:t[1]||(t[1]=v=>{const f=v.node.key,d=v.dragNode.key,{dropPosition:p,dropToGap:m}=v,y=p===-1||!m?p+1:p;e.move(d,f,y)})},{title:Re(({title:v,key:f,fixed:d,isRoot:p})=>[v?(T(),de(c,{key:0,className:e.className,columnKey:f,fixed:d,isRoot:p},{default:Re(()=>[X(a,{vnode:v},null,8,["vnode"])]),_:2},1032,["className","columnKey","fixed","isRoot"])):ge("v-if",!0)]),_:1},8,["checkable","draggable","checkedKeys","height","treeData"])])],64)):ge("v-if",!0)}var Gu=De(Uu,[["render",Yu]]),qu=Pe({name:"GroupCheckboxList",components:{CheckboxList:Gu},inheritAttrs:!1,props:{className:String,checkable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},listsHeight:{type:Number,default:void 0},localColumns:{type:Array,default:()=>[]}},setup(e){const t=Et(),l=F([]),n=F([]),o=F([]);fe(()=>e.localColumns,()=>{const a=[],c=[],r=[];e.localColumns.forEach(v=>{if(v.hideInSetting)return;const{fixed:f}=v;if(f==="left"||f===!0){c.push(v);return}if(f==="right"){a.push(v);return}r.push(v)}),l.value=a,n.value=c,o.value=r},{immediate:!0});const u=h(()=>l.value&&l.value.length>0),s=h(()=>n.value&&n.value.length>0),i=h(()=>({[`${e.className}-list`]:!0,[`${e.className}-list-group`]:u.value||s.value}));return{intl:t,showRight:u,showLeft:s,rightList:l,leftList:n,list:o,listClass:i}}});function Ju(e,t,l,n,o,u){const s=ee("CheckboxList");return T(),te("div",{class:_(e.listClass)},[X(s,{title:e.intl.getMessage("tableToolBar.leftFixedTitle","固定在左侧"),list:e.leftList,checkable:e.checkable,draggable:e.draggable,className:e.className,listsHeight:e.listsHeight},null,8,["title","list","checkable","draggable","className","listsHeight"]),X(s,{title:e.intl.getMessage("tableToolBar.noFixedTitle","不固定"),list:e.list,checkable:e.checkable,draggable:e.draggable,className:e.className,showTitle:e.showLeft||e.showRight,listsHeight:e.listsHeight},null,8,["title","list","checkable","draggable","className","showTitle","listsHeight"]),X(s,{title:e.intl.getMessage("tableToolBar.rightFixedTitle","固定在右侧"),list:e.rightList,checkable:e.checkable,draggable:e.draggable,className:e.className,listsHeight:e.listsHeight},null,8,["title","list","checkable","draggable","className","listsHeight"])],2)}var Zu=De(qu,[["render",Ju]]),Qu=Pe({name:"ColumnSetting",inheritAttrs:!1,props:{prefixCls:String,checkable:{type:Boolean,default:!0},checkedReset:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},listsHeight:{type:Number,default:void 0},columns:{type:Array,default:()=>[]}},components:{Popover:mo,Tooltip:Ht,Checkbox:ur,GroupCheckboxList:Zu,SettingOutlined:Co},setup(e){const t=Et(),l=F(null),n=xl(),o=h(()=>`${e.prefixCls}-column-setting`),u=h(()=>e.columns),{columnsMap:s,setColumnsMap:i,clearPersistenceStorage:a}=n;mt(()=>{var p,m;(p=n.props.columnsState)!=null&&p.value&&(l.value=JSON.parse(JSON.stringify(((m=n.props.columnsState)==null?void 0:m.value)||{})))});const c=(p=!0)=>{const m={},y=b=>{b.forEach(({key:C,fixed:I,index:k,children:N,disable:V})=>{var j,M;const J=Tt(C,k);J&&(m[J]={show:V?(j=s[J])==null?void 0:j.show:p,fixed:I,disable:V,order:(M=s[J])==null?void 0:M.order}),N&&y(N)})};y(u.value),i(m)},r=p=>{p.target.checked?c():c(!1)},v=()=>{var p;a?.(),i({...n.defaultColumnKeyMap.value,...((p=n.props.columnsState)==null?void 0:p.defaultValue)||l.value})},f=h(()=>Object.values(s.value).filter(p=>!p||p.show===!1)),d=h(()=>f.value.length>0&&f.value.length!==u.value.length);return{intl:t,indeterminate:d,unCheckedKeys:f,localColumns:u,clearClick:v,checkedAll:r,setAllSelectAction:c,className:o}}});const ec={key:1};function tc(e,t,l,n,o,u){const s=ee("SettingOutlined"),i=ee("Tooltip"),a=ee("Checkbox"),c=ee("GroupCheckboxList"),r=ee("Popover");return T(),de(r,{trigger:"click",placement:"bottomLeft",arrow:!1,"overlay-class-name":`${e.className}-popover`,"overlay-style":{paddingTop:"0",width:"224px"}},{title:Re(()=>[oe("div",{class:_(`${e.className}-title`)},[e.checkable?(T(),de(a,{key:0,indeterminate:e.indeterminate,checked:e.unCheckedKeys.length===0&&e.unCheckedKeys.length!==e.localColumns.length,onChange:e.checkedAll},{default:Re(()=>[At(wt(e.intl.getMessage("tableToolBar.columnDisplay","列展示")),1)]),_:1},8,["indeterminate","checked","onChange"])):(T(),te("div",ec)),e.checkedReset?(T(),te("a",{key:2,class:_(`${e.className}-action-rest-button`),onClick:t[0]||(t[0]=(...v)=>e.clearClick&&e.clearClick(...v))},wt(e.intl.getMessage("tableToolBar.reset","重置")),3)):ge("v-if",!0)],2)]),content:Re(()=>[X(c,{checkable:e.checkable,draggable:e.draggable,className:e.className,localColumns:e.localColumns,listsHeight:e.listsHeight},null,8,["checkable","draggable","className","localColumns","listsHeight"])]),default:Re(()=>[X(i,{title:e.intl.getMessage("tableToolBar.columnSetting","列设置")},{default:Re(()=>[oe("div",{class:_(`${e.prefixCls}-toolbar-actions-item`)},[X(s)],2)]),_:1},8,["title"])]),_:1},8,["overlay-class-name"])}var lc=De(Qu,[["render",tc]]),nc=Pe({name:"TableToolBar",inheritAttrs:!1,components:{Space:bo,ProSearch:zu,DensityIcon:Wu,Tooltip:Ht,ColumnSetting:lc,ReloadOutlined:cr,InfoCircleOutlined:go},props:{prefixCls:String,title:String,subTitle:String,tooltip:String,options:{type:[Object,Boolean],default:void 0},actionsRef:Object,selectedRowKeys:{type:Array,default:()=>[]},selectedRows:{type:Array,default:()=>[]},tableColumn:{type:Array,default:()=>[]},onFormSearchSubmit:{type:Function,default:void 0}},setup(e){const t=Et(),l={reload:()=>{var a;return(a=e.actionsRef)==null?void 0:a.reload()},density:!0,setting:!0,filter:!1,search:!1},n=h(()=>e.options===!1?{}:{...l,...e.options}),o={onChange:a=>{e.actionsRef.keyword.value=a.target.value}},u=h(()=>{var a;return e.options===!1||!n.value.search?!1:n.value.search===!0?o:It({...(a=n.value.search)!=null?a:{},...o},["name","onSearch"])}),s=async a=>{var c,r,v;if(!e.options||!e.options.search)return;const{name:f="keyword"}=e.options.search===!0?{}:e.options.search;((r=(c=e.options.search)==null?void 0:c.onSearch)==null?void 0:r.call(c,a))!==!1&&((v=e.onFormSearchSubmit)==null||v.call(e,$o({[f]:a})))},i=a=>{var c,r;n.value.reload!==!1&&typeof n.value.reload!="boolean"&&((r=(c=n.value).reload)==null||r.call(c,a,e.actionsRef))};return mt(()=>{(u.value.value||u.value.defaultValue)&&(e.actionsRef.keyword.value=u.value.value||u.value.defaultValue)}),{h:Ft,intl:t,mergeOptions:n,searchConfig:u,FilterOutlined:dr,SettingOutlined:Co,ColumnHeightOutlined:Xl,onSearch:s,onReload:i}}});function oc(e,t,l,n,o,u){const s=ee("InfoCircleOutlined"),i=ee("Tooltip"),a=ee("ProSearch"),c=ee("Space"),r=ee("ReloadOutlined"),v=ee("DensityIcon"),f=ee("ColumnSetting");return T(),te("div",{class:_(`${e.prefixCls}-toolbar`)},[oe("div",{class:_(`${e.prefixCls}-toolbar-container`)},[ut(e.$slots,"toolbar",{},()=>[oe("div",{class:_(`${e.prefixCls}-toolbar-left`)},[e.title||e.$slots.title?(T(),te("div",{key:0,class:_(`${e.prefixCls}-toolbar-title`)},[ut(e.$slots,"title",{},()=>[At(wt(e.title),1)]),oe("div",{class:_(`${e.prefixCls}-toolbar-subtitle`)},wt(e.subTitle),3),e.tooltip?(T(),de(i,{key:0,title:e.tooltip},{default:Re(()=>[X(s,{style:{"margin-inline-start":"3px"}})]),_:1},8,["title"])):ge("v-if",!0)],2)):ge("v-if",!0),e.options!==!1?(T(),de(c,{key:1,class:_(`${e.prefixCls}-toolbar-options`)},{default:Re(()=>[e.mergeOptions.search!==!1&&!(e.title||e.$slots.title)?(T(),de(a,We({key:0},e.searchConfig,{onSearch:e.onSearch}),null,16,["onSearch"])):ge("v-if",!0),ut(e.$slots,"searchExtra",{setParams:e.actionsRef.setParams})]),_:3},8,["class"])):ge("v-if",!0)],2),oe("div",{class:_(`${e.prefixCls}-toolbar-right`)},[X(c,{class:_(`${e.prefixCls}-toolbar-actions`)},{default:Re(()=>[e.mergeOptions.search!==!1&&(e.title||e.$slots.title)?(T(),de(a,We({key:0},e.searchConfig,{onSearch:e.onSearch}),null,16,["onSearch"])):ge("v-if",!0),ut(e.$slots,"actions",{setParams:e.actionsRef.setParams}),e.options!==!1?(T(),te(Be,{key:1},[e.mergeOptions.reload!==!1?(T(),de(i,{key:0,title:e.intl.getMessage("tableToolBar.reload","刷新")},{default:Re(()=>{var d;return[oe("div",{class:_(`${e.prefixCls}-toolbar-actions-item`)},[X(r,{spin:(d=e.actionsRef)==null?void 0:d.pollingLoading.value,onClick:e.onReload},null,8,["spin","onClick"])],2)]}),_:1},8,["title"])):ge("v-if",!0),e.mergeOptions.density!==!1?(T(),de(v,{key:1,prefixCls:e.prefixCls},null,8,["prefixCls"])):ge("v-if",!0),e.mergeOptions.setting!==!1?(T(),de(f,{key:2,"prefix-cls":e.prefixCls,columns:e.tableColumn},null,8,["prefix-cls","columns"])):ge("v-if",!0)],64)):ge("v-if",!0)]),_:3},8,["class"])],2)])],2)],2)}var ac=De(nc,[["render",oc]]),rc=Pe({name:"ProTableAlert",props:{prefixCls:String,selectedRowKeys:{type:Array,default:()=>[]},selectedRows:{type:Array,default:()=>[]}},inheritAttrs:!1,components:{Space:bo},emits:["cleanSelected"],setup(e,{emit:t,slots:l}){return{slots:l,onCleanSelected:()=>{t("cleanSelected")}}}});function ic(e,t,l,n,o,u){const s=ee("Space");return T(),te("div",{class:_(`${e.prefixCls}-alert`)},[oe("div",{class:_(`${e.prefixCls}-alert-container`)},[oe("div",{class:_(`${e.prefixCls}-alert-info`)},[ut(e.$slots,"info",{selectedRowKeys:e.selectedRowKeys,selectedRows:e.selectedRows,onCleanSelected:e.onCleanSelected},()=>[X(s,null,{default:Re(()=>[At(" 已选择 "+wt(e.selectedRowKeys.length)+" 项 ",1),e.slots.actions?(T(),te("a",{class:"pro-link",onClick:t[0]||(t[0]=(...i)=>e.onCleanSelected&&e.onCleanSelected(...i)),key:"0"},"取消选择")):ge("v-if",!0)]),_:1})])],2),oe("div",{class:_(`${e.prefixCls}-alert-actions`)},[X(s,null,{default:Re(()=>[ut(e.$slots,"actions",{selectedRowKeys:e.selectedRowKeys,selectedRows:e.selectedRows,onCleanSelected:e.onCleanSelected},()=>[oe("a",{class:"pro-link",onClick:t[1]||(t[1]=(...i)=>e.onCleanSelected&&e.onCleanSelected(...i)),key:"0"},"取消选择")])]),_:3})],2)],2)],2)}var sc=De(rc,[["render",ic]]);function uc(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}var cc=Pe({props:{prefixCls:String,items:{type:Array,default:()=>[]},search:{type:Object,default:void 0},cardBordered:{type:[Boolean,Object],default:void 0},loading:Boolean,manual:Boolean,tableShowCard:Boolean,beforeSearchSubmit:{type:Function,default:e=>e},onSubmit:{type:Function,default:void 0},onReset:{type:Function,default:void 0},onFormSearchSubmit:{type:Function,default:void 0},onSearchTabChange:{type:Function,default:void 0}},setup:e=>{var t,l,n;const o=F(((t=e.search)==null?void 0:t.cardProps)!==!1?(n=(l=e.search)==null?void 0:l.cardProps)==null?void 0:n.activeTabKey:""),u=h(()=>{var a,c;return(a=e.search)!=null&&a.cardProps?(c=e.search)==null?void 0:c.cardProps:{}}),s=async(a,c)=>{var r,v,f,d,p,m,y,b;const C=(v=(r=u.value)==null?void 0:r.tabList)!=null&&v.length?{[(d=(f=e.search)==null?void 0:f.tabName)!=null?d:"tab"]:u.value.activeTabKey||((y=(m=(p=u.value)==null?void 0:p.tabList)==null?void 0:m[0])==null?void 0:y.key)}:{},I=$o(e.beforeSearchSubmit({...a,...C}));(b=e.onFormSearchSubmit)==null||b.call(e,I),e.onSubmit&&!c&&e.onSubmit(I)},i=a=>{var c,r,v,f,d;o.value=a,(v=e.onSearchTabChange)==null||v.call(e,{[(r=(c=e.search)==null?void 0:c.tabName)!=null?r:"tab"]:a}),(d=(f=u.value)==null?void 0:f.onTabChange)==null||d.call(f,a)};return()=>{var a,c,r,v;const f=X(Da,We({class:`${e.prefixCls}-form`},It(e.search||{},["cardProps","tabName"]),{items:e.items,loading:e.loading,style:{marginBlockEnd:((a=e.search)==null?void 0:a.cardProps)!==!1&&e.tableShowCard?0:"30px",...(c=e.search)==null?void 0:c.style},onReset:e.onReset,onFinish:d=>{s(d,!1)},onValuesChange:d=>{var p,m,y;((p=e.search)==null?void 0:p.submitter)===!1&&s(d,!0),(y=(m=e.search)==null?void 0:m.onValuesChange)==null||y.call(m,d)},onInit:d=>{s(d,!0)}}),null);return((r=e.search)==null?void 0:r.cardProps)!==!1&&e.tableShowCard?X(So,We({class:`${e.prefixCls}-search`,activeTabKey:o.value,bordered:Bo("search",e.cardBordered),style:{marginBlockEnd:"16px"}},It((v=u.value)!=null?v:{},["onTabChange","activeTabKey"]),{onTabChange:i}),uc(f)?f:{default:()=>[f]}):f}}});function dc(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}var vc=Pe({name:"ProTable",inheritAttrs:!1,props:Fr(),slots:{},emits:["keydown"],setup(e,{expose:t,slots:l,attrs:n,emit:o}){var u;const s=F(),i=F(),a=Ro("table"),{hoverRowKey:c}=Rr({rowHoverDelay:h(()=>e.rowHoverDelay)}),r=h(()=>{var A;return(A=e.prefixCls)!=null?A:a});kr(),fe(c,(A,Y)=>{i.value&&(i.value.style.removeProperty(`--${r.value}-row-bg-${Y}`),i.value.style.setProperty(`--${r.value}-row-bg-${A}`,"hsl(var(--pro-accent))"))},{flush:"post"});const v=A=>{A.stopPropagation(),o("keydown",A)},f=h(()=>{if(e.request)return async(A,Y,pe)=>{const ke={...A||{},...e.params||{}};return await e.request(ke,Y,pe)}}),d=Lr(f,e),{dataSource:p,loading:m,pagination:y,pollingLoading:b,onTableChange:C,reload:I,reset:k}=d,N=h(()=>e.pagination===!1?!1:e.request?Object.assign({},e.pagination,y.value):Object.assign({},y.value,e.pagination)),V=h(()=>typeof m.value=="boolean"?m.value:typeof m.value=="object"?m.value.spinning:void 0),j=A=>{var Y,pe;if(e.options&&e.options.search){const{name:ke="keyword"}=e.options.search===!0?{}:e.options.search;if(((pe=(Y=e.options.search)==null?void 0:Y.onSearch)==null?void 0:pe.call(Y,d.keyword.value))!==!1){d.setFormSearch({...A,[ke]:d.keyword.value});return}}d.setFormSearch(A)},M=Nr(e),J=h(()=>Ao({columns:e.columns,counter:M}).sort(_r(M.columnsMap.value)));fe(J,()=>{if(J.value&&J.value.length>0){const A=J.value.map(Y=>Tt(Y.key,Y.index));M.setSortKeyColumns(A)}},{immediate:!0});const g=h(()=>{const A=Y=>Y.map(pe=>{const ke=Tt(pe.key,pe.index),Te=M.columnsMap.value[ke];return Te&&Te.show===!1?!1:pe.children?{...pe,children:A(pe.children)}:pe}).filter(Boolean);return A(J.value)}),E=h(()=>{var A,Y,pe;return e.search?(Y=(A=e.search)==null?void 0:A.items)!=null&&Y.length?(pe=e.search)==null?void 0:pe.items:Vr(e.columns).filter(ke=>!ke.hideInSearch).map(ke=>({...ke,width:void 0,tooltip:ke.headerTooltip,name:ke.dataIndex})):[]}),L=F(new Map),S=h(()=>typeof e.rowKey=="function"?e.rowKey:A=>A?.[e.rowKey||"id"]);fe([()=>p.value,S],()=>{var A;(A=p.value)!=null&&A.length&&p.value.forEach(Y=>{const pe=S.value(Y,-1);L.value.set(pe,Y)}),K()});const[H,z]=jr(e.selectedRowKeys||(e.rowSelection?((u=e.rowSelection)==null?void 0:u.defaultSelectedRowKeys)||[]:void 0),{value:h(()=>e.selectedRowKeys||(e.rowSelection?e.rowSelection.selectedRowKeys:void 0))}),q=h(()=>({selectedRowKeys:H.value,preserveSelectedRowKeys:!0,...e.rowSelection,onChange:(A,Y)=>{var pe;e.rowSelection&&e.rowSelection.onChange&&e.rowSelection.onChange(A,Y),(pe=e["onUpdate:selectedRowKeys"])==null||pe.call(e,A,Y),z(A)}})),x=h(()=>{var A;return(A=H.value)==null?void 0:A.map(Y=>{var pe;return(pe=L.value)==null?void 0:pe.get(Y)})}),K=()=>{var A;e.rowSelection&&e.rowSelection.onChange&&e.rowSelection.onChange([],[]),(A=e["onUpdate:selectedRowKeys"])==null||A.call(e,[],[]),z([])},R=h(()=>e.options===!1&&!e.title&&!l.title&&!l.toolbar&&!l.searchExtra&&!l.toolbarActions),B=h(()=>{var A;return(e.search===!1||!((A=E.value)!=null&&A.length))&&e.toolBar===!1}),Q=h(()=>e.cardProps===!1||B.value===!0?{}:R.value?{padding:0}:e.pagination!==!1?{paddingBlockEnd:0}:{});return t({scrollTo:(A,Y)=>{var pe;(pe=s.value)==null||pe.scrollTo(A,Y)},scrollLeft:h(()=>{var A;return Gt((A=s.value)==null?void 0:A.scrollLeft)}),scrollTop:h(()=>{var A;return Gt((A=s.value)==null?void 0:A.scrollTop)}),bodyRef:h(()=>{var A;return Gt((A=s.value)==null?void 0:A.bodyRef)}),copySelectedRange:()=>{var A;return(A=s.value)==null?void 0:A.copySelectedRange()},getSelectedRange:()=>{var A;return(A=s.value)==null?void 0:A.getSelectedRange()},clearAllSelectedRange:()=>{var A;return(A=s.value)==null?void 0:A.clearAllSelectedRange()},clearDataSource:()=>{p.value=[]},appendCellToSelectedRange:A=>{var Y;return(Y=s.value)==null?void 0:Y.appendCellToSelectedRange(A)},openEditor:A=>{var Y;return(Y=s.value)==null?void 0:Y.openEditor(A)},closeEditor:A=>{var Y;return(Y=s.value)==null?void 0:Y.closeEditor(A)},reload:I,reset:k}),()=>{var A,Y,pe;const{expandIcon:ke=l.expandIcon,expandedRowRender:Te=l.expandedRowRender}=e,ne=g.value||Oo((A=l.default)==null?void 0:A.call(l))||[];let ie=X(Be,null,[e.toolBar!==!1&&!R.value&&X(ac,{title:e.title,subTitle:e.subTitle,tooltip:e.tooltip,prefixCls:r.value,options:e.options,actionsRef:d,tableColumn:J.value,selectedRowKeys:H.value,selectedRows:x.value,onFormSearchSubmit:se=>{d.setFormSearch({...d.formSearch.value,...se})}},{toolbar:l.toolbar,title:l.title,searchExtra:l.searchExtra,actions:l.toolbarActions}),!!e.rowSelection&&((Y=e.rowSelection)==null?void 0:Y.type)!=="radio"&&e.alwaysShowAlert!==!1&&!!H.value.length&&X(sc,{prefixCls:r.value,selectedRowKeys:H.value,selectedRows:x.value,onCleanSelected:K},{info:l.alertInfo,actions:l.alertActions}),X(Mu,We({ref:s},It(e,["onChange","onUpdate:pagination","onUpdate:selectedRowKeys"]),{prefixCls:r.value,columns:ne||[],size:M.tableSize.value,dataSource:p.value,loading:m.value,rowSelection:e.rowSelection?q.value:void 0,pagination:N.value,expandIcon:ke,expandedRowRender:Te,hasContextmenuPopup:!!l.contextmenuPopup,onChange:C}),{...l,footer:e.footer||l.footer})]);if(!(e.cardProps===!1||B.value)){const se=(function(){return ie})();ie=X(So,We({bordered:Bo("table",e.cardBordered),bodyStyle:Q.value},e.cardProps),dc(ie)?ie:{default:()=>[se]})}return X("div",We({ref:i},n,{class:[`${r.value}-wrapper ${e.bordered?r.value+"-wrapper-bordered":""} ${mr.value==="dark"?r.value+"-wrapper-dark":""} ${b.value?r.value+"-wrapper-polling":""}`,n.class],onKeydown:v}),[e.search!==!1&&!!((pe=E.value)!=null&&pe.length)&&X(cc,{prefixCls:r.value,items:E.value,cardBordered:e.cardBordered,search:e.search,tableShowCard:e.cardProps!==!1,loading:V.value,beforeSearchSubmit:e.beforeSearchSubmit,manual:e.manual,onReset:e.onReset,onSubmit:e.onSubmit,onFormSearchSubmit:j,onSearchTabChange:se=>{d.setFormSearch({...d.formSearch.value,...se})}},null),ie])}}}),fc=Pe({name:"ProTableColumn",slots:["title","filterIcon"]}),hc=Pe({name:"ProTableColumnGroup",slots:["title"],__S_TABLE_COLUMN_GROUP:!0});const pc=Symbol("SummaryCtx"),ya=Symbol("SummaryRowCtx"),mc=e=>{lt(ya,e)},gc=()=>Ze(ya,{}),yc=()=>Ze(pc,{});let wc=1;var Cc=Pe({name:"ProTableSummaryCell",props:{index:{type:Number},colSpan:{type:Number,default:1},align:{type:String},columnKey:String},setup(e){const t=yc(),l=Ve(),n=gc(),o="id_"+wc++,u=Ae(()=>e.columnKey?l.columnKeyIndexMap.value[e.columnKey]:e.index),s=h(()=>u.value>=0&&u.value<=l.allColumns.value.length);qe(()=>{s.value&&n.updateCell(o,u.value,e.colSpan),setTimeout(()=>{ht(s.value,"TableSummaryCell",`'index=${e.index}' or 'columnKey=${e.columnKey||""}' is not valid`)})}),wl(()=>{n.removeCell(o)});const i=h(()=>n.cells.value[u.value]||{width:0,visible:!1,style:{}}),{allColumns:a}=l,c=h(()=>a.value[u.value]),r=h(()=>l.pageData.value),v=F();fe(c,()=>{var b;v.value=(b=c.value)==null?void 0:b.dataIndex},{immediate:!0});const f=h(()=>{let b=0;const C=r.value;for(let I=0;I<C.length;I++){const k=C[I];if(b+=Number(k[v.value]),isNaN(b))break}return b}),d=h(()=>l.prefixCls.value),p=h(()=>{const{fixed:b,isLastFixedLeft:C,isFirstFixedRight:I}=i.value;return{[`${d.value}-cell`]:!0,[`${d.value}-summary-cell`]:!0,[`${d.value}-summary-cell-fixed-${b}`]:!!b,[`${d.value}-summary-cell-last-fixed-left`]:C,[`${d.value}-summary-cell-first-fixed-right`]:I}}),m=h(()=>{const b=`${i.value.width}px`;return{width:b,minWidth:b,maxWidth:b,order:u.value}}),y=h(()=>({[`${d.value}-cell-inner`]:!0}));return{prefixCls:d,column:c,summaryCtx:t,pageData:r,total:f,cellClass:p,cellConfig:i,cellStyle:m,cellInnerClass:y}}});function bc(e,t,l,n,o,u){return e.cellConfig.visible?(T(),te("div",{key:0,tabindex:"-1",role:"cell",class:_(e.cellClass),style:$e(e.cellConfig.style)},[oe("div",{class:_(e.cellInnerClass)},[oe("div",{class:_(`${e.prefixCls}-cell-content`)},[ut(e.$slots,"default",{column:e.column,total:e.total,data:e.pageData})],2)],2)],6)):ge("v-if",!0)}var Sc=De(Cc,[["render",bc]]),xc=Pe({name:"ProTableSummaryRow",setup(){const e=Ve(),t=Cl({}),l=F([]),n=F([]),o=h(()=>Object.values(t).sort((d,p)=>d.index-p.index));mc({cells:l,updateCell:(d,p,m)=>{t[d]={index:p,colSpan:m}},removeCell:d=>{delete t[d]}});const u=Ae(()=>e.leftColumns.value.length-1),s=Ae(()=>e.leftColumns.value.length+e.centerColumns.value.length-1),i=Ae(()=>e.allColumns.value.length-1),a=()=>{const d=[];let p=0;const m=u.value,y=s.value,b=i.value;let C=e.rightWidth.value;for(let N=0,V=o.value.length;N<V;N++){const j=o.value[N],{index:M,colSpan:J=1}=j;if(M<=m){M-p>0&&d.push({index:p,colSpan:M-p,isPlaceholder:!0,fixed:"left"});const g={...j,colSpan:Math.min(m-M+1,J),fixed:"left"};d.push(g),p=M+g.colSpan}else if(M<=y){p<=m&&(d.push({index:p,colSpan:m-p+1,isPlaceholder:!0,fixed:"left"}),p=m+1),M-p>0&&d.push({index:p,colSpan:M-p,isPlaceholder:!0});const g={...j,colSpan:Math.min(y-M+1,J)};d.push(g),p=M+g.colSpan}else{p<=m&&(d.push({index:p,colSpan:m-p+1,isPlaceholder:!0,fixed:"left"}),p=m+1),p<=y&&(d.push({index:p,colSpan:y-p+1,isPlaceholder:!0}),p=y+1),M-p>0&&d.push({index:p,colSpan:M-p,isPlaceholder:!0,fixed:"right"});const g={...j,colSpan:Math.min(b-M+1,J),fixed:"right"};d.push(g),p=M+g.colSpan}}p<=m&&(d.push({index:p,colSpan:m-p+1,isPlaceholder:!0,fixed:"left"}),p=m+1),p<=y&&(d.push({index:p,colSpan:y-p+1,isPlaceholder:!0}),p=y+1),p<=b&&d.push({index:p,colSpan:b-p+1,isPlaceholder:!0,fixed:"right"});const I=[],k=[];d.forEach((N,V)=>{const{index:j,colSpan:M,isPlaceholder:J,fixed:g}=N,E=e.getColumnPosition(j,M),{width:L,left:S}=E;g==="right"&&(C-=L);const H={index:j,width:L,style:Object.assign({width:`${L}px`,minWidth:`${L}px`,maxWidth:`${L}px`,order:j,borderRight:J&&j===0?"none":void 0},g?{position:"sticky",[g]:g==="left"?`${S}px`:`${C}px`}:{}),fixed:g||!1,visible:!0};g!=="left"||d[V+1]&&d[V+1].fixed==="left"?g!=="right"||d[V-1]&&d[V-1].fixed==="right"||(H.isFirstFixedRight=!0):(H.isLastFixedLeft=!0,delete H.style.borderRight),J?k.push(H):I[H.index]=H}),l.value=I,n.value=k};let c;fe([e.allColumns,o],()=>{c&&c(),c=Or(a).cancel},{immediate:!0});const r=h(()=>{const{prefixCls:d}=e.props;return{[`${d}-row`]:!0,[`${d}-summary-row`]:!0}}),v=h(()=>{const{prefixCls:d}=e.props;return{[`${d}-cell`]:!0,[`${d}-summary-cell`]:!0}}),f=h(()=>({width:`${e.bodyMaxWidth.value}px`}));return{prefixCls:h(()=>e.props.prefixCls),rowClass:r,placeholderCell:n,cellClass:v,rowStyle:f}}});function $c(e,t,l,n,o,u){return T(),te("div",{role:"row",class:_(e.rowClass),style:$e(e.rowStyle)},[ut(e.$slots,"default"),(T(!0),te(Be,null,xt(e.placeholderCell,s=>(T(),te("div",{key:s.index,tabindex:"-1",role:"cell",class:_([e.cellClass,{[`${e.prefixCls}-summary-cell-fixed-${s.fixed}`]:!!s.fixed,[`${e.prefixCls}-summary-cell-last-fixed-left`]:s.isLastFixedLeft,[`${e.prefixCls}-summary-cell-first-fixed-right`]:s.isFirstFixedRight}]),style:$e(s.style)},"   ",6))),128))],6)}var Rc=De(xc,[["render",$c]]),kc=Pe({name:"ProTableSummary",props:{fixed:Boolean},setup(){ht(!1,"s-table-summary","you do not need s-table-summary, you can use summaryFixed prop at s-table")}});function Kc(e,t,l,n,o,u){return ut(e.$slots,"default")}var Pc=De(kc,[["render",Kc]]);const Rn=hr(vc,{Column:fc,ColumnGroup:hc,Summary:Pc,SummaryRow:Rc,SummaryCell:Sc});Rn.SELECTION_ALL=ql;Rn.SELECTION_INVERT=Jl;Rn.SELECTION_NONE=Zl;export{Rn as P};
