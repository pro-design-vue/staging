import{f as pe,j as L,e as W,g as R,R as N,b as ba,k as xa,p as Et,i as Dt}from"./index.CwNZ8UQz.js";import{u as wa}from"./useFieldValue.BTbX625m.js";import{u as qt}from"./FormListContext.C1lAsfCm.js";import{P as Ca}from"./index.BN8vuQ5F.js";import{ab as Gt,a9 as Sa,e as Ea,ac as ft,ad as Ze,U as vt,S as Da,ae as Ia,N as Je,p as Kt,s as et,v as Ta,af as Pa,ag as Ma,H as _a,ah as mt,ai as Fa,aj as Oa,ak as Ra,al as Na,am as Aa,an as ka,ao as le,ap as Ba,aq as La,ar as Va,as as $a,at as Ya,au as Ua,B as Wa,av as Ae,aw as za,ax as Ha,u as ja,aa as Qt,a0 as Xa,ay as qa,az as Ga,i as tt,Y as Ka}from"./theme.4-x2Jk7c.js";import{d as A,f as Z,o as Zt,R as Qa,Q as Za,S as Te,a1 as Ye,u as Pe,k as g,e as p,i as Jt,a0 as I,w as ve,F as ea}from"./framework.nwrEuAw0.js";import{u as z}from"./useIntl.DLiSwDrU.js";import{o as ta,a as Ge}from"./index.B9lLtGNF.js";import{r as K}from"./run-function.ZYhDcPlt.js";import{a as He,h as Ja,g as Re,i as ei}from"./validate.B6x-sGAS.js";import{P as ti}from"./index.CyDdY-9x.js";import{u as ai}from"./index.D5lW5ejP.js";import{w as ii}from"./install.BalIz2Dd.js";import{F as ni,a as It}from"./FormTitle.BW8r2hpQ.js";import"./index.D2OTN7bu.js";import"./index.CHg6CLv2.js";/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function Tt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function aa(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Tt(Object(i),!0).forEach(function(a){si(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Tt(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function ri(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ia(e){var t=ri(e,"string");return typeof t=="symbol"?t:t+""}function at(e){"@babel/helpers - typeof";return at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(e)}function li(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ia(a.key),a)}}function oi(e,t,i){return t&&Pt(e.prototype,t),i&&Pt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function si(e,t,i){return t=ia(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function na(e){return ui(e)||di(e)||ci(e)||hi()}function ui(e){if(Array.isArray(e))return it(e)}function di(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ci(e,t){if(e){if(typeof e=="string")return it(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return it(e,t)}}function it(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function hi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var je=typeof window<"u"&&typeof window.document<"u",ce=je?window:{},gt=je&&ce.document.documentElement?"ontouchstart"in ce.document.documentElement:!1,pt=je?"PointerEvent"in ce:!1,k="cropper",yt="all",ra="crop",la="move",oa="zoom",ye="e",be="w",Ce="s",fe="n",Me="ne",_e="nw",Fe="se",Oe="sw",nt="".concat(k,"-crop"),Mt="".concat(k,"-disabled"),Q="".concat(k,"-hidden"),_t="".concat(k,"-hide"),fi="".concat(k,"-invisible"),ze="".concat(k,"-modal"),rt="".concat(k,"-move"),ke="".concat(k,"Action"),Ue="".concat(k,"Preview"),bt="crop",sa="move",ua="none",lt="crop",ot="cropend",st="cropmove",ut="cropstart",Ft="dblclick",vi=gt?"touchstart":"mousedown",mi=gt?"touchmove":"mousemove",gi=gt?"touchend touchcancel":"mouseup",Ot=pt?"pointerdown":vi,Rt=pt?"pointermove":mi,Nt=pt?"pointerup pointercancel":gi,At="ready",kt="resize",Bt="wheel",dt="zoom",Lt="image/jpeg",pi=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,yi=/^data:/,bi=/^data:image\/jpeg;base64,/,xi=/^img|canvas$/i,da=200,ca=100,Vt={viewMode:0,dragMode:bt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:da,minContainerHeight:ca,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},wi='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Ci=Number.isNaN||ce.isNaN;function M(e){return typeof e=="number"&&!Ci(e)}var $t=function(t){return t>0&&t<1/0};function Ke(e){return typeof e>"u"}function xe(e){return at(e)==="object"&&e!==null}var Si=Object.prototype.hasOwnProperty;function Se(e){if(!xe(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&Si.call(i,"isPrototypeOf")}catch{return!1}}function G(e){return typeof e=="function"}var Ei=Array.prototype.slice;function ha(e){return Array.from?Array.from(e):Ei.call(e)}function Y(e,t){return e&&G(t)&&(Array.isArray(e)||M(e.length)?ha(e).forEach(function(i,a){t.call(e,i,a,e)}):xe(e)&&Object.keys(e).forEach(function(i){t.call(e,e[i],i,e)})),e}var B=Object.assign||function(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return xe(t)&&a.length>0&&a.forEach(function(n){xe(n)&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t},Di=/\.\d*(?:0|9){12}\d*$/;function De(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Di.test(e)?Math.round(e*t)/t:e}var Ii=/^width|height|left|top|marginLeft|marginTop$/;function me(e,t){var i=e.style;Y(t,function(a,l){Ii.test(l)&&M(a)&&(a="".concat(a,"px")),i[l]=a})}function Ti(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function U(e,t){if(t){if(M(e.length)){Y(e,function(a){U(a,t)});return}if(e.classList){e.classList.add(t);return}var i=e.className.trim();i?i.indexOf(t)<0&&(e.className="".concat(i," ").concat(t)):e.className=t}}function ue(e,t){if(t){if(M(e.length)){Y(e,function(i){ue(i,t)});return}if(e.classList){e.classList.remove(t);return}e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,""))}}function Ee(e,t,i){if(t){if(M(e.length)){Y(e,function(a){Ee(a,t,i)});return}i?U(e,t):ue(e,t)}}var Pi=/([a-z\d])([A-Z])/g;function xt(e){return e.replace(Pi,"$1-$2").toLowerCase()}function ct(e,t){return xe(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(xt(t)))}function Be(e,t,i){xe(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-".concat(xt(t)),i)}function Mi(e,t){if(xe(e[t]))try{delete e[t]}catch{e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch{e.dataset[t]=void 0}else e.removeAttribute("data-".concat(xt(t)))}var fa=/\s\s*/,va=(function(){var e=!1;if(je){var t=!1,i=function(){},a=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(n){t=n}});ce.addEventListener("test",i,a),ce.removeEventListener("test",i,a)}return e})();function re(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=i;t.trim().split(fa).forEach(function(n){if(!va){var r=e.listeners;r&&r[n]&&r[n][i]&&(l=r[n][i],delete r[n][i],Object.keys(r[n]).length===0&&delete r[n],Object.keys(r).length===0&&delete e.listeners)}e.removeEventListener(n,l,a)})}function ie(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=i;t.trim().split(fa).forEach(function(n){if(a.once&&!va){var r=e.listeners,o=r===void 0?{}:r;l=function(){delete o[n][i],e.removeEventListener(n,l,a);for(var c=arguments.length,u=new Array(c),s=0;s<c;s++)u[s]=arguments[s];i.apply(e,u)},o[n]||(o[n]={}),o[n][i]&&e.removeEventListener(n,o[n][i],a),o[n][i]=l,e.listeners=o}e.addEventListener(n,l,a)})}function Ie(e,t,i){var a;return G(Event)&&G(CustomEvent)?a=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent"),a.initCustomEvent(t,!0,!0,i)),e.dispatchEvent(a)}function ma(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Qe=ce.location,_i=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Yt(e){var t=e.match(_i);return t!==null&&(t[1]!==Qe.protocol||t[2]!==Qe.hostname||t[3]!==Qe.port)}function Ut(e){var t="timestamp=".concat(new Date().getTime());return e+(e.indexOf("?")===-1?"?":"&")+t}function Ne(e){var t=e.rotate,i=e.scaleX,a=e.scaleY,l=e.translateX,n=e.translateY,r=[];M(l)&&l!==0&&r.push("translateX(".concat(l,"px)")),M(n)&&n!==0&&r.push("translateY(".concat(n,"px)")),M(t)&&t!==0&&r.push("rotate(".concat(t,"deg)")),M(i)&&i!==1&&r.push("scaleX(".concat(i,")")),M(a)&&a!==1&&r.push("scaleY(".concat(a,")"));var o=r.length?r.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function Fi(e){var t=aa({},e),i=0;return Y(e,function(a,l){delete t[l],Y(t,function(n){var r=Math.abs(a.startX-n.startX),o=Math.abs(a.startY-n.startY),h=Math.abs(a.endX-n.endX),c=Math.abs(a.endY-n.endY),u=Math.sqrt(r*r+o*o),s=Math.sqrt(h*h+c*c),d=(s-u)/u;Math.abs(d)>Math.abs(i)&&(i=d)})}),i}function We(e,t){var i=e.pageX,a=e.pageY,l={endX:i,endY:a};return t?l:aa({startX:i,startY:a},l)}function Oi(e){var t=0,i=0,a=0;return Y(e,function(l){var n=l.startX,r=l.startY;t+=n,i+=r,a+=1}),t/=a,i/=a,{pageX:t,pageY:i}}function ge(e){var t=e.aspectRatio,i=e.height,a=e.width,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",n=$t(a),r=$t(i);if(n&&r){var o=i*t;l==="contain"&&o>a||l==="cover"&&o<a?i=a/t:a=i*t}else n?i=a/t:r&&(a=i*t);return{width:a,height:i}}function Ri(e){var t=e.width,i=e.height,a=e.degree;if(a=Math.abs(a)%180,a===90)return{width:i,height:t};var l=a%90*Math.PI/180,n=Math.sin(l),r=Math.cos(l),o=t*r+i*n,h=t*n+i*r;return a>90?{width:h,height:o}:{width:o,height:h}}function Ni(e,t,i,a){var l=t.aspectRatio,n=t.naturalWidth,r=t.naturalHeight,o=t.rotate,h=o===void 0?0:o,c=t.scaleX,u=c===void 0?1:c,s=t.scaleY,d=s===void 0?1:s,v=i.aspectRatio,m=i.naturalWidth,y=i.naturalHeight,x=a.fillColor,D=x===void 0?"transparent":x,F=a.imageSmoothingEnabled,C=F===void 0?!0:F,S=a.imageSmoothingQuality,b=S===void 0?"low":S,f=a.maxWidth,w=f===void 0?1/0:f,P=a.maxHeight,T=P===void 0?1/0:P,X=a.minWidth,J=X===void 0?0:X,oe=a.minHeight,se=oe===void 0?0:oe,ee=document.createElement("canvas"),j=ee.getContext("2d"),he=ge({aspectRatio:v,width:w,height:T}),we=ge({aspectRatio:v,width:J,height:se},"cover"),E=Math.min(he.width,Math.max(we.width,m)),_=Math.min(he.height,Math.max(we.height,y)),O=ge({aspectRatio:l,width:w,height:T}),$=ge({aspectRatio:l,width:J,height:se},"cover"),q=Math.min(O.width,Math.max($.width,n)),te=Math.min(O.height,Math.max($.height,r)),V=[-q/2,-te/2,q,te];return ee.width=De(E),ee.height=De(_),j.fillStyle=D,j.fillRect(0,0,E,_),j.save(),j.translate(E/2,_/2),j.rotate(h*Math.PI/180),j.scale(u,d),j.imageSmoothingEnabled=C,j.imageSmoothingQuality=b,j.drawImage.apply(j,[e].concat(na(V.map(function(ne){return Math.floor(De(ne))})))),j.restore(),ee}var ga=String.fromCharCode;function Ai(e,t,i){var a="";i+=t;for(var l=t;l<i;l+=1)a+=ga(e.getUint8(l));return a}var ki=/^data:.*,/;function Bi(e){var t=e.replace(ki,""),i=atob(t),a=new ArrayBuffer(i.length),l=new Uint8Array(a);return Y(l,function(n,r){l[r]=i.charCodeAt(r)}),a}function Li(e,t){for(var i=[],a=8192,l=new Uint8Array(e);l.length>0;)i.push(ga.apply(null,ha(l.subarray(0,a)))),l=l.subarray(a);return"data:".concat(t,";base64,").concat(btoa(i.join("")))}function Vi(e){var t=new DataView(e),i;try{var a,l,n;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var r=t.byteLength,o=2;o+1<r;){if(t.getUint8(o)===255&&t.getUint8(o+1)===225){l=o;break}o+=1}if(l){var h=l+4,c=l+10;if(Ai(t,h,4)==="Exif"){var u=t.getUint16(c);if(a=u===18761,(a||u===19789)&&t.getUint16(c+2,a)===42){var s=t.getUint32(c+4,a);s>=8&&(n=c+s)}}}if(n){var d=t.getUint16(n,a),v,m;for(m=0;m<d;m+=1)if(v=n+m*12+2,t.getUint16(v,a)===274){v+=8,i=t.getUint16(v,a),t.setUint16(v,1,a);break}}}catch{i=1}return i}function $i(e){var t=0,i=1,a=1;switch(e){case 2:i=-1;break;case 3:t=-180;break;case 4:a=-1;break;case 5:t=90,a=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:i,scaleY:a}}var Yi={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,a=this.container,l=this.cropper,n=Number(i.minContainerWidth),r=Number(i.minContainerHeight);U(l,Q),ue(t,Q);var o={width:Math.max(a.offsetWidth,n>=0?n:da),height:Math.max(a.offsetHeight,r>=0?r:ca)};this.containerData=o,me(l,{width:o.width,height:o.height}),U(t,Q),ue(l,Q)},initCanvas:function(){var t=this.containerData,i=this.imageData,a=this.options.viewMode,l=Math.abs(i.rotate)%180===90,n=l?i.naturalHeight:i.naturalWidth,r=l?i.naturalWidth:i.naturalHeight,o=n/r,h=t.width,c=t.height;t.height*o>t.width?a===3?h=t.height*o:c=t.width/o:a===3?c=t.width/o:h=t.height*o;var u={aspectRatio:o,naturalWidth:n,naturalHeight:r,width:h,height:c};this.canvasData=u,this.limited=a===1||a===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(t.width-u.width)/2,u.top=(t.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=B({},u)},limitCanvas:function(t,i){var a=this.options,l=this.containerData,n=this.canvasData,r=this.cropBoxData,o=a.viewMode,h=n.aspectRatio,c=this.cropped&&r;if(t){var u=Number(a.minCanvasWidth)||0,s=Number(a.minCanvasHeight)||0;o>1?(u=Math.max(u,l.width),s=Math.max(s,l.height),o===3&&(s*h>u?u=s*h:s=u/h)):o>0&&(u?u=Math.max(u,c?r.width:0):s?s=Math.max(s,c?r.height:0):c&&(u=r.width,s=r.height,s*h>u?u=s*h:s=u/h));var d=ge({aspectRatio:h,width:u,height:s});u=d.width,s=d.height,n.minWidth=u,n.minHeight=s,n.maxWidth=1/0,n.maxHeight=1/0}if(i)if(o>(c?0:1)){var v=l.width-n.width,m=l.height-n.height;n.minLeft=Math.min(0,v),n.minTop=Math.min(0,m),n.maxLeft=Math.max(0,v),n.maxTop=Math.max(0,m),c&&this.limited&&(n.minLeft=Math.min(r.left,r.left+(r.width-n.width)),n.minTop=Math.min(r.top,r.top+(r.height-n.height)),n.maxLeft=r.left,n.maxTop=r.top,o===2&&(n.width>=l.width&&(n.minLeft=Math.min(0,v),n.maxLeft=Math.max(0,v)),n.height>=l.height&&(n.minTop=Math.min(0,m),n.maxTop=Math.max(0,m))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=l.width,n.maxTop=l.height},renderCanvas:function(t,i){var a=this.canvasData,l=this.imageData;if(i){var n=Ri({width:l.naturalWidth*Math.abs(l.scaleX||1),height:l.naturalHeight*Math.abs(l.scaleY||1),degree:l.rotate||0}),r=n.width,o=n.height,h=a.width*(r/a.naturalWidth),c=a.height*(o/a.naturalHeight);a.left-=(h-a.width)/2,a.top-=(c-a.height)/2,a.width=h,a.height=c,a.aspectRatio=r/o,a.naturalWidth=r,a.naturalHeight=o,this.limitCanvas(!0,!1)}(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCanvas(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,me(this.canvas,B({width:a.width,height:a.height},Ne({translateX:a.left,translateY:a.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,a=this.imageData,l=a.naturalWidth*(i.width/i.naturalWidth),n=a.naturalHeight*(i.height/i.naturalHeight);B(a,{width:l,height:n,left:(i.width-l)/2,top:(i.height-n)/2}),me(this.image,B({width:a.width,height:a.height},Ne(B({translateX:a.left,translateY:a.top},a)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,a=t.aspectRatio||t.initialAspectRatio,l=Number(t.autoCropArea)||.8,n={width:i.width,height:i.height};a&&(i.height*a>i.width?n.height=n.width/a:n.width=n.height*a),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*l),n.height=Math.max(n.minHeight,n.height*l),n.left=i.left+(i.width-n.width)/2,n.top=i.top+(i.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=B({},n)},limitCropBox:function(t,i){var a=this.options,l=this.containerData,n=this.canvasData,r=this.cropBoxData,o=this.limited,h=a.aspectRatio;if(t){var c=Number(a.minCropBoxWidth)||0,u=Number(a.minCropBoxHeight)||0,s=o?Math.min(l.width,n.width,n.width+n.left,l.width-n.left):l.width,d=o?Math.min(l.height,n.height,n.height+n.top,l.height-n.top):l.height;c=Math.min(c,l.width),u=Math.min(u,l.height),h&&(c&&u?u*h>c?u=c/h:c=u*h:c?u=c/h:u&&(c=u*h),d*h>s?d=s/h:s=d*h),r.minWidth=Math.min(c,s),r.minHeight=Math.min(u,d),r.maxWidth=s,r.maxHeight=d}i&&(o?(r.minLeft=Math.max(0,n.left),r.minTop=Math.max(0,n.top),r.maxLeft=Math.min(l.width,n.left+n.width)-r.width,r.maxTop=Math.min(l.height,n.top+n.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=l.width-r.width,r.maxTop=l.height-r.height))},renderCropBox:function(){var t=this.options,i=this.containerData,a=this.cropBoxData;(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCropBox(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,t.movable&&t.cropBoxMovable&&Be(this.face,ke,a.width>=i.width&&a.height>=i.height?la:yt),me(this.cropBox,B({width:a.width,height:a.height},Ne({translateX:a.left,translateY:a.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ie(this.element,lt,this.getData())}},Ui={initPreview:function(){var t=this.element,i=this.crossOrigin,a=this.options.preview,l=i?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",r=document.createElement("img");if(i&&(r.crossOrigin=i),r.src=l,r.alt=n,this.viewBox.appendChild(r),this.viewBoxImage=r,!!a){var o=a;typeof a=="string"?o=t.ownerDocument.querySelectorAll(a):a.querySelector&&(o=[a]),this.previews=o,Y(o,function(h){var c=document.createElement("img");Be(h,Ue,{width:h.offsetWidth,height:h.offsetHeight,html:h.innerHTML}),i&&(c.crossOrigin=i),c.src=l,c.alt=n,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',h.innerHTML="",h.appendChild(c)})}},resetPreview:function(){Y(this.previews,function(t){var i=ct(t,Ue);me(t,{width:i.width,height:i.height}),t.innerHTML=i.html,Mi(t,Ue)})},preview:function(){var t=this.imageData,i=this.canvasData,a=this.cropBoxData,l=a.width,n=a.height,r=t.width,o=t.height,h=a.left-i.left-t.left,c=a.top-i.top-t.top;!this.cropped||this.disabled||(me(this.viewBoxImage,B({width:r,height:o},Ne(B({translateX:-h,translateY:-c},t)))),Y(this.previews,function(u){var s=ct(u,Ue),d=s.width,v=s.height,m=d,y=v,x=1;l&&(x=d/l,y=n*x),n&&y>v&&(x=v/n,m=l*x,y=v),me(u,{width:m,height:y}),me(u.getElementsByTagName("img")[0],B({width:r*x,height:o*x},Ne(B({translateX:-h*x,translateY:-c*x},t))))}))}},Wi={bind:function(){var t=this.element,i=this.options,a=this.cropper;G(i.cropstart)&&ie(t,ut,i.cropstart),G(i.cropmove)&&ie(t,st,i.cropmove),G(i.cropend)&&ie(t,ot,i.cropend),G(i.crop)&&ie(t,lt,i.crop),G(i.zoom)&&ie(t,dt,i.zoom),ie(a,Ot,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&ie(a,Bt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&ie(a,Ft,this.onDblclick=this.dblclick.bind(this)),ie(t.ownerDocument,Rt,this.onCropMove=this.cropMove.bind(this)),ie(t.ownerDocument,Nt,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&ie(window,kt,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,i=this.options,a=this.cropper;G(i.cropstart)&&re(t,ut,i.cropstart),G(i.cropmove)&&re(t,st,i.cropmove),G(i.cropend)&&re(t,ot,i.cropend),G(i.crop)&&re(t,lt,i.crop),G(i.zoom)&&re(t,dt,i.zoom),re(a,Ot,this.onCropStart),i.zoomable&&i.zoomOnWheel&&re(a,Bt,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&re(a,Ft,this.onDblclick),re(t.ownerDocument,Rt,this.onCropMove),re(t.ownerDocument,Nt,this.onCropEnd),i.responsive&&re(window,kt,this.onResize)}},zi={resize:function(){if(!this.disabled){var t=this.options,i=this.container,a=this.containerData,l=i.offsetWidth/a.width,n=i.offsetHeight/a.height,r=Math.abs(l-1)>Math.abs(n-1)?l:n;if(r!==1){var o,h;t.restore&&(o=this.getCanvasData(),h=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(Y(o,function(c,u){o[u]=c*r})),this.setCropBoxData(Y(h,function(c,u){h[u]=c*r})))}}},dblclick:function(){this.disabled||this.options.dragMode===ua||this.setDragMode(Ti(this.dragBox,nt)?sa:bt)},wheel:function(t){var i=this,a=Number(this.options.wheelZoomRatio)||.1,l=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?l=t.deltaY>0?1:-1:t.wheelDelta?l=-t.wheelDelta/120:t.detail&&(l=t.detail>0?1:-1),this.zoom(-l*a,t)))},cropStart:function(t){var i=t.buttons,a=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(M(i)&&i!==1||M(a)&&a!==0||t.ctrlKey))){var l=this.options,n=this.pointers,r;t.changedTouches?Y(t.changedTouches,function(o){n[o.identifier]=We(o)}):n[t.pointerId||0]=We(t),Object.keys(n).length>1&&l.zoomable&&l.zoomOnTouch?r=oa:r=ct(t.target,ke),pi.test(r)&&Ie(this.element,ut,{originalEvent:t,action:r})!==!1&&(t.preventDefault(),this.action=r,this.cropping=!1,r===ra&&(this.cropping=!0,U(this.dragBox,ze)))}},cropMove:function(t){var i=this.action;if(!(this.disabled||!i)){var a=this.pointers;t.preventDefault(),Ie(this.element,st,{originalEvent:t,action:i})!==!1&&(t.changedTouches?Y(t.changedTouches,function(l){B(a[l.identifier]||{},We(l,!0))}):B(a[t.pointerId||0]||{},We(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var i=this.action,a=this.pointers;t.changedTouches?Y(t.changedTouches,function(l){delete a[l.identifier]}):delete a[t.pointerId||0],i&&(t.preventDefault(),Object.keys(a).length||(this.action=""),this.cropping&&(this.cropping=!1,Ee(this.dragBox,ze,this.cropped&&this.options.modal)),Ie(this.element,ot,{originalEvent:t,action:i}))}}},Hi={change:function(t){var i=this.options,a=this.canvasData,l=this.containerData,n=this.cropBoxData,r=this.pointers,o=this.action,h=i.aspectRatio,c=n.left,u=n.top,s=n.width,d=n.height,v=c+s,m=u+d,y=0,x=0,D=l.width,F=l.height,C=!0,S;!h&&t.shiftKey&&(h=s&&d?s/d:1),this.limited&&(y=n.minLeft,x=n.minTop,D=y+Math.min(l.width,a.width,a.left+a.width),F=x+Math.min(l.height,a.height,a.top+a.height));var b=r[Object.keys(r)[0]],f={x:b.endX-b.startX,y:b.endY-b.startY},w=function(T){switch(T){case ye:v+f.x>D&&(f.x=D-v);break;case be:c+f.x<y&&(f.x=y-c);break;case fe:u+f.y<x&&(f.y=x-u);break;case Ce:m+f.y>F&&(f.y=F-m);break}};switch(o){case yt:c+=f.x,u+=f.y;break;case ye:if(f.x>=0&&(v>=D||h&&(u<=x||m>=F))){C=!1;break}w(ye),s+=f.x,s<0&&(o=be,s=-s,c-=s),h&&(d=s/h,u+=(n.height-d)/2);break;case fe:if(f.y<=0&&(u<=x||h&&(c<=y||v>=D))){C=!1;break}w(fe),d-=f.y,u+=f.y,d<0&&(o=Ce,d=-d,u-=d),h&&(s=d*h,c+=(n.width-s)/2);break;case be:if(f.x<=0&&(c<=y||h&&(u<=x||m>=F))){C=!1;break}w(be),s-=f.x,c+=f.x,s<0&&(o=ye,s=-s,c-=s),h&&(d=s/h,u+=(n.height-d)/2);break;case Ce:if(f.y>=0&&(m>=F||h&&(c<=y||v>=D))){C=!1;break}w(Ce),d+=f.y,d<0&&(o=fe,d=-d,u-=d),h&&(s=d*h,c+=(n.width-s)/2);break;case Me:if(h){if(f.y<=0&&(u<=x||v>=D)){C=!1;break}w(fe),d-=f.y,u+=f.y,s=d*h}else w(fe),w(ye),f.x>=0?v<D?s+=f.x:f.y<=0&&u<=x&&(C=!1):s+=f.x,f.y<=0?u>x&&(d-=f.y,u+=f.y):(d-=f.y,u+=f.y);s<0&&d<0?(o=Oe,d=-d,s=-s,u-=d,c-=s):s<0?(o=_e,s=-s,c-=s):d<0&&(o=Fe,d=-d,u-=d);break;case _e:if(h){if(f.y<=0&&(u<=x||c<=y)){C=!1;break}w(fe),d-=f.y,u+=f.y,s=d*h,c+=n.width-s}else w(fe),w(be),f.x<=0?c>y?(s-=f.x,c+=f.x):f.y<=0&&u<=x&&(C=!1):(s-=f.x,c+=f.x),f.y<=0?u>x&&(d-=f.y,u+=f.y):(d-=f.y,u+=f.y);s<0&&d<0?(o=Fe,d=-d,s=-s,u-=d,c-=s):s<0?(o=Me,s=-s,c-=s):d<0&&(o=Oe,d=-d,u-=d);break;case Oe:if(h){if(f.x<=0&&(c<=y||m>=F)){C=!1;break}w(be),s-=f.x,c+=f.x,d=s/h}else w(Ce),w(be),f.x<=0?c>y?(s-=f.x,c+=f.x):f.y>=0&&m>=F&&(C=!1):(s-=f.x,c+=f.x),f.y>=0?m<F&&(d+=f.y):d+=f.y;s<0&&d<0?(o=Me,d=-d,s=-s,u-=d,c-=s):s<0?(o=Fe,s=-s,c-=s):d<0&&(o=_e,d=-d,u-=d);break;case Fe:if(h){if(f.x>=0&&(v>=D||m>=F)){C=!1;break}w(ye),s+=f.x,d=s/h}else w(Ce),w(ye),f.x>=0?v<D?s+=f.x:f.y>=0&&m>=F&&(C=!1):s+=f.x,f.y>=0?m<F&&(d+=f.y):d+=f.y;s<0&&d<0?(o=_e,d=-d,s=-s,u-=d,c-=s):s<0?(o=Oe,s=-s,c-=s):d<0&&(o=Me,d=-d,u-=d);break;case la:this.move(f.x,f.y),C=!1;break;case oa:this.zoom(Fi(r),t),C=!1;break;case ra:if(!f.x||!f.y){C=!1;break}S=ma(this.cropper),c=b.startX-S.left,u=b.startY-S.top,s=n.minWidth,d=n.minHeight,f.x>0?o=f.y>0?Fe:Me:f.x<0&&(c-=s,o=f.y>0?Oe:_e),f.y<0&&(u-=d),this.cropped||(ue(this.cropBox,Q),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}C&&(n.width=s,n.height=d,n.left=c,n.top=u,this.action=o,this.renderCropBox()),Y(r,function(P){P.startX=P.endX,P.startY=P.endY})}},ji={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&U(this.dragBox,ze),ue(this.cropBox,Q),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=B({},this.initialImageData),this.canvasData=B({},this.initialCanvasData),this.cropBoxData=B({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(B(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ue(this.dragBox,ze),U(this.cropBox,Q)),this},replace:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),i?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,Y(this.previews,function(a){a.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ue(this.cropper,Mt)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,U(this.cropper,Mt)),this},destroy:function(){var t=this.element;return t[k]?(t[k]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,a=this.canvasData,l=a.left,n=a.top;return this.moveTo(Ke(t)?t:l+Number(t),Ke(i)?i:n+Number(i))},moveTo:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,a=this.canvasData,l=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(M(t)&&(a.left=t,l=!0),M(i)&&(a.top=i,l=!0),l&&this.renderCanvas(!0)),this},zoom:function(t,i){var a=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(a.width*t/a.naturalWidth,null,i)},zoomTo:function(t,i,a){var l=this.options,n=this.canvasData,r=n.width,o=n.height,h=n.naturalWidth,c=n.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&l.zoomable){var u=h*t,s=c*t;if(Ie(this.element,dt,{ratio:t,oldRatio:r/h,originalEvent:a})===!1)return this;if(a){var d=this.pointers,v=ma(this.cropper),m=d&&Object.keys(d).length?Oi(d):{pageX:a.pageX,pageY:a.pageY};n.left-=(u-r)*((m.pageX-v.left-n.left)/r),n.top-=(s-o)*((m.pageY-v.top-n.top)/o)}else Se(i)&&M(i.x)&&M(i.y)?(n.left-=(u-r)*((i.x-n.left)/r),n.top-=(s-o)*((i.y-n.top)/o)):(n.left-=(u-r)/2,n.top-=(s-o)/2);n.width=u,n.height=s,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),M(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,M(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(M(i)?i:1,t)},scale:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,a=this.imageData,l=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(M(t)&&(a.scaleX=t,l=!0),M(i)&&(a.scaleY=i,l=!0),l&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.options,a=this.imageData,l=this.canvasData,n=this.cropBoxData,r;if(this.ready&&this.cropped){r={x:n.left-l.left,y:n.top-l.top,width:n.width,height:n.height};var o=a.width/a.naturalWidth;if(Y(r,function(u,s){r[s]=u/o}),t){var h=Math.round(r.y+r.height),c=Math.round(r.x+r.width);r.x=Math.round(r.x),r.y=Math.round(r.y),r.width=c-r.x,r.height=h-r.y}}else r={x:0,y:0,width:0,height:0};return i.rotatable&&(r.rotate=a.rotate||0),i.scalable&&(r.scaleX=a.scaleX||1,r.scaleY=a.scaleY||1),r},setData:function(t){var i=this.options,a=this.imageData,l=this.canvasData,n={};if(this.ready&&!this.disabled&&Se(t)){var r=!1;i.rotatable&&M(t.rotate)&&t.rotate!==a.rotate&&(a.rotate=t.rotate,r=!0),i.scalable&&(M(t.scaleX)&&t.scaleX!==a.scaleX&&(a.scaleX=t.scaleX,r=!0),M(t.scaleY)&&t.scaleY!==a.scaleY&&(a.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var o=a.width/a.naturalWidth;M(t.x)&&(n.left=t.x*o+l.left),M(t.y)&&(n.top=t.y*o+l.top),M(t.width)&&(n.width=t.width*o),M(t.height)&&(n.height=t.height*o),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?B({},this.containerData):{}},getImageData:function(){return this.sized?B({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&Y(["left","top","width","height","naturalWidth","naturalHeight"],function(a){i[a]=t[a]}),i},setCanvasData:function(t){var i=this.canvasData,a=i.aspectRatio;return this.ready&&!this.disabled&&Se(t)&&(M(t.left)&&(i.left=t.left),M(t.top)&&(i.top=t.top),M(t.width)?(i.width=t.width,i.height=t.width/a):M(t.height)&&(i.height=t.height,i.width=t.height*a),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,i;return this.ready&&this.cropped&&(i={left:t.left,top:t.top,width:t.width,height:t.height}),i||{}},setCropBoxData:function(t){var i=this.cropBoxData,a=this.options.aspectRatio,l,n;return this.ready&&this.cropped&&!this.disabled&&Se(t)&&(M(t.left)&&(i.left=t.left),M(t.top)&&(i.top=t.top),M(t.width)&&t.width!==i.width&&(l=!0,i.width=t.width),M(t.height)&&t.height!==i.height&&(n=!0,i.height=t.height),a&&(l?i.height=i.width/a:n&&(i.width=i.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,a=Ni(this.image,this.imageData,i,t);if(!this.cropped)return a;var l=this.getData(t.rounded),n=l.x,r=l.y,o=l.width,h=l.height,c=a.width/Math.floor(i.naturalWidth);c!==1&&(n*=c,r*=c,o*=c,h*=c);var u=o/h,s=ge({aspectRatio:u,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),d=ge({aspectRatio:u,width:t.minWidth||0,height:t.minHeight||0},"cover"),v=ge({aspectRatio:u,width:t.width||(c!==1?a.width:o),height:t.height||(c!==1?a.height:h)}),m=v.width,y=v.height;m=Math.min(s.width,Math.max(d.width,m)),y=Math.min(s.height,Math.max(d.height,y));var x=document.createElement("canvas"),D=x.getContext("2d");x.width=De(m),x.height=De(y),D.fillStyle=t.fillColor||"transparent",D.fillRect(0,0,m,y);var F=t.imageSmoothingEnabled,C=F===void 0?!0:F,S=t.imageSmoothingQuality;D.imageSmoothingEnabled=C,S&&(D.imageSmoothingQuality=S);var b=a.width,f=a.height,w=n,P=r,T,X,J,oe,se,ee;w<=-o||w>b?(w=0,T=0,J=0,se=0):w<=0?(J=-w,w=0,T=Math.min(b,o+w),se=T):w<=b&&(J=0,T=Math.min(o,b-w),se=T),T<=0||P<=-h||P>f?(P=0,X=0,oe=0,ee=0):P<=0?(oe=-P,P=0,X=Math.min(f,h+P),ee=X):P<=f&&(oe=0,X=Math.min(h,f-P),ee=X);var j=[w,P,T,X];if(se>0&&ee>0){var he=m/o;j.push(J*he,oe*he,se*he,ee*he)}return D.drawImage.apply(D,[a].concat(na(j.map(function(we){return Math.floor(De(we))})))),x},setAspectRatio:function(t){var i=this.options;return!this.disabled&&!Ke(t)&&(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,a=this.dragBox,l=this.face;if(this.ready&&!this.disabled){var n=t===bt,r=i.movable&&t===sa;t=n||r?t:ua,i.dragMode=t,Be(a,ke,t),Ee(a,nt,n),Ee(a,rt,r),i.cropBoxMovable||(Be(l,ke,t),Ee(l,nt,n),Ee(l,rt,r))}return this}},Xi=ce.Cropper,pa=(function(){function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(li(this,e),!t||!xi.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=B({},Vt,Se(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return oi(e,[{key:"init",value:function(){var i=this.element,a=i.tagName.toLowerCase(),l;if(!i[k]){if(i[k]=this,a==="img"){if(this.isImg=!0,l=i.getAttribute("src")||"",this.originalUrl=l,!l)return;l=i.src}else a==="canvas"&&window.HTMLCanvasElement&&(l=i.toDataURL());this.load(l)}}},{key:"load",value:function(i){var a=this;if(i){this.url=i,this.imageData={};var l=this.element,n=this.options;if(!n.rotatable&&!n.scalable&&(n.checkOrientation=!1),!n.checkOrientation||!window.ArrayBuffer){this.clone();return}if(yi.test(i)){bi.test(i)?this.read(Bi(i)):this.clone();return}var r=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=r,r.onabort=o,r.onerror=o,r.ontimeout=o,r.onprogress=function(){r.getResponseHeader("content-type")!==Lt&&r.abort()},r.onload=function(){a.read(r.response)},r.onloadend=function(){a.reloading=!1,a.xhr=null},n.checkCrossOrigin&&Yt(i)&&l.crossOrigin&&(i=Ut(i)),r.open("GET",i,!0),r.responseType="arraybuffer",r.withCredentials=l.crossOrigin==="use-credentials",r.send()}}},{key:"read",value:function(i){var a=this.options,l=this.imageData,n=Vi(i),r=0,o=1,h=1;if(n>1){this.url=Li(i,Lt);var c=$i(n);r=c.rotate,o=c.scaleX,h=c.scaleY}a.rotatable&&(l.rotate=r),a.scalable&&(l.scaleX=o,l.scaleY=h),this.clone()}},{key:"clone",value:function(){var i=this.element,a=this.url,l=i.crossOrigin,n=a;this.options.checkCrossOrigin&&Yt(a)&&(l||(l="anonymous"),n=Ut(a)),this.crossOrigin=l,this.crossOriginUrl=n;var r=document.createElement("img");l&&(r.crossOrigin=l),r.src=n||a,r.alt=i.alt||"The image to crop",this.image=r,r.onload=this.start.bind(this),r.onerror=this.stop.bind(this),U(r,_t),i.parentNode.insertBefore(r,i.nextSibling)}},{key:"start",value:function(){var i=this,a=this.image;a.onload=null,a.onerror=null,this.sizing=!0;var l=ce.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ce.navigator.userAgent),n=function(c,u){B(i.imageData,{naturalWidth:c,naturalHeight:u,aspectRatio:c/u}),i.initialImageData=B({},i.imageData),i.sizing=!1,i.sized=!0,i.build()};if(a.naturalWidth&&!l){n(a.naturalWidth,a.naturalHeight);return}var r=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=r,r.onload=function(){n(r.width,r.height),l||o.removeChild(r)},r.src=a.src,l||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(r))}},{key:"stop",value:function(){var i=this.image;i.onload=null,i.onerror=null,i.parentNode.removeChild(i),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var i=this.element,a=this.options,l=this.image,n=i.parentNode,r=document.createElement("div");r.innerHTML=wi;var o=r.querySelector(".".concat(k,"-container")),h=o.querySelector(".".concat(k,"-canvas")),c=o.querySelector(".".concat(k,"-drag-box")),u=o.querySelector(".".concat(k,"-crop-box")),s=u.querySelector(".".concat(k,"-face"));this.container=n,this.cropper=o,this.canvas=h,this.dragBox=c,this.cropBox=u,this.viewBox=o.querySelector(".".concat(k,"-view-box")),this.face=s,h.appendChild(l),U(i,Q),n.insertBefore(o,i.nextSibling),ue(l,_t),this.initPreview(),this.bind(),a.initialAspectRatio=Math.max(0,a.initialAspectRatio)||NaN,a.aspectRatio=Math.max(0,a.aspectRatio)||NaN,a.viewMode=Math.max(0,Math.min(3,Math.round(a.viewMode)))||0,U(u,Q),a.guides||U(u.getElementsByClassName("".concat(k,"-dashed")),Q),a.center||U(u.getElementsByClassName("".concat(k,"-center")),Q),a.background&&U(o,"".concat(k,"-bg")),a.highlight||U(s,fi),a.cropBoxMovable&&(U(s,rt),Be(s,ke,yt)),a.cropBoxResizable||(U(u.getElementsByClassName("".concat(k,"-line")),Q),U(u.getElementsByClassName("".concat(k,"-point")),Q)),this.render(),this.ready=!0,this.setDragMode(a.dragMode),a.autoCrop&&this.crop(),this.setData(a.data),G(a.ready)&&ie(i,At,a.ready,{once:!0}),Ie(i,At)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var i=this.cropper.parentNode;i&&i.removeChild(this.cropper),ue(this.element,Q)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Xi,e}},{key:"setDefaults",value:function(i){B(Vt,Se(i)&&i)}}])})();B(pa.prototype,Yi,Ui,Wi,zi,Hi,ji);const qi=["src"];var Gi=A({name:"ProCropper",__name:"cropper",props:{imgSrc:{type:String,default:""},cropperWidth:{type:Number,default:void 0},cropperHeight:{type:Number,default:void 0},cropperProps:{type:Object,default:()=>({})}},setup(e,{expose:t}){let i;const a=ai("cropper"),l=e,n=Z(1),r=Z(),o=c=>{let u;c==="minus"?u=n.value-.1:u=n.value+.1,i.zoom(u-n.value),n.value=u},h=(c,u)=>i?i.getCroppedCanvas(u).toDataURL(c.type):void 0;return Zt(()=>{var c;r.value&&(i=new pa(r.value,(c=l.cropperProps)!=null?c:{}))}),t({getCroppedCanvas:h}),(c,u)=>(Za(),Qa("div",{class:Ye(Pe(a))},[Te("div",{class:Ye(`${Pe(a)}-container`)},[Te("img",{ref_key:"imgRef",ref:r,src:e.imgSrc,class:Ye(`${Pe(a)}-img`),alt:""},null,10,qi)],2),Te("div",{class:Ye(`${Pe(a)}-control`)},[Te("button",{onClick:u[0]||(u[0]=s=>o("minus"))},"-"),g(Pe(Gt),{value:n.value,"onUpdate:value":u[1]||(u[1]=s=>n.value=s),min:.5,max:3,step:.1},null,8,["value"]),Te("button",{onClick:u[2]||(u[2]=s=>o("plus"))},"+")],2)],2))}});const Ki=ii(Gi);function Wt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Jt(e)}var H=A({name:"FieldReadonly",inheritAttrs:!1,props:{text:{type:[String,Number],default:void 0},theme:{type:String,default:void 0},customUi:{type:Boolean,default:void 0},tooltip:{type:[Boolean,String],default:void 0},copy:{type:Boolean,default:void 0},emptyText:{type:String,default:"-"},ellipsis:{type:Boolean,default:!0},autoLine:{type:Boolean,default:!1}},setup(e,{attrs:t}){const{prefixCls:i,customUi:a}=pe(),l=p(()=>{var o,h;return(h=(o=e.customUi)!=null?o:a.value)!=null?h:!0}),n=p(()=>({[`${i}-readonly`]:!0,[`${i}-readonly-custom-ui`]:l.value,[`${i}-readonly-ellipsis`]:e.ellipsis,[`${i}-readonly-autoline`]:e.autoLine,[`${t.class}`]:!0})),r=p(()=>e.text===void 0||e.text===null||e.text===""?e.emptyText:e.text);return()=>{const o=g("div",{class:n.value,style:t?.style},[g("span",{class:`${i}-readonly-text`},[r.value]),l.value&&e.copy&&g("span",null,[g(Sa,{style:"color: rgb(134, 144, 156); font-size:12px"},null)])]);if(e.copy&&e.text)return g(Ca,{text:e.text},Wt(o)?o:{default:()=>[o]});if(e.tooltip){const h=typeof e.tooltip=="string"?e.tooltip:e.text;if(h)return g(Ea,{placement:"topLeft",title:h},Wt(o)?o:{default:()=>[o]})}return o}}});const Qi=["addonAfter","addonBefore","suffix","prefix"];var Zi=A({name:"FieldText",props:{...L(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},suffix:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:String}},setup(e,{attrs:t}){const i=z(),a=W(),l=p({get:()=>e.value,set:r=>{var o;(o=e.onChange)==null||o.call(e,r)}}),n=p(()=>{const r={};return Qi.forEach(o=>{const h=R(e[o],a);h&&(r[o]=()=>g(N,{vnode:h},null))}),r});return()=>e.readonly?g(H,I({text:l.value,class:t.class,style:t.style},e.readonlyProps),null):g(ft,I({value:l.value,"onUpdate:value":r=>l.value=r},t,{placeholder:e.placeholder||i.getMessage("form.inputPlaceholder","请输入")}),n.value)}});const Ji=["addonAfter","addonBefore","prefix","upIcon","downIcon"];var en=A({name:"FieldDigit",props:{...L(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},upIcon:{type:String,default:""},downIcon:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:String}},setup(e,{attrs:t}){const i=z(),a=W(),l=p(()=>{const r={};return Ji.forEach(o=>{const h=R(e[o],a);h&&(r[o]=()=>g(N,{vnode:h},null))}),r}),n=r=>{var o;(o=e.onChange)==null||o.call(e,r)};return()=>e.readonly?g(H,I({text:e.value,class:t.class,style:t.style},e.readonlyProps),null):g(Ze,I({value:e.value},t,{placeholder:e.placeholder||i.getMessage("form.inputPlaceholder","请输入"),onChange:n}),l.value)}});const tn=["addonAfter","addonBefore","prefix","upIcon","downIcon"];var an=A({name:"FieldDigitRange",inheritAttrs:!1,props:{...L(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},upIcon:{type:String,default:""},downIcon:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:[String,Array],default:()=>[]},separator:{type:String,default:"~"},separatorWidth:{type:Number,default:30}},emits:["update:value","change"],setup(e,{attrs:t}){const i=z(),a=W(),l=vt.useInjectFormItemContext(),n=p(()=>ta(t,["class","style"])),r=p(()=>{const s={};return tn.forEach(d=>{const v=R(e[d],a);v&&(s[d]=()=>g(N,{vnode:v},null))}),s}),o=p(()=>{var s,d,v;if((s=e.value)!=null&&s.length)return`${(d=e.value)==null?void 0:d[0]} - ${(v=e.value)==null?void 0:v[1]}`}),h=s=>(Array.isArray(e.placeholder)?e.placeholder[s]:e.placeholder)||i.getMessage("form.inputPlaceholder","请输入"),c=s=>{var d,v,m,y;if(Array.isArray(e.value)){const[x,D]=e.value;typeof x=="number"&&typeof D=="number"&&x>D?((d=e.onChange)==null||d.call(e,[D,x]),l.onFieldChange()):x===void 0&&D===void 0&&((v=e.onChange)==null||v.call(e,void 0),l.onFieldChange())}(y=(m=n.value)==null?void 0:m.onBlur)==null||y.call(m,s)},u=(s,d)=>{var v;const m=[...e.value||[]];m[s]=d===null?void 0:d,(v=e.onChange)==null||v.call(e,m),l.onFieldChange()};return()=>e.readonly?g(H,I({text:o.value,class:t.class,style:t.style},e.readonlyProps),null):g(Da.Compact,{class:t.class,style:t.style},{default:()=>{var s,d,v,m;return[g(Ze,I(n.value,{value:(s=e.value)==null?void 0:s[0],style:{width:`calc((100% - ${e.separatorWidth}px) / 2)`,marginInlineEnd:"0!important"},placeholder:h(0),defaultValue:(d=n.value.defaultValue)==null?void 0:d[0],onBlur:c,onChange:y=>u(0,y)}),r.value),g(ft,{style:{width:e.separatorWidth+"px",textAlign:"center",borderInlineStart:"0px",borderInlineEnd:"0px",pointerEvents:"none"},placeholder:e.separator,disabled:!0},null),g(Ze,I(n.value,{value:(v=e.value)==null?void 0:v[1],id:`${n.value.id}-1`,style:{width:`calc((100% - ${e.separatorWidth}px) / 2)`},placeholder:h(1),defaultValue:(m=n.value.defaultValue)==null?void 0:m[1],onChange:y=>u(1,y),onBlur:c}),r.value)]}})}}),nn=A({name:"FieldTextarea",props:{...L(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},suffix:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:String}},setup(e,{attrs:t}){const i=z(),a=p({get:()=>e.value,set:l=>{var n;(n=e.onChange)==null||n.call(e,l)}});return()=>e.readonly?g(H,I({text:a.value,class:t.class,style:t.style},e.readonlyProps),null):g(Ia,I({value:a.value,"onUpdate:value":l=>a.value=l},t,{placeholder:e.placeholder||i.getMessage("form.inputPlaceholder","请输入")}),null)}});const rn=["addonAfter","addonBefore","suffix","prefix"];var ln=A({name:"FieldPassword",props:{...L(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},suffix:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:String}},setup(e,{attrs:t}){const i=z(),a=W(),l=p({get:()=>e.value,set:r=>{var o;(o=e.onChange)==null||o.call(e,r)}}),n=p(()=>{const r={};return rn.forEach(o=>{const h=R(e[o],a);h&&(r[o]=()=>g(N,{vnode:h},null))}),r});return()=>g(ft.Password,I({value:l.value,"onUpdate:value":r=>l.value=r},t,{placeholder:e.placeholder||i.getMessage("form.inputPlaceholder","请输入")}),n.value)}});function on(e){const t=Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase();return t==="string"&&typeof e=="object"?"object":e===null?"null":e===void 0?"undefined":t}const sn=e=>on(e)==="map"?e:new Map(Object.entries(e??{})),un=e=>{const t=[],i=sn(e);return i.forEach((a,l)=>{var n;const r=(n=i.get(l))!=null?n:i.get(`${l}`);if(r){if(typeof r=="object"&&r?.text){t.push({text:r?.text,value:l,label:r?.text,disabled:r.disabled});return}t.push({text:r,value:l,label:r})}}),t},ht=e=>e?.map(t=>He(t)?(t?.text&&(t.label=t?.text),Array.isArray(t.options)&&t.options.length&&(t.options=ht(t.options)),Array.isArray(t.children)&&t.children.length&&(t.children=ht(t.children)),t):{label:t,value:t});function Le({options:e,request:t,params:i,valueEnum:a,fieldNames:l,dependencies:n,paginationConfig:r}){const{formData:o}=pe(),{index:h,rowData:c}=qt(),u=Z(!0),s=Z(0),d=p(()=>K(e,o.value,c?.value)),v=Z([]),m=p(()=>l??{label:"label",value:"value",children:"children"}),[y,x]=ba(()=>{var S;return(S=r?.value)!=null?S:{}}),D=p(()=>{const S={};if(i){const b=K(i,o.value);Je(S,b)}return Array.isArray(n)&&(n.forEach(b=>{const f=Kt(o.value,b);f&&(Array.isArray(b)?et(S,b.join("-"),f):et(S,b,f))}),r?.value&&x({...y?.value,current:1})),y?.value&&Je(S,y?.value),S});ve([()=>a,()=>d.value],()=>{var S;if(Array.isArray(d.value)&&((S=d.value)==null?void 0:S.length)>0)v.value=ht(d.value);else{const b=K(a,o.value);v.value=un(b)}},{immediate:!0});const F=xa({request:t}),C=Ta(async()=>{var S;u.value=!0;const b=await F(D.value,h?.value);if(Array.isArray(b))v.value=b.map(f=>(f?.text&&(f.label=f?.text),f));else if(He(b)){const{success:f,total:w,data:P}=b;f&&(r?.value?(s.value=w,((S=y?.value)==null?void 0:S.current)===1?v.value=P.map(T=>(T?.text&&(T.label=T?.text),T)):v.value=[...v.value,...P.map(T=>(T?.text&&(T.label=T?.text),T))]):v.value=P.map(T=>(T?.text&&(T.label=T?.text),T)))}u.value=!1},200);return ve(D,()=>{t&&C()},{immediate:!0}),Zt(()=>{t||(u.value=!1)}),{loading:u,total:s,fieldNames:m,mergeOptions:v,requestOptions:C,innerParams:y,setInnerParams:x}}const dn=["menuItemSelectedIcon","clearIcon","dropdownRender","maxTagPlaceholder","notFoundContent","option","removeIcon","tagRender","suffixIcon"];var cn=A({name:"FieldSelect",inheritAttrs:!1,props:{...L(),menuItemSelectedIcon:{type:String,default:""},clearIcon:{type:String,default:""},dropdownRender:{type:String,default:""},maxTagPlaceholder:{type:String,default:""},notFoundContent:{type:String,default:""},option:{type:String,default:""},removeIcon:{type:String,default:""},suffixIcon:{type:String,default:""},tagRender:{type:String,default:""},placeholder:{type:String},pagination:{type:[Boolean,Object],default:!1},showSearch:{type:Boolean,default:!1},filterOption:Function,mode:{type:String,default:void 0}},setup(e,{attrs:t,expose:i}){const a=z(),l=W(),n=p(()=>e.pagination?e.pagination===!0?{current:1,pageSize:10}:{current:e.pagination.current||1,pageSize:e.pagination.pageSize||10}:null),{mergeOptions:r,loading:o,fieldNames:h,requestOptions:c,total:u,innerParams:s,setInnerParams:d}=Le({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,fieldNames:t.fieldNames,params:e.params,paginationConfig:n}),v=p(()=>e.request&&n.value?()=>!0:e.filterOption?e.filterOption:(b,f)=>f.label.toLowerCase().indexOf(b.toLowerCase())>=0),m=p(()=>{if(!(e.request&&o.value))return e.value}),y=p(()=>{var b;if(!m.value)return;if(Array.isArray(m.value))return r.value.filter(w=>t.labelInValue?m.value.find(P=>P.value===w.value):m.value.includes(w.value)).map(w=>{var P;return(P=w.label)!=null?P:w.text}).join("，");const f=r.value.find(w=>t.labelInValue?w.value===m.value.value:w.value===m.value);return(b=f?.label)!=null?b:f?.text}),x=p(()=>{const b={};return dn.forEach(f=>{const w=R(e[f],l);w&&(b[f]=P=>g(N,{vnode:w,props:P},null))}),b}),D=b=>typeof b>"u"?e.mode==="multiple"||e.mode==="tags"?[]:null:b,F=(b,f)=>{var w;(w=e.onChange)==null||w.call(e,D(b),f)},C=b=>{var f,w;n.value&&(d({keyword:b,current:1,pageSize:n.value.pageSize}),(Array.isArray(m.value)?(f=m.value)!=null&&f.length:m.value)&&((w=e.onChange)==null||w.call(e,D())))},S=b=>{if(!n.value)return;const{target:f}=b;f.scrollTop+f.offsetHeight===f.scrollHeight&&r.value.length<u.value&&d({...s.value,current:s.value.current+1})};return i({refresh:()=>{e.request&&c()}}),()=>e.readonly?g(H,I({text:y.value,class:t.class,style:t.style},e.readonlyProps),null):g(Pa,I({value:m.value},t,{style:{minWidth:"120px"},mode:e.mode,fieldNames:h.value,loading:o.value,filterOption:v.value,placeholder:e.placeholder||a.getMessage("form.selectPlaceholder","请选择"),options:r.value,showSearch:e.showSearch,onChange:F,onPopupScroll:S,onSearch:e.showSearch?C:void 0}),x.value)}});const hn=["maxTagPlaceholder","notFoundContent","searchPlaceholder","suffixIcon","tagRender","title"];var fn=A({name:"FieldTreeSelect",props:{...L(),maxTagPlaceholder:{type:String,default:""},notFoundContent:{type:String,default:""},searchPlaceholder:{type:String,default:""},suffixIcon:{type:String,default:""},tagRender:{type:String,default:""},title:{type:String,default:""},placeholder:{type:String},treeCheckable:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0}},setup(e,{attrs:t}){const i=z(),a=W(),{mergeOptions:l,loading:n,fieldNames:r}=Le({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,fieldNames:t.fieldNames,params:e.params}),o=p(()=>{if(!(e.request&&n.value))return e.value}),h=p(()=>{var d;if(!o.value)return;if(Array.isArray(o.value))return o.value.length?l.value.filter(m=>o.value.includes(m.value)).map(m=>{var y;return(y=m.label)!=null?y:m.text}).join("，"):void 0;const v=l.value.find(m=>m.value===o.value);return(d=v?.label)!=null?d:v?.text}),c=p(()=>{const d={};return hn.forEach(v=>{const m=R(e[v],a);m&&(d[v]=y=>g(N,{vnode:m,props:y},null))}),d}),u=d=>typeof d>"u"?e.multiple||e.treeCheckable?[]:null:d,s=(d,v)=>{var m;(m=e.onChange)==null||m.call(e,u(d),v)};return()=>e.readonly?g(H,I({text:h.value,class:t.class,style:t.style},e.readonlyProps),null):g(Ma,I({value:o.value},t,{style:{minWidth:"160px"},treeCheckable:e.treeCheckable,multiple:e.multiple,fieldNames:r.value,loading:n.value,placeholder:e.placeholder||i.getMessage("form.selectPlaceholder","请选择"),treeData:l.value,onChange:s}),c.value)}}),vn=A({name:"FieldCheckbox",props:{...L()},emits:["change"],setup(e,{attrs:t}){const i=p(()=>e.value?"是":"否"),a=l=>{var n;(n=e.onChange)==null||n.call(e,l.target.checked)};return()=>e.readonly?g(H,I({text:i.value,class:t.class,style:t.style},e.readonlyProps),null):g(_a,I({checked:e.value},t,{onChange:a}),null)}}),mn=A({name:"FieldCheckboxGroup",props:{...L()},setup(e,{attrs:t}){const{disabled:i}=pe(),{mergeOptions:a,loading:l}=Le({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,params:e.params}),n=p(()=>{var o;if(!e.value)return;if(Array.isArray(e.value))return e.value.length?a.value.filter(c=>e.value.includes(c.value)).map(c=>{var u;return(u=c.label)!=null?u:c.text}).join("，"):void 0;const h=a.value.find(c=>c.value===e.value);return(o=h?.label)!=null?o:h?.text}),r=o=>{var h;(h=e.onChange)==null||h.call(e,o)};return()=>{var o;return e.readonly?g(H,I({text:n.value,class:t.class,style:t.style},e.readonlyProps),null):g(Fa,I({value:e.value},t,{disabled:(o=t.disabled)!=null?o:i?.value,options:a.value,onChange:r}),{default:()=>[l.value&&g(mt,{style:"color: rgba(0, 0, 0, 0.25);"},null)]})}}});function gn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Jt(e)}var pn=A({name:"FieldRadioGroup",props:{...L(),radioLabel:{type:String,default:""}},setup(e,{attrs:t}){const{formData:i}=pe(),a=W(),{mergeOptions:l,loading:n}=Le({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,params:e.params}),r=p(()=>{var c;if(!e.value)return;const u=l.value.find(s=>s.value===e.value);return(c=u?.label)!=null?c:u?.text}),o=p(()=>R(e.radioLabel,a)),h=c=>{var u;(u=e.onChange)==null||u.call(e,c.target.value)};return()=>{var c;if(e.readonly)return g(H,I({text:r.value,class:t.class,style:t.style},e.readonlyProps),null);if(((c=l.value)==null?void 0:c.length)>0){let u;return g(Ra,I({value:e.value},t,{onChange:h}),gn(u=l.value.map(s=>{var d;return g(Oa,{value:s.value,key:(d=s.value)==null?void 0:d.toString(),disabled:s.disabled},{default:()=>[o.value?g(N,{vnode:o.value,props:{option:s,value:e.value,formData:i.value}},null):s.label]})}))?u:{default:()=>[u]})}else return n.value?g(mt,{style:"color: rgba(0, 0, 0, 0.25);"},null):null}}});const yn=["expandIcon","clearIcon","displayRender","maxTagPlaceholder","notFoundContent","removeIcon","tagRender","suffixIcon"];var bn=A({name:"FieldCascader",props:{...L(),expandIcon:{type:String,default:""},clearIcon:{type:String,default:""},displayRender:{type:String,default:""},maxTagPlaceholder:{type:String,default:""},notFoundContent:{type:String,default:""},removeIcon:{type:String,default:""},suffixIcon:{type:String,default:""},tagRender:{type:String,default:""},placeholder:{type:String},multiple:{type:Boolean,default:void 0}},setup(e,{attrs:t}){const i=z(),a=W(),{mergeOptions:l,loading:n,fieldNames:r}=Le({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,fieldNames:t.fieldNames,params:e.params}),o=p(()=>{if(!(e.request&&n.value))return e.value}),h=p(()=>{var d;if(!o.value)return;if(Array.isArray(o.value))return l.value.filter(m=>o.value.includes(m.value)).map(m=>{var y;return(y=m.label)!=null?y:m.text}).join("，");const v=l.value.find(m=>m.value===o.value);return(d=v?.label)!=null?d:v?.text}),c=p(()=>{const d={};return yn.forEach(v=>{const m=R(e[v],a);m&&(d[v]=y=>g(N,{vnode:m,props:y},null))}),d}),u=d=>typeof d>"u"?e.multiple?[]:null:d,s=(d,v)=>{var m;(m=e.onChange)==null||m.call(e,u(d),v)};return()=>e.readonly?g(H,I({text:h.value,class:t.class,style:t.style},e.readonlyProps),null):g(Na,I({value:o.value},t,{style:{minWidth:"100px"},multiple:e.multiple,fieldNames:r.value,loading:n.value,placeholder:e.placeholder||i.getMessage("form.selectPlaceholder","请选择"),options:l.value,onChange:s}),c.value)}});const xn=["checkedChildren","unCheckedChildren"];var wn=A({name:"FieldSwitch",props:{...L(),checkedChildren:{type:String},unCheckedChildren:{type:String}},setup(e,{attrs:t}){const i=z(),a=W(),l=p(()=>!e.value||e.value===t.unCheckedValue?e.unCheckedChildren||i.getMessage("switch.open","打开"):e.value||e.value===t.checkedValue?e.checkedChildren||i.getMessage("switch.close","关闭"):""),n=p(()=>{const o={};return xn.forEach(h=>{const c=R(e[h],a);c&&(o[h]=u=>g(N,{vnode:c,props:u},null))}),o}),r=(o,h)=>{var c;(c=e.onChange)==null||c.call(e,o,h)};return()=>e.readonly?g(H,I({text:l.value,class:t.class,style:t.style},e.readonlyProps),null):g(Aa,I({checked:e.value},t,{onChange:r}),n.value)}});const Cn=["mark"];var Sn=A({name:"FieldSlider",props:{...L(),mark:{type:String,default:""}},setup(e,{attrs:t}){const i=W(),a=p(()=>{const n={};return Cn.forEach(r=>{const o=R(e[r],i);o&&(n[r]=()=>g(N,{vnode:o},null))}),n}),l=n=>{var r;(r=e.onChange)==null||r.call(e,n)};return()=>e.readonly?g(H,I({text:e.value,class:t.class,style:t.style},e.readonlyProps),null):g(Gt,I({value:e.value},t,{style:{minWidth:"120px"},onChange:l}),a.value)}});const En=["character"];var Dn=A({name:"FieldRate",props:{...L(),character:{type:String,default:""}},setup(e,{attrs:t}){const i=W(),a=p(()=>{const n={};return En.forEach(r=>{const o=R(e[r],i);o&&(n[r]=()=>g(N,{vnode:o},null))}),n}),l=n=>{var r;(r=e.onChange)==null||r.call(e,n)};return()=>e.readonly?g(H,I({text:e.value,class:t.class,style:t.style},e.readonlyProps),null):g(ka,I({value:e.value},t,{style:{minWidth:"120px"},onChange:l}),a.value)}});le.extend(Ba);const zt=e=>!!e?._isAMomentObject,Ve=(e,t)=>Ja(e)||le.isDayjs(e)||zt(e)?zt(e)?le(e):e:Array.isArray(e)?e.map(i=>Ve(i,t)):typeof e=="number"?le(e):le(e,t),de={date:"YYYY-MM-DD",year:"YYYY",month:"YYYY-MM",week:"YYYY-wo",quarter:"YYYY-QQ",time:"HH:mm:ss"},In=["dateRender","nextIcon","prevIcon","suffixIcon","superNextIcon","superPrevIcon","renderExtraFooter","monthCellRender"];var Tn=A({name:"FieldDatePicker",props:{...L(),dateRender:{type:String,default:""},nextIcon:{type:String,default:""},prevIcon:{type:String,default:""},suffixIcon:{type:String,default:""},superNextIcon:{type:String,default:""},superPrevIcon:{type:String,default:""},renderExtraFooter:{type:String,default:""},monthCellRender:{type:String,default:""},placeholder:{type:String},format:{type:[String,Function],default:void 0},picker:{type:String,default:"date"},valueFormat:{type:String,default:void 0},showTime:{type:[Boolean,Object],default:void 0}},setup(e,{attrs:t}){const i=z(),a=W(),l=p(()=>{var s;const d=de[e.picker];return e.showTime===!0?d+" "+de.time:He(e.showTime)?d+" "+((s=e.showTime.format)!=null?s:de.time):d}),n=p(()=>{var s;return(s=K(e.format))!=null?s:l.value}),r=p(()=>{var s;return(s=e.valueFormat)!=null?s:l.value}),o=p(()=>Ve(e.value,n.value)),h=p(()=>{if(o.value)return le(o.value).format(r.value)}),c=p(()=>{const s={};return In.forEach(d=>{const v=R(e[d],a);v&&(s[d]=()=>g(N,{vnode:v},null))}),s}),u=(s,d)=>{var v;(v=e.onChange)==null||v.call(e,s,d)};return()=>e.readonly?g(H,I({text:h.value,class:t.class,style:t.style},e.readonlyProps),null):g(La,I({value:o.value},t,{format:n.value,picker:e.picker,showTime:e.showTime,valueFormat:r.value,placeholder:e.placeholder||i.getMessage("form.selectPlaceholder","请选择"),onChange:u}),c.value)}});const Pn=["dateRender","nextIcon","prevIcon","suffixIcon","superNextIcon","superPrevIcon","renderExtraFooter","separator"];var Mn=A({name:"FieldDateRangePicker",props:{...L(),dateRender:{type:String,default:""},nextIcon:{type:String,default:""},prevIcon:{type:String,default:""},suffixIcon:{type:String,default:""},superNextIcon:{type:String,default:""},superPrevIcon:{type:String,default:""},renderExtraFooter:{type:String,default:""},separator:{type:String,default:""},placeholder:{type:Array,default:()=>[]},format:{type:[String,Function],default:void 0},picker:{type:String,default:"date"},valueFormat:{type:String,default:void 0},showTime:{type:[Boolean,Object],default:void 0}},setup(e,{attrs:t}){const i=z(),a=W(),l=p(()=>{var s;const d=de[e.picker];return e.showTime===!0?d+" "+de.time:He(e.showTime)?d+" "+((s=e.showTime.format)!=null?s:de.time):d}),n=p(()=>{var s;return(s=K(e.format))!=null?s:l.value}),r=p(()=>{var s;return(s=e.valueFormat)!=null?s:l.value}),o=p(()=>Ve(e.value,n.value)),h=p(()=>{var s;if((s=o.value)!=null&&s.length)return`${le(o.value[0]).format(r.value)} - ${le(o.value[1]).format(r.value)}`}),c=p(()=>{const s={};return Pn.forEach(d=>{const v=R(e[d],a);v&&(s[d]=()=>g(N,{vnode:v},null))}),s}),u=(s,d)=>{var v;(v=e.onChange)==null||v.call(e,s,d)};return()=>{var s;return e.readonly?g(H,I({text:h.value,class:t.class,style:t.style},e.readonlyProps),null):g(Va,I({value:o.value},t,{format:n.value,picker:e.picker,showTime:e.showTime,valueFormat:r.value,placeholder:((s=e.placeholder)==null?void 0:s.length)===2?e.placeholder:[i.getMessage("form.selectPlaceholder","请选择"),i.getMessage("form.selectPlaceholder","请选择")],onChange:u}),c.value)}}});const _n=["clearIcon","renderExtraFooter","suffixIcon"];var Fn=A({name:"FieldTimePicker",props:{...L(),clearIcon:{type:String,default:""},renderExtraFooter:{type:String,default:""},suffixIcon:{type:String,default:""},placeholder:{type:String},format:{type:String,default:void 0},valueFormat:{type:String,default:void 0}},setup(e,{attrs:t}){const i=z(),a=W(),l=p(()=>{var u;return(u=e.format)!=null?u:de.time}),n=p(()=>{var u;return(u=e.valueFormat)!=null?u:de.time}),r=p(()=>Ve(e.value,l.value)),o=p(()=>{if(r.value)return le(r.value).format(n.value)}),h=p(()=>{const u={};return _n.forEach(s=>{const d=R(e[s],a);d&&(u[s]=()=>g(N,{vnode:d},null))}),u}),c=(u,s)=>{var d;(d=e.onChange)==null||d.call(e,u,s)};return()=>e.readonly?g(H,I({text:o.value,class:t.class,style:t.style},e.readonlyProps),null):g($a,I({value:r.value},t,{format:l.value,valueFormat:n.value,placeholder:e.placeholder||i.getMessage("form.selectPlaceholder","请选择"),onChange:c}),h.value)}});const On=["dateRender","nextIcon","prevIcon","suffixIcon","superNextIcon","superPrevIcon","renderExtraFooter","separator"];var Rn=A({name:"FieldTimeRangePicker",props:{...L(),dateRender:{type:String,default:""},nextIcon:{type:String,default:""},prevIcon:{type:String,default:""},suffixIcon:{type:String,default:""},superNextIcon:{type:String,default:""},superPrevIcon:{type:String,default:""},renderExtraFooter:{type:String,default:""},separator:{type:String,default:""},placeholder:{type:Array,default:()=>[]},format:{type:String,default:void 0},valueFormat:{type:String,default:void 0}},setup(e,{attrs:t}){const i=z(),a=W(),l=p(()=>{var u;return(u=e.format)!=null?u:de.time}),n=p(()=>{var u;return(u=e.valueFormat)!=null?u:de.time}),r=p(()=>Ve(e.value,l.value)),o=p(()=>{var u;if((u=r.value)!=null&&u.length)return`${le(r.value[0]).format(n.value)} - ${le(r.value[1]).format(n.value)}`}),h=p(()=>{const u={};return On.forEach(s=>{const d=R(e[s],a);d&&(u[s]=()=>g(N,{vnode:d},null))}),u}),c=(u,s)=>{var d;(d=e.onChange)==null||d.call(e,u,s)};return()=>{var u;return e.readonly?g(H,I({text:o.value,class:t.class,style:t.style},e.readonlyProps),null):g(Ya,I({value:r.value},t,{format:l.value,valueFormat:n.value,placeholder:((u=e.placeholder)==null?void 0:u.length)===2?e.placeholder:[i.getMessage("form.selectPlaceholder","请选择"),i.getMessage("form.selectPlaceholder","请选择")],onChange:c}),h.value)}}});const Nn=["downloadIcon","itemRender","previewIcon","removeIcon"];var An=A({name:"FieldUploadButton",props:{...L(),iconRender:{type:String,default:""},downloadIcon:{type:String,default:""},itemRender:{type:String,default:""},previewIcon:{type:String,default:""},removeIcon:{type:String,default:""},title:{type:String},name:{type:String,default:"file"},max:{type:Number,default:void 0},disabled:{type:Boolean,default:void 0},buttonProps:{type:Object,default:void 0},fileList:{type:Array,default:void 0},listType:{type:String,default:"picture"}},setup(e,{attrs:t}){const i=z(),a=W(),l=p(()=>{var s;return(s=e.fileList)!=null?s:e.value}),n=p(()=>{var s;return e.max===void 0||!l.value||((s=l.value)==null?void 0:s.length)<e.max}),r=p(()=>e.listType==="picture-card"),o=p(()=>{const s={};return Nn.forEach(d=>{const v=R(e[d],a);v&&(s[d]=()=>g(N,{vnode:v},null))}),s}),h=p(()=>{const s=R(e.iconRender,a);return Re(s)?g(N,{vnode:s},null):g(Ua,null,null)}),c=p(()=>{const s=R(e.title,a);return Re(s)?g(N,{vnode:s},null):e.title||i.getMessage("upload.button","单击上传")}),u=s=>{var d;(d=e.onChange)==null||d.call(e,s.fileList,s)};return()=>g(Ae,I({fileList:l.value},t,{listType:e.listType,name:e.name,onChange:u}),{default:()=>[n.value&&(r.value?g("span",null,[h.value,c.value]):g(Wa,I({disabled:e.disabled},e.buttonProps),{default:()=>[h.value,c.value]}))],...o.value})}});const kn=["downloadIcon","itemRender","previewIcon","removeIcon"];var Bn=A({name:"FieldUploadDragger",props:{...L(),iconRender:{type:String,default:""},downloadIcon:{type:String,default:""},itemRender:{type:String,default:""},previewIcon:{type:String,default:""},removeIcon:{type:String,default:""},title:{type:String},description:{type:String},name:{type:String,default:"file"},max:{type:Number,default:void 0},disabled:{type:Boolean,default:void 0},buttonProps:{type:Object,default:void 0},fileList:{type:Array,default:void 0}},setup(e,{attrs:t}){const{token:i}=za.useToken(),{prefixCls:a}=pe(),l=z(),n=W(),r=p(()=>{var m;return(m=e.fileList)!=null?m:e.value}),o=p(()=>`${a}-upload`),h=p(()=>{var m;return e.max===void 0||!r.value||((m=r.value)==null?void 0:m.length)<e.max}),c=p(()=>{const m={};return kn.forEach(y=>{const x=R(e[y],n);x&&(m[y]=()=>g(N,{vnode:x},null))}),m}),u=p(()=>{const m=R(e.iconRender,n);return Re(m)?g(N,{vnode:m},null):g(Ha,null,null)}),s=p(()=>{const m=R(e.title,n);return Re(m)?g(N,{vnode:m},null):e.title||l.getMessage("upload.dragger.text","单击或拖动文件到此区域进行上传")}),d=p(()=>{const m=R(e.description,n);return Re(m)?g(N,{vnode:m},null):e.description||l.getMessage("upload.dragger.hint","支持单次或批量上传")}),v=m=>{var y;(y=e.onChange)==null||y.call(e,m.fileList,m)};return()=>g(Ae.Dragger,I({fileList:r.value},t,{name:e.name,style:{...t?.style,display:h.value?void 0:"none"},onChange:v}),{default:()=>[g("p",{class:`${o.value}-drag-icon`,style:{color:i.value.colorPrimary}},[u.value]),g("p",{class:`${o.value}-text`},[s.value]),g("p",{class:`${o.value}-hint`},[d.value])],...c.value})}});const Ln={aspectRatio:1,cropBoxMovable:!1,cropBoxResizable:!1,dragMode:"move",viewMode:1};var Vn=A({name:"FieldUploadPicture",inheritAttrs:!1,props:{...L(),title:{type:String},showTitle:{type:Boolean,default:void 0},name:{type:String,default:"file"},disabled:{type:Boolean,default:void 0},allowClear:{type:Boolean,default:void 0},isCropper:{type:Boolean,default:!0},cropperModalTitle:{type:String},cropperModalWidth:{type:Number,default:520},cropperWidth:{type:Number,default:100},cropperHeight:{type:Number,default:100},cropperProps:{type:Object,default:()=>({})},width:{type:Number,default:50},height:{type:Number,default:50},customRequest:Function},setup(e,{attrs:t}){const i=Z(!1),a=Z(!1),l=Z(""),n=Z(),r=Z(),o=z(),{prefixCls:h,disabled:c}=pe(),u=vt.useInjectFormItemContext(),s=p(()=>({...Ln,...e.cropperProps})),d=async(C,S)=>{var b;const f=await((b=t?.beforeUpload)==null?void 0:b.call(t,C,S));if(e.isCropper){const w=C.type.indexOf("image")>=0;return w||Ga.error(`${C.name} ${o.getMessage("upload.picture.required","必须是图片")}`),w||Ae.LIST_IGNORE}return f},v=C=>{var S,b;const f=C.split(","),w=f[0].match(/:(.*?);/)[1],P=atob(f[1]);let T=P.length;const X=new Uint8Array(T);for(;T--;)X[T]=P.charCodeAt(T);return new File([X],(b=(S=n.value)==null?void 0:S.name)!=null?b:"",{type:w})},m=async({file:C})=>{var S;const b=new FormData;b.append(e.name,C),a.value=!0;try{if(e.customRequest){const{url:f}=await e.customRequest(b);f&&((S=e.onChange)==null||S.call(e,f),u.onFieldChange())}}catch(f){console.log("🚀 ~ customRequest ~ error:",f)}a.value=!1},y=p(()=>{const C=ta(t,["beforeUpload"]);return e.isCropper?C.customRequest=function(){}:e.customRequest&&(C.customRequest=m),C}),x=C=>{if(n.value=C.file.originFileObj,e.isCropper){const S=new FileReader;S.onload=function(b){i.value=!0,l.value=b.target.result},S.readAsDataURL(C.file.originFileObj)}},D=()=>{var C,S;const b=(C=r.value)==null?void 0:C.getCroppedCanvas(n.value,{width:e.cropperWidth,height:e.cropperHeight});if(b){const f=v(b);i.value=!1,e.customRequest?m({file:f}):((S=e.onChange)==null||S.call(e,b,f),u.onFieldChange())}},F=C=>{var S;C.stopPropagation(),(S=e.onChange)==null||S.call(e,""),u.onFieldChange()};return()=>e.readonly?g("div",{class:`${h}-upload-picture`,style:{width:e.width+"px",height:e.height+"px",display:"block"}},[g("div",{class:`${h}-upload-picture-button`,style:{width:e.width+"px",height:e.height+"px",cursor:"auto"}},[e.value?g("div",{style:`width: 100%; height: 100%; background-size: contain; background-repeat: no-repeat; background-position: center center; background-image: url("${e.value}");`},null):g("div",{class:`${h}-upload-picture-button-empty`},null)])]):g(qa,null,{default:()=>[g(Ae,I(y.value,{"before-upload":d,"show-upload-list":!1,name:e.name,multiple:!1,class:`${h}-upload-picture`,style:{width:e.width+"px",height:e.height+"px",display:"block"},onChange:x}),{default:()=>[g(ja,{spinning:a.value,indicator:g(mt,null,null),delay:300},{default:()=>{var C,S,b;return[g("div",{class:`${h}-upload-picture-button`,style:{width:e.width+"px",height:e.height+"px",cursor:((C=e.disabled)!=null?C:c?.value)?"not-allowed":"pointer"}},[e.value?g("div",{style:`width: 100%; height: 100%; background-size: contain; background-repeat: no-repeat; background-position: center center; background-image: url("${e.value}");`},null):g("div",{class:`${h}-upload-picture-button-empty`},[g(Qt,null,null)]),e.showTitle&&!((S=e.disabled)!=null?S:c?.value)&&g("div",{class:`${h}-upload-picture-button-mask`},[e.title||o.getMessage("upload.picture.title","修改图片")]),e.allowClear&&e.value&&!((b=e.disabled)!=null?b:c?.value)&&g("div",{class:`${h}-upload-picture-button-clear`,onClick:F},[g(Xa,null,null)])])]}})]}),e.isCropper&&g(ti,{open:i.value,"onUpdate:open":C=>i.value=C,width:e.cropperModalWidth,title:e.cropperModalTitle||o.getMessage("upload.picture.cropperModalTitle","裁剪图片"),"destroy-on-close":!0,"show-fullscreen":!1,onOk:D},{default:()=>[g(Ki,{ref:r,"img-src":l.value,"cropper-props":s.value,"cropper-width":e.cropperWidth,"cropper-height":e.cropperHeight},null)]})]})}}),$n=A({name:"FieldUploadPictureList",inheritAttrs:!1,props:{...L(),name:{type:String,default:"file"},disabled:{type:Boolean,default:void 0},width:{type:Number,default:80},height:{type:Number,default:80},crossOrigin:{type:String,default:""},maxCount:{type:Number},customRequest:Function},setup(e,{attrs:t}){const i=Z([]),a=Z(!1),l=Z(""),n=z(),{prefixCls:r,disabled:o}=pe(),h=p(()=>e.readonly||o?.value),c=async v=>{var m,y;const x=new FormData;x.append(e.name,v.file);const D=b=>{var f;b.total>0&&(b.percent=b.loaded/b.total*100),(f=v?.onProgress)==null||f.call(v,b)},{success:F,error:C,data:S}=await e.customRequest(x,D);F?(m=v.onSuccess)==null||m.call(v,S):(y=v.onError)==null||y.call(v,C,S)},u=p(()=>{const v={...t};return e.customRequest&&(v.customRequest=c),v}),s=v=>new Promise((m,y)=>{const x=new FileReader;x.readAsDataURL(v),x.onload=()=>m(x.result),x.onerror=D=>y(D)}),d=async v=>{!v.url&&!v.preview&&(v.preview=await s(v.originFileObj)),l.value=v.url||v.preview,a.value=!0};return ve(()=>e.value,v=>{tt(v,i.value)||(i.value=v.map(m=>({...m,crossOrigin:e.crossOrigin})))}),ve(i,()=>{var v;(v=e.onChange)==null||v.call(e,i.value)}),()=>g(ea,null,[g(Ae,I(u.value,{fileList:i.value,"onUpdate:fileList":v=>i.value=v,name:e.name,disabled:h.value,"list-type":"picture-card",maxCount:e.maxCount,class:`${r}-upload-picture-list`,style:{"--s-upload-picture-list-width":e.width+"px","--s-upload-picture-list-height":e.height+"px"},onPreview:d}),{default:()=>[(!h.value||!e.maxCount||i.value.length<e.maxCount)&&g(Qt,null,null)]}),g(Ka,{open:a.value,"onUpdate:open":v=>a.value=v,width:800,title:n.getMessage("upload.picture.viewModalTitle","查看图片"),footer:null},{default:()=>[g("img",{alt:"preview",style:"width: 100%",crossorigin:e.crossOrigin,src:l.value},null)]})])}});const Ht={text:Zi,digit:en,digitRange:an,select:cn,cascader:bn,textarea:nn,password:ln,treeSelect:fn,checkbox:vn,checkboxGroup:mn,radioGroup:pn,switch:wn,slider:Sn,rate:Dn,date:Tn,dateRange:Mn,time:Fn,timeRange:Rn,uploadButton:An,uploadDragger:Bn,uploadPicture:Vn,uploadPictureList:$n},jt={text:["type","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],digit:["disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],digitRange:["separatorWidth","separator","disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],select:["id","pagination","placeholder","disabled","allowClear","autoClearSearchValue","autofocus","bordered","clearIcon","defaultActiveFirstOption","defaultOpen","popupClassName","dropdownMatchSelectWidth","dropdownMenuStyle","dropdownRender","dropdownStyle","fieldNames","filterOption","filterSort","firstActiveValue","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","maxTagTextLength","menuItemSelectedIcon","mode","notFoundContent","open","option","optionFilterProp","optionLabelProp","options","placement","removeIcon","searchValue","showArrow","showSearch","size","status","suffixIcon","tagRender","tokenSeparators","virtual","onBlur","onFocus","onDeselect","onDropdownVisibleChange","onInputKeyDown","onMouseenter","onMouseleave","onPopupScroll","onSearch","onSelect"],textarea:["id","disabled","allowClear","autoSize","defaultValue","showCount","maxlength","placeholder","onPressEnter","onFocus","onBlur","onInput","onClear"],password:["id","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","visibilityToggle","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],treeSelect:["id","multiple","options","showCheckedStrategy","searchPlaceholder","replaceFields","loadData","filterTreeNode","placeholder","disabled","allowClear","popupClassName","defaultValue","dropdownMatchSelectWidth","dropdownStyle","fieldNames","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","notFoundContent","placement","searchValue","showSearch","size","status","suffixIcon","tagRender","title","treeCheckable","treeCheckStrictly","treeData","treeDataSimpleMode","treeDefaultExpandAll","treeDefaultExpandedKeys","treeExpandedKeys","treeIcon","treeLine","treeLoadedKeys","treeNodeFilterProp","treeNodeLabelProp","onDropdownVisibleChange","onSearch","onSelect","onTreeExpand","onUpdate:treeExpandedKeys","onUpdate:searchValue"],checkbox:["id","autofocus","disabled","indeterminate"],checkboxGroup:["id","disabled","name","options"],radioGroup:["id","class","disabled","name","options","optionType","buttonStyle","radioLabel"],cascader:["id","disabled","name","options","placeholder","allowClear","autofocus","bordered","clearIcon","changeOnSelect","defaultValue","displayRender","popupClassName","dropdownStyle","expandTrigger","fieldNames","getPopupContainer","loadData","maxTagCount","maxTagPlaceholder","multiple","notFoundContent","open","placement","showCheckedStrategy","removeIcon","searchValue","showSearch","status","suffixIcon","tagRender","onDropdownVisibleChange","onSearch"],switch:["id","checkedChildren","size","checkedValue","disabled","loading","unCheckedChildren","unCheckedValue","onClick"],slider:["id","disabled","dots","included","mark","marks","max","min","range","reverse","step","vertical","tipFormatter","tooltipPlacement","tooltipOpen","getTooltipPopupContainer","onAfterChange"],rate:["id","allowClear","allowHalf","character","count","disabled","tooltips","onBlur","onFocus","onHoverChange","onKeydown"],date:["id","allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","defaultPickerValue","disabledTime","renderExtraFooter","showNow","showTime","showToday","monthCellRender","onOpenChange","onPanelChange","onOk"],dateRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","showTime","ranges","renderExtraFooter","separator","onOpenChange","onPanelChange","onCalendarChange","onOk"],time:["id","allowClear","bordered","clearIcon","clearText","disabled","disabledTime","format","getPopupContainer","hideDisabledOptions","hourStep","inputReadOnly","minuteStep","open","placeholder","placement","popupClassName","popupStyle","renderExtraFooter","secondStep","showNow","status","suffixIcon","use12Hours","valueFormat","onOpenChange"],timeRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","ranges","renderExtraFooter","separator","order","onOpenChange","onPanelChange","onCalendarChange","onOk"],uploadButton:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","max","buttonProps"],uploadDragger:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","description","max","buttonProps"],uploadPicture:["disabled","id","customRequest","accept","action","beforeUpload","name","headers","isCropper","cropperModalTitle","cropperModalWidth","cropperWidth","cropperHeight","cropperProps","width","height","title","data","showTitle","allowClear"],uploadPictureList:["disabled","id","data","headers","customRequest","accept","action","multiple","maxCount","beforeUpload","name","previewFile","allowClear","width","height","crossOrigin"],editor:["autofocus","indentWithTab","tabSize","theme","autoDestroy","phrases","root","extensions","selection","height","disabled","placeholder","onFocus","onBlur","onReady","onUpdate"]},Xt={xs:104,s:216,sm:216,m:328,md:328,l:440,lg:440,xl:552},Yn=["autoLink","colon","hasFeedback","labelAlign","labelCol","htmlFor","required","validateFirst","validateStatus","validateTrigger","wrapperCol","rules","style","class"],Un=["switch","radioButton","radio","rate"],Wn=["extra","help"];var lr=A({name:"FormItem",inheritAttrs:!1,props:{item:{type:Object,default:()=>({})}},setup(e){const{grid:t,action:i,formKey:a,prefixCls:l,formData:n,readonly:r,readonlyProps:o,disabledKeys:h,hiddenKeys:c,allDisabledKeys:u,updateHiddenKeys:s,updateDisabledKeys:d}=pe(),{isList:v,listKey:m,listName:y,rowData:x}=qt(),D=W(),{fieldValue:F,onValueChange:C}=wa({namePath:p(()=>e.item.name),initialValue:e.item.initialValue,convertValue:e.item.convertValue,transform:e.item.transform}),S=Z(),b=p(()=>{var E;return(E=e.item.fieldType)!=null?E:"text"}),f=p(()=>{var E;return K((E=e.item.readonly)!=null?E:r?.value,n.value,x?.value)}),w=p(()=>Je({},o?.value,e.item.readonlyProps)),P=p(()=>h.value.map(E=>E.split(":")[1])),T=p(()=>c.value.map(E=>E.split(":")[1])),X=p(()=>{var E;return(E=e.item.ignoreWidth)!=null?E:Un.includes(b.value)}),J=p(()=>{var E;return(E=K(e.item.formItemProps,n.value))!=null?E:{}}),oe=p(()=>{var E,_,O,$;return Ge({...Et(J.value,Yn),name:f.value?void 0:e.item.name,htmlFor:f.value?void 0:(O=(E=J.value)==null?void 0:E.htmlFor)!=null?O:`form-${(_=a.value)!=null?_:""}-${e.item.key}`,rules:f.value?void 0:K(($=e.item.rules)!=null?$:J.value.rules,n.value,i)})}),se=E=>{var _,O;const{clear:$}=(_=e.item.linkage)!=null?_:{};if($){const q=(O=K($,E,n.value))!=null?O:[];q.length>0&&q.forEach(te=>{var V;const ne=v?[...(V=y?.value)!=null?V:[],...Dt(te)].filter($e=>$e!==void 0).flat(1):Dt(te);typeof Kt(n.value,ne)<"u"&&et(n.value,ne,void 0)})}},ee=p(()=>{var E,_,O,$,q,te,V,ne,Xe,$e;const ae=K((E=e.item.fieldProps)!=null?E:{},n.value),wt={...ae,id:(O=ae?.id)!=null?O:`form-${(_=a.value)!=null?_:""}-${e.item.key}`,disabled:((q=K(($=e.item.disabled)!=null?$:ae?.disabled,n.value,x?.value))!=null?q:u.value.includes(e.item.key))?!0:void 0,placeholder:(te=e.item.placeholder)!=null?te:ae?.placeholder,options:(ne=(V=e.item.options)!=null?V:ae?.options)!=null?ne:ae?.treeData,allowClear:($e=(Xe=e.item.allowClear)!=null?Xe:ae?.allowClear)!=null?$e:!1};return Ge({valueEnum:e.item.valueEnum,dependencies:e.item.dependencies,readonly:f.value,readonlyProps:w.value,request:e.item.request,params:e.item.params,onChange:(qe,...ya)=>{var Ct,St;se(qe),C(qe),(St=(Ct=e.item).onChange)==null||St.call(Ct,qe,...ya,i)},...jt[b.value]?Et(wt,jt[b.value]):wt})}),j=p(()=>{var E;const _=K((E=e.item.fieldProps)!=null?E:{},n.value),O={..._?.style};return e.item.width&&!Xt[e.item.width]?O.width=ei(e.item.width)?e.item.width+"px":e.item.width:t?.value&&(O.maxWidth="100%",O.width="100%"),X.value&&Reflect.deleteProperty(O,"width"),Ge(O)}),he=p(()=>{const E=e.item.width&&Xt[e.item.width],_={[`${l}-field`]:!!E,[`${l}-field-${e.item.width}`]:E&&!X.value};return e.item.className&&(_[e.item.className]=!0),_}),we=p(()=>{var E;const _={};if(Wn.forEach(O=>{const $=R(J.value[O],D);$&&(_[O]=()=>g(N,{vnode:$,props:{formData:n.value}},null))}),e.item.title){const O=R((E=e.item.extra)==null?void 0:E.label,D);_.label=()=>g(ea,null,[g("div",{class:`${l}-item-title`,style:J.value.titleStyles},[g(ni,{title:e.item.title,tooltip:e.item.tooltip},null)]),g(N,{vnode:O,props:{formData:n.value}},null)])}return _});return ve(F,E=>{var _,O;const{linkage:$}=e.item;if($){const{hidden:q,disabled:te}=$;if(q){const V=(_=K(q,E,n.value))!=null?_:[];tt(V,T.value)||s(e.item.key,v?V.map(ne=>`${m}_${ne}`):V)}if(te){const V=(O=K(te,E,n.value))!=null?O:[];tt(V,P.value)||d(e.item.key,v?V.map(ne=>`${m}_${ne}`):V)}}},{immediate:!0}),ve(S,()=>{var E,_;(_=(E=e.item).onInit)==null||_.call(E,S.value)}),ve(f,()=>{f.value&&i.clearValidate(e.item.name)}),ve(()=>{var E;return(E=oe.value)==null?void 0:E.rules},()=>{i.clearValidate(e.item.name)}),()=>{var E,_;const O=R(e.item.render,D);if(O)return g(It,{colProps:e.item.colProps},{default:()=>[g(N,{vnode:O,props:{formData:n.value}},null)]});const $=R(e.item.renderFormItem,D),q=R((E=e.item.extra)==null?void 0:E.item,D),te=(_=Ht[b.value])!=null?_:Ht.text;let V=g(te,I({ref:S,value:F.value},ee.value,{style:j.value,class:he.value}),null);return $&&(V=g(N,{vnode:$,props:{value:F.value,onChange:ee.value.onChange,defaultDom:V,formData:n.value,action:i,listName:y?.value,name:e.item.name}},null)),q&&(V=g("div",{style:"display: flex; flex-direction: row; justify-content: flex-start; align-items: center;"},[V,g(N,{vnode:q,props:{formData:n.value,listName:y?.value,name:e.item.name}},null)])),g(It,{colProps:e.item.colProps},{default:()=>[g(vt.Item,oe.value,{default:()=>[V],...we.value})]})}}});export{lr as default};
