import{B as pe,$ as ve,A as he,G as p,a7 as fe,V,W as j,a8 as ge,J as b,L as w,Y as q,a9 as G,F as Ce,a0 as Y,X as be,_ as we}from"./theme.Ck_4XXSm.js";import{u as ye}from"./useFieldValue.By7p4pDT.js";import{F as xe,a as Ie}from"./FormTitle.CbmSWksN.js";import{d as Pe,e as s,f as Se,k as u,F as Fe,w as S,a0 as _e}from"./framework.BBTDMeVS.js";const J={text:["type","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],digit:["disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],digitRange:["separatorWidth","separator","disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],select:["id","pagination","placeholder","disabled","allowClear","autoClearSearchValue","autofocus","bordered","clearIcon","defaultActiveFirstOption","defaultOpen","popupClassName","dropdownMatchSelectWidth","dropdownMenuStyle","dropdownRender","dropdownStyle","fieldNames","filterOption","filterSort","firstActiveValue","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","maxTagTextLength","menuItemSelectedIcon","mode","notFoundContent","open","option","optionFilterProp","optionLabelProp","options","placement","removeIcon","searchValue","showArrow","showSearch","size","status","suffixIcon","tagRender","tokenSeparators","virtual","onBlur","onFocus","onDeselect","onDropdownVisibleChange","onInputKeyDown","onMouseenter","onMouseleave","onPopupScroll","onSearch","onSelect"],textarea:["id","disabled","allowClear","autoSize","defaultValue","showCount","maxlength","placeholder","onPressEnter","onFocus","onBlur","onInput","onClear"],password:["id","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","visibilityToggle","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],treeSelect:["id","multiple","options","showCheckedStrategy","searchPlaceholder","replaceFields","loadData","filterTreeNode","placeholder","disabled","allowClear","popupClassName","defaultValue","dropdownMatchSelectWidth","dropdownStyle","fieldNames","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","notFoundContent","placement","searchValue","showSearch","size","status","suffixIcon","tagRender","title","treeCheckable","treeCheckStrictly","treeData","treeDataSimpleMode","treeDefaultExpandAll","treeDefaultExpandedKeys","treeExpandedKeys","treeIcon","treeLine","treeLoadedKeys","treeNodeFilterProp","treeNodeLabelProp","onDropdownVisibleChange","onSearch","onSelect","onTreeExpand","onUpdate:treeExpandedKeys","onUpdate:searchValue"],checkbox:["id","autofocus","disabled","indeterminate"],checkboxGroup:["id","disabled","name","options"],radioGroup:["id","class","disabled","name","options","optionType","buttonStyle","radioLabel"],cascader:["id","disabled","name","options","placeholder","allowClear","autofocus","bordered","clearIcon","changeOnSelect","defaultValue","displayRender","popupClassName","dropdownStyle","expandTrigger","fieldNames","getPopupContainer","loadData","maxTagCount","maxTagPlaceholder","multiple","notFoundContent","open","placement","showCheckedStrategy","removeIcon","searchValue","showSearch","status","suffixIcon","tagRender","onDropdownVisibleChange","onSearch"],switch:["id","checkedChildren","size","checkedValue","disabled","loading","unCheckedChildren","unCheckedValue","onClick"],slider:["id","disabled","dots","included","mark","marks","max","min","range","reverse","step","vertical","tipFormatter","tooltipPlacement","tooltipOpen","getTooltipPopupContainer","onAfterChange"],rate:["id","allowClear","allowHalf","character","count","disabled","tooltips","onBlur","onFocus","onHoverChange","onKeydown"],date:["id","allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","defaultPickerValue","disabledTime","renderExtraFooter","showNow","showTime","showToday","monthCellRender","onOpenChange","onPanelChange","onOk"],dateRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","showTime","ranges","renderExtraFooter","separator","onOpenChange","onPanelChange","onCalendarChange","onOk"],time:["id","allowClear","bordered","clearIcon","clearText","disabled","disabledTime","format","getPopupContainer","hideDisabledOptions","hourStep","inputReadOnly","minuteStep","open","placeholder","placement","popupClassName","popupStyle","renderExtraFooter","secondStep","showNow","status","suffixIcon","use12Hours","valueFormat","onOpenChange"],timeRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","ranges","renderExtraFooter","separator","order","onOpenChange","onPanelChange","onCalendarChange","onOk"],uploadButton:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","max","buttonProps"],uploadDragger:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","description","max","buttonProps"],uploadPicture:["disabled","id","customRequest","accept","action","beforeUpload","name","headers","isCropper","cropperModalTitle","cropperModalWidth","cropperWidth","cropperHeight","cropperProps","width","height","title","data","showTitle","allowClear"],uploadPictureList:["disabled","id","data","headers","customRequest","accept","action","multiple","maxCount","beforeUpload","name","previewFile","allowClear","width","height","crossOrigin"],editor:["autofocus","indentWithTab","tabSize","theme","autoDestroy","phrases","root","extensions","selection","height","disabled","placeholder","onFocus","onBlur","onReady","onUpdate"]},X={xs:104,s:216,sm:216,m:328,md:328,l:440,lg:440,xl:552},ke=["autoLink","colon","hasFeedback","labelAlign","labelCol","htmlFor","required","validateFirst","validateStatus","validateTrigger","wrapperCol","rules","style","class"],Re=["switch","radioButton","radio","rate"],De=["extra","help"];var Oe=Pe({name:"FormItem",inheritAttrs:!1,props:{item:{type:Object,default:()=>({})},grid:{type:Boolean,default:void 0}},setup(e){const{grid:N,action:g,formKey:E,prefixCls:y,formData:i,readonly:O,readonlyProps:K,disabledKeys:Q,hiddenKeys:Z,allDisabledKeys:ee,labelCol:L,wrapperCol:A,onPressEnter:ae,updateHiddenKeys:le,updateDisabledKeys:te}=pe(),{isList:F,listKey:B,listName:h,rowData:x}=ve(),C=he(),{fieldValue:_,onValueChange:oe}=ye({namePath:s(()=>e.item.name),initialValue:e.item.initialValue,convertValue:e.item.convertValue,transform:e.item.transform}),k=Se(),R=s(()=>{var a;return(a=e.grid)!=null?a:N?.value}),I=s(()=>{var a;return(a=e.item.fieldType)!=null?a:"text"}),f=s(()=>{var a;return p((a=e.item.readonly)!=null?a:O?.value,i.value,x?.value)}),ne=s(()=>fe({},K?.value,e.item.readonlyProps)),re=s(()=>Q.value.map(a=>a.split(":")[1])),ie=s(()=>Z.value.map(a=>a.split(":")[1])),M=s(()=>{var a;return(a=e.item.ignoreWidth)!=null?a:Re.includes(I.value)}),v=s(()=>{var a;return(a=p(e.item.formItemProps,i.value))!=null?a:{}}),$=s(()=>{var a,l,t,n,c,r,o,d;return V({...j(v.value,ke),labelCol:(l=(a=v.value)==null?void 0:a.labelCol)!=null?l:L?.value,wrapperCol:(n=(t=v.value)==null?void 0:t.wrapperCol)!=null?n:A?.value,name:f.value?void 0:e.item.name,htmlFor:f.value?void 0:(o=(c=v.value)==null?void 0:c.htmlFor)!=null?o:`form-${(r=E.value)!=null?r:""}-${e.item.key}`,rules:f.value?void 0:p((d=e.item.rules)!=null?d:v.value.rules,i.value,g)})}),de=a=>{var l,t;const{clear:n}=(l=e.item.linkage)!=null?l:{};if(n){const c=(t=p(n,a,i.value))!=null?t:[];c.length>0&&c.forEach(r=>{var o;const d=F?[...(o=h?.value)!=null?o:[],...Y(r)].filter(P=>P!==void 0).flat(1):Y(r);typeof be(i.value,d)<"u"&&we(i.value,d,void 0)})}},U=s(()=>{var a,l,t,n,c,r,o,d,D,P;const m=p((a=e.item.fieldProps)!=null?a:{},i.value),W={...m,id:(t=m?.id)!=null?t:`form-${(l=E.value)!=null?l:""}-${e.item.key}`,disabled:((c=p((n=e.item.disabled)!=null?n:m?.disabled,i.value,x?.value))!=null?c:ee.value.includes(e.item.key))?!0:void 0,placeholder:(r=e.item.placeholder)!=null?r:m?.placeholder,options:(d=(o=e.item.options)!=null?o:m?.options)!=null?d:m?.treeData,allowClear:(P=(D=e.item.allowClear)!=null?D:m?.allowClear)!=null?P:!0};return V({valueEnum:e.item.valueEnum,dependencies:e.item.dependencies,readonly:f.value,readonlyProps:ne.value,request:e.item.request,params:e.item.params,onChange:(T,...me)=>{var z,H;de(T),oe(T),(H=(z=e.item).onChange)==null||H.call(z,T,...me,g)},...J[I.value]?j(W,J[I.value]):W})}),se=s(()=>{var a;const l=p((a=e.item.fieldProps)!=null?a:{},i.value),t={...l?.style};return e.item.width&&!X[e.item.width]?t.width=ge(e.item.width)?e.item.width+"px":e.item.width:R?.value&&(t.maxWidth="100%",t.width="100%"),M.value&&Reflect.deleteProperty(t,"width"),V(t)}),ue=s(()=>{const a=e.item.width&&X[e.item.width],l={[`${y}-field`]:!!a,[`${y}-field-${e.item.width}`]:a&&!M.value};return e.item.className&&(l[e.item.className]=!0),l}),ce=s(()=>{var a;const l={};if(De.forEach(t=>{const n=b(v.value[t],C);n&&(l[t]=()=>u(w,{vnode:n,props:{formData:i.value}},null))}),e.item.title){const t=b((a=e.item.extra)==null?void 0:a.label,C);l.label=()=>u(Fe,null,[u("div",{class:`${y}-item-title`,style:v.value.titleStyles},[u(xe,{title:e.item.title,tooltip:e.item.tooltip},null)]),u("div",{class:`${y}-item-title-extra`},[u(w,{vnode:t,props:{formData:i.value}},null)])])}return l});return S(_,a=>{var l,t;const{linkage:n}=e.item;if(n){const{hidden:c,disabled:r}=n;if(c){const o=(l=p(c,a,i.value))!=null?l:[];q(o,ie.value)||le(e.item.key,F?o.map(d=>`${B}_${d}`):o)}if(r){const o=(t=p(r,a,i.value))!=null?t:[];q(o,re.value)||te(e.item.key,F?o.map(d=>`${B}_${d}`):o)}}},{immediate:!0}),S(k,()=>{var a,l;(l=(a=e.item).onInit)==null||l.call(a,k.value)}),S(f,()=>{f.value&&g.clearValidate(e.item.name)}),S(()=>{var a;return(a=$.value)==null?void 0:a.rules},()=>{g.clearValidate(e.item.name)}),()=>{var a,l;const t=b(e.item.renderFormItem,C),n=b((a=e.item.extra)==null?void 0:a.item,C),c=(l=G[I.value])!=null?l:G.text;let r=u(c,_e({ref:k,value:_.value},U.value,{style:se.value,class:ue.value,onPressEnter:ae}),null);t&&(r=u(w,{vnode:t,props:{value:_.value,onChange:U.value.onChange,defaultDom:r,formData:i.value,action:g,listName:h?.value,name:e.item.name}},null)),n&&(r=u("div",{style:"display: flex; flex-direction: row; justify-content: flex-start; align-items: center;"},[r,u("div",{style:"margin-inline-start: 5px; flex-shrink: 0;"},[u(w,{vnode:n,props:{formData:i.value,listName:h?.value,name:e.item.name}},null)])]));const o=u(Ce.Item,$.value,{default:()=>[r],...ce.value}),d=b(e.item.render,C);return u(Ie,{colProps:e.item.colProps,grid:R.value},{default:()=>[d?u(w,{vnode:d,props:{formData:i.value,defaultDom:o}},null):o]})}}});export{Oe as default};
