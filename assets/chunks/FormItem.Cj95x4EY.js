import{o as _,a as Oe,y as T,z as M,u as N,q as w,R as P,x as pe,r as L,A as Ne,B as Ae,C as J,D as X,E as z,j as Me,G as De,t as Z,v as ce,H as Ve,w as fe}from"./index.vN1eOSFc.js";import{u as $e}from"./useFieldValue.Cb1GDTem.js";import{u as Se}from"./FormListContext.BuVPbeyS.js";import{af as Le,T as Be,ah as oe,ai as ee,p as re,S as Ue,aj as qe,m as te,g as xe,s as ae,o as je,ak as Ge,al as _e,a5 as We,am as Ye,an as ue,ao as ze,ap as Ke,aq as He,ar as Qe,e as Je,as as Xe,j as W,at as Ze,au as et,av as tt,aw as at,ax as nt,ay as K,B as lt,az as ot,aA as rt,aB as ut,q as it,ag as Ce,h as dt,aC as st,M as ct,u as ne}from"./theme.ByTQpznk.js";import{d as R,e as l,k as a,i as be,a0 as p,f as U,w as G,o as ft,F as we}from"./framework.VHKk5c21.js";import{a as mt,F as me}from"./FormTitle.BrjJfLCU.js";function ve(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!be(e)}const D=R({name:"FieldReadonly",inheritAttrs:!1,props:{text:{type:[String,Number],default:void 0},theme:{type:String,default:void 0},customUi:{type:Boolean,default:void 0},tooltip:{type:[Boolean,String],default:void 0},copy:{type:Boolean,default:void 0},emptyText:{type:String,default:"-"},ellipsis:{type:Boolean,default:!0},autoLine:{type:Boolean,default:!1}},setup(e,{attrs:t}){const{prefixCls:d,customUi:m}=_(),u=l(()=>e.customUi??m.value??!0),n=l(()=>({[`${d}-readonly`]:!0,[`${d}-readonly-custom-ui`]:u.value,[`${d}-readonly-ellipsis`]:e.ellipsis,[`${d}-readonly-autoline`]:e.autoLine,[`${t.class}`]:!0})),i=l(()=>e.text===void 0||e.text===null||e.text===""?e.emptyText:e.text);return()=>{const r=a("div",{class:n.value,style:t?.style},[a("span",{class:`${d}-readonly-text`},[i.value]),u.value&&e.copy&&a("span",null,[a(Le,{style:"color: rgb(134, 144, 156); font-size:12px"},null)])]);if(e.copy&&e.text)return a(Oe,{text:e.text},ve(r)?r:{default:()=>[r]});if(e.tooltip){const f=typeof e.tooltip=="string"?e.tooltip:e.text;if(f)return a(Be,{placement:"topLeft",title:f},ve(r)?r:{default:()=>[r]})}return r}}}),vt=["addonAfter","addonBefore","suffix","prefix"],gt=R({name:"FieldText",props:{...T(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},suffix:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:String}},setup(e,{attrs:t}){const d=M(),m=N(),u=l({get:()=>e.value,set:i=>{e.onChange?.(i)}}),n=l(()=>{const i={};return vt.forEach(r=>{const f=w(e[r],m);f&&(i[r]=()=>a(P,{vnode:f},null))}),i});return()=>e.readonly?a(D,p({text:u.value,class:t.class,style:t.style},e.readonlyProps),null):a(oe,p({value:u.value,"onUpdate:value":i=>u.value=i},t,{placeholder:e.placeholder||d.getMessage("form.inputPlaceholder","请输入")}),n.value)}}),ht=["addonAfter","addonBefore","prefix","upIcon","downIcon"],yt=R({name:"FieldDigit",props:{...T(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},upIcon:{type:String,default:""},downIcon:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:String}},setup(e,{attrs:t}){const d=M(),m=N(),u=l(()=>{const i={};return ht.forEach(r=>{const f=w(e[r],m);f&&(i[r]=()=>a(P,{vnode:f},null))}),i}),n=i=>{e.onChange?.(i)};return()=>e.readonly?a(D,p({text:e.value,class:t.class,style:t.style},e.readonlyProps),null):a(ee,p({value:e.value},t,{placeholder:e.placeholder||d.getMessage("form.inputPlaceholder","请输入"),onChange:n}),u.value)}}),pt=["addonAfter","addonBefore","prefix","upIcon","downIcon"],St=R({name:"FieldDigitRange",inheritAttrs:!1,props:{...T(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},upIcon:{type:String,default:""},downIcon:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:[String,Array],default:()=>[]},separator:{type:String,default:"~"},separatorWidth:{type:Number,default:30}},emits:["update:value","change"],setup(e,{attrs:t}){const d=M(),m=N(),u=re.useInjectFormItemContext(),n=l(()=>pe(t,["class","style"])),i=l(()=>{const s={};return pt.forEach(c=>{const o=w(e[c],m);o&&(s[c]=()=>a(P,{vnode:o},null))}),s}),r=l(()=>{if(e.value?.length)return`${e.value?.[0]} - ${e.value?.[1]}`}),f=s=>(Array.isArray(e.placeholder)?e.placeholder[s]:e.placeholder)||d.getMessage("form.inputPlaceholder","请输入"),y=s=>{if(Array.isArray(e.value)){const[c,o]=e.value;typeof c=="number"&&typeof o=="number"&&c>o?(e.onChange?.([o,c]),u.onFieldChange()):c===void 0&&o===void 0&&(e.onChange?.(void 0),u.onFieldChange())}n.value?.onBlur?.(s)},v=(s,c)=>{const o=[...e.value||[]];o[s]=c===null?void 0:c,e.onChange?.(o),u.onFieldChange()};return()=>e.readonly?a(D,p({text:r.value,class:t.class,style:t.style},e.readonlyProps),null):a(Ue.Compact,{class:t.class,style:t.style},{default:()=>[a(ee,p(n.value,{value:e.value?.[0],style:{width:`calc((100% - ${e.separatorWidth}px) / 2)`,marginInlineEnd:"0!important"},placeholder:f(0),defaultValue:n.value.defaultValue?.[0],onBlur:y,onChange:s=>v(0,s)}),i.value),a(oe,{style:{width:e.separatorWidth+"px",textAlign:"center",borderInlineStart:"0px",borderInlineEnd:"0px",pointerEvents:"none"},placeholder:e.separator,disabled:!0},null),a(ee,p(n.value,{value:e.value?.[1],id:`${n.value.id}-1`,style:{width:`calc((100% - ${e.separatorWidth}px) / 2)`},placeholder:f(1),defaultValue:n.value.defaultValue?.[1],onChange:s=>v(1,s),onBlur:y}),i.value)]})}}),xt=R({name:"FieldTextarea",props:{...T(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},suffix:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:String}},setup(e,{attrs:t}){const d=M(),m=l({get:()=>e.value,set:u=>{e.onChange?.(u)}});return()=>e.readonly?a(D,p({text:m.value,class:t.class,style:t.style},e.readonlyProps),null):a(qe,p({value:m.value,"onUpdate:value":u=>m.value=u},t,{placeholder:e.placeholder||d.getMessage("form.inputPlaceholder","请输入")}),null)}}),Ct=["addonAfter","addonBefore","suffix","prefix"],bt=R({name:"FieldPassword",props:{...T(),addonAfter:{type:String,default:""},addonBefore:{type:String,default:""},suffix:{type:String,default:""},prefix:{type:String,default:""},placeholder:{type:String}},setup(e,{attrs:t}){const d=M(),m=N(),u=l({get:()=>e.value,set:i=>{e.onChange?.(i)}}),n=l(()=>{const i={};return Ct.forEach(r=>{const f=w(e[r],m);f&&(i[r]=()=>a(P,{vnode:f},null))}),i});return()=>a(oe.Password,p({value:u.value,"onUpdate:value":i=>u.value=i},t,{placeholder:e.placeholder||d.getMessage("form.inputPlaceholder","请输入")}),n.value)}});function wt(e){const t=Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase();return t==="string"&&typeof e=="object"?"object":e===null?"null":e===void 0?"undefined":t}const Pt=e=>wt(e)==="map"?e:new Map(Object.entries(e??{})),It=e=>{const t=[],d=Pt(e);return d.forEach((m,u)=>{const n=d.get(u)??d.get(`${u}`);if(n){if(typeof n=="object"&&n?.text){t.push({text:n?.text,value:u,label:n?.text,disabled:n.disabled});return}t.push({text:n,value:u,label:n})}}),t},le=e=>e?.map(t=>J(t)?(t?.text&&(t.label=t?.text),Array.isArray(t.options)&&t.options.length&&(t.options=le(t.options)),Array.isArray(t.children)&&t.children.length&&(t.children=le(t.children)),t):{label:t,value:t});function H({options:e,request:t,params:d,valueEnum:m,fieldNames:u,dependencies:n,paginationConfig:i}){const{formData:r}=_(),{index:f,rowData:y}=Se(),v=U(!0),s=U(0),c=l(()=>L(e,r.value,y?.value)),o=U([]),g=l(()=>u??{label:"label",value:"value",children:"children"}),[F,O]=Ne(()=>i?.value??{}),A=l(()=>{const C={};if(d){const h=L(d,r.value);te(C,h)}return Array.isArray(n)&&(n.forEach(h=>{const S=xe(r.value,h);S&&(Array.isArray(h)?ae(C,h.join("-"),S):ae(C,h,S))}),i?.value&&O({...F?.value,current:1})),F?.value&&te(C,F?.value),C});G([()=>m,()=>c.value],()=>{if(Array.isArray(c.value)&&c.value?.length>0)o.value=le(c.value);else{const C=L(m,r.value);o.value=It(C)}},{immediate:!0});const B=Ae({request:t}),x=je(async()=>{v.value=!0;const C=await B(A.value,f?.value);if(Array.isArray(C))o.value=C.map(h=>(h?.text&&(h.label=h?.text),h));else if(J(C)){const{success:h,total:S,data:E}=C;h&&(i?.value?(s.value=S,F?.value?.current===1?o.value=E.map(k=>(k?.text&&(k.label=k?.text),k)):o.value=[...o.value,...E.map(k=>(k?.text&&(k.label=k?.text),k))]):o.value=E.map(k=>(k?.text&&(k.label=k?.text),k)))}v.value=!1},200);return G(A,()=>{t&&x()},{immediate:!0}),ft(()=>{t||(v.value=!1)}),{loading:v,total:s,fieldNames:g,mergeOptions:o,requestOptions:x,innerParams:F,setInnerParams:O}}const Ft=["menuItemSelectedIcon","clearIcon","dropdownRender","maxTagPlaceholder","notFoundContent","option","removeIcon","tagRender","suffixIcon"],Rt=R({name:"FieldSelect",inheritAttrs:!1,props:{...T(),menuItemSelectedIcon:{type:String,default:""},clearIcon:{type:String,default:""},dropdownRender:{type:String,default:""},maxTagPlaceholder:{type:String,default:""},notFoundContent:{type:String,default:""},option:{type:String,default:""},removeIcon:{type:String,default:""},suffixIcon:{type:String,default:""},tagRender:{type:String,default:""},placeholder:{type:String},pagination:{type:[Boolean,Object],default:!1},showSearch:{type:Boolean,default:!1},filterOption:Function,mode:{type:String,default:void 0}},setup(e,{attrs:t,expose:d}){const m=M(),u=N(),n=l(()=>e.pagination?e.pagination===!0?{current:1,pageSize:10}:{current:e.pagination.current||1,pageSize:e.pagination.pageSize||10}:null),{mergeOptions:i,loading:r,fieldNames:f,requestOptions:y,total:v,innerParams:s,setInnerParams:c}=H({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,fieldNames:t.fieldNames,params:e.params,paginationConfig:n}),o=l(()=>e.request&&n.value?()=>!0:e.filterOption?e.filterOption:(h,S)=>S.label.toLowerCase().indexOf(h.toLowerCase())>=0),g=l(()=>{if(!(e.request&&r.value))return e.value}),F=l(()=>{if(!g.value)return;if(Array.isArray(g.value))return i.value.filter(S=>t.labelInValue?g.value.find(E=>E.value===S.value):g.value.includes(S.value)).map(S=>S.label??S.text).join("，");const h=i.value.find(S=>t.labelInValue?S.value===g.value.value:S.value===g.value);return h?.label??h?.text}),O=l(()=>{const h={};return Ft.forEach(S=>{const E=w(e[S],u);E&&(h[S]=k=>a(P,{vnode:E,props:k},null))}),h}),A=h=>typeof h>"u"?e.mode==="multiple"||e.mode==="tags"?[]:null:h,B=(h,S)=>{e.onChange?.(A(h),S)},x=h=>{n.value&&(c({keyword:h,current:1,pageSize:n.value.pageSize}),(Array.isArray(g.value)?g.value?.length:g.value)&&e.onChange?.(A()))},C=h=>{if(!n.value)return;const{target:S}=h;S.scrollTop+S.offsetHeight===S.scrollHeight&&i.value.length<v.value&&c({...s.value,current:s.value.current+1})};return d({refresh:()=>{e.request&&y()}}),()=>e.readonly?a(D,p({text:F.value,class:t.class,style:t.style},e.readonlyProps),null):a(Ge,p({value:g.value},t,{style:{minWidth:"120px"},mode:e.mode,fieldNames:f.value,loading:r.value,filterOption:o.value,placeholder:e.placeholder||m.getMessage("form.selectPlaceholder","请选择"),options:i.value,showSearch:e.showSearch,onChange:B,onPopupScroll:C,onSearch:e.showSearch?x:void 0}),O.value)}}),Tt=["maxTagPlaceholder","notFoundContent","searchPlaceholder","suffixIcon","tagRender","title"],kt=R({name:"FieldTreeSelect",props:{...T(),maxTagPlaceholder:{type:String,default:""},notFoundContent:{type:String,default:""},searchPlaceholder:{type:String,default:""},suffixIcon:{type:String,default:""},tagRender:{type:String,default:""},title:{type:String,default:""},placeholder:{type:String},treeCheckable:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0}},setup(e,{attrs:t}){const d=M(),m=N(),{mergeOptions:u,loading:n,fieldNames:i}=H({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,fieldNames:t.fieldNames,params:e.params}),r=l(()=>{if(!(e.request&&n.value))return e.value}),f=l(()=>{if(!r.value)return;if(Array.isArray(r.value))return r.value.length?u.value.filter(o=>r.value.includes(o.value)).map(o=>o.label??o.text).join("，"):void 0;const c=u.value.find(o=>o.value===r.value);return c?.label??c?.text}),y=l(()=>{const c={};return Tt.forEach(o=>{const g=w(e[o],m);g&&(c[o]=F=>a(P,{vnode:g,props:F},null))}),c}),v=c=>typeof c>"u"?e.multiple||e.treeCheckable?[]:null:c,s=(c,o)=>{e.onChange?.(v(c),o)};return()=>e.readonly?a(D,p({text:f.value,class:t.class,style:t.style},e.readonlyProps),null):a(_e,p({value:r.value},t,{style:{minWidth:"160px"},treeCheckable:e.treeCheckable,multiple:e.multiple,fieldNames:i.value,loading:n.value,placeholder:e.placeholder||d.getMessage("form.selectPlaceholder","请选择"),treeData:u.value,onChange:s}),y.value)}}),Et=R({name:"FieldCheckbox",props:{...T()},emits:["change"],setup(e,{attrs:t}){const d=l(()=>e.value?"是":"否"),m=u=>{e.onChange?.(u.target.checked)};return()=>e.readonly?a(D,p({text:d.value,class:t.class,style:t.style},e.readonlyProps),null):a(We,p({checked:e.value},t,{onChange:m}),null)}}),Ot=R({name:"FieldCheckboxGroup",props:{...T()},setup(e,{attrs:t}){const{disabled:d}=_(),{mergeOptions:m,loading:u}=H({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,params:e.params}),n=l(()=>{if(!e.value)return;if(Array.isArray(e.value))return e.value.length?m.value.filter(f=>e.value.includes(f.value)).map(f=>f.label??f.text).join("，"):void 0;const r=m.value.find(f=>f.value===e.value);return r?.label??r?.text}),i=r=>{e.onChange?.(r)};return()=>e.readonly?a(D,p({text:n.value,class:t.class,style:t.style},e.readonlyProps),null):a(Ye,p({value:e.value},t,{disabled:t.disabled??d?.value,options:m.value,onChange:i}),{default:()=>[u.value&&a(ue,{style:"color: rgba(0, 0, 0, 0.25);"},null)]})}});function Nt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!be(e)}const At=R({name:"FieldRadioGroup",props:{...T(),radioLabel:{type:String,default:""}},setup(e,{attrs:t}){const{formData:d}=_(),m=N(),{mergeOptions:u,loading:n}=H({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,params:e.params}),i=l(()=>{if(!e.value)return;const y=u.value.find(v=>v.value===e.value);return y?.label??y?.text}),r=l(()=>w(e.radioLabel,m)),f=y=>{e.onChange?.(y.target.value)};return()=>{if(e.readonly)return a(D,p({text:i.value,class:t.class,style:t.style},e.readonlyProps),null);if(u.value?.length>0){let y;return a(Ke,p({value:e.value},t,{onChange:f}),Nt(y=u.value.map(v=>a(ze,{value:v.value,key:v.value?.toString(),disabled:v.disabled},{default:()=>[r.value?a(P,{vnode:r.value,props:{option:v,value:e.value,formData:d.value}},null):v.label]})))?y:{default:()=>[y]})}else return n.value?a(ue,{style:"color: rgba(0, 0, 0, 0.25);"},null):null}}}),Mt=["expandIcon","clearIcon","displayRender","maxTagPlaceholder","notFoundContent","removeIcon","tagRender","suffixIcon"],Dt=R({name:"FieldCascader",props:{...T(),expandIcon:{type:String,default:""},clearIcon:{type:String,default:""},displayRender:{type:String,default:""},maxTagPlaceholder:{type:String,default:""},notFoundContent:{type:String,default:""},removeIcon:{type:String,default:""},suffixIcon:{type:String,default:""},tagRender:{type:String,default:""},placeholder:{type:String},multiple:{type:Boolean,default:void 0}},setup(e,{attrs:t}){const d=M(),m=N(),{mergeOptions:u,loading:n,fieldNames:i}=H({request:e.request,options:e.options,valueEnum:e.valueEnum,dependencies:e.dependencies,fieldNames:t.fieldNames,params:e.params}),r=l(()=>{if(!(e.request&&n.value))return e.value}),f=l(()=>{if(!r.value)return;if(Array.isArray(r.value))return u.value.filter(o=>r.value.includes(o.value)).map(o=>o.label??o.text).join("，");const c=u.value.find(o=>o.value===r.value);return c?.label??c?.text}),y=l(()=>{const c={};return Mt.forEach(o=>{const g=w(e[o],m);g&&(c[o]=F=>a(P,{vnode:g,props:F},null))}),c}),v=c=>typeof c>"u"?e.multiple?[]:null:c,s=(c,o)=>{e.onChange?.(v(c),o)};return()=>e.readonly?a(D,p({text:f.value,class:t.class,style:t.style},e.readonlyProps),null):a(He,p({value:r.value},t,{style:{minWidth:"100px"},multiple:e.multiple,fieldNames:i.value,loading:n.value,placeholder:e.placeholder||d.getMessage("form.selectPlaceholder","请选择"),options:u.value,onChange:s}),y.value)}}),Vt=["checkedChildren","unCheckedChildren"],$t=R({name:"FieldSwitch",props:{...T(),checkedChildren:{type:String},unCheckedChildren:{type:String}},setup(e,{attrs:t}){const d=M(),m=N(),u=l(()=>!e.value||e.value===t.unCheckedValue?e.unCheckedChildren||d.getMessage("switch.open","打开"):e.value||e.value===t.checkedValue?e.checkedChildren||d.getMessage("switch.close","关闭"):""),n=l(()=>{const r={};return Vt.forEach(f=>{const y=w(e[f],m);y&&(r[f]=v=>a(P,{vnode:y,props:v},null))}),r}),i=(r,f)=>{e.onChange?.(r,f)};return()=>e.readonly?a(D,p({text:u.value,class:t.class,style:t.style},e.readonlyProps),null):a(Qe,p({checked:e.value},t,{onChange:i}),n.value)}}),Lt=["mark"],Bt=R({name:"FieldSlider",props:{...T(),mark:{type:String,default:""}},setup(e,{attrs:t}){const d=N(),m=l(()=>{const n={};return Lt.forEach(i=>{const r=w(e[i],d);r&&(n[i]=()=>a(P,{vnode:r},null))}),n}),u=n=>{e.onChange?.(n)};return()=>e.readonly?a(D,p({text:e.value,class:t.class,style:t.style},e.readonlyProps),null):a(Je,p({value:e.value},t,{style:{minWidth:"120px"},onChange:u}),m.value)}}),Ut=["character"],qt=R({name:"FieldRate",props:{...T(),character:{type:String,default:""}},setup(e,{attrs:t}){const d=N(),m=l(()=>{const n={};return Ut.forEach(i=>{const r=w(e[i],d);r&&(n[i]=()=>a(P,{vnode:r},null))}),n}),u=n=>{e.onChange?.(n)};return()=>e.readonly?a(D,p({text:e.value,class:t.class,style:t.style},e.readonlyProps),null):a(Xe,p({value:e.value},t,{style:{minWidth:"120px"},onChange:u}),m.value)}}),q={date:"YYYY-MM-DD",year:"YYYY",month:"YYYY-MM",week:"YYYY-wo",quarter:"YYYY-QQ",time:"HH:mm:ss"},jt=["dateRender","nextIcon","prevIcon","suffixIcon","superNextIcon","superPrevIcon","renderExtraFooter","monthCellRender"],Gt=R({name:"FieldDatePicker",props:{...T(),dateRender:{type:String,default:""},nextIcon:{type:String,default:""},prevIcon:{type:String,default:""},suffixIcon:{type:String,default:""},superNextIcon:{type:String,default:""},superPrevIcon:{type:String,default:""},renderExtraFooter:{type:String,default:""},monthCellRender:{type:String,default:""},placeholder:{type:String},format:{type:[String,Function],default:void 0},picker:{type:String,default:"date"},valueFormat:{type:String,default:void 0},showTime:{type:[Boolean,Object],default:void 0}},setup(e,{attrs:t}){const d=M(),m=N(),u=l(()=>{const s=q[e.picker];return e.showTime===!0?s+" "+q.time:J(e.showTime)?s+" "+(e.showTime.format??q.time):s}),n=l(()=>L(e.format)??u.value),i=l(()=>e.valueFormat??u.value),r=l(()=>X(e.value,n.value)),f=l(()=>{if(r.value)return W(r.value).format(i.value)}),y=l(()=>{const s={};return jt.forEach(c=>{const o=w(e[c],m);o&&(s[c]=()=>a(P,{vnode:o},null))}),s}),v=(s,c)=>{e.onChange?.(s,c)};return()=>e.readonly?a(D,p({text:f.value,class:t.class,style:t.style},e.readonlyProps),null):a(Ze,p({value:r.value},t,{format:n.value,picker:e.picker,showTime:e.showTime,valueFormat:i.value,placeholder:e.placeholder||d.getMessage("form.selectPlaceholder","请选择"),onChange:v}),y.value)}}),_t=["dateRender","nextIcon","prevIcon","suffixIcon","superNextIcon","superPrevIcon","renderExtraFooter","separator"],Wt=R({name:"FieldDateRangePicker",props:{...T(),dateRender:{type:String,default:""},nextIcon:{type:String,default:""},prevIcon:{type:String,default:""},suffixIcon:{type:String,default:""},superNextIcon:{type:String,default:""},superPrevIcon:{type:String,default:""},renderExtraFooter:{type:String,default:""},separator:{type:String,default:""},placeholder:{type:Array,default:()=>[]},format:{type:[String,Function],default:void 0},picker:{type:String,default:"date"},valueFormat:{type:String,default:void 0},showTime:{type:[Boolean,Object],default:void 0}},setup(e,{attrs:t}){const d=M(),m=N(),u=l(()=>{const s=q[e.picker];return e.showTime===!0?s+" "+q.time:J(e.showTime)?s+" "+(e.showTime.format??q.time):s}),n=l(()=>L(e.format)??u.value),i=l(()=>e.valueFormat??u.value),r=l(()=>X(e.value,n.value)),f=l(()=>{if(r.value?.length)return`${W(r.value[0]).format(i.value)} - ${W(r.value[1]).format(i.value)}`}),y=l(()=>{const s={};return _t.forEach(c=>{const o=w(e[c],m);o&&(s[c]=()=>a(P,{vnode:o},null))}),s}),v=(s,c)=>{e.onChange?.(s,c)};return()=>e.readonly?a(D,p({text:f.value,class:t.class,style:t.style},e.readonlyProps),null):a(et,p({value:r.value},t,{format:n.value,picker:e.picker,showTime:e.showTime,valueFormat:i.value,placeholder:e.placeholder?.length===2?e.placeholder:[d.getMessage("form.selectPlaceholder","请选择"),d.getMessage("form.selectPlaceholder","请选择")],onChange:v}),y.value)}}),Yt=["clearIcon","renderExtraFooter","suffixIcon"],zt=R({name:"FieldTimePicker",props:{...T(),clearIcon:{type:String,default:""},renderExtraFooter:{type:String,default:""},suffixIcon:{type:String,default:""},placeholder:{type:String},format:{type:String,default:void 0},valueFormat:{type:String,default:void 0}},setup(e,{attrs:t}){const d=M(),m=N(),u=l(()=>e.format??q.time),n=l(()=>e.valueFormat??q.time),i=l(()=>X(e.value,u.value)),r=l(()=>{if(i.value)return W(i.value).format(n.value)}),f=l(()=>{const v={};return Yt.forEach(s=>{const c=w(e[s],m);c&&(v[s]=()=>a(P,{vnode:c},null))}),v}),y=(v,s)=>{e.onChange?.(v,s)};return()=>e.readonly?a(D,p({text:r.value,class:t.class,style:t.style},e.readonlyProps),null):a(tt,p({value:i.value},t,{format:u.value,valueFormat:n.value,placeholder:e.placeholder||d.getMessage("form.selectPlaceholder","请选择"),onChange:y}),f.value)}}),Kt=["dateRender","nextIcon","prevIcon","suffixIcon","superNextIcon","superPrevIcon","renderExtraFooter","separator"],Ht=R({name:"FieldTimeRangePicker",props:{...T(),dateRender:{type:String,default:""},nextIcon:{type:String,default:""},prevIcon:{type:String,default:""},suffixIcon:{type:String,default:""},superNextIcon:{type:String,default:""},superPrevIcon:{type:String,default:""},renderExtraFooter:{type:String,default:""},separator:{type:String,default:""},placeholder:{type:Array,default:()=>[]},format:{type:String,default:void 0},valueFormat:{type:String,default:void 0}},setup(e,{attrs:t}){const d=M(),m=N(),u=l(()=>e.format??q.time),n=l(()=>e.valueFormat??q.time),i=l(()=>X(e.value,u.value)),r=l(()=>{if(i.value?.length)return`${W(i.value[0]).format(n.value)} - ${W(i.value[1]).format(n.value)}`}),f=l(()=>{const v={};return Kt.forEach(s=>{const c=w(e[s],m);c&&(v[s]=()=>a(P,{vnode:c},null))}),v}),y=(v,s)=>{e.onChange?.(v,s)};return()=>e.readonly?a(D,p({text:r.value,class:t.class,style:t.style},e.readonlyProps),null):a(at,p({value:i.value},t,{format:u.value,valueFormat:n.value,placeholder:e.placeholder?.length===2?e.placeholder:[d.getMessage("form.selectPlaceholder","请选择"),d.getMessage("form.selectPlaceholder","请选择")],onChange:y}),f.value)}}),Qt=["downloadIcon","itemRender","previewIcon","removeIcon"],Jt=R({name:"FieldUploadButton",props:{...T(),iconRender:{type:String,default:""},downloadIcon:{type:String,default:""},itemRender:{type:String,default:""},previewIcon:{type:String,default:""},removeIcon:{type:String,default:""},title:{type:String},name:{type:String,default:"file"},max:{type:Number,default:void 0},disabled:{type:Boolean,default:void 0},buttonProps:{type:Object,default:void 0},fileList:{type:Array,default:void 0},listType:{type:String,default:"picture"}},setup(e,{attrs:t}){const d=M(),m=N(),u=l(()=>e.fileList??e.value),n=l(()=>e.max===void 0||!u.value||u.value?.length<e.max),i=l(()=>e.listType==="picture-card"),r=l(()=>{const s={};return Qt.forEach(c=>{const o=w(e[c],m);o&&(s[c]=()=>a(P,{vnode:o},null))}),s}),f=l(()=>{const s=w(e.iconRender,m);return z(s)?a(P,{vnode:s},null):a(nt,null,null)}),y=l(()=>{const s=w(e.title,m);return z(s)?a(P,{vnode:s},null):e.title||d.getMessage("upload.button","单击上传")}),v=s=>{e.onChange?.(s.fileList,s)};return()=>a(K,p({fileList:u.value},t,{listType:e.listType,name:e.name,onChange:v}),{default:()=>[n.value&&(i.value?a("span",null,[f.value,y.value]):a(lt,p({disabled:e.disabled},e.buttonProps),{default:()=>[f.value,y.value]}))],...r.value})}}),Xt=["downloadIcon","itemRender","previewIcon","removeIcon"],Zt=R({name:"FieldUploadDragger",props:{...T(),iconRender:{type:String,default:""},downloadIcon:{type:String,default:""},itemRender:{type:String,default:""},previewIcon:{type:String,default:""},removeIcon:{type:String,default:""},title:{type:String},description:{type:String},name:{type:String,default:"file"},max:{type:Number,default:void 0},disabled:{type:Boolean,default:void 0},buttonProps:{type:Object,default:void 0},fileList:{type:Array,default:void 0}},setup(e,{attrs:t}){const{token:d}=ot.useToken(),{prefixCls:m}=_(),u=M(),n=N(),i=l(()=>e.fileList??e.value),r=l(()=>`${m}-upload`),f=l(()=>e.max===void 0||!i.value||i.value?.length<e.max),y=l(()=>{const g={};return Xt.forEach(F=>{const O=w(e[F],n);O&&(g[F]=()=>a(P,{vnode:O},null))}),g}),v=l(()=>{const g=w(e.iconRender,n);return z(g)?a(P,{vnode:g},null):a(rt,null,null)}),s=l(()=>{const g=w(e.title,n);return z(g)?a(P,{vnode:g},null):e.title||u.getMessage("upload.dragger.text","单击或拖动文件到此区域进行上传")}),c=l(()=>{const g=w(e.description,n);return z(g)?a(P,{vnode:g},null):e.description||u.getMessage("upload.dragger.hint","支持单次或批量上传")}),o=g=>{e.onChange?.(g.fileList,g)};return()=>a(K.Dragger,p({fileList:i.value},t,{name:e.name,style:{...t?.style,display:f.value?void 0:"none"},onChange:o}),{default:()=>[a("p",{class:`${r.value}-drag-icon`,style:{color:d.value.colorPrimary}},[v.value]),a("p",{class:`${r.value}-text`},[s.value]),a("p",{class:`${r.value}-hint`},[c.value])],...y.value})}}),ea={aspectRatio:1,cropBoxMovable:!1,cropBoxResizable:!1,dragMode:"move",viewMode:1},ta=R({name:"FieldUploadPicture",inheritAttrs:!1,props:{...T(),title:{type:String},showTitle:{type:Boolean,default:void 0},name:{type:String,default:"file"},disabled:{type:Boolean,default:void 0},allowClear:{type:Boolean,default:void 0},isCropper:{type:Boolean,default:!0},cropperModalTitle:{type:String},cropperModalWidth:{type:Number,default:520},cropperWidth:{type:Number,default:100},cropperHeight:{type:Number,default:100},cropperProps:{type:Object,default:()=>({})},width:{type:Number,default:50},height:{type:Number,default:50},customRequest:Function},setup(e,{attrs:t}){const d=U(!1),m=U(!1),u=U(""),n=U(),i=U(),r=M(),{prefixCls:f,disabled:y}=_(),v=re.useInjectFormItemContext(),s=l(()=>({...ea,...e.cropperProps})),c=async(x,C)=>{const h=await t?.beforeUpload?.(x,C);if(e.isCropper){const S=x.type.indexOf("image")>=0;return S||st.error(`${x.name} ${r.getMessage("upload.picture.required","必须是图片")}`),S||K.LIST_IGNORE}return h},o=x=>{const C=x.split(","),h=C[0].match(/:(.*?);/)[1],S=atob(C[1]);let E=S.length;const k=new Uint8Array(E);for(;E--;)k[E]=S.charCodeAt(E);return new File([k],n.value?.name??"",{type:h})},g=async({file:x})=>{const C=new FormData;C.append(e.name,x),m.value=!0;try{if(e.customRequest){const{url:h}=await e.customRequest(C);h&&(e.onChange?.(h),v.onFieldChange())}}catch(h){console.log("🚀 ~ customRequest ~ error:",h)}m.value=!1},F=l(()=>{const x=pe(t,["beforeUpload"]);return e.isCropper?x.customRequest=function(){}:e.customRequest&&(x.customRequest=g),x}),O=x=>{if(n.value=x.file.originFileObj,e.isCropper){const C=new FileReader;C.onload=function(h){d.value=!0,u.value=h.target.result},C.readAsDataURL(x.file.originFileObj)}},A=()=>{const x=i.value?.getCroppedCanvas(n.value,{width:e.cropperWidth,height:e.cropperHeight});if(x){const C=o(x);d.value=!1,e.customRequest?g({file:C}):(e.onChange?.(x,C),v.onFieldChange())}},B=x=>{x.stopPropagation(),e.onChange?.(""),v.onFieldChange()};return()=>e.readonly?a("div",{class:`${f}-upload-picture`,style:{width:e.width+"px",height:e.height+"px",display:"block"}},[a("div",{class:`${f}-upload-picture-button`,style:{width:e.width+"px",height:e.height+"px",cursor:"auto"}},[e.value?a("div",{style:`width: 100%; height: 100%; background-size: contain; background-repeat: no-repeat; background-position: center center; background-image: url("${e.value}");`},null):a("div",{class:`${f}-upload-picture-button-empty`},null)])]):a(ut,null,{default:()=>[a(K,p(F.value,{"before-upload":c,"show-upload-list":!1,name:e.name,multiple:!1,class:`${f}-upload-picture`,style:{width:e.width+"px",height:e.height+"px",display:"block"},onChange:O}),{default:()=>[a(it,{spinning:m.value,indicator:a(ue,null,null),delay:300},{default:()=>[a("div",{class:`${f}-upload-picture-button`,style:{width:e.width+"px",height:e.height+"px",cursor:e.disabled??y?.value?"not-allowed":"pointer"}},[e.value?a("div",{style:`width: 100%; height: 100%; background-size: contain; background-repeat: no-repeat; background-position: center center; background-image: url("${e.value}");`},null):a("div",{class:`${f}-upload-picture-button-empty`},[a(Ce,null,null)]),e.showTitle&&!(e.disabled??y?.value)&&a("div",{class:`${f}-upload-picture-button-mask`},[e.title||r.getMessage("upload.picture.title","修改图片")]),e.allowClear&&e.value&&!(e.disabled??y?.value)&&a("div",{class:`${f}-upload-picture-button-clear`,onClick:B},[a(dt,null,null)])])]})]}),e.isCropper&&a(Me,{open:d.value,"onUpdate:open":x=>d.value=x,width:e.cropperModalWidth,title:e.cropperModalTitle||r.getMessage("upload.picture.cropperModalTitle","裁剪图片"),"destroy-on-close":!0,"show-fullscreen":!1,onOk:A},{default:()=>[a(De,{ref:i,"img-src":u.value,"cropper-props":s.value,"cropper-width":e.cropperWidth,"cropper-height":e.cropperHeight},null)]})]})}}),aa=R({name:"FieldUploadPictureList",inheritAttrs:!1,props:{...T(),name:{type:String,default:"file"},disabled:{type:Boolean,default:void 0},width:{type:Number,default:80},height:{type:Number,default:80},crossOrigin:{type:String,default:""},maxCount:{type:Number},customRequest:Function},setup(e,{attrs:t}){const d=U([]),m=U(!1),u=U(""),n=M(),{prefixCls:i,disabled:r}=_(),f=l(()=>e.readonly||r?.value),y=async o=>{const g=new FormData;g.append(e.name,o.file);const F=x=>{x.total>0&&(x.percent=x.loaded/x.total*100),o?.onProgress?.(x)},{success:O,error:A,data:B}=await e.customRequest(g,F);O?o.onSuccess?.(B):o.onError?.(A,B)},v=l(()=>{const o={...t};return e.customRequest&&(o.customRequest=y),o}),s=o=>new Promise((g,F)=>{const O=new FileReader;O.readAsDataURL(o),O.onload=()=>g(O.result),O.onerror=A=>F(A)}),c=async o=>{!o.url&&!o.preview&&(o.preview=await s(o.originFileObj)),u.value=o.url||o.preview,m.value=!0};return G(()=>e.value,o=>{ne(o,d.value)||(d.value=o.map(g=>({...g,crossOrigin:e.crossOrigin})))}),G(d,()=>{e.onChange?.(d.value)}),()=>a(we,null,[a(K,p(v.value,{fileList:d.value,"onUpdate:fileList":o=>d.value=o,name:e.name,disabled:f.value,"list-type":"picture-card",maxCount:e.maxCount,class:`${i}-upload-picture-list`,style:{"--s-upload-picture-list-width":e.width+"px","--s-upload-picture-list-height":e.height+"px"},onPreview:c}),{default:()=>[(!f.value||!e.maxCount||d.value.length<e.maxCount)&&a(Ce,null,null)]}),a(ct,{open:m.value,"onUpdate:open":o=>m.value=o,width:800,title:n.getMessage("upload.picture.viewModalTitle","查看图片"),footer:null},{default:()=>[a("img",{alt:"preview",style:"width: 100%",crossorigin:e.crossOrigin,src:u.value},null)]})])}}),ge={text:gt,digit:yt,digitRange:St,select:Rt,cascader:Dt,textarea:xt,password:bt,treeSelect:kt,checkbox:Et,checkboxGroup:Ot,radioGroup:At,switch:$t,slider:Bt,rate:qt,date:Gt,dateRange:Wt,time:zt,timeRange:Ht,uploadButton:Jt,uploadDragger:Zt,uploadPicture:ta,uploadPictureList:aa},he={text:["type","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],digit:["disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],digitRange:["separatorWidth","separator","disabled","addonAfter","addonBefore","bordered","clearIcon","controls","decimalSeparator","formatter","keyboard","max","min","parser","precision","step","stringMode","upIcon","downIcon","defaultValue","id","prefix","status","placeholder","onPressEnter","onStep","onFocus","onBlur","onInput","onClear"],select:["id","pagination","placeholder","disabled","allowClear","autoClearSearchValue","autofocus","bordered","clearIcon","defaultActiveFirstOption","defaultOpen","popupClassName","dropdownMatchSelectWidth","dropdownMenuStyle","dropdownRender","dropdownStyle","fieldNames","filterOption","filterSort","firstActiveValue","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","maxTagTextLength","menuItemSelectedIcon","mode","notFoundContent","open","option","optionFilterProp","optionLabelProp","options","placement","removeIcon","searchValue","showArrow","showSearch","size","status","suffixIcon","tagRender","tokenSeparators","virtual","onBlur","onFocus","onDeselect","onDropdownVisibleChange","onInputKeyDown","onMouseenter","onMouseleave","onPopupScroll","onSearch","onSelect"],textarea:["id","disabled","allowClear","autoSize","defaultValue","showCount","maxlength","placeholder","onPressEnter","onFocus","onBlur","onInput","onClear"],password:["id","disabled","addonAfter","addonBefore","allowClear","bordered","clearIcon","defaultValue","id","visibilityToggle","prefix","showCount","maxlength","status","size","suffix","placeholder","autocomplete","onPressEnter","onFocus","onBlur","onInput","onClear"],treeSelect:["id","multiple","options","showCheckedStrategy","searchPlaceholder","replaceFields","loadData","filterTreeNode","placeholder","disabled","allowClear","popupClassName","defaultValue","dropdownMatchSelectWidth","dropdownStyle","fieldNames","getPopupContainer","labelInValue","listHeight","maxTagCount","maxTagPlaceholder","notFoundContent","placement","searchValue","showSearch","size","status","suffixIcon","tagRender","title","treeCheckable","treeCheckStrictly","treeData","treeDataSimpleMode","treeDefaultExpandAll","treeDefaultExpandedKeys","treeExpandedKeys","treeIcon","treeLine","treeLoadedKeys","treeNodeFilterProp","treeNodeLabelProp","onDropdownVisibleChange","onSearch","onSelect","onTreeExpand","onUpdate:treeExpandedKeys","onUpdate:searchValue"],checkbox:["id","autofocus","disabled","indeterminate"],checkboxGroup:["id","disabled","name","options"],radioGroup:["id","class","disabled","name","options","optionType","buttonStyle","radioLabel"],cascader:["id","disabled","name","options","placeholder","allowClear","autofocus","bordered","clearIcon","changeOnSelect","defaultValue","displayRender","popupClassName","dropdownStyle","expandTrigger","fieldNames","getPopupContainer","loadData","maxTagCount","maxTagPlaceholder","multiple","notFoundContent","open","placement","showCheckedStrategy","removeIcon","searchValue","showSearch","status","suffixIcon","tagRender","onDropdownVisibleChange","onSearch"],switch:["id","checkedChildren","size","checkedValue","disabled","loading","unCheckedChildren","unCheckedValue","onClick"],slider:["id","disabled","dots","included","mark","marks","max","min","range","reverse","step","vertical","tipFormatter","tooltipPlacement","tooltipOpen","getTooltipPopupContainer","onAfterChange"],rate:["id","allowClear","allowHalf","character","count","disabled","tooltips","onBlur","onFocus","onHoverChange","onKeydown"],date:["id","allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","defaultPickerValue","disabledTime","renderExtraFooter","showNow","showTime","showToday","monthCellRender","onOpenChange","onPanelChange","onOk"],dateRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","showTime","ranges","renderExtraFooter","separator","onOpenChange","onPanelChange","onCalendarChange","onOk"],time:["id","allowClear","bordered","clearIcon","clearText","disabled","disabledTime","format","getPopupContainer","hideDisabledOptions","hourStep","inputReadOnly","minuteStep","open","placeholder","placement","popupClassName","popupStyle","renderExtraFooter","secondStep","showNow","status","suffixIcon","use12Hours","valueFormat","onOpenChange"],timeRange:["allowClear","bordered","dateRender","disabled","disabledDate","format","dropdownClassName","getPopupContainer","inputReadOnly","locale","mode","nextIcon","open","picker","placeholder","placement","popupStyle","prevIcon","presets","status","suffixIcon","superNextIcon","superPrevIcon","valueFormat","id","allowEmpty","defaultPickerValue","disabledTime","presets","ranges","renderExtraFooter","separator","order","onOpenChange","onPanelChange","onCalendarChange","onOk"],uploadButton:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","max","buttonProps"],uploadDragger:["disabled","id","accept","action","beforeUpload","customRequest","data","directory","disabled","downloadIcon","fileList","headers","iconRender","isImageUrl","itemRender","listType","maxCount","method","multiple","name","openFileDialogOnClick","previewFile","previewIcon","progress","removeIcon","showUploadList","supportServerRender","withCredentials","onDownload","onDrop","onPreview","onReject","onRemove","title","description","max","buttonProps"],uploadPicture:["disabled","id","customRequest","accept","action","beforeUpload","name","headers","isCropper","cropperModalTitle","cropperModalWidth","cropperWidth","cropperHeight","cropperProps","width","height","title","data","showTitle","allowClear"],uploadPictureList:["disabled","id","data","headers","customRequest","accept","action","multiple","maxCount","beforeUpload","name","previewFile","allowClear","width","height","crossOrigin"],editor:["autofocus","indentWithTab","tabSize","theme","autoDestroy","phrases","root","extensions","selection","height","disabled","placeholder","onFocus","onBlur","onReady","onUpdate"]},ye={xs:104,s:216,sm:216,m:328,md:328,l:440,lg:440,xl:552},na=["autoLink","colon","hasFeedback","labelAlign","labelCol","htmlFor","required","validateFirst","validateStatus","validateTrigger","wrapperCol","rules","style","class"],la=["switch","radioButton","radio","rate"],oa=["extra","help"],fa=R({name:"FormItem",inheritAttrs:!1,props:{item:{type:Object,default:()=>({})},grid:{type:Boolean,default:void 0}},setup(e){const{grid:t,action:d,formKey:m,prefixCls:u,formData:n,readonly:i,readonlyProps:r,disabledKeys:f,hiddenKeys:y,allDisabledKeys:v,updateHiddenKeys:s,updateDisabledKeys:c}=_(),{isList:o,listKey:g,listName:F,rowData:O}=Se(),A=N(),{fieldValue:B,onValueChange:x}=$e({namePath:l(()=>e.item.name),initialValue:e.item.initialValue,convertValue:e.item.convertValue,transform:e.item.transform}),C=U(),h=l(()=>e.grid??t?.value),S=l(()=>e.item.fieldType??"text"),E=l(()=>L(e.item.readonly??i?.value,n.value,O?.value)),k=l(()=>te({},r?.value,e.item.readonlyProps)),Pe=l(()=>f.value.map(b=>b.split(":")[1])),Ie=l(()=>y.value.map(b=>b.split(":")[1])),ie=l(()=>e.item.ignoreWidth??la.includes(S.value)),Y=l(()=>L(e.item.formItemProps,n.value)??{}),de=l(()=>Z({...ce(Y.value,na),name:E.value?void 0:e.item.name,htmlFor:E.value?void 0:Y.value?.htmlFor??`form-${m.value??""}-${e.item.key}`,rules:E.value?void 0:L(e.item.rules??Y.value.rules,n.value,d)})),Fe=b=>{const{clear:I}=e.item.linkage??{};if(I){const $=L(I,b,n.value)??[];$.length>0&&$.forEach(j=>{const V=o?[...F?.value??[],...fe(j)].filter(Ee=>Ee!==void 0).flat(1):fe(j);typeof xe(n.value,V)<"u"&&ae(n.value,V,void 0)})}},se=l(()=>{const b=L(e.item.fieldProps??{},n.value),I={...b,id:b?.id??`form-${m.value??""}-${e.item.key}`,disabled:L(e.item.disabled??b?.disabled,n.value,O?.value)??v.value.includes(e.item.key)?!0:void 0,placeholder:e.item.placeholder??b?.placeholder,options:e.item.options??b?.options??b?.treeData,allowClear:e.item.allowClear??b?.allowClear??!0};return Z({valueEnum:e.item.valueEnum,dependencies:e.item.dependencies,readonly:E.value,readonlyProps:k.value,request:e.item.request,params:e.item.params,onChange:($,...j)=>{Fe($),x($),e.item.onChange?.($,...j,d)},...he[S.value]?ce(I,he[S.value]):I})}),Re=l(()=>{const I={...L(e.item.fieldProps??{},n.value)?.style};return e.item.width&&!ye[e.item.width]?I.width=Ve(e.item.width)?e.item.width+"px":e.item.width:h?.value&&(I.maxWidth="100%",I.width="100%"),ie.value&&Reflect.deleteProperty(I,"width"),Z(I)}),Te=l(()=>{const b=e.item.width&&ye[e.item.width],I={[`${u}-field`]:!!b,[`${u}-field-${e.item.width}`]:b&&!ie.value};return e.item.className&&(I[e.item.className]=!0),I}),ke=l(()=>{const b={};if(oa.forEach(I=>{const $=w(Y.value[I],A);$&&(b[I]=()=>a(P,{vnode:$,props:{formData:n.value}},null))}),e.item.title){const I=w(e.item.extra?.label,A);b.label=()=>a(we,null,[a("div",{class:`${u}-item-title`,style:Y.value.titleStyles},[a(mt,{title:e.item.title,tooltip:e.item.tooltip},null)]),a(P,{vnode:I,props:{formData:n.value}},null)])}return b});return G(B,b=>{const{linkage:I}=e.item;if(I){const{hidden:$,disabled:j}=I;if($){const V=L($,b,n.value)??[];ne(V,Ie.value)||s(e.item.key,o?V.map(Q=>`${g}_${Q}`):V)}if(j){const V=L(j,b,n.value)??[];ne(V,Pe.value)||c(e.item.key,o?V.map(Q=>`${g}_${Q}`):V)}}},{immediate:!0}),G(C,()=>{e.item.onInit?.(C.value)}),G(E,()=>{E.value&&d.clearValidate(e.item.name)}),G(()=>de.value?.rules,()=>{d.clearValidate(e.item.name)}),()=>{const b=w(e.item.render,A);if(b)return a(me,{colProps:e.item.colProps,grid:h.value},{default:()=>[a(P,{vnode:b,props:{formData:n.value}},null)]});const I=w(e.item.renderFormItem,A),$=w(e.item.extra?.item,A),j=ge[S.value]??ge.text;let V=a(j,p({ref:C,value:B.value},se.value,{style:Re.value,class:Te.value}),null);return I&&(V=a(P,{vnode:I,props:{value:B.value,onChange:se.value.onChange,defaultDom:V,formData:n.value,action:d,listName:F?.value,name:e.item.name}},null)),$&&(V=a("div",{style:"display: flex; flex-direction: row; justify-content: flex-start; align-items: center;"},[V,a(P,{vnode:$,props:{formData:n.value,listName:F?.value,name:e.item.name}},null)])),a(me,{colProps:e.item.colProps,grid:h.value},{default:()=>[a(re.Item,de.value,{default:()=>[V],...ke.value})]})}}});export{fa as default};
